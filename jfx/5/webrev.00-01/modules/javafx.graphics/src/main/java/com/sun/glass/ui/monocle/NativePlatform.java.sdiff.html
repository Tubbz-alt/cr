<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/java/com/sun/glass/ui/monocle/NativePlatform.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/java/com/sun/glass/ui/monocle/NativePlatform.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.glass.ui.monocle;
 27 
 28 import java.security.AccessController;
 29 import java.security.PrivilegedAction;



 30 
 31 /** Abstract of a platform on which JavaFX can run. */
 32 public abstract class NativePlatform {
 33 
 34     private static InputDeviceRegistry inputDeviceRegistry;
 35     private final RunnableProcessor runnableProcessor;


 36     private NativeCursor cursor;
 37     private NativeScreen screen;
 38     protected AcceleratedScreen accScreen;
 39 
 40 
 41     protected static final boolean useCursor =
 42         AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; {
 43             final String str =
 44                 System.getProperty(&quot;monocle.cursor.enabled&quot;, &quot;true&quot;);
 45             return &quot;true&quot;.equalsIgnoreCase(str);
 46         });
 47 
<span class="line-removed"> 48     protected static final boolean debugCursor =</span>
<span class="line-removed"> 49         AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; {</span>
<span class="line-removed"> 50             final String str =</span>
<span class="line-removed"> 51                 System.getProperty(&quot;monocle.debugcursor&quot;, &quot;&quot;);</span>
<span class="line-removed"> 52             return &quot;true&quot;.equalsIgnoreCase(str);</span>
<span class="line-removed"> 53         });</span>
<span class="line-removed"> 54 </span>
 55 
 56 
 57     protected NativePlatform() {
 58         runnableProcessor = new RunnableProcessor();
 59     }
 60 
 61     /**
 62      * Called once during JavaFX shutdown to release platform resources.
 63      */
 64     void shutdown() {
 65         runnableProcessor.shutdown();
 66         if (cursor != null) {
 67             cursor.shutdown();
 68         }
 69         if (screen != null) {
 70             screen.shutdown();
 71         }
 72     }
 73 
 74     /**
</pre>
<hr />
<pre>
140      * @return an AcceleratedScreen for rendering using OpenGL
141      * @throws GLException if no OpenGL surface could be created
142      * @throws UnsatisfiedLinkError if native graphics libraries could not be loaded for this platform.
143      */
144     public synchronized AcceleratedScreen getAcceleratedScreen(int[] attributes)
145             throws GLException, UnsatisfiedLinkError {
146         if (accScreen == null) {
147             accScreen = new AcceleratedScreen(attributes);
148         }
149         return accScreen;
150     }
151 
152 
153     /**
154      * Log the name of the supplied native cursor class if required.
155      *
156      * @param cursor the native cursor in use, null is permitted
157      * @return the passed in cursor
158      */
159     protected NativeCursor logSelectedCursor(final NativeCursor cursor) {
<span class="line-modified">160         if (debugCursor) {</span>
161             final String name = cursor == null ? null : cursor.getClass().getSimpleName();
<span class="line-modified">162             System.err.println(&quot;Using native cursor: &quot; + name);</span>
163         }
164         return cursor;
165     }
166 
167 }
</pre>
</td>
<td>
<hr />
<pre>
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
 23  * questions.
 24  */
 25 
 26 package com.sun.glass.ui.monocle;
 27 
 28 import java.security.AccessController;
 29 import java.security.PrivilegedAction;
<span class="line-added"> 30 import com.sun.javafx.logging.PlatformLogger;</span>
<span class="line-added"> 31 import com.sun.javafx.logging.PlatformLogger.Level;</span>
<span class="line-added"> 32 import com.sun.javafx.util.Logging;</span>
 33 
 34 /** Abstract of a platform on which JavaFX can run. */
 35 public abstract class NativePlatform {
 36 
 37     private static InputDeviceRegistry inputDeviceRegistry;
 38     private final RunnableProcessor runnableProcessor;
<span class="line-added"> 39     private final PlatformLogger logger = Logging.getJavaFXLogger();</span>
<span class="line-added"> 40 </span>
 41     private NativeCursor cursor;
 42     private NativeScreen screen;
 43     protected AcceleratedScreen accScreen;
 44 
 45 
 46     protected static final boolean useCursor =
 47         AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) () -&gt; {
 48             final String str =
 49                 System.getProperty(&quot;monocle.cursor.enabled&quot;, &quot;true&quot;);
 50             return &quot;true&quot;.equalsIgnoreCase(str);
 51         });
 52 







 53 
 54 
 55     protected NativePlatform() {
 56         runnableProcessor = new RunnableProcessor();
 57     }
 58 
 59     /**
 60      * Called once during JavaFX shutdown to release platform resources.
 61      */
 62     void shutdown() {
 63         runnableProcessor.shutdown();
 64         if (cursor != null) {
 65             cursor.shutdown();
 66         }
 67         if (screen != null) {
 68             screen.shutdown();
 69         }
 70     }
 71 
 72     /**
</pre>
<hr />
<pre>
138      * @return an AcceleratedScreen for rendering using OpenGL
139      * @throws GLException if no OpenGL surface could be created
140      * @throws UnsatisfiedLinkError if native graphics libraries could not be loaded for this platform.
141      */
142     public synchronized AcceleratedScreen getAcceleratedScreen(int[] attributes)
143             throws GLException, UnsatisfiedLinkError {
144         if (accScreen == null) {
145             accScreen = new AcceleratedScreen(attributes);
146         }
147         return accScreen;
148     }
149 
150 
151     /**
152      * Log the name of the supplied native cursor class if required.
153      *
154      * @param cursor the native cursor in use, null is permitted
155      * @return the passed in cursor
156      */
157     protected NativeCursor logSelectedCursor(final NativeCursor cursor) {
<span class="line-modified">158         if (logger.isLoggable(Level.FINE)) {</span>
159             final String name = cursor == null ? null : cursor.getClass().getSimpleName();
<span class="line-modified">160             logger.fine(&quot;Using native cursor: {0}&quot;, name);</span>
161         }
162         return cursor;
163     }
164 
165 }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>