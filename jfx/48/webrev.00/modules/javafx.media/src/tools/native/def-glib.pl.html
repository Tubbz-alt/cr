<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>New modules/javafx.media/src/tools/native/def-glib.pl</title>
    <link rel="stylesheet" href="../../../../../style.css" />
  </head>
  <body>
    <pre>
 1 #!/usr/bin/perl -w
 2 
 3 my @files = (&quot;../../main/native/gstreamer/3rd_party/glib/build/win32/vs100/glib-lite.def&quot;);
 4 
 5 foreach $file (@files)
 6 {
 7 	process_file($file);
 8 }
 9 
10 sub process_file
11 {
12 	my $infile = shift(@_);
13 	my %symbols = ();
14 	my $duplicates = 0;
15 
16 	print (&quot;Processing file $infile\n&quot;);
17 	open(INFILE, $infile) or die $!;
18 
19 	while (my $str = &lt;INFILE&gt;)
20 	{
21 		$str =~ tr/\r\n//d;
22 
23 		if ($str !~ /^EXPORTS/ &amp;&amp; $str =~ /(\w+)/)
24 		{
25 			if (exists( $symbols{$1}))
26 			{
27 				$duplicates++;
28 				$symbols{$1}++;
29 			}
30 			else
31 			{
32 				$symbols{$1} = 1;
33 			}
34 		}
35 	}
36 	close(INFILE);
37 
38 	my ($tmpfile) = $infile . &quot;.tmp&quot;;
39 	print(&quot;Found $duplicates duplicates.\nSaving results to: $tmpfile\n&quot;);
40 
41 	my $ordinal = 1;
42 	open(OUTFILE, &quot;&gt;$tmpfile&quot;) or die $!;
43 	print OUTFILE &quot;EXPORTS\r\n&quot;;
44 	foreach $symbol (sort keys(%symbols))
45 	{
46 		print OUTFILE &quot;${symbol}\t\@${ordinal}\tNONAME\r\n&quot;;
47 #		print OUTFILE &quot;${symbol}\r\n&quot;;
48 		$ordinal++;
49 	}
50 
51 	close(OUTFILE);
52 
53 	print(&quot;Renaming $tmpfile to $infile\n\n&quot;);
54 	rename($tmpfile, $infile);
55 }
    </pre>
  </body>
</html>