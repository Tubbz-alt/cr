<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.media/src/tools/native/def-glib.pl</title>
    <link rel="stylesheet" href="../../../../../style.css" />
    <script type="text/javascript" src="../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre> 1 #!/usr/bin/perl -w
 2 
<a name="1" id="anc1"></a><span class="line-modified"> 3 my @files = (&quot;../../main/native/gstreamer/3rd_party/glib/build/win32/vs100/glib-lite.def&quot;,</span>
<span class="line-removed"> 4              &quot;../../main/native/gstreamer/3rd_party/glib/build/win32/vs100/glib-liteD.def&quot;);</span>
 5 
 6 foreach $file (@files)
 7 {
 8 	process_file($file);
 9 }
10 
11 sub process_file
12 {
13 	my $infile = shift(@_);
14 	my %symbols = ();
15 	my $duplicates = 0;
16 
17 	print (&quot;Processing file $infile\n&quot;);
18 	open(INFILE, $infile) or die $!;
19 
20 	while (my $str = &lt;INFILE&gt;)
21 	{
22 		$str =~ tr/\r\n//d;
23 
24 		if ($str !~ /^EXPORTS/ &amp;&amp; $str =~ /(\w+)/)
25 		{
26 			if (exists( $symbols{$1}))
27 			{
28 				$duplicates++;
29 				$symbols{$1}++;
30 			}
31 			else
32 			{
33 				$symbols{$1} = 1;
34 			}
35 		}
36 	}
37 	close(INFILE);
38 
39 	my ($tmpfile) = $infile . &quot;.tmp&quot;;
40 	print(&quot;Found $duplicates duplicates.\nSaving results to: $tmpfile\n&quot;);
41 
42 	my $ordinal = 1;
43 	open(OUTFILE, &quot;&gt;$tmpfile&quot;) or die $!;
44 	print OUTFILE &quot;EXPORTS\r\n&quot;;
45 	foreach $symbol (sort keys(%symbols))
46 	{
47 		print OUTFILE &quot;${symbol}\t\@${ordinal}\tNONAME\r\n&quot;;
48 #		print OUTFILE &quot;${symbol}\r\n&quot;;
49 		$ordinal++;
50 	}
51 
52 	close(OUTFILE);
53 
54 	print(&quot;Renaming $tmpfile to $infile\n\n&quot;);
55 	rename($tmpfile, $infile);
56 }
<a name="2" id="anc2"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="2" type="hidden" />
</body>
</html>