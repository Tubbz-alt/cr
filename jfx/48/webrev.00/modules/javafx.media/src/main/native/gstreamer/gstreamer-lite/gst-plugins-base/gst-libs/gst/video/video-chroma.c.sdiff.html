<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/video/video-chroma.c</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="navigation.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="video-color.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/video/video-chroma.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 201  * a x  x  x
 202  *   O--O--O-  &lt;---- (3*a +   b + 2) &gt;&gt; 2
 203  *   O--O--O-  &lt;-----(  a + 3*b + 2) &gt;&gt; 2
 204  * b x  x  x
 205  *   O--O--O-  &lt;---- b
 206  */
 207 #define MAKE_UPSAMPLE_V2(name,type)                                     \
 208 static void                                                             \
 209 video_chroma_up_v2_##name (GstVideoChromaResample *resample,            \
 210     gpointer lines[], gint width)                                       \
 211 {                                                                       \
 212   type *l0 = lines[0];                                                  \
 213   type *l1 = lines[1];                                                  \
 214                                                                         \
 215   if (resample-&gt;h_resample) {                                           \
 216     resample-&gt;h_resample (resample, l0, width);                         \
 217     if (l0 != l1)                                                       \
 218       resample-&gt;h_resample (resample, l1, width);                       \
 219   }                                                                     \
 220   if (l0 != l1) {                                                       \
<span class="line-modified"> 221     type *d0 = l0;                          \</span>
<span class="line-modified"> 222     type *d1 = l1;                          \</span>
 223     video_orc_chroma_up_v2_##name (d0, d1, l0, l1, width);              \
 224   }                                                                     \
 225 }
 226 /* 2x vertical upsampling interlaced without cositing
 227  *
 228  *   even           odd
 229  *
 230  *   O--O--O--------------- &lt;---  a
 231  * a x  x  x
 232  *   --------------O--O--O- &lt;---  c
 233  *   O--O--O--------------- &lt;--- (5*a + 3*b + 4) &gt;&gt; 3
 234  * c               x  x  x
 235  *   --------------O--O--O- &lt;--- (7*c +   d + 4) &gt;&gt; 3
 236  *   O--O--O--------------- &lt;--- (  a + 7*b + 4) &gt;&gt; 3
 237  * b x  x  x
 238  *   --------------O--O--O- &lt;--- (3*c + 5*d + 4) &gt;&gt; 3
 239  *   O--O--O---------------
 240  * d               x  x  x
 241  *   --------------O--O--O-
 242  */
</pre>
<hr />
<pre>
 280       PB3(i) = FILT_3_5 (tb1, tb3);                                     \
 281     }                                                                   \
 282   }                                                                     \
 283 }
 284 
 285 /* 2x horizontal downsampling without cositing
 286  *
 287  *  +------ (a + b+ 1) &gt;&gt; 1
 288  *  |
 289  *  v
 290  * -O---O--
 291  * x x x x
 292  * a b c d
 293  */
 294 #define MAKE_DOWNSAMPLE_H2_ORC(name,type)                               \
 295 static void                                                             \
 296 video_chroma_down_h2_##name (GstVideoChromaResample *resample,          \
 297     gpointer pixels, gint width)                                        \
 298 {                                                                       \
 299   type *p = pixels;                                                     \
<span class="line-modified"> 300   type *d = p;                              \</span>
 301                                                                         \
 302   video_orc_chroma_down_h2_##name (d, p, width / 2);                    \
 303 }
 304 
 305 #define MAKE_DOWNSAMPLE_H2(name,type)                                   \
 306 static void                                                             \
 307 video_chroma_down_h2_##name (GstVideoChromaResample *resample,          \
 308     gpointer pixels, gint width)                                        \
 309 {                                                                       \
 310   type *p = pixels;                                                     \
 311   gint i;                                                               \
 312                                                                         \
 313   for (i = 0; i &lt; width - 1; i += 2) {                                  \
 314     type tr0 = PR(i), tr1 = PR(i+1);                                    \
 315     type tb0 = PB(i), tb1 = PB(i+1);                                    \
 316                                                                         \
 317     PR(i) = FILT_1_1 (tr0, tr1);                                        \
 318     PB(i) = FILT_1_1 (tb0, tb1);                                        \
 319   }                                                                     \
 320 }
 321 /* 2x vertical downsampling without cositing
 322  *
 323  * a x--x--x-
 324  *   O  O  O &lt;---- (a + b + 1) &gt;&gt; 1
 325  * b x--x--x-
 326  * c x--x--x-
 327  *   O  O  O
 328  * d x--x--x-
 329  */
 330 #define MAKE_DOWNSAMPLE_V2(name,type)                                   \
 331 static void                                                             \
 332 video_chroma_down_v2_##name (GstVideoChromaResample *resample,          \
 333     gpointer lines[], gint width)                                       \
 334 {                                                                       \
 335   type *l0 = lines[0];                                                  \
 336   type *l1 = lines[1];                                                  \
 337                                                                         \
<span class="line-modified"> 338   if (l0 != l1) {                           \</span>
<span class="line-modified"> 339     type *d0 = l0;                          \</span>
 340     video_orc_chroma_down_v2_##name (d0, l0, l1, width);                \
<span class="line-modified"> 341   }                                 \</span>
 342                                                                         \
 343   if (resample-&gt;h_resample)                                             \
 344     resample-&gt;h_resample (resample, l0, width);                         \
 345 }
 346 /* 2x vertical downsampling interlaced without cositing
 347  *
 348  *   even           odd
 349  *
 350  * a x--x--x---------------
 351  *   O  O  O                &lt;---
 352  * b --------------x--x--x-
 353  * c x--x--x---------------
 354  *                 O  O  O  &lt;---
 355  * d --------------x--x--x-
 356  */
 357 #define MAKE_DOWNSAMPLE_VI2(name,type)                                  \
 358 static void                                                             \
 359 video_chroma_down_vi2_##name (GstVideoChromaResample *resample,         \
 360     gpointer lines[], gint width)                                       \
 361 {                                                                       \
</pre>
<hr />
<pre>
 512  * a x--x--x-
 513  * b x--x--x-
 514  *   O  O  O   &lt;---- (a + 3*b + 3*c + d + 4) &gt;&gt; 4
 515  * c x--x--x-
 516  * d x--x--x-
 517  * e x--x--x-
 518  * f x--x--x-
 519  *   O  O  O
 520  * g x--x--x-
 521  * h x--x--x-
 522  */
 523 #define MAKE_DOWNSAMPLE_V4(name,type)                               \
 524 static void                                                             \
 525 video_chroma_down_v4_##name (GstVideoChromaResample *resample,          \
 526     gpointer lines[], gint width)                                       \
 527 {                                                                       \
 528   type *l0 = lines[0];                                                  \
 529   type *l1 = lines[1];                                                  \
 530   type *l2 = lines[2];                                                  \
 531   type *l3 = lines[3];                                                  \
<span class="line-modified"> 532   type *d = l0;                             \</span>
<span class="line-modified"> 533                                                                         \</span>
<span class="line-modified"> 534   video_orc_chroma_down_v4_##name(d, l0, l1, l2, l3, width);        \</span>
 535                                                                         \
 536   if (resample-&gt;h_resample)                                             \
 537     resample-&gt;h_resample (resample, l0, width);                         \
 538 }
 539 /* 4x vertical downsampling interlaced without cositing
 540  *
 541  */
 542 #define MAKE_DOWNSAMPLE_VI4(name,type)                                       \
 543 static void                                                             \
 544 video_chroma_down_vi4_##name (GstVideoChromaResample *resample,         \
 545     gpointer lines[], gint width)                                       \
 546 {                                                                       \
 547   /* FIXME */                                                           \
 548   if (resample-&gt;h_resample) {                                           \
 549     resample-&gt;h_resample (resample, lines[0], width);                   \
 550   }                                                                     \
 551 }
 552 
 553 MAKE_UPSAMPLE_H4 (u16, guint16);
 554 MAKE_UPSAMPLE_H4 (u8, guint8);
</pre>
</td>
<td>
<hr />
<pre>
 201  * a x  x  x
 202  *   O--O--O-  &lt;---- (3*a +   b + 2) &gt;&gt; 2
 203  *   O--O--O-  &lt;-----(  a + 3*b + 2) &gt;&gt; 2
 204  * b x  x  x
 205  *   O--O--O-  &lt;---- b
 206  */
 207 #define MAKE_UPSAMPLE_V2(name,type)                                     \
 208 static void                                                             \
 209 video_chroma_up_v2_##name (GstVideoChromaResample *resample,            \
 210     gpointer lines[], gint width)                                       \
 211 {                                                                       \
 212   type *l0 = lines[0];                                                  \
 213   type *l1 = lines[1];                                                  \
 214                                                                         \
 215   if (resample-&gt;h_resample) {                                           \
 216     resample-&gt;h_resample (resample, l0, width);                         \
 217     if (l0 != l1)                                                       \
 218       resample-&gt;h_resample (resample, l1, width);                       \
 219   }                                                                     \
 220   if (l0 != l1) {                                                       \
<span class="line-modified"> 221     type *d0 = l0;              \</span>
<span class="line-modified"> 222     type *d1 = l1;              \</span>
 223     video_orc_chroma_up_v2_##name (d0, d1, l0, l1, width);              \
 224   }                                                                     \
 225 }
 226 /* 2x vertical upsampling interlaced without cositing
 227  *
 228  *   even           odd
 229  *
 230  *   O--O--O--------------- &lt;---  a
 231  * a x  x  x
 232  *   --------------O--O--O- &lt;---  c
 233  *   O--O--O--------------- &lt;--- (5*a + 3*b + 4) &gt;&gt; 3
 234  * c               x  x  x
 235  *   --------------O--O--O- &lt;--- (7*c +   d + 4) &gt;&gt; 3
 236  *   O--O--O--------------- &lt;--- (  a + 7*b + 4) &gt;&gt; 3
 237  * b x  x  x
 238  *   --------------O--O--O- &lt;--- (3*c + 5*d + 4) &gt;&gt; 3
 239  *   O--O--O---------------
 240  * d               x  x  x
 241  *   --------------O--O--O-
 242  */
</pre>
<hr />
<pre>
 280       PB3(i) = FILT_3_5 (tb1, tb3);                                     \
 281     }                                                                   \
 282   }                                                                     \
 283 }
 284 
 285 /* 2x horizontal downsampling without cositing
 286  *
 287  *  +------ (a + b+ 1) &gt;&gt; 1
 288  *  |
 289  *  v
 290  * -O---O--
 291  * x x x x
 292  * a b c d
 293  */
 294 #define MAKE_DOWNSAMPLE_H2_ORC(name,type)                               \
 295 static void                                                             \
 296 video_chroma_down_h2_##name (GstVideoChromaResample *resample,          \
 297     gpointer pixels, gint width)                                        \
 298 {                                                                       \
 299   type *p = pixels;                                                     \
<span class="line-modified"> 300   type *d = p;                \</span>
 301                                                                         \
 302   video_orc_chroma_down_h2_##name (d, p, width / 2);                    \
 303 }
 304 
 305 #define MAKE_DOWNSAMPLE_H2(name,type)                                   \
 306 static void                                                             \
 307 video_chroma_down_h2_##name (GstVideoChromaResample *resample,          \
 308     gpointer pixels, gint width)                                        \
 309 {                                                                       \
 310   type *p = pixels;                                                     \
 311   gint i;                                                               \
 312                                                                         \
 313   for (i = 0; i &lt; width - 1; i += 2) {                                  \
 314     type tr0 = PR(i), tr1 = PR(i+1);                                    \
 315     type tb0 = PB(i), tb1 = PB(i+1);                                    \
 316                                                                         \
 317     PR(i) = FILT_1_1 (tr0, tr1);                                        \
 318     PB(i) = FILT_1_1 (tb0, tb1);                                        \
 319   }                                                                     \
 320 }
 321 /* 2x vertical downsampling without cositing
 322  *
 323  * a x--x--x-
 324  *   O  O  O &lt;---- (a + b + 1) &gt;&gt; 1
 325  * b x--x--x-
 326  * c x--x--x-
 327  *   O  O  O
 328  * d x--x--x-
 329  */
 330 #define MAKE_DOWNSAMPLE_V2(name,type)                                   \
 331 static void                                                             \
 332 video_chroma_down_v2_##name (GstVideoChromaResample *resample,          \
 333     gpointer lines[], gint width)                                       \
 334 {                                                                       \
 335   type *l0 = lines[0];                                                  \
 336   type *l1 = lines[1];                                                  \
 337                                                                         \
<span class="line-modified"> 338   if (l0 != l1) {             \</span>
<span class="line-modified"> 339     type *d0 = l0;              \</span>
 340     video_orc_chroma_down_v2_##name (d0, l0, l1, width);                \
<span class="line-modified"> 341   }                 \</span>
 342                                                                         \
 343   if (resample-&gt;h_resample)                                             \
 344     resample-&gt;h_resample (resample, l0, width);                         \
 345 }
 346 /* 2x vertical downsampling interlaced without cositing
 347  *
 348  *   even           odd
 349  *
 350  * a x--x--x---------------
 351  *   O  O  O                &lt;---
 352  * b --------------x--x--x-
 353  * c x--x--x---------------
 354  *                 O  O  O  &lt;---
 355  * d --------------x--x--x-
 356  */
 357 #define MAKE_DOWNSAMPLE_VI2(name,type)                                  \
 358 static void                                                             \
 359 video_chroma_down_vi2_##name (GstVideoChromaResample *resample,         \
 360     gpointer lines[], gint width)                                       \
 361 {                                                                       \
</pre>
<hr />
<pre>
 512  * a x--x--x-
 513  * b x--x--x-
 514  *   O  O  O   &lt;---- (a + 3*b + 3*c + d + 4) &gt;&gt; 4
 515  * c x--x--x-
 516  * d x--x--x-
 517  * e x--x--x-
 518  * f x--x--x-
 519  *   O  O  O
 520  * g x--x--x-
 521  * h x--x--x-
 522  */
 523 #define MAKE_DOWNSAMPLE_V4(name,type)                               \
 524 static void                                                             \
 525 video_chroma_down_v4_##name (GstVideoChromaResample *resample,          \
 526     gpointer lines[], gint width)                                       \
 527 {                                                                       \
 528   type *l0 = lines[0];                                                  \
 529   type *l1 = lines[1];                                                  \
 530   type *l2 = lines[2];                                                  \
 531   type *l3 = lines[3];                                                  \
<span class="line-modified"> 532   type *d = l0;               \</span>
<span class="line-modified"> 533                   \</span>
<span class="line-modified"> 534   video_orc_chroma_down_v4_##name(d, l0, l1, l2, l3, width);    \</span>
 535                                                                         \
 536   if (resample-&gt;h_resample)                                             \
 537     resample-&gt;h_resample (resample, l0, width);                         \
 538 }
 539 /* 4x vertical downsampling interlaced without cositing
 540  *
 541  */
 542 #define MAKE_DOWNSAMPLE_VI4(name,type)                                       \
 543 static void                                                             \
 544 video_chroma_down_vi4_##name (GstVideoChromaResample *resample,         \
 545     gpointer lines[], gint width)                                       \
 546 {                                                                       \
 547   /* FIXME */                                                           \
 548   if (resample-&gt;h_resample) {                                           \
 549     resample-&gt;h_resample (resample, lines[0], width);                   \
 550   }                                                                     \
 551 }
 552 
 553 MAKE_UPSAMPLE_H4 (u16, guint16);
 554 MAKE_UPSAMPLE_H4 (u8, guint8);
</pre>
</td>
</tr>
</table>
<center><a href="navigation.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="video-color.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>