<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gparam.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gobject.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gparam.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gparam.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -49,36 +49,36 @@</span>
   */
  
  
  /* --- defines --- */
  #define PARAM_FLOATING_FLAG                     0x2
<span class="udiff-line-modified-removed">- #define G_PARAM_USER_MASK           (~0U &lt;&lt; G_PARAM_USER_SHIFT)</span>
<span class="udiff-line-modified-removed">- #define PSPEC_APPLIES_TO_VALUE(pspec, value)    (G_TYPE_CHECK_VALUE_TYPE ((value), G_PARAM_SPEC_VALUE_TYPE (pspec)))</span>
<span class="udiff-line-modified-added">+ #define G_PARAM_USER_MASK     (~0U &lt;&lt; G_PARAM_USER_SHIFT)</span>
<span class="udiff-line-modified-added">+ #define PSPEC_APPLIES_TO_VALUE(pspec, value)  (G_TYPE_CHECK_VALUE_TYPE ((value), G_PARAM_SPEC_VALUE_TYPE (pspec)))</span>
  
  /* --- prototypes --- */
<span class="udiff-line-modified-removed">- static void g_param_spec_class_base_init     (GParamSpecClass   *class);</span>
<span class="udiff-line-modified-removed">- static void g_param_spec_class_base_finalize (GParamSpecClass   *class);</span>
<span class="udiff-line-modified-removed">- static void g_param_spec_class_init      (GParamSpecClass   *class,</span>
<span class="udiff-line-modified-removed">-                           gpointer               class_data);</span>
<span class="udiff-line-modified-removed">- static void g_param_spec_init        (GParamSpec        *pspec,</span>
<span class="udiff-line-modified-removed">-                           GParamSpecClass   *class);</span>
<span class="udiff-line-modified-removed">- static void g_param_spec_finalize        (GParamSpec        *pspec);</span>
<span class="udiff-line-modified-removed">- static void value_param_init        (GValue     *value);</span>
<span class="udiff-line-modified-removed">- static void value_param_free_value      (GValue     *value);</span>
<span class="udiff-line-modified-removed">- static void value_param_copy_value      (const GValue   *src_value,</span>
<span class="udiff-line-modified-removed">-                          GValue     *dest_value);</span>
<span class="udiff-line-modified-removed">- static void value_param_transform_value (const GValue   *src_value,</span>
<span class="udiff-line-modified-removed">-                          GValue     *dest_value);</span>
<span class="udiff-line-modified-removed">- static gpointer value_param_peek_pointer    (const GValue   *value);</span>
<span class="udiff-line-modified-removed">- static gchar*   value_param_collect_value   (GValue     *value,</span>
<span class="udiff-line-modified-removed">-                                                  guint           n_collect_values,</span>
<span class="udiff-line-modified-removed">-                                                  GTypeCValue    *collect_values,</span>
<span class="udiff-line-modified-removed">-                                                  guint           collect_flags);</span>
<span class="udiff-line-modified-removed">- static gchar*   value_param_lcopy_value     (const GValue   *value,</span>
<span class="udiff-line-modified-removed">-                          guint           n_collect_values,</span>
<span class="udiff-line-modified-removed">-                          GTypeCValue    *collect_values,</span>
<span class="udiff-line-modified-removed">-                          guint           collect_flags);</span>
<span class="udiff-line-modified-added">+ static void g_param_spec_class_base_init   (GParamSpecClass *class);</span>
<span class="udiff-line-modified-added">+ static void g_param_spec_class_base_finalize (GParamSpecClass *class);</span>
<span class="udiff-line-modified-added">+ static void g_param_spec_class_init    (GParamSpecClass *class,</span>
<span class="udiff-line-modified-added">+               gpointer               class_data);</span>
<span class="udiff-line-modified-added">+ static void g_param_spec_init    (GParamSpec    *pspec,</span>
<span class="udiff-line-modified-added">+               GParamSpecClass *class);</span>
<span class="udiff-line-modified-added">+ static void g_param_spec_finalize    (GParamSpec    *pspec);</span>
<span class="udiff-line-modified-added">+ static void value_param_init    (GValue   *value);</span>
<span class="udiff-line-modified-added">+ static void value_param_free_value    (GValue   *value);</span>
<span class="udiff-line-modified-added">+ static void value_param_copy_value    (const GValue *src_value,</span>
<span class="udiff-line-modified-added">+              GValue   *dest_value);</span>
<span class="udiff-line-modified-added">+ static void value_param_transform_value (const GValue *src_value,</span>
<span class="udiff-line-modified-added">+              GValue   *dest_value);</span>
<span class="udiff-line-modified-added">+ static gpointer value_param_peek_pointer  (const GValue *value);</span>
<span class="udiff-line-modified-added">+ static gchar* value_param_collect_value (GValue   *value,</span>
<span class="udiff-line-modified-added">+              guint           n_collect_values,</span>
<span class="udiff-line-modified-added">+              GTypeCValue    *collect_values,</span>
<span class="udiff-line-modified-added">+              guint           collect_flags);</span>
<span class="udiff-line-modified-added">+ static gchar* value_param_lcopy_value   (const GValue *value,</span>
<span class="udiff-line-modified-added">+              guint           n_collect_values,</span>
<span class="udiff-line-modified-added">+              GTypeCValue    *collect_values,</span>
<span class="udiff-line-modified-added">+              guint           collect_flags);</span>
  
  typedef struct
  {
    GValue default_value;
    GQuark name_quark;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -105,26 +105,26 @@</span>
    static const GTypeValueTable param_value_table = {
      value_param_init,           /* value_init */
      value_param_free_value,     /* value_free */
      value_param_copy_value,     /* value_copy */
      value_param_peek_pointer,   /* value_peek_pointer */
<span class="udiff-line-modified-removed">-     &quot;p&quot;,            /* collect_format */</span>
<span class="udiff-line-modified-added">+     &quot;p&quot;,      /* collect_format */</span>
      value_param_collect_value,  /* collect_value */
<span class="udiff-line-modified-removed">-     &quot;p&quot;,            /* lcopy_format */</span>
<span class="udiff-line-modified-added">+     &quot;p&quot;,      /* lcopy_format */</span>
      value_param_lcopy_value,    /* lcopy_value */
    };
    const GTypeInfo param_spec_info = {
      sizeof (GParamSpecClass),
  
      (GBaseInitFunc) g_param_spec_class_base_init,
      (GBaseFinalizeFunc) g_param_spec_class_base_finalize,
      (GClassInitFunc) g_param_spec_class_init,
      (GClassFinalizeFunc) NULL,
<span class="udiff-line-modified-removed">-     NULL,   /* class_data */</span>
<span class="udiff-line-modified-added">+     NULL, /* class_data */</span>
  
      sizeof (GParamSpec),
<span class="udiff-line-modified-removed">-     0,      /* n_preallocs */</span>
<span class="udiff-line-modified-added">+     0,    /* n_preallocs */</span>
      (GInstanceInitFunc) g_param_spec_init,
  
      &amp;param_value_table,
    };
    GType type;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -150,11 +150,11 @@</span>
  {
  }
  
  static void
  g_param_spec_class_init (GParamSpecClass *class,
<span class="udiff-line-modified-removed">-              gpointer         class_data)</span>
<span class="udiff-line-modified-added">+        gpointer         class_data)</span>
  {
    class-&gt;value_type = G_TYPE_NONE;
    class-&gt;finalize = g_param_spec_finalize;
    class-&gt;value_set_default = NULL;
    class-&gt;value_validate = NULL;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -163,11 +163,11 @@</span>
    g_type_class_adjust_private_offset (class, &amp;g_param_private_offset);
  }
  
  static void
  g_param_spec_init (GParamSpec      *pspec,
<span class="udiff-line-modified-removed">-            GParamSpecClass *class)</span>
<span class="udiff-line-modified-added">+        GParamSpecClass *class)</span>
  {
    pspec-&gt;name = NULL;
    pspec-&gt;_nick = NULL;
    pspec-&gt;_blurb = NULL;
    pspec-&gt;flags = 0;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -320,11 +320,11 @@</span>
      {
        GParamSpec *redirect_target;
  
        redirect_target = g_param_spec_get_redirect_target (pspec);
        if (redirect_target &amp;&amp; redirect_target-&gt;_nick)
<span class="udiff-line-modified-removed">-     return redirect_target-&gt;_nick;</span>
<span class="udiff-line-modified-added">+   return redirect_target-&gt;_nick;</span>
      }
  
    return pspec-&gt;name;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -347,11 +347,11 @@</span>
      {
        GParamSpec *redirect_target;
  
        redirect_target = g_param_spec_get_redirect_target (pspec);
        if (redirect_target &amp;&amp; redirect_target-&gt;_blurb)
<span class="udiff-line-modified-removed">-     return redirect_target-&gt;_blurb;</span>
<span class="udiff-line-modified-added">+   return redirect_target-&gt;_blurb;</span>
      }
  
    return NULL;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -363,14 +363,14 @@</span>
    for (p = key; *p != 0; p++)
      {
        gchar c = *p;
  
        if (c != &#39;-&#39; &amp;&amp;
<span class="udiff-line-modified-removed">-       (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-removed">-       (c &lt; &#39;A&#39; || c &gt; &#39;Z&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-removed">-       (c &lt; &#39;a&#39; || c &gt; &#39;z&#39;))</span>
<span class="udiff-line-modified-removed">-     *p = &#39;-&#39;;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;A&#39; || c &gt; &#39;Z&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;a&#39; || c &gt; &#39;z&#39;))</span>
<span class="udiff-line-modified-added">+   *p = &#39;-&#39;;</span>
      }
  }
  
  static gboolean
  is_canonical (const gchar *key)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -380,14 +380,14 @@</span>
    for (p = key; *p != 0; p++)
      {
        gchar c = *p;
  
        if (c != &#39;-&#39; &amp;&amp;
<span class="udiff-line-modified-removed">-       (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-removed">-       (c &lt; &#39;A&#39; || c &gt; &#39;Z&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-removed">-       (c &lt; &#39;a&#39; || c &gt; &#39;z&#39;))</span>
<span class="udiff-line-modified-removed">-     return FALSE;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;0&#39; || c &gt; &#39;9&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;A&#39; || c &gt; &#39;Z&#39;) &amp;&amp;</span>
<span class="udiff-line-modified-added">+     (c &lt; &#39;a&#39; || c &gt; &#39;z&#39;))</span>
<span class="udiff-line-modified-added">+   return FALSE;</span>
      }
  
    return TRUE;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -419,14 +419,14 @@</span>
   *
   * Returns: (type GObject.ParamSpec): a newly allocated #GParamSpec instance
   */
  gpointer
  g_param_spec_internal (GType        param_type,
<span class="udiff-line-modified-removed">-                const gchar *name,</span>
<span class="udiff-line-modified-removed">-                const gchar *nick,</span>
<span class="udiff-line-modified-removed">-                const gchar *blurb,</span>
<span class="udiff-line-modified-removed">-                GParamFlags  flags)</span>
<span class="udiff-line-modified-added">+            const gchar *name,</span>
<span class="udiff-line-modified-added">+            const gchar *nick,</span>
<span class="udiff-line-modified-added">+            const gchar *blurb,</span>
<span class="udiff-line-modified-added">+            GParamFlags  flags)</span>
  {
    GParamSpec *pspec;
    GParamSpecPrivate *priv;
  
    g_return_val_if_fail (G_TYPE_IS_PARAM (param_type) &amp;&amp; param_type != G_TYPE_PARAM, NULL);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -487,11 +487,11 @@</span>
   *
   * Returns: (transfer none): the user data pointer set, or %NULL
   */
  gpointer
  g_param_spec_get_qdata (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-             GQuark      quark)</span>
<span class="udiff-line-modified-added">+       GQuark      quark)</span>
  {
    g_return_val_if_fail (G_IS_PARAM_SPEC (pspec), NULL);
  
    return quark ? g_datalist_id_get_data (&amp;pspec-&gt;qdata, quark) : NULL;
  }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -509,12 +509,12 @@</span>
   * previously set user data pointer, overrides (frees) the old pointer
   * set, using %NULL as pointer essentially removes the data stored.
   */
  void
  g_param_spec_set_qdata (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-             GQuark      quark,</span>
<span class="udiff-line-modified-removed">-             gpointer    data)</span>
<span class="udiff-line-modified-added">+       GQuark      quark,</span>
<span class="udiff-line-modified-added">+       gpointer    data)</span>
  {
    g_return_if_fail (G_IS_PARAM_SPEC (pspec));
    g_return_if_fail (quark &gt; 0);
  
    g_datalist_id_set_data (&amp;pspec-&gt;qdata, quark, data);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -534,13 +534,13 @@</span>
   * finalized, or the data is being overwritten by a call to
   * g_param_spec_set_qdata() with the same @quark.
   */
  void
  g_param_spec_set_qdata_full (GParamSpec    *pspec,
<span class="udiff-line-modified-removed">-                  GQuark         quark,</span>
<span class="udiff-line-modified-removed">-                  gpointer       data,</span>
<span class="udiff-line-modified-removed">-                  GDestroyNotify destroy)</span>
<span class="udiff-line-modified-added">+            GQuark         quark,</span>
<span class="udiff-line-modified-added">+            gpointer       data,</span>
<span class="udiff-line-modified-added">+            GDestroyNotify destroy)</span>
  {
    g_return_if_fail (G_IS_PARAM_SPEC (pspec));
    g_return_if_fail (quark &gt; 0);
  
    g_datalist_id_set_data_full (&amp;pspec-&gt;qdata, quark, data, data ? destroy : (GDestroyNotify) NULL);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -558,11 +558,11 @@</span>
   *
   * Returns: (transfer none): the user data pointer set, or %NULL
   */
  gpointer
  g_param_spec_steal_qdata (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-               GQuark      quark)</span>
<span class="udiff-line-modified-added">+         GQuark      quark)</span>
  {
    g_return_val_if_fail (G_IS_PARAM_SPEC (pspec), NULL);
    g_return_val_if_fail (quark &gt; 0, NULL);
  
    return g_datalist_id_remove_no_notify (&amp;pspec-&gt;qdata, quark);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -603,11 +603,11 @@</span>
   *
   * Sets @value to its default value as specified in @pspec.
   */
  void
  g_param_value_set_default (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-                GValue     *value)</span>
<span class="udiff-line-modified-added">+          GValue     *value)</span>
  {
    g_return_if_fail (G_IS_PARAM_SPEC (pspec));
    g_return_if_fail (G_IS_VALUE (value));
    g_return_if_fail (PSPEC_APPLIES_TO_VALUE (pspec, value));
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -624,11 +624,11 @@</span>
   *
   * Returns: whether @value contains the canonical default for this @pspec
   */
  gboolean
  g_param_value_defaults (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-             GValue     *value)</span>
<span class="udiff-line-modified-added">+       GValue     *value)</span>
  {
    GValue dflt_value = G_VALUE_INIT;
    gboolean defaults;
  
    g_return_val_if_fail (G_IS_PARAM_SPEC (pspec), FALSE);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -657,23 +657,23 @@</span>
   *
   * Returns: whether modifying @value was necessary to ensure validity
   */
  gboolean
  g_param_value_validate (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-             GValue     *value)</span>
<span class="udiff-line-modified-added">+       GValue     *value)</span>
  {
    g_return_val_if_fail (G_IS_PARAM_SPEC (pspec), FALSE);
    g_return_val_if_fail (G_IS_VALUE (value), FALSE);
    g_return_val_if_fail (PSPEC_APPLIES_TO_VALUE (pspec, value), FALSE);
  
    if (G_PARAM_SPEC_GET_CLASS (pspec)-&gt;value_validate)
      {
        GValue oval = *value;
  
        if (G_PARAM_SPEC_GET_CLASS (pspec)-&gt;value_validate (pspec, value) ||
<span class="udiff-line-modified-removed">-       memcmp (&amp;oval.data, &amp;value-&gt;data, sizeof (oval.data)))</span>
<span class="udiff-line-modified-removed">-     return TRUE;</span>
<span class="udiff-line-modified-added">+     memcmp (&amp;oval.data, &amp;value-&gt;data, sizeof (oval.data)))</span>
<span class="udiff-line-modified-added">+   return TRUE;</span>
      }
  
    return FALSE;
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -696,13 +696,13 @@</span>
   * Returns: %TRUE if transformation and validation were successful,
   *  %FALSE otherwise and @dest_value is left untouched.
   */
  gboolean
  g_param_value_convert (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-                        const GValue *src_value,</span>
<span class="udiff-line-modified-removed">-                        GValue       *dest_value,</span>
<span class="udiff-line-modified-removed">-                gboolean      strict_validation)</span>
<span class="udiff-line-modified-added">+            const GValue *src_value,</span>
<span class="udiff-line-modified-added">+            GValue       *dest_value,</span>
<span class="udiff-line-modified-added">+            gboolean      strict_validation)</span>
  {
    GValue tmp_value = G_VALUE_INIT;
  
    g_return_val_if_fail (G_IS_PARAM_SPEC (pspec), FALSE);
    g_return_val_if_fail (G_IS_VALUE (src_value), FALSE);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -742,12 +742,12 @@</span>
   *
   * Returns: -1, 0 or +1, for a less than, equal to or greater than result
   */
  gint
  g_param_values_cmp (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-             const GValue *value1,</span>
<span class="udiff-line-modified-removed">-             const GValue *value2)</span>
<span class="udiff-line-modified-added">+         const GValue *value1,</span>
<span class="udiff-line-modified-added">+         const GValue *value2)</span>
  {
    gint cmp;
  
    /* param_values_cmp() effectively does: value1 - value2
     * so the return values are:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -779,21 +779,21 @@</span>
      g_param_spec_unref (value-&gt;data[0].v_pointer);
  }
  
  static void
  value_param_copy_value (const GValue *src_value,
<span class="udiff-line-modified-removed">-             GValue       *dest_value)</span>
<span class="udiff-line-modified-added">+       GValue       *dest_value)</span>
  {
    if (src_value-&gt;data[0].v_pointer)
      dest_value-&gt;data[0].v_pointer = g_param_spec_ref (src_value-&gt;data[0].v_pointer);
    else
      dest_value-&gt;data[0].v_pointer = NULL;
  }
  
  static void
  value_param_transform_value (const GValue *src_value,
<span class="udiff-line-modified-removed">-                  GValue       *dest_value)</span>
<span class="udiff-line-modified-added">+            GValue       *dest_value)</span>
  {
    if (src_value-&gt;data[0].v_pointer &amp;&amp;
        g_type_is_a (G_PARAM_SPEC_TYPE (dest_value-&gt;data[0].v_pointer), G_VALUE_TYPE (dest_value)))
      dest_value-&gt;data[0].v_pointer = g_param_spec_ref (src_value-&gt;data[0].v_pointer);
    else
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -806,43 +806,43 @@</span>
    return value-&gt;data[0].v_pointer;
  }
  
  static gchar*
  value_param_collect_value (GValue      *value,
<span class="udiff-line-modified-removed">-                guint        n_collect_values,</span>
<span class="udiff-line-modified-removed">-                GTypeCValue *collect_values,</span>
<span class="udiff-line-modified-removed">-                guint        collect_flags)</span>
<span class="udiff-line-modified-added">+          guint        n_collect_values,</span>
<span class="udiff-line-modified-added">+          GTypeCValue *collect_values,</span>
<span class="udiff-line-modified-added">+          guint        collect_flags)</span>
  {
    if (collect_values[0].v_pointer)
      {
        GParamSpec *param = collect_values[0].v_pointer;
  
        if (param-&gt;g_type_instance.g_class == NULL)
<span class="udiff-line-modified-removed">-     return g_strconcat (&quot;invalid unclassed param spec pointer for value type &#39;&quot;,</span>
<span class="udiff-line-modified-removed">-                 G_VALUE_TYPE_NAME (value),</span>
<span class="udiff-line-modified-removed">-                 &quot;&#39;&quot;,</span>
<span class="udiff-line-modified-removed">-                 NULL);</span>
<span class="udiff-line-modified-added">+   return g_strconcat (&quot;invalid unclassed param spec pointer for value type &#39;&quot;,</span>
<span class="udiff-line-modified-added">+           G_VALUE_TYPE_NAME (value),</span>
<span class="udiff-line-modified-added">+           &quot;&#39;&quot;,</span>
<span class="udiff-line-modified-added">+           NULL);</span>
        else if (!g_value_type_compatible (G_PARAM_SPEC_TYPE (param), G_VALUE_TYPE (value)))
<span class="udiff-line-modified-removed">-     return g_strconcat (&quot;invalid param spec type &#39;&quot;,</span>
<span class="udiff-line-modified-removed">-                 G_PARAM_SPEC_TYPE_NAME (param),</span>
<span class="udiff-line-modified-removed">-                 &quot;&#39; for value type &#39;&quot;,</span>
<span class="udiff-line-modified-removed">-                 G_VALUE_TYPE_NAME (value),</span>
<span class="udiff-line-modified-removed">-                 &quot;&#39;&quot;,</span>
<span class="udiff-line-modified-removed">-                 NULL);</span>
<span class="udiff-line-modified-added">+   return g_strconcat (&quot;invalid param spec type &#39;&quot;,</span>
<span class="udiff-line-modified-added">+           G_PARAM_SPEC_TYPE_NAME (param),</span>
<span class="udiff-line-modified-added">+           &quot;&#39; for value type &#39;&quot;,</span>
<span class="udiff-line-modified-added">+           G_VALUE_TYPE_NAME (value),</span>
<span class="udiff-line-modified-added">+           &quot;&#39;&quot;,</span>
<span class="udiff-line-modified-added">+           NULL);</span>
        value-&gt;data[0].v_pointer = g_param_spec_ref (param);
      }
    else
      value-&gt;data[0].v_pointer = NULL;
  
    return NULL;
  }
  
  static gchar*
  value_param_lcopy_value (const GValue *value,
<span class="udiff-line-modified-removed">-              guint         n_collect_values,</span>
<span class="udiff-line-modified-removed">-              GTypeCValue  *collect_values,</span>
<span class="udiff-line-modified-removed">-              guint         collect_flags)</span>
<span class="udiff-line-modified-added">+        guint         n_collect_values,</span>
<span class="udiff-line-modified-added">+        GTypeCValue  *collect_values,</span>
<span class="udiff-line-modified-added">+        guint         collect_flags)</span>
  {
    GParamSpec **param_p = collect_values[0].v_pointer;
  
    if (!param_p)
      return g_strdup_printf (&quot;value location for &#39;%s&#39; passed as NULL&quot;, G_VALUE_TYPE_NAME (value));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -887,17 +887,17 @@</span>
    return h;
  }
  
  static gboolean
  param_spec_pool_equals (gconstpointer key_spec_1,
<span class="udiff-line-modified-removed">-             gconstpointer key_spec_2)</span>
<span class="udiff-line-modified-added">+       gconstpointer key_spec_2)</span>
  {
    const GParamSpec *key1 = key_spec_1;
    const GParamSpec *key2 = key_spec_2;
  
    return (key1-&gt;owner_type == key2-&gt;owner_type &amp;&amp;
<span class="udiff-line-modified-removed">-       strcmp (key1-&gt;name, key2-&gt;name) == 0);</span>
<span class="udiff-line-modified-added">+     strcmp (key1-&gt;name, key2-&gt;name) == 0);</span>
  }
  
  /**
   * g_param_spec_pool_new:
   * @type_prefixing: Whether the pool will support type-prefixed property names.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -932,25 +932,25 @@</span>
   *
   * Inserts a #GParamSpec in the pool.
   */
  void
  g_param_spec_pool_insert (GParamSpecPool *pool,
<span class="udiff-line-modified-removed">-               GParamSpec     *pspec,</span>
<span class="udiff-line-modified-removed">-               GType           owner_type)</span>
<span class="udiff-line-modified-added">+         GParamSpec     *pspec,</span>
<span class="udiff-line-modified-added">+         GType           owner_type)</span>
  {
    const gchar *p;
  
    if (pool &amp;&amp; pspec &amp;&amp; owner_type &gt; 0 &amp;&amp; pspec-&gt;owner_type == 0)
      {
        for (p = pspec-&gt;name; *p; p++)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       if (!strchr (G_CSET_A_2_Z G_CSET_a_2_z G_CSET_DIGITS &quot;-_&quot;, *p))</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           g_warning (G_STRLOC &quot;: pspec name \&quot;%s\&quot; contains invalid characters&quot;, pspec-&gt;name);</span>
<span class="udiff-line-modified-removed">-           return;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     if (!strchr (G_CSET_A_2_Z G_CSET_a_2_z G_CSET_DIGITS &quot;-_&quot;, *p))</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         g_warning (G_STRLOC &quot;: pspec name \&quot;%s\&quot; contains invalid characters&quot;, pspec-&gt;name);</span>
<span class="udiff-line-modified-added">+         return;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+   }</span>
        g_mutex_lock (&amp;pool-&gt;mutex);
        pspec-&gt;owner_type = owner_type;
        g_param_spec_ref (pspec);
        g_hash_table_add (pool-&gt;hash_table, pspec);
        g_mutex_unlock (&amp;pool-&gt;mutex);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -971,19 +971,19 @@</span>
   *
   * Removes a #GParamSpec from the pool.
   */
  void
  g_param_spec_pool_remove (GParamSpecPool *pool,
<span class="udiff-line-modified-removed">-               GParamSpec     *pspec)</span>
<span class="udiff-line-modified-added">+         GParamSpec     *pspec)</span>
  {
    if (pool &amp;&amp; pspec)
      {
        g_mutex_lock (&amp;pool-&gt;mutex);
        if (g_hash_table_remove (pool-&gt;hash_table, pspec))
<span class="udiff-line-modified-removed">-     g_param_spec_unref (pspec);</span>
<span class="udiff-line-modified-added">+   g_param_spec_unref (pspec);</span>
        else
<span class="udiff-line-modified-removed">-     g_warning (G_STRLOC &quot;: attempt to remove unknown pspec &#39;%s&#39; from pool&quot;, pspec-&gt;name);</span>
<span class="udiff-line-modified-added">+   g_warning (G_STRLOC &quot;: attempt to remove unknown pspec &#39;%s&#39; from pool&quot;, pspec-&gt;name);</span>
        g_mutex_unlock (&amp;pool-&gt;mutex);
      }
    else
      {
        g_return_if_fail (pool != NULL);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -991,25 +991,25 @@</span>
      }
  }
  
  static inline GParamSpec*
  param_spec_ht_lookup (GHashTable  *hash_table,
<span class="udiff-line-modified-removed">-               const gchar *param_name,</span>
<span class="udiff-line-modified-removed">-               GType        owner_type,</span>
<span class="udiff-line-modified-removed">-               gboolean     walk_ancestors)</span>
<span class="udiff-line-modified-added">+           const gchar *param_name,</span>
<span class="udiff-line-modified-added">+           GType        owner_type,</span>
<span class="udiff-line-modified-added">+           gboolean     walk_ancestors)</span>
  {
    GParamSpec key, *pspec;
  
    key.owner_type = owner_type;
    key.name = (gchar*) param_name;
    if (walk_ancestors)
      do
        {
<span class="udiff-line-modified-removed">-     pspec = g_hash_table_lookup (hash_table, &amp;key);</span>
<span class="udiff-line-modified-removed">-     if (pspec)</span>
<span class="udiff-line-modified-removed">-       return pspec;</span>
<span class="udiff-line-modified-removed">-     key.owner_type = g_type_parent (key.owner_type);</span>
<span class="udiff-line-modified-added">+   pspec = g_hash_table_lookup (hash_table, &amp;key);</span>
<span class="udiff-line-modified-added">+   if (pspec)</span>
<span class="udiff-line-modified-added">+     return pspec;</span>
<span class="udiff-line-modified-added">+   key.owner_type = g_type_parent (key.owner_type);</span>
        }
      while (key.owner_type);
    else
      pspec = g_hash_table_lookup (hash_table, &amp;key);
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1058,13 +1058,13 @@</span>
   * Returns: (transfer none): The found #GParamSpec, or %NULL if no
   * matching #GParamSpec was found.
   */
  GParamSpec*
  g_param_spec_pool_lookup (GParamSpecPool *pool,
<span class="udiff-line-modified-removed">-               const gchar    *param_name,</span>
<span class="udiff-line-modified-removed">-               GType           owner_type,</span>
<span class="udiff-line-modified-removed">-               gboolean        walk_ancestors)</span>
<span class="udiff-line-modified-added">+         const gchar    *param_name,</span>
<span class="udiff-line-modified-added">+         GType           owner_type,</span>
<span class="udiff-line-modified-added">+         gboolean        walk_ancestors)</span>
  {
    GParamSpec *pspec;
    gchar *delim;
  
    g_return_val_if_fail (pool != NULL, NULL);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1092,39 +1092,39 @@</span>
  
        strncpy (buffer, param_name, delim - param_name);
        buffer[l] = 0;
        type = g_type_from_name (buffer);
        if (l &gt;= 32)
<span class="udiff-line-modified-removed">-     g_free (buffer);</span>
<span class="udiff-line-modified-removed">-       if (type)     /* type==0 isn&#39;t a valid type pefix */</span>
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       /* sanity check, these cases don&#39;t make a whole lot of sense */</span>
<span class="udiff-line-modified-removed">-       if ((!walk_ancestors &amp;&amp; type != owner_type) || !g_type_is_a (owner_type, type))</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           g_mutex_unlock (&amp;pool-&gt;mutex);</span>
<span class="udiff-line-modified-added">+   g_free (buffer);</span>
<span class="udiff-line-modified-added">+       if (type)   /* type==0 isn&#39;t a valid type pefix */</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     /* sanity check, these cases don&#39;t make a whole lot of sense */</span>
<span class="udiff-line-modified-added">+     if ((!walk_ancestors &amp;&amp; type != owner_type) || !g_type_is_a (owner_type, type))</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         g_mutex_unlock (&amp;pool-&gt;mutex);</span>
  
<span class="udiff-line-modified-removed">-           return NULL;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-       owner_type = type;</span>
<span class="udiff-line-modified-removed">-       param_name += l + 2;</span>
<span class="udiff-line-modified-removed">-       pspec = param_spec_ht_lookup (pool-&gt;hash_table, param_name, owner_type, walk_ancestors);</span>
<span class="udiff-line-modified-removed">-       g_mutex_unlock (&amp;pool-&gt;mutex);</span>
<span class="udiff-line-modified-added">+         return NULL;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+     owner_type = type;</span>
<span class="udiff-line-modified-added">+     param_name += l + 2;</span>
<span class="udiff-line-modified-added">+     pspec = param_spec_ht_lookup (pool-&gt;hash_table, param_name, owner_type, walk_ancestors);</span>
<span class="udiff-line-modified-added">+     g_mutex_unlock (&amp;pool-&gt;mutex);</span>
  
<span class="udiff-line-modified-removed">-       return pspec;</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+     return pspec;</span>
<span class="udiff-line-modified-added">+   }</span>
      }
    /* malformed param_name */
  
    g_mutex_unlock (&amp;pool-&gt;mutex);
  
    return NULL;
  }
  
  static void
  pool_list (gpointer key,
<span class="udiff-line-modified-removed">-        gpointer value,</span>
<span class="udiff-line-modified-removed">-        gpointer user_data)</span>
<span class="udiff-line-modified-added">+      gpointer value,</span>
<span class="udiff-line-modified-added">+      gpointer user_data)</span>
  {
    GParamSpec *pspec = value;
    gpointer *data = user_data;
    GType owner_type = (GType) data[1];
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1144,11 +1144,11 @@</span>
   *          #GList of all #GParamSpecs owned by @owner_type in
   *          the pool#GParamSpecs.
   */
  GList*
  g_param_spec_pool_list_owned (GParamSpecPool *pool,
<span class="udiff-line-modified-removed">-                   GType           owner_type)</span>
<span class="udiff-line-modified-added">+             GType           owner_type)</span>
  {
    gpointer data[2];
  
    g_return_val_if_fail (pool != NULL, NULL);
    g_return_val_if_fail (owner_type &gt; 0, NULL);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1162,11 +1162,11 @@</span>
    return data[0];
  }
  
  static gint
  pspec_compare_id (gconstpointer a,
<span class="udiff-line-modified-removed">-           gconstpointer b)</span>
<span class="udiff-line-modified-added">+       gconstpointer b)</span>
  {
    const GParamSpec *pspec1 = a, *pspec2 = b;
  
    if (pspec1-&gt;param_id &lt; pspec2-&gt;param_id)
      return -1;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1177,13 +1177,13 @@</span>
    return strcmp (pspec1-&gt;name, pspec2-&gt;name);
  }
  
  static inline GSList*
  pspec_list_remove_overridden_and_redirected (GSList     *plist,
<span class="udiff-line-modified-removed">-                          GHashTable *ht,</span>
<span class="udiff-line-modified-removed">-                          GType       owner_type,</span>
<span class="udiff-line-modified-removed">-                          guint      *n_p)</span>
<span class="udiff-line-modified-added">+                GHashTable *ht,</span>
<span class="udiff-line-modified-added">+                GType       owner_type,</span>
<span class="udiff-line-modified-added">+                guint      *n_p)</span>
  {
    GSList *rlist = NULL;
  
    while (plist)
      {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1196,59 +1196,59 @@</span>
         * that have are overridden by non-redirected properties.
         * The idea is to get the single paramspec for each name that
         * best corresponds to what the application sees.
         */
        if (g_param_spec_get_redirect_target (pspec))
<span class="udiff-line-modified-removed">-     remove = TRUE;</span>
<span class="udiff-line-modified-added">+   remove = TRUE;</span>
        else
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       found = param_spec_ht_lookup (ht, pspec-&gt;name, owner_type, TRUE);</span>
<span class="udiff-line-modified-removed">-       if (found != pspec)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           GParamSpec *redirect = g_param_spec_get_redirect_target (found);</span>
<span class="udiff-line-modified-removed">-           if (redirect != pspec)</span>
<span class="udiff-line-modified-removed">-         remove = TRUE;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     found = param_spec_ht_lookup (ht, pspec-&gt;name, owner_type, TRUE);</span>
<span class="udiff-line-modified-added">+     if (found != pspec)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         GParamSpec *redirect = g_param_spec_get_redirect_target (found);</span>
<span class="udiff-line-modified-added">+         if (redirect != pspec)</span>
<span class="udiff-line-modified-added">+     remove = TRUE;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+   }</span>
  
        if (remove)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       g_slist_free_1 (plist);</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     g_slist_free_1 (plist);</span>
<span class="udiff-line-modified-added">+   }</span>
        else
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       plist-&gt;next = rlist;</span>
<span class="udiff-line-modified-removed">-       rlist = plist;</span>
<span class="udiff-line-modified-removed">-       *n_p += 1;</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     plist-&gt;next = rlist;</span>
<span class="udiff-line-modified-added">+     rlist = plist;</span>
<span class="udiff-line-modified-added">+     *n_p += 1;</span>
<span class="udiff-line-modified-added">+   }</span>
        plist = tmp;
      }
    return rlist;
  }
  
  static void
  pool_depth_list (gpointer key,
<span class="udiff-line-modified-removed">-          gpointer value,</span>
<span class="udiff-line-modified-removed">-          gpointer user_data)</span>
<span class="udiff-line-modified-added">+      gpointer value,</span>
<span class="udiff-line-modified-added">+      gpointer user_data)</span>
  {
    GParamSpec *pspec = value;
    gpointer *data = user_data;
    GSList **slists = data[0];
    GType owner_type = (GType) data[1];
  
    if (g_type_is_a (owner_type, pspec-&gt;owner_type))
      {
        if (G_TYPE_IS_INTERFACE (pspec-&gt;owner_type))
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       slists[0] = g_slist_prepend (slists[0], pspec);</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     slists[0] = g_slist_prepend (slists[0], pspec);</span>
<span class="udiff-line-modified-added">+   }</span>
        else
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       guint d = g_type_depth (pspec-&gt;owner_type);</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     guint d = g_type_depth (pspec-&gt;owner_type);</span>
  
<span class="udiff-line-modified-removed">-       slists[d - 1] = g_slist_prepend (slists[d - 1], pspec);</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+     slists[d - 1] = g_slist_prepend (slists[d - 1], pspec);</span>
<span class="udiff-line-modified-added">+   }</span>
      }
  }
  
  /* We handle interfaces specially since we don&#39;t want to
   * count interface prerequisites like normal inheritance;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1259,12 +1259,12 @@</span>
   * also &#39;depth&#39; isn&#39;t a meaningful concept for interface
   * prerequites.
   */
  static void
  pool_depth_list_for_interface (gpointer key,
<span class="udiff-line-modified-removed">-                    gpointer value,</span>
<span class="udiff-line-modified-removed">-                    gpointer user_data)</span>
<span class="udiff-line-modified-added">+              gpointer value,</span>
<span class="udiff-line-modified-added">+              gpointer user_data)</span>
  {
    GParamSpec *pspec = value;
    gpointer *data = user_data;
    GSList **slists = data[0];
    GType owner_type = (GType) data[1];
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1286,12 +1286,12 @@</span>
   *          allocated array containing pointers to all #GParamSpecs
   *          owned by @owner_type in the pool
   */
  GParamSpec**
  g_param_spec_pool_list (GParamSpecPool *pool,
<span class="udiff-line-modified-removed">-             GType           owner_type,</span>
<span class="udiff-line-modified-removed">-             guint          *n_pspecs_p)</span>
<span class="udiff-line-modified-added">+       GType           owner_type,</span>
<span class="udiff-line-modified-added">+       guint          *n_pspecs_p)</span>
  {
    GParamSpec **pspecs, **p;
    GSList **slists, *node;
    gpointer data[2];
    guint d, i;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1306,24 +1306,24 @@</span>
    slists = g_new0 (GSList*, d);
    data[0] = slists;
    data[1] = (gpointer) owner_type;
  
    g_hash_table_foreach (pool-&gt;hash_table,
<span class="udiff-line-modified-removed">-             G_TYPE_IS_INTERFACE (owner_type) ?</span>
<span class="udiff-line-modified-removed">-                pool_depth_list_for_interface :</span>
<span class="udiff-line-modified-removed">-                pool_depth_list,</span>
<span class="udiff-line-modified-removed">-             &amp;data);</span>
<span class="udiff-line-modified-added">+       G_TYPE_IS_INTERFACE (owner_type) ?</span>
<span class="udiff-line-modified-added">+          pool_depth_list_for_interface :</span>
<span class="udiff-line-modified-added">+          pool_depth_list,</span>
<span class="udiff-line-modified-added">+       &amp;data);</span>
  
    for (i = 0; i &lt; d; i++)
      slists[i] = pspec_list_remove_overridden_and_redirected (slists[i], pool-&gt;hash_table, owner_type, n_pspecs_p);
    pspecs = g_new (GParamSpec*, *n_pspecs_p + 1);
    p = pspecs;
    for (i = 0; i &lt; d; i++)
      {
        slists[i] = g_slist_sort (slists[i], pspec_compare_id);
        for (node = slists[i]; node; node = node-&gt;next)
<span class="udiff-line-modified-removed">-     *p++ = node-&gt;data;</span>
<span class="udiff-line-modified-added">+   *p++ = node-&gt;data;</span>
        g_slist_free (slists[i]);
      }
    *p++ = NULL;
    g_free (slists);
    g_mutex_unlock (&amp;pool-&gt;mutex);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1337,46 +1337,46 @@</span>
  {
    /* class portion */
    GType           value_type;
    void          (*finalize)             (GParamSpec   *pspec);
    void          (*value_set_default)    (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-                      GValue       *value);</span>
<span class="udiff-line-modified-added">+            GValue       *value);</span>
    gboolean      (*value_validate)       (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-                      GValue       *value);</span>
<span class="udiff-line-modified-added">+            GValue       *value);</span>
    gint          (*values_cmp)           (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-                      const GValue *value1,</span>
<span class="udiff-line-modified-removed">-                      const GValue *value2);</span>
<span class="udiff-line-modified-added">+            const GValue *value1,</span>
<span class="udiff-line-modified-added">+            const GValue *value2);</span>
  } ParamSpecClassInfo;
  
  static void
  param_spec_generic_class_init (gpointer g_class,
<span class="udiff-line-modified-removed">-                    gpointer class_data)</span>
<span class="udiff-line-modified-added">+              gpointer class_data)</span>
  {
    GParamSpecClass *class = g_class;
    ParamSpecClassInfo *info = class_data;
  
    class-&gt;value_type = info-&gt;value_type;
    if (info-&gt;finalize)
<span class="udiff-line-modified-removed">-     class-&gt;finalize = info-&gt;finalize;           /* optional */</span>
<span class="udiff-line-modified-added">+     class-&gt;finalize = info-&gt;finalize;     /* optional */</span>
    class-&gt;value_set_default = info-&gt;value_set_default;
    if (info-&gt;value_validate)
<span class="udiff-line-modified-removed">-     class-&gt;value_validate = info-&gt;value_validate;   /* optional */</span>
<span class="udiff-line-modified-added">+     class-&gt;value_validate = info-&gt;value_validate; /* optional */</span>
    class-&gt;values_cmp = info-&gt;values_cmp;
    g_free (class_data);
  }
  
  static void
  default_value_set_default (GParamSpec *pspec,
<span class="udiff-line-modified-removed">-                GValue     *value)</span>
<span class="udiff-line-modified-added">+          GValue     *value)</span>
  {
    /* value is already zero initialized */
  }
  
  static gint
  default_values_cmp (GParamSpec   *pspec,
<span class="udiff-line-modified-removed">-             const GValue *value1,</span>
<span class="udiff-line-modified-removed">-             const GValue *value2)</span>
<span class="udiff-line-modified-added">+         const GValue *value1,</span>
<span class="udiff-line-modified-added">+         const GValue *value2)</span>
  {
    return memcmp (&amp;value1-&gt;data, &amp;value2-&gt;data, sizeof (value1-&gt;data));
  }
  
  /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1391,11 +1391,11 @@</span>
   *
   * Returns: The new type identifier.
   */
  GType
  g_param_type_register_static (const gchar              *name,
<span class="udiff-line-modified-removed">-                   const GParamSpecTypeInfo *pspec_info)</span>
<span class="udiff-line-modified-added">+             const GParamSpecTypeInfo *pspec_info)</span>
  {
    GTypeInfo info = {
      sizeof (GParamSpecClass),      /* class_size */
      NULL,                          /* base_init */
      NULL,                          /* base_destroy */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1438,11 +1438,11 @@</span>
   *
   * Set the contents of a %G_TYPE_PARAM #GValue to @param.
   */
  void
  g_value_set_param (GValue     *value,
<span class="udiff-line-modified-removed">-            GParamSpec *param)</span>
<span class="udiff-line-modified-added">+        GParamSpec *param)</span>
  {
    g_return_if_fail (G_VALUE_HOLDS_PARAM (value));
    if (param)
      g_return_if_fail (G_IS_PARAM_SPEC (param));
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1462,29 +1462,29 @@</span>
   *
   * Deprecated: 2.4: Use g_value_take_param() instead.
   */
  void
  g_value_set_param_take_ownership (GValue     *value,
<span class="udiff-line-modified-removed">-                   GParamSpec *param)</span>
<span class="udiff-line-modified-added">+           GParamSpec *param)</span>
  {
    g_value_take_param (value, param);
  }
  
  /**
   * g_value_take_param: (skip)
   * @value: a valid #GValue of type %G_TYPE_PARAM
   * @param: (nullable): the #GParamSpec to be set
   *
   * Sets the contents of a %G_TYPE_PARAM #GValue to @param and takes
<span class="udiff-line-modified-removed">-  * over the ownership of the callers reference to @param; the caller</span>
<span class="udiff-line-modified-added">+  * over the ownership of the caller&#39;s reference to @param; the caller</span>
   * doesn&#39;t have to unref it any more.
   *
   * Since: 2.4
   */
  void
  g_value_take_param (GValue     *value,
<span class="udiff-line-modified-removed">-             GParamSpec *param)</span>
<span class="udiff-line-modified-added">+         GParamSpec *param)</span>
  {
    g_return_if_fail (G_VALUE_HOLDS_PARAM (value));
    if (param)
      g_return_if_fail (G_IS_PARAM_SPEC (param));
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1563,12 +1563,11 @@</span>
  
        g_value_init (&amp;default_value, pspec-&gt;value_type);
        g_param_value_set_default (pspec, &amp;default_value);
  
        /* store all but the type */
<span class="udiff-line-modified-removed">-       default_value.g_type = 0;</span>
<span class="udiff-line-removed">-       priv-&gt;default_value = default_value;</span>
<span class="udiff-line-modified-added">+       memcpy (priv-&gt;default_value.data, default_value.data, sizeof (default_value.data));</span>
  
        g_once_init_leave (&amp;priv-&gt;default_value.g_type, pspec-&gt;value_type);
      }
  
    return &amp;priv-&gt;default_value;
</pre>
<center><a href="gobject.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gparam.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>