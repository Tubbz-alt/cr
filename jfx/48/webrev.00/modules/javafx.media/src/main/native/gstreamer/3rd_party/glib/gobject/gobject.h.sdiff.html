<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gobject.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gobject.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gparam.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gobject.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
121  * Returns: Type name of @class. The string is owned by the type system and
122  *  should not be freed.
123  */
124 #define G_OBJECT_CLASS_NAME(class)  (g_type_name (G_OBJECT_CLASS_TYPE (class)))
125 /**
126  * G_VALUE_HOLDS_OBJECT:
127  * @value: a valid #GValue structure
128  *
129  * Checks whether the given #GValue can hold values derived from type %G_TYPE_OBJECT.
130  *
131  * Returns: %TRUE on success.
132  */
133 #define G_VALUE_HOLDS_OBJECT(value) (G_TYPE_CHECK_VALUE_TYPE ((value), G_TYPE_OBJECT))
134 
135 /* --- type macros --- */
136 /**
137  * G_TYPE_INITIALLY_UNOWNED:
138  *
139  * The type for #GInitiallyUnowned.
140  */
<span class="line-modified">141 #define G_TYPE_INITIALLY_UNOWNED          (g_initially_unowned_get_type())</span>
142 /**
143  * G_INITIALLY_UNOWNED:
144  * @object: Object which is subject to casting.
145  *
146  * Casts a #GInitiallyUnowned or derived pointer into a (GInitiallyUnowned*)
147  * pointer. Depending on the current debugging level, this function may invoke
148  * certain runtime checks to identify invalid casts.
149  */
150 #define G_INITIALLY_UNOWNED(object)           (G_TYPE_CHECK_INSTANCE_CAST ((object), G_TYPE_INITIALLY_UNOWNED, GInitiallyUnowned))
151 /**
152  * G_INITIALLY_UNOWNED_CLASS:
153  * @class: a valid #GInitiallyUnownedClass
154  *
155  * Casts a derived #GInitiallyUnownedClass structure into a
156  * #GInitiallyUnownedClass structure.
157  */
158 #define G_INITIALLY_UNOWNED_CLASS(class)      (G_TYPE_CHECK_CLASS_CAST ((class), G_TYPE_INITIALLY_UNOWNED, GInitiallyUnownedClass))
159 /**
160  * G_IS_INITIALLY_UNOWNED:
161  * @object: Instance to check for being a %G_TYPE_INITIALLY_UNOWNED.
</pre>
<hr />
<pre>
217                                          guint         property_id,
218                                          const GValue *value,
219                                          GParamSpec   *pspec);
220 /**
221  * GObjectFinalizeFunc:
222  * @object: the #GObject being finalized
223  *
224  * The type of the @finalize function of #GObjectClass.
225  */
226 typedef void (*GObjectFinalizeFunc)     (GObject      *object);
227 /**
228  * GWeakNotify:
229  * @data: data that was provided when the weak reference was established
230  * @where_the_object_was: the object being finalized
231  *
232  * A #GWeakNotify function can be added to an object as a callback that gets
233  * triggered when the object is finalized. Since the object is already being
234  * finalized when the #GWeakNotify is called, there&#39;s not much you could do
235  * with the object, apart from e.g. using its address as hash-index or the like.
236  */
<span class="line-modified">237 typedef void (*GWeakNotify)     (gpointer      data,</span>
<span class="line-modified">238                                          GObject      *where_the_object_was);</span>
239 /**
240  * GObject:
241  *
242  * All the fields in the GObject structure are private
243  * to the #GObject implementation and should never be accessed directly.
244  */
245 struct  _GObject
246 {
247   GTypeInstance  g_type_instance;
248 
249   /*&lt; private &gt;*/
250   volatile guint ref_count;
251   GData         *qdata;
252 };
253 /**
254  * GObjectClass:
255  * @g_type_class: the parent class
256  * @constructor: the @constructor function is called by g_object_new () to
257  *  complete the object initialization after all the construction properties are
258  *  set. The first thing a @constructor implementation must do is chain up to the
</pre>
<hr />
<pre>
308  *   else
309  *     object = g_object_ref (G_OBJECT (the_singleton));
310  *
311  *   return object;
312  * }
313  * ]|
314  */
315 struct  _GObjectClass
316 {
317   GTypeClass   g_type_class;
318 
319   /*&lt; private &gt;*/
320   GSList      *construct_properties;
321 
322   /*&lt; public &gt;*/
323   /* seldom overidden */
324   GObject*   (*constructor)     (GType                  type,
325                                  guint                  n_construct_properties,
326                                  GObjectConstructParam *construct_properties);
327   /* overridable methods */
<span class="line-modified">328   void       (*set_property)        (GObject        *object,</span>
329                                          guint           property_id,
330                                          const GValue   *value,
331                                          GParamSpec     *pspec);
<span class="line-modified">332   void       (*get_property)        (GObject        *object,</span>
333                                          guint           property_id,
334                                          GValue         *value,
335                                          GParamSpec     *pspec);
<span class="line-modified">336   void       (*dispose)         (GObject        *object);</span>
<span class="line-modified">337   void       (*finalize)        (GObject        *object);</span>
338   /* seldom overidden */
339   void       (*dispatch_properties_changed) (GObject      *object,
<span class="line-modified">340                          guint     n_pspecs,</span>
<span class="line-modified">341                                              GParamSpec  **pspecs);</span>
342   /* signals */
<span class="line-modified">343   void       (*notify)          (GObject    *object,</span>
<span class="line-modified">344                      GParamSpec *pspec);</span>
345 
346   /* called when done constructing */
<span class="line-modified">347   void       (*constructed)     (GObject    *object);</span>
348 
349   /*&lt; private &gt;*/
<span class="line-modified">350   gsize     flags;</span>
351 
352   /* padding */
353   gpointer  pdummy[6];
354 };
355 /**
356  * GObjectConstructParam:
357  * @pspec: the #GParamSpec of the construct parameter
358  * @value: the value to set the parameter to
359  *
360  * The GObjectConstructParam struct is an auxiliary
361  * structure used to hand #GParamSpec/#GValue pairs to the @constructor of
362  * a #GObjectClass.
363  */
364 struct _GObjectConstructParam
365 {
366   GParamSpec *pspec;
367   GValue     *value;
368 };
369 
370 /**
371  * GInitiallyUnowned:
372  *
373  * All the fields in the GInitiallyUnowned structure
374  * are private to the #GInitiallyUnowned implementation and should never be
375  * accessed directly.
376  */
377 /**
378  * GInitiallyUnownedClass:
379  *
380  * The class structure for the GInitiallyUnowned type.
381  */
382 
383 
384 /* --- prototypes --- */
385 GLIB_AVAILABLE_IN_ALL
386 GType       g_initially_unowned_get_type      (void);
387 GLIB_AVAILABLE_IN_ALL
388 void        g_object_class_install_property   (GObjectClass   *oclass,
<span class="line-modified">389                            guint           property_id,</span>
<span class="line-modified">390                            GParamSpec     *pspec);</span>
391 GLIB_AVAILABLE_IN_ALL
392 GParamSpec* g_object_class_find_property      (GObjectClass   *oclass,
<span class="line-modified">393                            const gchar    *property_name);</span>
394 GLIB_AVAILABLE_IN_ALL
395 GParamSpec**g_object_class_list_properties    (GObjectClass   *oclass,
<span class="line-modified">396                            guint          *n_properties);</span>
397 GLIB_AVAILABLE_IN_ALL
398 void        g_object_class_override_property  (GObjectClass   *oclass,
<span class="line-modified">399                            guint           property_id,</span>
<span class="line-modified">400                            const gchar    *name);</span>
401 GLIB_AVAILABLE_IN_ALL
402 void        g_object_class_install_properties (GObjectClass   *oclass,
403                                                guint           n_pspecs,
404                                                GParamSpec    **pspecs);
405 
406 GLIB_AVAILABLE_IN_ALL
407 void        g_object_interface_install_property (gpointer     g_iface,
<span class="line-modified">408                          GParamSpec  *pspec);</span>
409 GLIB_AVAILABLE_IN_ALL
410 GParamSpec* g_object_interface_find_property    (gpointer     g_iface,
<span class="line-modified">411                          const gchar *property_name);</span>
412 GLIB_AVAILABLE_IN_ALL
413 GParamSpec**g_object_interface_list_properties  (gpointer     g_iface,
<span class="line-modified">414                          guint       *n_properties_p);</span>
415 
416 GLIB_AVAILABLE_IN_ALL
417 GType       g_object_get_type                 (void) G_GNUC_CONST;
418 GLIB_AVAILABLE_IN_ALL
419 gpointer    g_object_new                      (GType           object_type,
<span class="line-modified">420                            const gchar    *first_property_name,</span>
<span class="line-modified">421                            ...);</span>
422 GLIB_AVAILABLE_IN_2_54
423 GObject*    g_object_new_with_properties      (GType           object_type,
424                                                guint           n_properties,
425                                                const char     *names[],
426                                                const GValue    values[]);



427 GLIB_DEPRECATED_IN_2_54_FOR(g_object_new_with_properties)
<span class="line-modified">428 gpointer    g_object_newv             (GType           object_type,</span>
<span class="line-modified">429                            guint           n_parameters,</span>
<span class="line-modified">430                                                GParameter     *parameters);</span>



431 GLIB_AVAILABLE_IN_ALL
432 GObject*    g_object_new_valist               (GType           object_type,
<span class="line-modified">433                                                const gchar    *first_property_name,</span>
<span class="line-modified">434                                                va_list         var_args);</span>
435 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">436 void        g_object_set                      (gpointer        object,</span>
<span class="line-modified">437                                                const gchar    *first_property_name,</span>
<span class="line-modified">438                                                ...) G_GNUC_NULL_TERMINATED;</span>
439 GLIB_AVAILABLE_IN_ALL
440 void        g_object_get                      (gpointer        object,
<span class="line-modified">441                                                const gchar    *first_property_name,</span>
<span class="line-modified">442                                                ...) G_GNUC_NULL_TERMINATED;</span>
443 GLIB_AVAILABLE_IN_ALL
444 gpointer    g_object_connect                  (gpointer        object,
<span class="line-modified">445                                                const gchar    *signal_spec,</span>
<span class="line-modified">446                                                ...) G_GNUC_NULL_TERMINATED;</span>
447 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">448 void        g_object_disconnect               (gpointer        object,</span>
<span class="line-modified">449                                                const gchar    *signal_spec,</span>
<span class="line-modified">450                                                ...) G_GNUC_NULL_TERMINATED;</span>
451 GLIB_AVAILABLE_IN_2_54
452 void        g_object_setv                     (GObject        *object,
453                                                guint           n_properties,
454                                                const gchar    *names[],
455                                                const GValue    values[]);
456 GLIB_AVAILABLE_IN_ALL
457 void        g_object_set_valist               (GObject        *object,
<span class="line-modified">458                            const gchar    *first_property_name,</span>
<span class="line-modified">459                            va_list         var_args);</span>
460 GLIB_AVAILABLE_IN_2_54
461 void        g_object_getv                     (GObject        *object,
462                                                guint           n_properties,
463                                                const gchar    *names[],
464                                                GValue          values[]);
465 GLIB_AVAILABLE_IN_ALL
466 void        g_object_get_valist               (GObject        *object,
<span class="line-modified">467                            const gchar    *first_property_name,</span>
<span class="line-modified">468                            va_list         var_args);</span>
469 GLIB_AVAILABLE_IN_ALL
470 void        g_object_set_property             (GObject        *object,
<span class="line-modified">471                            const gchar    *property_name,</span>
<span class="line-modified">472                            const GValue   *value);</span>
473 GLIB_AVAILABLE_IN_ALL
474 void        g_object_get_property             (GObject        *object,
<span class="line-modified">475                            const gchar    *property_name,</span>
<span class="line-modified">476                            GValue         *value);</span>
477 GLIB_AVAILABLE_IN_ALL
478 void        g_object_freeze_notify            (GObject        *object);
479 GLIB_AVAILABLE_IN_ALL
480 void        g_object_notify                   (GObject        *object,
<span class="line-modified">481                            const gchar    *property_name);</span>
482 GLIB_AVAILABLE_IN_ALL
483 void        g_object_notify_by_pspec          (GObject        *object,
<span class="line-modified">484                            GParamSpec     *pspec);</span>
485 GLIB_AVAILABLE_IN_ALL
486 void        g_object_thaw_notify              (GObject        *object);
487 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">488 gboolean    g_object_is_floating              (gpointer        object);</span>
489 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">490 gpointer    g_object_ref_sink                 (gpointer        object);</span>
491 GLIB_AVAILABLE_IN_ALL
492 gpointer    g_object_ref                      (gpointer        object);
493 GLIB_AVAILABLE_IN_ALL
494 void        g_object_unref                    (gpointer        object);
495 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">496 void        g_object_weak_ref             (GObject        *object,</span>
<span class="line-modified">497                                                GWeakNotify     notify,</span>
<span class="line-modified">498                            gpointer        data);</span>
499 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">500 void        g_object_weak_unref           (GObject        *object,</span>
<span class="line-modified">501                                                GWeakNotify     notify,</span>
<span class="line-modified">502                            gpointer        data);</span>
503 GLIB_AVAILABLE_IN_ALL
504 void        g_object_add_weak_pointer         (GObject        *object,
505                                                gpointer       *weak_pointer_location);
506 GLIB_AVAILABLE_IN_ALL
507 void        g_object_remove_weak_pointer      (GObject        *object,
508                                                gpointer       *weak_pointer_location);
509 
510 #if defined(g_has_typeof) &amp;&amp; GLIB_VERSION_MAX_ALLOWED &gt;= GLIB_VERSION_2_56
511 /* Make reference APIs type safe with macros */
512 #define g_object_ref(Obj)      ((__typeof__(Obj)) (g_object_ref) (Obj))
513 #define g_object_ref_sink(Obj) ((__typeof__(Obj)) (g_object_ref_sink) (Obj))
514 #endif
515 
516 /**
517  * GToggleNotify:
518  * @data: Callback data passed to g_object_add_toggle_ref()
519  * @object: The object on which g_object_add_toggle_ref() was called.
520  * @is_last_ref: %TRUE if the toggle reference is now the
521  *  last reference to the object. %FALSE if the toggle
522  *  reference was the last reference and there are now other
523  *  references.
524  *
525  * A callback function used for notification when the state
526  * of a toggle reference changes. See g_object_add_toggle_ref().
527  */
528 typedef void (*GToggleNotify) (gpointer      data,
<span class="line-modified">529                    GObject      *object,</span>
<span class="line-modified">530                    gboolean      is_last_ref);</span>
531 
532 GLIB_AVAILABLE_IN_ALL
533 void g_object_add_toggle_ref    (GObject       *object,
<span class="line-modified">534                  GToggleNotify  notify,</span>
<span class="line-modified">535                  gpointer       data);</span>
536 GLIB_AVAILABLE_IN_ALL
537 void g_object_remove_toggle_ref (GObject       *object,
<span class="line-modified">538                  GToggleNotify  notify,</span>
<span class="line-modified">539                  gpointer       data);</span>
540 
541 GLIB_AVAILABLE_IN_ALL
542 gpointer    g_object_get_qdata                (GObject        *object,
<span class="line-modified">543                            GQuark          quark);</span>
544 GLIB_AVAILABLE_IN_ALL
545 void        g_object_set_qdata                (GObject        *object,
<span class="line-modified">546                            GQuark          quark,</span>
<span class="line-modified">547                            gpointer        data);</span>
548 GLIB_AVAILABLE_IN_ALL
549 void        g_object_set_qdata_full           (GObject        *object,
<span class="line-modified">550                            GQuark          quark,</span>
<span class="line-modified">551                            gpointer        data,</span>
<span class="line-modified">552                            GDestroyNotify  destroy);</span>
553 GLIB_AVAILABLE_IN_ALL
554 gpointer    g_object_steal_qdata              (GObject        *object,
<span class="line-modified">555                            GQuark          quark);</span>
556 
557 GLIB_AVAILABLE_IN_2_34
558 gpointer    g_object_dup_qdata                (GObject        *object,
559                                                GQuark          quark,
560                                                GDuplicateFunc  dup_func,
<span class="line-modified">561                            gpointer         user_data);</span>
562 GLIB_AVAILABLE_IN_2_34
563 gboolean    g_object_replace_qdata            (GObject        *object,
564                                                GQuark          quark,
565                                                gpointer        oldval,
566                                                gpointer        newval,
567                                                GDestroyNotify  destroy,
<span class="line-modified">568                            GDestroyNotify *old_destroy);</span>
569 
570 GLIB_AVAILABLE_IN_ALL
571 gpointer    g_object_get_data                 (GObject        *object,
<span class="line-modified">572                            const gchar    *key);</span>
573 GLIB_AVAILABLE_IN_ALL
574 void        g_object_set_data                 (GObject        *object,
<span class="line-modified">575                            const gchar    *key,</span>
<span class="line-modified">576                            gpointer        data);</span>
577 GLIB_AVAILABLE_IN_ALL
578 void        g_object_set_data_full            (GObject        *object,
<span class="line-modified">579                            const gchar    *key,</span>
<span class="line-modified">580                            gpointer        data,</span>
<span class="line-modified">581                            GDestroyNotify  destroy);</span>
582 GLIB_AVAILABLE_IN_ALL
583 gpointer    g_object_steal_data               (GObject        *object,
<span class="line-modified">584                            const gchar    *key);</span>
585 
586 GLIB_AVAILABLE_IN_2_34
587 gpointer    g_object_dup_data                 (GObject        *object,
588                                                const gchar    *key,
589                                                GDuplicateFunc  dup_func,
<span class="line-modified">590                            gpointer         user_data);</span>
591 GLIB_AVAILABLE_IN_2_34
592 gboolean    g_object_replace_data             (GObject        *object,
593                                                const gchar    *key,
594                                                gpointer        oldval,
595                                                gpointer        newval,
596                                                GDestroyNotify  destroy,
<span class="line-modified">597                            GDestroyNotify *old_destroy);</span>
598 
599 
600 GLIB_AVAILABLE_IN_ALL
601 void        g_object_watch_closure            (GObject        *object,
<span class="line-modified">602                            GClosure       *closure);</span>
603 GLIB_AVAILABLE_IN_ALL
604 GClosure*   g_cclosure_new_object             (GCallback       callback_func,
<span class="line-modified">605                            GObject        *object);</span>
606 GLIB_AVAILABLE_IN_ALL
607 GClosure*   g_cclosure_new_object_swap        (GCallback       callback_func,
<span class="line-modified">608                            GObject        *object);</span>
609 GLIB_AVAILABLE_IN_ALL
610 GClosure*   g_closure_new_object              (guint           sizeof_closure,
<span class="line-modified">611                            GObject        *object);</span>
612 GLIB_AVAILABLE_IN_ALL
613 void        g_value_set_object                (GValue         *value,
<span class="line-modified">614                            gpointer        v_object);</span>
615 GLIB_AVAILABLE_IN_ALL
616 gpointer    g_value_get_object                (const GValue   *value);
617 GLIB_AVAILABLE_IN_ALL
618 gpointer    g_value_dup_object                (const GValue   *value);
619 GLIB_AVAILABLE_IN_ALL
620 gulong      g_signal_connect_object           (gpointer        instance,
<span class="line-modified">621                                                const gchar    *detailed_signal,</span>
<span class="line-modified">622                                                GCallback       c_handler,</span>
<span class="line-modified">623                            gpointer        gobject,</span>
<span class="line-modified">624                                                GConnectFlags   connect_flags);</span>
625 
626 /*&lt; protected &gt;*/
627 GLIB_AVAILABLE_IN_ALL
628 void        g_object_force_floating           (GObject        *object);
629 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">630 void        g_object_run_dispose          (GObject        *object);</span>
631 
632 
633 GLIB_AVAILABLE_IN_ALL
634 void        g_value_take_object               (GValue         *value,
<span class="line-modified">635                            gpointer        v_object);</span>
636 GLIB_DEPRECATED_FOR(g_value_take_object)
637 void        g_value_set_object_take_ownership (GValue         *value,
638                                                gpointer        v_object);
639 
640 GLIB_DEPRECATED
<span class="line-modified">641 gsize       g_object_compat_control       (gsize           what,</span>
<span class="line-modified">642                            gpointer        data);</span>
643 
644 /* --- implementation macros --- */
645 #define G_OBJECT_WARN_INVALID_PSPEC(object, pname, property_id, pspec) \
646 G_STMT_START { \
647   GObject *_glib__object = (GObject*) (object); \
648   GParamSpec *_glib__pspec = (GParamSpec*) (pspec); \
649   guint _glib__property_id = (property_id); \
650   g_warning (&quot;%s:%d: invalid %s id %u for \&quot;%s\&quot; of type &#39;%s&#39; in &#39;%s&#39;&quot;, \
651              __FILE__, __LINE__, \
652              (pname), \
653              _glib__property_id, \
654              _glib__pspec-&gt;name, \
655              g_type_name (G_PARAM_SPEC_TYPE (_glib__pspec)), \
656              G_OBJECT_TYPE_NAME (_glib__object)); \
657 } G_STMT_END
658 /**
659  * G_OBJECT_WARN_INVALID_PROPERTY_ID:
660  * @object: the #GObject on which set_property() or get_property() was called
661  * @property_id: the numeric id of the property
662  * @pspec: the #GParamSpec of the property
</pre>
<hr />
<pre>
721   if (old_object == new_object)
722     return FALSE;
723 
724   if (new_object != NULL)
725     g_object_ref (new_object);
726 
727   *object_ptr = new_object;
728 
729   if (old_object != NULL)
730     g_object_unref (old_object);
731 
732   return TRUE;
733 }
734 
735 #define g_set_object(object_ptr, new_object) \
736  (/* Check types match. */ \
737   0 ? *(object_ptr) = (new_object), FALSE : \
738   (g_set_object) ((GObject **) (object_ptr), (GObject *) (new_object)) \
739  )
740 
































741 /**
742  * g_clear_weak_pointer: (skip)
743  * @weak_pointer_location: The memory address of a pointer
744  *
745  * Clears a weak reference to a #GObject.
746  *
747  * @weak_pointer_location must not be %NULL.
748  *
749  * If the weak reference is %NULL then this function does nothing.
750  * Otherwise, the weak reference to the object is removed for that location
751  * and the pointer is set to %NULL.
752  *
753  * A macro is also included that allows this function to be used without
754  * pointer casts. The function itself is static inline, so its address may vary
755  * between compilation units.
756  *
757  * Since: 2.56
758  */
759 static inline void
760 (g_clear_weak_pointer) (gpointer *weak_pointer_location)
</pre>
</td>
<td>
<hr />
<pre>
121  * Returns: Type name of @class. The string is owned by the type system and
122  *  should not be freed.
123  */
124 #define G_OBJECT_CLASS_NAME(class)  (g_type_name (G_OBJECT_CLASS_TYPE (class)))
125 /**
126  * G_VALUE_HOLDS_OBJECT:
127  * @value: a valid #GValue structure
128  *
129  * Checks whether the given #GValue can hold values derived from type %G_TYPE_OBJECT.
130  *
131  * Returns: %TRUE on success.
132  */
133 #define G_VALUE_HOLDS_OBJECT(value) (G_TYPE_CHECK_VALUE_TYPE ((value), G_TYPE_OBJECT))
134 
135 /* --- type macros --- */
136 /**
137  * G_TYPE_INITIALLY_UNOWNED:
138  *
139  * The type for #GInitiallyUnowned.
140  */
<span class="line-modified">141 #define G_TYPE_INITIALLY_UNOWNED        (g_initially_unowned_get_type())</span>
142 /**
143  * G_INITIALLY_UNOWNED:
144  * @object: Object which is subject to casting.
145  *
146  * Casts a #GInitiallyUnowned or derived pointer into a (GInitiallyUnowned*)
147  * pointer. Depending on the current debugging level, this function may invoke
148  * certain runtime checks to identify invalid casts.
149  */
150 #define G_INITIALLY_UNOWNED(object)           (G_TYPE_CHECK_INSTANCE_CAST ((object), G_TYPE_INITIALLY_UNOWNED, GInitiallyUnowned))
151 /**
152  * G_INITIALLY_UNOWNED_CLASS:
153  * @class: a valid #GInitiallyUnownedClass
154  *
155  * Casts a derived #GInitiallyUnownedClass structure into a
156  * #GInitiallyUnownedClass structure.
157  */
158 #define G_INITIALLY_UNOWNED_CLASS(class)      (G_TYPE_CHECK_CLASS_CAST ((class), G_TYPE_INITIALLY_UNOWNED, GInitiallyUnownedClass))
159 /**
160  * G_IS_INITIALLY_UNOWNED:
161  * @object: Instance to check for being a %G_TYPE_INITIALLY_UNOWNED.
</pre>
<hr />
<pre>
217                                          guint         property_id,
218                                          const GValue *value,
219                                          GParamSpec   *pspec);
220 /**
221  * GObjectFinalizeFunc:
222  * @object: the #GObject being finalized
223  *
224  * The type of the @finalize function of #GObjectClass.
225  */
226 typedef void (*GObjectFinalizeFunc)     (GObject      *object);
227 /**
228  * GWeakNotify:
229  * @data: data that was provided when the weak reference was established
230  * @where_the_object_was: the object being finalized
231  *
232  * A #GWeakNotify function can be added to an object as a callback that gets
233  * triggered when the object is finalized. Since the object is already being
234  * finalized when the #GWeakNotify is called, there&#39;s not much you could do
235  * with the object, apart from e.g. using its address as hash-index or the like.
236  */
<span class="line-modified">237 typedef void (*GWeakNotify)   (gpointer      data,</span>
<span class="line-modified">238            GObject      *where_the_object_was);</span>
239 /**
240  * GObject:
241  *
242  * All the fields in the GObject structure are private
243  * to the #GObject implementation and should never be accessed directly.
244  */
245 struct  _GObject
246 {
247   GTypeInstance  g_type_instance;
248 
249   /*&lt; private &gt;*/
250   volatile guint ref_count;
251   GData         *qdata;
252 };
253 /**
254  * GObjectClass:
255  * @g_type_class: the parent class
256  * @constructor: the @constructor function is called by g_object_new () to
257  *  complete the object initialization after all the construction properties are
258  *  set. The first thing a @constructor implementation must do is chain up to the
</pre>
<hr />
<pre>
308  *   else
309  *     object = g_object_ref (G_OBJECT (the_singleton));
310  *
311  *   return object;
312  * }
313  * ]|
314  */
315 struct  _GObjectClass
316 {
317   GTypeClass   g_type_class;
318 
319   /*&lt; private &gt;*/
320   GSList      *construct_properties;
321 
322   /*&lt; public &gt;*/
323   /* seldom overidden */
324   GObject*   (*constructor)     (GType                  type,
325                                  guint                  n_construct_properties,
326                                  GObjectConstructParam *construct_properties);
327   /* overridable methods */
<span class="line-modified">328   void       (*set_property)    (GObject        *object,</span>
329                                          guint           property_id,
330                                          const GValue   *value,
331                                          GParamSpec     *pspec);
<span class="line-modified">332   void       (*get_property)    (GObject        *object,</span>
333                                          guint           property_id,
334                                          GValue         *value,
335                                          GParamSpec     *pspec);
<span class="line-modified">336   void       (*dispose)     (GObject        *object);</span>
<span class="line-modified">337   void       (*finalize)    (GObject        *object);</span>
338   /* seldom overidden */
339   void       (*dispatch_properties_changed) (GObject      *object,
<span class="line-modified">340                guint     n_pspecs,</span>
<span class="line-modified">341                GParamSpec  **pspecs);</span>
342   /* signals */
<span class="line-modified">343   void       (*notify)      (GObject  *object,</span>
<span class="line-modified">344            GParamSpec *pspec);</span>
345 
346   /* called when done constructing */
<span class="line-modified">347   void       (*constructed)   (GObject  *object);</span>
348 
349   /*&lt; private &gt;*/
<span class="line-modified">350   gsize   flags;</span>
351 
352   /* padding */
353   gpointer  pdummy[6];
354 };
355 /**
356  * GObjectConstructParam:
357  * @pspec: the #GParamSpec of the construct parameter
358  * @value: the value to set the parameter to
359  *
360  * The GObjectConstructParam struct is an auxiliary
361  * structure used to hand #GParamSpec/#GValue pairs to the @constructor of
362  * a #GObjectClass.
363  */
364 struct _GObjectConstructParam
365 {
366   GParamSpec *pspec;
367   GValue     *value;
368 };
369 
370 /**
371  * GInitiallyUnowned:
372  *
373  * All the fields in the GInitiallyUnowned structure
374  * are private to the #GInitiallyUnowned implementation and should never be
375  * accessed directly.
376  */
377 /**
378  * GInitiallyUnownedClass:
379  *
380  * The class structure for the GInitiallyUnowned type.
381  */
382 
383 
384 /* --- prototypes --- */
385 GLIB_AVAILABLE_IN_ALL
386 GType       g_initially_unowned_get_type      (void);
387 GLIB_AVAILABLE_IN_ALL
388 void        g_object_class_install_property   (GObjectClass   *oclass,
<span class="line-modified">389                  guint           property_id,</span>
<span class="line-modified">390                  GParamSpec     *pspec);</span>
391 GLIB_AVAILABLE_IN_ALL
392 GParamSpec* g_object_class_find_property      (GObjectClass   *oclass,
<span class="line-modified">393                  const gchar    *property_name);</span>
394 GLIB_AVAILABLE_IN_ALL
395 GParamSpec**g_object_class_list_properties    (GObjectClass   *oclass,
<span class="line-modified">396                  guint        *n_properties);</span>
397 GLIB_AVAILABLE_IN_ALL
398 void        g_object_class_override_property  (GObjectClass   *oclass,
<span class="line-modified">399                  guint           property_id,</span>
<span class="line-modified">400                  const gchar    *name);</span>
401 GLIB_AVAILABLE_IN_ALL
402 void        g_object_class_install_properties (GObjectClass   *oclass,
403                                                guint           n_pspecs,
404                                                GParamSpec    **pspecs);
405 
406 GLIB_AVAILABLE_IN_ALL
407 void        g_object_interface_install_property (gpointer     g_iface,
<span class="line-modified">408              GParamSpec  *pspec);</span>
409 GLIB_AVAILABLE_IN_ALL
410 GParamSpec* g_object_interface_find_property    (gpointer     g_iface,
<span class="line-modified">411              const gchar *property_name);</span>
412 GLIB_AVAILABLE_IN_ALL
413 GParamSpec**g_object_interface_list_properties  (gpointer     g_iface,
<span class="line-modified">414              guint       *n_properties_p);</span>
415 
416 GLIB_AVAILABLE_IN_ALL
417 GType       g_object_get_type                 (void) G_GNUC_CONST;
418 GLIB_AVAILABLE_IN_ALL
419 gpointer    g_object_new                      (GType           object_type,
<span class="line-modified">420                  const gchar    *first_property_name,</span>
<span class="line-modified">421                  ...);</span>
422 GLIB_AVAILABLE_IN_2_54
423 GObject*    g_object_new_with_properties      (GType           object_type,
424                                                guint           n_properties,
425                                                const char     *names[],
426                                                const GValue    values[]);
<span class="line-added">427 </span>
<span class="line-added">428 G_GNUC_BEGIN_IGNORE_DEPRECATIONS</span>
<span class="line-added">429 </span>
430 GLIB_DEPRECATED_IN_2_54_FOR(g_object_new_with_properties)
<span class="line-modified">431 gpointer    g_object_newv         (GType           object_type,</span>
<span class="line-modified">432                  guint         n_parameters,</span>
<span class="line-modified">433                  GParameter     *parameters);</span>
<span class="line-added">434 </span>
<span class="line-added">435 G_GNUC_END_IGNORE_DEPRECATIONS</span>
<span class="line-added">436 </span>
437 GLIB_AVAILABLE_IN_ALL
438 GObject*    g_object_new_valist               (GType           object_type,
<span class="line-modified">439                  const gchar    *first_property_name,</span>
<span class="line-modified">440                  va_list         var_args);</span>
441 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">442 void      g_object_set                      (gpointer        object,</span>
<span class="line-modified">443                  const gchar    *first_property_name,</span>
<span class="line-modified">444                  ...) G_GNUC_NULL_TERMINATED;</span>
445 GLIB_AVAILABLE_IN_ALL
446 void        g_object_get                      (gpointer        object,
<span class="line-modified">447                  const gchar    *first_property_name,</span>
<span class="line-modified">448                  ...) G_GNUC_NULL_TERMINATED;</span>
449 GLIB_AVAILABLE_IN_ALL
450 gpointer    g_object_connect                  (gpointer        object,
<span class="line-modified">451                  const gchar    *signal_spec,</span>
<span class="line-modified">452                  ...) G_GNUC_NULL_TERMINATED;</span>
453 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">454 void      g_object_disconnect               (gpointer        object,</span>
<span class="line-modified">455                  const gchar    *signal_spec,</span>
<span class="line-modified">456                  ...) G_GNUC_NULL_TERMINATED;</span>
457 GLIB_AVAILABLE_IN_2_54
458 void        g_object_setv                     (GObject        *object,
459                                                guint           n_properties,
460                                                const gchar    *names[],
461                                                const GValue    values[]);
462 GLIB_AVAILABLE_IN_ALL
463 void        g_object_set_valist               (GObject        *object,
<span class="line-modified">464                  const gchar    *first_property_name,</span>
<span class="line-modified">465                  va_list         var_args);</span>
466 GLIB_AVAILABLE_IN_2_54
467 void        g_object_getv                     (GObject        *object,
468                                                guint           n_properties,
469                                                const gchar    *names[],
470                                                GValue          values[]);
471 GLIB_AVAILABLE_IN_ALL
472 void        g_object_get_valist               (GObject        *object,
<span class="line-modified">473                  const gchar    *first_property_name,</span>
<span class="line-modified">474                  va_list         var_args);</span>
475 GLIB_AVAILABLE_IN_ALL
476 void        g_object_set_property             (GObject        *object,
<span class="line-modified">477                  const gchar    *property_name,</span>
<span class="line-modified">478                  const GValue   *value);</span>
479 GLIB_AVAILABLE_IN_ALL
480 void        g_object_get_property             (GObject        *object,
<span class="line-modified">481                  const gchar    *property_name,</span>
<span class="line-modified">482                  GValue         *value);</span>
483 GLIB_AVAILABLE_IN_ALL
484 void        g_object_freeze_notify            (GObject        *object);
485 GLIB_AVAILABLE_IN_ALL
486 void        g_object_notify                   (GObject        *object,
<span class="line-modified">487                  const gchar    *property_name);</span>
488 GLIB_AVAILABLE_IN_ALL
489 void        g_object_notify_by_pspec          (GObject        *object,
<span class="line-modified">490                  GParamSpec     *pspec);</span>
491 GLIB_AVAILABLE_IN_ALL
492 void        g_object_thaw_notify              (GObject        *object);
493 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">494 gboolean    g_object_is_floating            (gpointer        object);</span>
495 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">496 gpointer    g_object_ref_sink               (gpointer        object);</span>
497 GLIB_AVAILABLE_IN_ALL
498 gpointer    g_object_ref                      (gpointer        object);
499 GLIB_AVAILABLE_IN_ALL
500 void        g_object_unref                    (gpointer        object);
501 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">502 void      g_object_weak_ref         (GObject        *object,</span>
<span class="line-modified">503                  GWeakNotify     notify,</span>
<span class="line-modified">504                  gpointer        data);</span>
505 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">506 void      g_object_weak_unref         (GObject        *object,</span>
<span class="line-modified">507                  GWeakNotify     notify,</span>
<span class="line-modified">508                  gpointer        data);</span>
509 GLIB_AVAILABLE_IN_ALL
510 void        g_object_add_weak_pointer         (GObject        *object,
511                                                gpointer       *weak_pointer_location);
512 GLIB_AVAILABLE_IN_ALL
513 void        g_object_remove_weak_pointer      (GObject        *object,
514                                                gpointer       *weak_pointer_location);
515 
516 #if defined(g_has_typeof) &amp;&amp; GLIB_VERSION_MAX_ALLOWED &gt;= GLIB_VERSION_2_56
517 /* Make reference APIs type safe with macros */
518 #define g_object_ref(Obj)      ((__typeof__(Obj)) (g_object_ref) (Obj))
519 #define g_object_ref_sink(Obj) ((__typeof__(Obj)) (g_object_ref_sink) (Obj))
520 #endif
521 
522 /**
523  * GToggleNotify:
524  * @data: Callback data passed to g_object_add_toggle_ref()
525  * @object: The object on which g_object_add_toggle_ref() was called.
526  * @is_last_ref: %TRUE if the toggle reference is now the
527  *  last reference to the object. %FALSE if the toggle
528  *  reference was the last reference and there are now other
529  *  references.
530  *
531  * A callback function used for notification when the state
532  * of a toggle reference changes. See g_object_add_toggle_ref().
533  */
534 typedef void (*GToggleNotify) (gpointer      data,
<span class="line-modified">535              GObject      *object,</span>
<span class="line-modified">536              gboolean      is_last_ref);</span>
537 
538 GLIB_AVAILABLE_IN_ALL
539 void g_object_add_toggle_ref    (GObject       *object,
<span class="line-modified">540          GToggleNotify  notify,</span>
<span class="line-modified">541          gpointer       data);</span>
542 GLIB_AVAILABLE_IN_ALL
543 void g_object_remove_toggle_ref (GObject       *object,
<span class="line-modified">544          GToggleNotify  notify,</span>
<span class="line-modified">545          gpointer       data);</span>
546 
547 GLIB_AVAILABLE_IN_ALL
548 gpointer    g_object_get_qdata                (GObject        *object,
<span class="line-modified">549                  GQuark          quark);</span>
550 GLIB_AVAILABLE_IN_ALL
551 void        g_object_set_qdata                (GObject        *object,
<span class="line-modified">552                  GQuark          quark,</span>
<span class="line-modified">553                  gpointer        data);</span>
554 GLIB_AVAILABLE_IN_ALL
555 void        g_object_set_qdata_full           (GObject        *object,
<span class="line-modified">556                  GQuark          quark,</span>
<span class="line-modified">557                  gpointer        data,</span>
<span class="line-modified">558                  GDestroyNotify  destroy);</span>
559 GLIB_AVAILABLE_IN_ALL
560 gpointer    g_object_steal_qdata              (GObject        *object,
<span class="line-modified">561                  GQuark          quark);</span>
562 
563 GLIB_AVAILABLE_IN_2_34
564 gpointer    g_object_dup_qdata                (GObject        *object,
565                                                GQuark          quark,
566                                                GDuplicateFunc  dup_func,
<span class="line-modified">567                  gpointer         user_data);</span>
568 GLIB_AVAILABLE_IN_2_34
569 gboolean    g_object_replace_qdata            (GObject        *object,
570                                                GQuark          quark,
571                                                gpointer        oldval,
572                                                gpointer        newval,
573                                                GDestroyNotify  destroy,
<span class="line-modified">574                  GDestroyNotify *old_destroy);</span>
575 
576 GLIB_AVAILABLE_IN_ALL
577 gpointer    g_object_get_data                 (GObject        *object,
<span class="line-modified">578                  const gchar    *key);</span>
579 GLIB_AVAILABLE_IN_ALL
580 void        g_object_set_data                 (GObject        *object,
<span class="line-modified">581                  const gchar    *key,</span>
<span class="line-modified">582                  gpointer        data);</span>
583 GLIB_AVAILABLE_IN_ALL
584 void        g_object_set_data_full            (GObject        *object,
<span class="line-modified">585                  const gchar    *key,</span>
<span class="line-modified">586                  gpointer        data,</span>
<span class="line-modified">587                  GDestroyNotify  destroy);</span>
588 GLIB_AVAILABLE_IN_ALL
589 gpointer    g_object_steal_data               (GObject        *object,
<span class="line-modified">590                  const gchar    *key);</span>
591 
592 GLIB_AVAILABLE_IN_2_34
593 gpointer    g_object_dup_data                 (GObject        *object,
594                                                const gchar    *key,
595                                                GDuplicateFunc  dup_func,
<span class="line-modified">596                  gpointer         user_data);</span>
597 GLIB_AVAILABLE_IN_2_34
598 gboolean    g_object_replace_data             (GObject        *object,
599                                                const gchar    *key,
600                                                gpointer        oldval,
601                                                gpointer        newval,
602                                                GDestroyNotify  destroy,
<span class="line-modified">603                  GDestroyNotify *old_destroy);</span>
604 
605 
606 GLIB_AVAILABLE_IN_ALL
607 void        g_object_watch_closure            (GObject        *object,
<span class="line-modified">608                  GClosure       *closure);</span>
609 GLIB_AVAILABLE_IN_ALL
610 GClosure*   g_cclosure_new_object             (GCallback       callback_func,
<span class="line-modified">611                  GObject        *object);</span>
612 GLIB_AVAILABLE_IN_ALL
613 GClosure*   g_cclosure_new_object_swap        (GCallback       callback_func,
<span class="line-modified">614                  GObject        *object);</span>
615 GLIB_AVAILABLE_IN_ALL
616 GClosure*   g_closure_new_object              (guint           sizeof_closure,
<span class="line-modified">617                  GObject        *object);</span>
618 GLIB_AVAILABLE_IN_ALL
619 void        g_value_set_object                (GValue         *value,
<span class="line-modified">620                  gpointer        v_object);</span>
621 GLIB_AVAILABLE_IN_ALL
622 gpointer    g_value_get_object                (const GValue   *value);
623 GLIB_AVAILABLE_IN_ALL
624 gpointer    g_value_dup_object                (const GValue   *value);
625 GLIB_AVAILABLE_IN_ALL
626 gulong      g_signal_connect_object           (gpointer        instance,
<span class="line-modified">627                  const gchar    *detailed_signal,</span>
<span class="line-modified">628                  GCallback       c_handler,</span>
<span class="line-modified">629                  gpointer        gobject,</span>
<span class="line-modified">630                  GConnectFlags   connect_flags);</span>
631 
632 /*&lt; protected &gt;*/
633 GLIB_AVAILABLE_IN_ALL
634 void        g_object_force_floating           (GObject        *object);
635 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">636 void        g_object_run_dispose        (GObject        *object);</span>
637 
638 
639 GLIB_AVAILABLE_IN_ALL
640 void        g_value_take_object               (GValue         *value,
<span class="line-modified">641                  gpointer        v_object);</span>
642 GLIB_DEPRECATED_FOR(g_value_take_object)
643 void        g_value_set_object_take_ownership (GValue         *value,
644                                                gpointer        v_object);
645 
646 GLIB_DEPRECATED
<span class="line-modified">647 gsize     g_object_compat_control       (gsize         what,</span>
<span class="line-modified">648                  gpointer        data);</span>
649 
650 /* --- implementation macros --- */
651 #define G_OBJECT_WARN_INVALID_PSPEC(object, pname, property_id, pspec) \
652 G_STMT_START { \
653   GObject *_glib__object = (GObject*) (object); \
654   GParamSpec *_glib__pspec = (GParamSpec*) (pspec); \
655   guint _glib__property_id = (property_id); \
656   g_warning (&quot;%s:%d: invalid %s id %u for \&quot;%s\&quot; of type &#39;%s&#39; in &#39;%s&#39;&quot;, \
657              __FILE__, __LINE__, \
658              (pname), \
659              _glib__property_id, \
660              _glib__pspec-&gt;name, \
661              g_type_name (G_PARAM_SPEC_TYPE (_glib__pspec)), \
662              G_OBJECT_TYPE_NAME (_glib__object)); \
663 } G_STMT_END
664 /**
665  * G_OBJECT_WARN_INVALID_PROPERTY_ID:
666  * @object: the #GObject on which set_property() or get_property() was called
667  * @property_id: the numeric id of the property
668  * @pspec: the #GParamSpec of the property
</pre>
<hr />
<pre>
727   if (old_object == new_object)
728     return FALSE;
729 
730   if (new_object != NULL)
731     g_object_ref (new_object);
732 
733   *object_ptr = new_object;
734 
735   if (old_object != NULL)
736     g_object_unref (old_object);
737 
738   return TRUE;
739 }
740 
741 #define g_set_object(object_ptr, new_object) \
742  (/* Check types match. */ \
743   0 ? *(object_ptr) = (new_object), FALSE : \
744   (g_set_object) ((GObject **) (object_ptr), (GObject *) (new_object)) \
745  )
746 
<span class="line-added">747 /**</span>
<span class="line-added">748  * g_assert_finalize_object: (skip)</span>
<span class="line-added">749  * @object: (transfer full) (type GObject.Object): an object</span>
<span class="line-added">750  *</span>
<span class="line-added">751  * Assert that @object is non-%NULL, then release one reference to it with</span>
<span class="line-added">752  * g_object_unref() and assert that it has been finalized (i.e. that there</span>
<span class="line-added">753  * are no more references).</span>
<span class="line-added">754  *</span>
<span class="line-added">755  * If assertions are disabled via `G_DISABLE_ASSERT`,</span>
<span class="line-added">756  * this macro just calls g_object_unref() without any further checks.</span>
<span class="line-added">757  *</span>
<span class="line-added">758  * This macro should only be used in regression tests.</span>
<span class="line-added">759  *</span>
<span class="line-added">760  * Since: 2.62</span>
<span class="line-added">761  */</span>
<span class="line-added">762 static inline void</span>
<span class="line-added">763 (g_assert_finalize_object) (GObject *object)</span>
<span class="line-added">764 {</span>
<span class="line-added">765   gpointer weak_pointer = object;</span>
<span class="line-added">766 </span>
<span class="line-added">767   g_assert_true (G_IS_OBJECT (weak_pointer));</span>
<span class="line-added">768   g_object_add_weak_pointer (object, &amp;weak_pointer);</span>
<span class="line-added">769   g_object_unref (weak_pointer);</span>
<span class="line-added">770   g_assert_null (weak_pointer);</span>
<span class="line-added">771 }</span>
<span class="line-added">772 </span>
<span class="line-added">773 #ifdef G_DISABLE_ASSERT</span>
<span class="line-added">774 #define g_assert_finalize_object(object) g_object_unref (object)</span>
<span class="line-added">775 #else</span>
<span class="line-added">776 #define g_assert_finalize_object(object) (g_assert_finalize_object ((GObject *) object))</span>
<span class="line-added">777 #endif</span>
<span class="line-added">778 </span>
779 /**
780  * g_clear_weak_pointer: (skip)
781  * @weak_pointer_location: The memory address of a pointer
782  *
783  * Clears a weak reference to a #GObject.
784  *
785  * @weak_pointer_location must not be %NULL.
786  *
787  * If the weak reference is %NULL then this function does nothing.
788  * Otherwise, the weak reference to the object is removed for that location
789  * and the pointer is set to %NULL.
790  *
791  * A macro is also included that allows this function to be used without
792  * pointer casts. The function itself is static inline, so its address may vary
793  * between compilation units.
794  *
795  * Since: 2.56
796  */
797 static inline void
798 (g_clear_weak_pointer) (gpointer *weak_pointer_location)
</pre>
</td>
</tr>
</table>
<center><a href="gobject.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gparam.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>