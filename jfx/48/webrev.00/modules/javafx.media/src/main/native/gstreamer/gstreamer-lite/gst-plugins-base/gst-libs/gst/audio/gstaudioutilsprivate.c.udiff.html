<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/audio/gstaudioutilsprivate.c</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gstaudiosrc.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="gstaudioutilsprivate.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/audio/gstaudioutilsprivate.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -21,15 +21,15 @@</span>
  
  #ifdef HAVE_CONFIG_H
  #include &quot;config.h&quot;
  #endif
  
<span class="udiff-line-modified-removed">- #ifdef _WIN32</span>
<span class="udiff-line-modified-added">+ #include &lt;gst/audio/audio.h&gt;</span>
<span class="udiff-line-added">+ #ifdef G_OS_WIN32</span>
  #include &lt;windows.h&gt;
  #endif
  
<span class="udiff-line-removed">- #include &lt;gst/audio/audio.h&gt;</span>
  #include &quot;gstaudioutilsprivate.h&quot;
  
  /*
   * Takes caps and copies its audio fields to tmpl_caps
   */
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -215,27 +215,27 @@</span>
  
  exit:
    return res;
  }
  
<span class="udiff-line-modified-removed">- #ifdef _WIN32</span>
<span class="udiff-line-modified-added">+ #ifdef G_OS_WIN32</span>
  /* *INDENT-OFF* */
  static struct
  {
    HMODULE dll;
    gboolean tried_loading;
  
<span class="udiff-line-modified-removed">-     HANDLE (WINAPI * AvSetMmThreadCharacteristics) (LPCSTR, LPDWORD);</span>
<span class="udiff-line-modified-removed">-     BOOL (WINAPI * AvRevertMmThreadCharacteristics) (HANDLE);</span>
<span class="udiff-line-modified-added">+   FARPROC AvSetMmThreadCharacteristics;</span>
<span class="udiff-line-modified-added">+   FARPROC AvRevertMmThreadCharacteristics;</span>
  } _gst_audio_avrt_tbl = { 0 };
  /* *INDENT-ON* */
  #endif
  
  static gboolean
  __gst_audio_init_thread_priority (void)
  {
<span class="udiff-line-modified-removed">- #ifdef _WIN32</span>
<span class="udiff-line-modified-added">+ #ifdef G_OS_WIN32</span>
    if (_gst_audio_avrt_tbl.tried_loading)
      return _gst_audio_avrt_tbl.dll != NULL;
  
    if (!_gst_audio_avrt_tbl.dll)
      _gst_audio_avrt_tbl.dll = LoadLibrary (TEXT (&quot;avrt.dll&quot;));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -259,21 +259,24 @@</span>
  }
  
  /*
   * Increases the priority of the thread it&#39;s called from
   */
<span class="udiff-line-modified-removed">- gpointer</span>
<span class="udiff-line-modified-added">+ gboolean</span>
  __gst_audio_set_thread_priority (void)
  {
<span class="udiff-line-added">+ #ifdef G_OS_WIN32</span>
<span class="udiff-line-added">+   DWORD taskIndex = 0;</span>
<span class="udiff-line-added">+ #endif</span>
<span class="udiff-line-added">+ </span>
    if (!__gst_audio_init_thread_priority ())
<span class="udiff-line-modified-removed">-     return NULL;</span>
<span class="udiff-line-modified-added">+     return FALSE;</span>
  
<span class="udiff-line-modified-removed">- #ifdef _WIN32</span>
<span class="udiff-line-removed">-   DWORD taskIndex = 0;</span>
<span class="udiff-line-modified-added">+ #ifdef G_OS_WIN32</span>
    /* This is only used from ringbuffer thread functions, so we don&#39;t need to
     * ever need to revert the thread priorities. */
    return _gst_audio_avrt_tbl.AvSetMmThreadCharacteristics (TEXT (&quot;Pro Audio&quot;),
<span class="udiff-line-modified-removed">-       &amp;taskIndex);</span>
<span class="udiff-line-modified-added">+       &amp;taskIndex) != 0;</span>
  #else
<span class="udiff-line-modified-removed">-   return NULL;</span>
<span class="udiff-line-modified-added">+   return TRUE;</span>
  #endif
  }
</pre>
<center><a href="gstaudiosrc.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="gstaudioutilsprivate.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>