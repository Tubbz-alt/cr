<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gunicollate.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gunicodeprivate.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gunidecomp.c.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gunicollate.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -18,11 +18,11 @@</span>
  
  #include &quot;config.h&quot;
  
  #include &lt;locale.h&gt;
  #include &lt;string.h&gt;
<span class="udiff-line-modified-removed">- #ifdef __STDC_ISO_10646__</span>
<span class="udiff-line-modified-added">+ #ifdef HAVE_WCHAR_H</span>
  #include &lt;wchar.h&gt;
  #endif
  
  #ifdef HAVE_CARBON
  #include &lt;CoreServices/CoreServices.h&gt;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -33,21 +33,22 @@</span>
  #include &quot;gunicodeprivate.h&quot;
  #include &quot;gstring.h&quot;
  #include &quot;gstrfuncs.h&quot;
  #include &quot;gtestutils.h&quot;
  #include &quot;gcharset.h&quot;
<span class="udiff-line-removed">- #ifndef __STDC_ISO_10646__</span>
  #include &quot;gconvert.h&quot;
<span class="udiff-line-removed">- #endif</span>
  
<span class="udiff-line-added">+ #if SIZEOF_WCHAR_T == 4 &amp;&amp; defined(__STDC_ISO_10646__)</span>
<span class="udiff-line-added">+ #define GUNICHAR_EQUALS_WCHAR_T 1</span>
<span class="udiff-line-added">+ #endif</span>
  
  #ifdef _MSC_VER
  /* Workaround for bug in MSVCR80.DLL */
  static gsize
  msc_strxfrm_wrapper (char       *string1,
<span class="udiff-line-modified-removed">-              const char *string2,</span>
<span class="udiff-line-modified-removed">-              gsize       count)</span>
<span class="udiff-line-modified-added">+          const char *string2,</span>
<span class="udiff-line-modified-added">+          gsize       count)</span>
  {
    if (!string1 || count &lt;= 0)
      {
        char tmp;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -73,11 +74,11 @@</span>
   * Returns: &lt; 0 if @str1 compares before @str2,
   *   0 if they compare equal, &gt; 0 if @str1 compares after @str2.
   **/
  gint
  g_utf8_collate (const gchar *str1,
<span class="udiff-line-modified-removed">-         const gchar *str2)</span>
<span class="udiff-line-modified-added">+     const gchar *str2)</span>
  {
    gint result;
  
  #ifdef HAVE_CARBON
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -99,11 +100,11 @@</span>
    result = retval;
  
    g_free (str2_utf16);
    g_free (str1_utf16);
  
<span class="udiff-line-modified-removed">- #elif defined(__STDC_ISO_10646__)</span>
<span class="udiff-line-modified-added">+ #elif defined(HAVE_WCHAR_H) &amp;&amp; defined(GUNICHAR_EQUALS_WCHAR_T)</span>
  
    gunichar *str1_norm;
    gunichar *str2_norm;
  
    g_return_val_if_fail (str1 != NULL, 0);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -115,11 +116,11 @@</span>
    result = wcscoll ((wchar_t *)str1_norm, (wchar_t *)str2_norm);
  
    g_free (str1_norm);
    g_free (str2_norm);
  
<span class="udiff-line-modified-removed">- #else /* !__STDC_ISO_10646__ */</span>
<span class="udiff-line-modified-added">+ #else</span>
  
    const gchar *charset;
    gchar *str1_norm;
    gchar *str2_norm;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -137,31 +138,31 @@</span>
      {
        gchar *str1_locale = g_convert (str1_norm, -1, charset, &quot;UTF-8&quot;, NULL, NULL, NULL);
        gchar *str2_locale = g_convert (str2_norm, -1, charset, &quot;UTF-8&quot;, NULL, NULL, NULL);
  
        if (str1_locale &amp;&amp; str2_locale)
<span class="udiff-line-modified-removed">-     result =  strcoll (str1_locale, str2_locale);</span>
<span class="udiff-line-modified-added">+   result =  strcoll (str1_locale, str2_locale);</span>
        else if (str1_locale)
<span class="udiff-line-modified-removed">-     result = -1;</span>
<span class="udiff-line-modified-added">+   result = -1;</span>
        else if (str2_locale)
<span class="udiff-line-modified-removed">-     result = 1;</span>
<span class="udiff-line-modified-added">+   result = 1;</span>
        else
<span class="udiff-line-modified-removed">-     result = strcmp (str1_norm, str2_norm);</span>
<span class="udiff-line-modified-added">+   result = strcmp (str1_norm, str2_norm);</span>
  
        g_free (str1_locale);
        g_free (str2_locale);
      }
  
    g_free (str1_norm);
    g_free (str2_norm);
  
<span class="udiff-line-modified-removed">- #endif /* __STDC_ISO_10646__ */</span>
<span class="udiff-line-modified-added">+ #endif</span>
  
    return result;
  }
  
<span class="udiff-line-modified-removed">- #if defined(__STDC_ISO_10646__)</span>
<span class="udiff-line-modified-added">+ #if defined(HAVE_WCHAR_H) &amp;&amp; defined(GUNICHAR_EQUALS_WCHAR_T)</span>
  /* We need UTF-8 encoding of numbers to encode the weights if
   * we are using wcsxfrm. However, we aren&#39;t encoding Unicode
   * characters, so we can&#39;t simply use g_unichar_to_utf8.
   *
   * The following routine is taken (with modification) from GNU
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -176,11 +177,11 @@</span>
    int retval;
  
    if (val &lt; 0x80)
      {
        if (buf)
<span class="udiff-line-modified-removed">-     *buf++ = (char) val;</span>
<span class="udiff-line-modified-added">+   *buf++ = (char) val;</span>
        retval = 1;
      }
    else
      {
        int step;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -189,26 +190,26 @@</span>
          if ((val &amp; (~(guint32)0 &lt;&lt; (5 * step + 1))) == 0)
            break;
        retval = step;
  
        if (buf)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       *buf = (unsigned char) (~0xff &gt;&gt; step);</span>
<span class="udiff-line-modified-removed">-       --step;</span>
<span class="udiff-line-modified-removed">-       do</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           buf[step] = 0x80 | (val &amp; 0x3f);</span>
<span class="udiff-line-modified-removed">-           val &gt;&gt;= 6;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-       while (--step &gt; 0);</span>
<span class="udiff-line-modified-removed">-       *buf |= val;</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     *buf = (unsigned char) (~0xff &gt;&gt; step);</span>
<span class="udiff-line-modified-added">+     --step;</span>
<span class="udiff-line-modified-added">+     do</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         buf[step] = 0x80 | (val &amp; 0x3f);</span>
<span class="udiff-line-modified-added">+         val &gt;&gt;= 6;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+     while (--step &gt; 0);</span>
<span class="udiff-line-modified-added">+     *buf |= val;</span>
<span class="udiff-line-modified-added">+   }</span>
      }
  
    return retval;
  }
<span class="udiff-line-modified-removed">- #endif /* __STDC_ISO_10646__ */</span>
<span class="udiff-line-modified-added">+ #endif</span>
  
  #ifdef HAVE_CARBON
  
  static gchar *
  collate_key_to_string (UCCollationValue *key,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -371,20 +372,20 @@</span>
   * Returns: a newly allocated string. This string should
   *   be freed with g_free() when you are done with it.
   **/
  gchar *
  g_utf8_collate_key (const gchar *str,
<span class="udiff-line-modified-removed">-             gssize       len)</span>
<span class="udiff-line-modified-added">+         gssize       len)</span>
  {
    gchar *result;
  
  #ifdef HAVE_CARBON
  
    g_return_val_if_fail (str != NULL, NULL);
    result = carbon_collate_key (str, len);
  
<span class="udiff-line-modified-removed">- #elif defined(__STDC_ISO_10646__)</span>
<span class="udiff-line-modified-added">+ #elif defined(HAVE_WCHAR_H) &amp;&amp; defined(GUNICHAR_EQUALS_WCHAR_T)</span>
  
    gsize xfrm_len;
    gunichar *str_norm;
    wchar_t *result_wc;
    gsize i;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -410,11 +411,11 @@</span>
  
    g_free (result_wc);
    g_free (str_norm);
  
    return result;
<span class="udiff-line-modified-removed">- #else /* !__STDC_ISO_10646__ */</span>
<span class="udiff-line-modified-added">+ #else</span>
  
    gsize xfrm_len;
    const gchar *charset;
    gchar *str_norm;
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -436,26 +437,26 @@</span>
    else
      {
        gchar *str_locale = g_convert (str_norm, -1, charset, &quot;UTF-8&quot;, NULL, NULL, NULL);
  
        if (str_locale)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       xfrm_len = strxfrm (NULL, str_locale, 0);</span>
<span class="udiff-line-modified-removed">-       if (xfrm_len &lt; 0 || xfrm_len &gt;= G_MAXINT - 2)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           g_free (str_locale);</span>
<span class="udiff-line-modified-removed">-           str_locale = NULL;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     xfrm_len = strxfrm (NULL, str_locale, 0);</span>
<span class="udiff-line-modified-added">+     if (xfrm_len &lt; 0 || xfrm_len &gt;= G_MAXINT - 2)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         g_free (str_locale);</span>
<span class="udiff-line-modified-added">+         str_locale = NULL;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+   }</span>
        if (str_locale)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-       result = g_malloc (xfrm_len + 2);</span>
<span class="udiff-line-modified-removed">-       result[0] = &#39;A&#39;;</span>
<span class="udiff-line-modified-removed">-       strxfrm (result + 1, str_locale, xfrm_len + 1);</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+     result = g_malloc (xfrm_len + 2);</span>
<span class="udiff-line-modified-added">+     result[0] = &#39;A&#39;;</span>
<span class="udiff-line-modified-added">+     strxfrm (result + 1, str_locale, xfrm_len + 1);</span>
  
<span class="udiff-line-modified-removed">-       g_free (str_locale);</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+     g_free (str_locale);</span>
<span class="udiff-line-modified-added">+   }</span>
      }
  
    if (!result)
      {
        xfrm_len = strlen (str_norm);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -464,11 +465,11 @@</span>
        memcpy (result + 1, str_norm, xfrm_len);
        result[xfrm_len+1] = &#39;\0&#39;;
      }
  
    g_free (str_norm);
<span class="udiff-line-modified-removed">- #endif /* __STDC_ISO_10646__ */</span>
<span class="udiff-line-modified-added">+ #endif</span>
  
    return result;
  }
  
  /* This is a collation key that is very very likely to sort before any
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -500,11 +501,11 @@</span>
   *
   * Since: 2.8
   */
  gchar *
  g_utf8_collate_key_for_filename (const gchar *str,
<span class="udiff-line-modified-removed">-                  gssize       len)</span>
<span class="udiff-line-modified-added">+          gssize       len)</span>
  {
  #ifndef HAVE_CARBON
    GString *result;
    GString *append;
    const gchar *p;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -570,101 +571,101 @@</span>
  
    /* No need to use utf8 functions, since we&#39;re only looking for ascii chars */
    for (prev = p = str; p &lt; end; p++)
      {
        switch (*p)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-     case &#39;.&#39;:</span>
<span class="udiff-line-modified-removed">-       if (prev != p)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           collate_key = g_utf8_collate_key (prev, p - prev);</span>
<span class="udiff-line-modified-removed">-           g_string_append (result, collate_key);</span>
<span class="udiff-line-modified-removed">-           g_free (collate_key);</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       g_string_append (result, COLLATION_SENTINEL &quot;\1&quot;);</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       /* skip the dot */</span>
<span class="udiff-line-modified-removed">-       prev = p + 1;</span>
<span class="udiff-line-modified-removed">-       break;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-     case &#39;0&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;1&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;2&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;3&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;4&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;5&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;6&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;7&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;8&#39;:</span>
<span class="udiff-line-modified-removed">-     case &#39;9&#39;:</span>
<span class="udiff-line-modified-removed">-       if (prev != p)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           collate_key = g_utf8_collate_key (prev, p - prev);</span>
<span class="udiff-line-modified-removed">-           g_string_append (result, collate_key);</span>
<span class="udiff-line-modified-removed">-           g_free (collate_key);</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       g_string_append (result, COLLATION_SENTINEL &quot;\2&quot;);</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       prev = p;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       /* write d-1 colons */</span>
<span class="udiff-line-modified-removed">-       if (*p == &#39;0&#39;)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           leading_zeros = 1;</span>
<span class="udiff-line-modified-removed">-           digits = 0;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">-       else</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           leading_zeros = 0;</span>
<span class="udiff-line-modified-removed">-           digits = 1;</span>
<span class="udiff-line-modified-removed">-         }</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-       while (++p &lt; end)</span>
<span class="udiff-line-modified-removed">-         {</span>
<span class="udiff-line-modified-removed">-           if (*p == &#39;0&#39; &amp;&amp; !digits)</span>
<span class="udiff-line-modified-removed">-         ++leading_zeros;</span>
<span class="udiff-line-modified-removed">-           else if (g_ascii_isdigit(*p))</span>
<span class="udiff-line-modified-removed">-         ++digits;</span>
<span class="udiff-line-modified-removed">-           else</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+   case &#39;.&#39;:</span>
<span class="udiff-line-modified-added">+     if (prev != p)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         collate_key = g_utf8_collate_key (prev, p - prev);</span>
<span class="udiff-line-modified-added">+         g_string_append (result, collate_key);</span>
<span class="udiff-line-modified-added">+         g_free (collate_key);</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     g_string_append (result, COLLATION_SENTINEL &quot;\1&quot;);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     /* skip the dot */</span>
<span class="udiff-line-modified-added">+     prev = p + 1;</span>
<span class="udiff-line-modified-added">+     break;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   case &#39;0&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;1&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;2&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;3&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;4&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;5&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;6&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;7&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;8&#39;:</span>
<span class="udiff-line-modified-added">+   case &#39;9&#39;:</span>
<span class="udiff-line-modified-added">+     if (prev != p)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         collate_key = g_utf8_collate_key (prev, p - prev);</span>
<span class="udiff-line-modified-added">+         g_string_append (result, collate_key);</span>
<span class="udiff-line-modified-added">+         g_free (collate_key);</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     g_string_append (result, COLLATION_SENTINEL &quot;\2&quot;);</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     prev = p;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     /* write d-1 colons */</span>
<span class="udiff-line-modified-added">+     if (*p == &#39;0&#39;)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         leading_zeros = 1;</span>
<span class="udiff-line-modified-added">+         digits = 0;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+     else</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         leading_zeros = 0;</span>
<span class="udiff-line-modified-added">+         digits = 1;</span>
<span class="udiff-line-modified-added">+       }</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     while (++p &lt; end)</span>
<span class="udiff-line-modified-added">+       {</span>
<span class="udiff-line-modified-added">+         if (*p == &#39;0&#39; &amp;&amp; !digits)</span>
<span class="udiff-line-modified-added">+     ++leading_zeros;</span>
<span class="udiff-line-modified-added">+         else if (g_ascii_isdigit(*p))</span>
<span class="udiff-line-modified-added">+     ++digits;</span>
<span class="udiff-line-modified-added">+         else</span>
                  {
<span class="udiff-line-modified-removed">-           /* count an all-zero sequence as</span>
<span class="udiff-line-modified-added">+       /* count an all-zero sequence as</span>
                     * one digit plus leading zeros
                     */
                if (!digits)
                      {
                        ++digits;
                        --leading_zeros;
                      }
<span class="udiff-line-removed">-           break;</span>
<span class="udiff-line-removed">-                 }</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       while (digits &gt; 1)</span>
<span class="udiff-line-removed">-         {</span>
<span class="udiff-line-removed">-           g_string_append_c (result, &#39;:&#39;);</span>
<span class="udiff-line-removed">-           --digits;</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       if (leading_zeros &gt; 0)</span>
<span class="udiff-line-removed">-         {</span>
<span class="udiff-line-removed">-           g_string_append_c (append, (char)leading_zeros);</span>
<span class="udiff-line-removed">-           prev += leading_zeros;</span>
<span class="udiff-line-removed">-         }</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       /* write the number itself */</span>
<span class="udiff-line-removed">-       g_string_append_len (result, prev, p - prev);</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-       prev = p;</span>
<span class="udiff-line-removed">-       --p;    /* go one step back to avoid disturbing outer loop */</span>
<span class="udiff-line-removed">-       break;</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">-     default:</span>
<span class="udiff-line-removed">-       /* other characters just accumulate */</span>
        break;
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+                 }</span>
<span class="udiff-line-added">+       }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     while (digits &gt; 1)</span>
<span class="udiff-line-added">+       {</span>
<span class="udiff-line-added">+         g_string_append_c (result, &#39;:&#39;);</span>
<span class="udiff-line-added">+         --digits;</span>
<span class="udiff-line-added">+       }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if (leading_zeros &gt; 0)</span>
<span class="udiff-line-added">+       {</span>
<span class="udiff-line-added">+         g_string_append_c (append, (char)leading_zeros);</span>
<span class="udiff-line-added">+         prev += leading_zeros;</span>
<span class="udiff-line-added">+       }</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /* write the number itself */</span>
<span class="udiff-line-added">+     g_string_append_len (result, prev, p - prev);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     prev = p;</span>
<span class="udiff-line-added">+     --p;    /* go one step back to avoid disturbing outer loop */</span>
<span class="udiff-line-added">+     break;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+   default:</span>
<span class="udiff-line-added">+     /* other characters just accumulate */</span>
<span class="udiff-line-added">+     break;</span>
<span class="udiff-line-added">+   }</span>
      }
  
    if (prev != p)
      {
        collate_key = g_utf8_collate_key (prev, p - prev);
</pre>
<center><a href="gunicodeprivate.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gunidecomp.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>