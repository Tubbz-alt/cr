<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gchecksum.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gcharset.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gconstructor.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gchecksum.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 175,12 ***</span>
  
  static gchar *
  digest_to_string (guint8 *digest,
                    gsize   digest_len)
  {
<span class="line-modified">!   gint len = digest_len * 2;</span>
<span class="line-removed">-   gint i;</span>
    gchar *retval;
  
    retval = g_new (gchar, len + 1);
  
    for (i = 0; i &lt; digest_len; i++)
<span class="line-new-header">--- 175,11 ---</span>
  
  static gchar *
  digest_to_string (guint8 *digest,
                    gsize   digest_len)
  {
<span class="line-modified">!   gsize i, len = digest_len * 2;</span>
    gchar *retval;
  
    retval = g_new (gchar, len + 1);
  
    for (i = 0; i &lt; digest_len; i++)
</pre>
<hr />
<pre>
<span class="line-old-header">*** 461,11 ***</span>
   * SHA-1 Checksum
   */
  
  /* The following implementation comes from D-Bus dbus-sha.c. I&#39;ve changed
   * it to use GLib types and to work more like the MD5 implementation above.
<span class="line-modified">!  * I left the comments to have an history of this code.</span>
   *      -- Emmanuele Bassi, ebassi@gnome.org
   */
  
  /* The following comments have the history of where this code
   * comes from. I actually copied it from GNet in GNOME CVS.
<span class="line-new-header">--- 460,11 ---</span>
   * SHA-1 Checksum
   */
  
  /* The following implementation comes from D-Bus dbus-sha.c. I&#39;ve changed
   * it to use GLib types and to work more like the MD5 implementation above.
<span class="line-modified">!  * I left the comments to have a history of this code.</span>
   *      -- Emmanuele Bassi, ebassi@gnome.org
   */
  
  /* The following comments have the history of where this code
   * comes from. I actually copied it from GNet in GNOME CVS.
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1088,17 ***</span>
  /*
   * SHA-384, SHA-512, SHA-512/224 and SHA-512/256 Checksums
   *
   * Implemented following FIPS-180-4 standard at
   * http://csrc.nist.gov/publications/fips/fips180-4/fips180-4.pdf.
<span class="line-modified">!  * References in the form [�x.y.z] map to sections in that document.</span>
   *
   *   Author(s): Eduardo Lima Mitev &lt;elima@igalia.com&gt;
   *              Igor Gnatenko &lt;ignatenko@src.gnome.org&gt;
   */
  
<span class="line-modified">! /* SHA-384, SHA-512, SHA-512/224 and SHA-512/256 functions [�4.1.3] */</span>
  #define Ch(x,y,z)  ((x &amp; y) ^ (~x &amp; z))
  #define Maj(x,y,z) ((x &amp; y) ^ (x &amp; z) ^ (y &amp; z))
  #define SHR(n,x)   (x &gt;&gt; n)
  #define ROTR(n,x)  (SHR (n, x) | (x &lt;&lt; (64 - n)))
  #define SIGMA0(x)  (ROTR (28, x) ^ ROTR (34, x) ^ ROTR (39, x))
<span class="line-new-header">--- 1087,17 ---</span>
  /*
   * SHA-384, SHA-512, SHA-512/224 and SHA-512/256 Checksums
   *
   * Implemented following FIPS-180-4 standard at
   * http://csrc.nist.gov/publications/fips/fips180-4/fips180-4.pdf.
<span class="line-modified">!  * References in the form [x.y.z] map to sections in that document.</span>
   *
   *   Author(s): Eduardo Lima Mitev &lt;elima@igalia.com&gt;
   *              Igor Gnatenko &lt;ignatenko@src.gnome.org&gt;
   */
  
<span class="line-modified">! /* SHA-384, SHA-512, SHA-512/224 and SHA-512/256 functions [4.1.3] */</span>
  #define Ch(x,y,z)  ((x &amp; y) ^ (~x &amp; z))
  #define Maj(x,y,z) ((x &amp; y) ^ (x &amp; z) ^ (y &amp; z))
  #define SHR(n,x)   (x &gt;&gt; n)
  #define ROTR(n,x)  (SHR (n, x) | (x &lt;&lt; (64 - n)))
  #define SIGMA0(x)  (ROTR (28, x) ^ ROTR (34, x) ^ ROTR (39, x))
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1114,11 ***</span>
      (b)[(i) + 4] = (guint8) (n &gt;&gt; 24);                   \
      (b)[(i) + 5] = (guint8) (n &gt;&gt; 16);                   \
      (b)[(i) + 6] = (guint8) (n &gt;&gt;  8);                   \
      (b)[(i) + 7] = (guint8) (n      ); } G_STMT_END
  
<span class="line-modified">! /* SHA-384 and SHA-512 constants [�4.2.3] */</span>
  static const guint64 SHA2_K[80] = {
    G_GUINT64_CONSTANT (0x428a2f98d728ae22), G_GUINT64_CONSTANT (0x7137449123ef65cd),
    G_GUINT64_CONSTANT (0xb5c0fbcfec4d3b2f), G_GUINT64_CONSTANT (0xe9b5dba58189dbbc),
    G_GUINT64_CONSTANT (0x3956c25bf348b538), G_GUINT64_CONSTANT (0x59f111f1b605d019),
    G_GUINT64_CONSTANT (0x923f82a4af194f9b), G_GUINT64_CONSTANT (0xab1c5ed5da6d8118),
<span class="line-new-header">--- 1113,11 ---</span>
      (b)[(i) + 4] = (guint8) (n &gt;&gt; 24);                   \
      (b)[(i) + 5] = (guint8) (n &gt;&gt; 16);                   \
      (b)[(i) + 6] = (guint8) (n &gt;&gt;  8);                   \
      (b)[(i) + 7] = (guint8) (n      ); } G_STMT_END
  
<span class="line-modified">! /* SHA-384 and SHA-512 constants [4.2.3] */</span>
  static const guint64 SHA2_K[80] = {
    G_GUINT64_CONSTANT (0x428a2f98d728ae22), G_GUINT64_CONSTANT (0x7137449123ef65cd),
    G_GUINT64_CONSTANT (0xb5c0fbcfec4d3b2f), G_GUINT64_CONSTANT (0xe9b5dba58189dbbc),
    G_GUINT64_CONSTANT (0x3956c25bf348b538), G_GUINT64_CONSTANT (0x59f111f1b605d019),
    G_GUINT64_CONSTANT (0x923f82a4af194f9b), G_GUINT64_CONSTANT (0xab1c5ed5da6d8118),
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1162,11 ***</span>
  
  
  static void
  sha384_sum_init (Sha512sum *sha512)
  {
<span class="line-modified">!   /* Initial Hash Value [�5.3.4] */</span>
    sha512-&gt;H[0] = G_GUINT64_CONSTANT (0xcbbb9d5dc1059ed8);
    sha512-&gt;H[1] = G_GUINT64_CONSTANT (0x629a292a367cd507);
    sha512-&gt;H[2] = G_GUINT64_CONSTANT (0x9159015a3070dd17);
    sha512-&gt;H[3] = G_GUINT64_CONSTANT (0x152fecd8f70e5939);
    sha512-&gt;H[4] = G_GUINT64_CONSTANT (0x67332667ffc00b31);
<span class="line-new-header">--- 1161,11 ---</span>
  
  
  static void
  sha384_sum_init (Sha512sum *sha512)
  {
<span class="line-modified">!   /* Initial Hash Value [5.3.4] */</span>
    sha512-&gt;H[0] = G_GUINT64_CONSTANT (0xcbbb9d5dc1059ed8);
    sha512-&gt;H[1] = G_GUINT64_CONSTANT (0x629a292a367cd507);
    sha512-&gt;H[2] = G_GUINT64_CONSTANT (0x9159015a3070dd17);
    sha512-&gt;H[3] = G_GUINT64_CONSTANT (0x152fecd8f70e5939);
    sha512-&gt;H[4] = G_GUINT64_CONSTANT (0x67332667ffc00b31);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1181,11 ***</span>
  }
  
  static void
  sha512_sum_init (Sha512sum *sha512)
  {
<span class="line-modified">!   /* Initial Hash Value [�5.3.5] */</span>
    sha512-&gt;H[0] = G_GUINT64_CONSTANT (0x6a09e667f3bcc908);
    sha512-&gt;H[1] = G_GUINT64_CONSTANT (0xbb67ae8584caa73b);
    sha512-&gt;H[2] = G_GUINT64_CONSTANT (0x3c6ef372fe94f82b);
    sha512-&gt;H[3] = G_GUINT64_CONSTANT (0xa54ff53a5f1d36f1);
    sha512-&gt;H[4] = G_GUINT64_CONSTANT (0x510e527fade682d1);
<span class="line-new-header">--- 1180,11 ---</span>
  }
  
  static void
  sha512_sum_init (Sha512sum *sha512)
  {
<span class="line-modified">!   /* Initial Hash Value [5.3.5] */</span>
    sha512-&gt;H[0] = G_GUINT64_CONSTANT (0x6a09e667f3bcc908);
    sha512-&gt;H[1] = G_GUINT64_CONSTANT (0xbb67ae8584caa73b);
    sha512-&gt;H[2] = G_GUINT64_CONSTANT (0x3c6ef372fe94f82b);
    sha512-&gt;H[3] = G_GUINT64_CONSTANT (0xa54ff53a5f1d36f1);
    sha512-&gt;H[4] = G_GUINT64_CONSTANT (0x510e527fade682d1);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1207,11 ***</span>
    gint t;
    guint64 a, b, c, d, e, f, g, h;
    guint64 M[16];
    guint64 W[80];
  
<span class="line-modified">!   /* SHA-512 hash computation [�6.4.2] */</span>
  
    /* prepare the message schedule */
    for (i = 0; i &lt; 16; i++)
      {
        gint p = i * 8;
<span class="line-new-header">--- 1206,11 ---</span>
    gint t;
    guint64 a, b, c, d, e, f, g, h;
    guint64 M[16];
    guint64 W[80];
  
<span class="line-modified">!   /* SHA-512 hash computation [6.4.2] */</span>
  
    /* prepare the message schedule */
    for (i = 0; i &lt; 16; i++)
      {
        gint p = i * 8;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1329,11 ***</span>
    gint zeros;
    guint8 pad[SHA2_BLOCK_LEN * 2] = { 0, };
    guint pad_len = 0;
    gint i;
  
<span class="line-modified">!   /* apply padding [�5.1.2] */</span>
    l = sha512-&gt;block_len * 8;
    zeros = 896 - (l + 1);
  
    if (zeros &lt; 0)
      zeros += 128 * 8;
<span class="line-new-header">--- 1328,11 ---</span>
    gint zeros;
    guint8 pad[SHA2_BLOCK_LEN * 2] = { 0, };
    guint pad_len = 0;
    gint i;
  
<span class="line-modified">!   /* apply padding [5.1.2] */</span>
    l = sha512-&gt;block_len * 8;
    zeros = 896 - (l + 1);
  
    if (zeros &lt; 0)
      zeros += 128 * 8;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1627,11 ***</span>
  
  /**
   * g_checksum_get_string:
   * @checksum: a #GChecksum
   *
<span class="line-modified">!  * Gets the digest as an hexadecimal string.</span>
   *
   * Once this function has been called the #GChecksum can no longer be
   * updated with g_checksum_update().
   *
   * The hexadecimal characters will be lower case.
<span class="line-new-header">--- 1626,11 ---</span>
  
  /**
   * g_checksum_get_string:
   * @checksum: a #GChecksum
   *
<span class="line-modified">!  * Gets the digest as a hexadecimal string.</span>
   *
   * Once this function has been called the #GChecksum can no longer be
   * updated with g_checksum_update().
   *
   * The hexadecimal characters will be lower case.
</pre>
<center><a href="gcharset.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gconstructor.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>