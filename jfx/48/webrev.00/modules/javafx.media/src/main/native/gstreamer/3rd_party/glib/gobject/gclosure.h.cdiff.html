<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gclosure.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gclosure.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="genums.c.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gclosure.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 47,11 ***</span>
   * See g_closure_set_meta_marshal(), g_closure_add_finalize_notifier(),
   * g_closure_add_invalidate_notifier() and g_closure_add_marshal_guards().
   *
   * Returns: number of notifiers
   */
<span class="line-modified">! #define G_CLOSURE_N_NOTIFIERS(cl)    (((cl)-&gt;n_guards &lt;&lt; 1L) + \</span>
                                            (cl)-&gt;n_fnotifiers + (cl)-&gt;n_inotifiers)
  /**
   * G_CCLOSURE_SWAP_DATA:
   * @cclosure: a #GCClosure
   *
<span class="line-new-header">--- 47,11 ---</span>
   * See g_closure_set_meta_marshal(), g_closure_add_finalize_notifier(),
   * g_closure_add_invalidate_notifier() and g_closure_add_marshal_guards().
   *
   * Returns: number of notifiers
   */
<span class="line-modified">! #define G_CLOSURE_N_NOTIFIERS(cl)  (((cl)-&gt;n_guards &lt;&lt; 1L) + \</span>
                                            (cl)-&gt;n_fnotifiers + (cl)-&gt;n_inotifiers)
  /**
   * G_CCLOSURE_SWAP_DATA:
   * @cclosure: a #GCClosure
   *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 65,15 ***</span>
   * G_CALLBACK:
   * @f: a function pointer.
   *
   * Cast a function pointer to a #GCallback.
   */
<span class="line-modified">! #define G_CALLBACK(f)            ((GCallback) (f))</span>
  
  
  /* -- typedefs --- */
<span class="line-modified">! typedef struct _GClosure         GClosure;</span>
  typedef struct _GClosureNotifyData   GClosureNotifyData;
  
  /**
   * GCallback:
   *
<span class="line-new-header">--- 65,15 ---</span>
   * G_CALLBACK:
   * @f: a function pointer.
   *
   * Cast a function pointer to a #GCallback.
   */
<span class="line-modified">! #define G_CALLBACK(f)      ((GCallback) (f))</span>
  
  
  /* -- typedefs --- */
<span class="line-modified">! typedef struct _GClosure     GClosure;</span>
  typedef struct _GClosureNotifyData   GClosureNotifyData;
  
  /**
   * GCallback:
   *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 90,12 ***</span>
   * @closure: the #GClosure on which the notification is emitted
   *
   * The type used for the various notification callbacks which can be registered
   * on closures.
   */
<span class="line-modified">! typedef void  (*GClosureNotify)     (gpointer    data,</span>
<span class="line-modified">!                      GClosure   *closure);</span>
  /**
   * GClosureMarshal:
   * @closure: the #GClosure to which the marshaller belongs
   * @return_value: (nullable): a #GValue to store the return
   *  value. May be %NULL if the callback of @closure doesn&#39;t return a
<span class="line-new-header">--- 90,12 ---</span>
   * @closure: the #GClosure on which the notification is emitted
   *
   * The type used for the various notification callbacks which can be registered
   * on closures.
   */
<span class="line-modified">! typedef void  (*GClosureNotify)   (gpointer  data,</span>
<span class="line-modified">!            GClosure *closure);</span>
  /**
   * GClosureMarshal:
   * @closure: the #GClosure to which the marshaller belongs
   * @return_value: (nullable): a #GValue to store the return
   *  value. May be %NULL if the callback of @closure doesn&#39;t return a
</pre>
<hr />
<pre>
<span class="line-old-header">*** 110,16 ***</span>
   *  registering the marshaller, see g_closure_set_marshal() and
   *  g_closure_set_meta_marshal()
   *
   * The type used for marshaller functions.
   */
<span class="line-modified">! typedef void  (*GClosureMarshal)    (GClosure   *closure,</span>
<span class="line-modified">!                      GValue         *return_value,</span>
<span class="line-modified">!                      guint           n_param_values,</span>
<span class="line-modified">!                      const GValue   *param_values,</span>
<span class="line-modified">!                      gpointer        invocation_hint,</span>
<span class="line-modified">!                      gpointer    marshal_data);</span>
  
  /**
   * GVaClosureMarshal:
   * @closure: the #GClosure to which the marshaller belongs
   * @return_value: (nullable): a #GValue to store the return
<span class="line-new-header">--- 110,16 ---</span>
   *  registering the marshaller, see g_closure_set_marshal() and
   *  g_closure_set_meta_marshal()
   *
   * The type used for marshaller functions.
   */
<span class="line-modified">! typedef void  (*GClosureMarshal)  (GClosure *closure,</span>
<span class="line-modified">!            GValue         *return_value,</span>
<span class="line-modified">!            guint           n_param_values,</span>
<span class="line-modified">!            const GValue   *param_values,</span>
<span class="line-modified">!            gpointer        invocation_hint,</span>
<span class="line-modified">!            gpointer  marshal_data);</span>
  
  /**
   * GVaClosureMarshal:
   * @closure: the #GClosure to which the marshaller belongs
   * @return_value: (nullable): a #GValue to store the return
</pre>
<hr />
<pre>
<span class="line-old-header">*** 138,25 ***</span>
   * This is the signature of va_list marshaller functions, an optional
   * marshaller that can be used in some situations to avoid
   * marshalling the signal argument into GValues.
   */
  typedef void (* GVaClosureMarshal) (GClosure *closure,
<span class="line-modified">!                     GValue   *return_value,</span>
<span class="line-modified">!                     gpointer  instance,</span>
<span class="line-modified">!                     va_list   args,</span>
<span class="line-modified">!                     gpointer  marshal_data,</span>
<span class="line-modified">!                     int       n_params,</span>
<span class="line-modified">!                     GType    *param_types);</span>
  
  /**
   * GCClosure:
   * @closure: the #GClosure
   * @callback: the callback function
   *
   * A #GCClosure is a specialization of #GClosure for C function callbacks.
   */
<span class="line-modified">! typedef struct _GCClosure        GCClosure;</span>
  
  
  /* --- structures --- */
  struct _GClosureNotifyData
  {
<span class="line-new-header">--- 138,25 ---</span>
   * This is the signature of va_list marshaller functions, an optional
   * marshaller that can be used in some situations to avoid
   * marshalling the signal argument into GValues.
   */
  typedef void (* GVaClosureMarshal) (GClosure *closure,
<span class="line-modified">!             GValue   *return_value,</span>
<span class="line-modified">!             gpointer  instance,</span>
<span class="line-modified">!             va_list   args,</span>
<span class="line-modified">!             gpointer  marshal_data,</span>
<span class="line-modified">!             int       n_params,</span>
<span class="line-modified">!             GType    *param_types);</span>
  
  /**
   * GCClosure:
   * @closure: the #GClosure
   * @callback: the callback function
   *
   * A #GCClosure is a specialization of #GClosure for C function callbacks.
   */
<span class="line-modified">! typedef struct _GCClosure    GCClosure;</span>
  
  
  /* --- structures --- */
  struct _GClosureNotifyData
  {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 173,34 ***</span>
   * A #GClosure represents a callback supplied by the programmer.
   */
  struct _GClosure
  {
    /*&lt; private &gt;*/
<span class="line-modified">!   volatile          guint    ref_count : 15;</span>
    /* meta_marshal is not used anymore but must be zero for historical reasons
       as it was exposed in the G_CLOSURE_N_NOTIFIERS macro */
<span class="line-modified">!   volatile          guint    meta_marshal_nouse : 1;</span>
<span class="line-modified">!   volatile          guint    n_guards : 1;</span>
<span class="line-modified">!   volatile          guint    n_fnotifiers : 2;  /* finalization notifiers */</span>
<span class="line-modified">!   volatile          guint    n_inotifiers : 8;  /* invalidation notifiers */</span>
<span class="line-modified">!   volatile          guint    in_inotify : 1;</span>
<span class="line-modified">!   volatile          guint    floating : 1;</span>
    /*&lt; protected &gt;*/
<span class="line-modified">!   volatile          guint    derivative_flag : 1;</span>
    /*&lt; public &gt;*/
<span class="line-modified">!   volatile          guint    in_marshal : 1;</span>
<span class="line-modified">!   volatile          guint    is_invalid : 1;</span>
  
<span class="line-modified">!   /*&lt; private &gt;*/   void   (*marshal)  (GClosure       *closure,</span>
<span class="line-modified">!                         GValue /*out*/ *return_value,</span>
<span class="line-modified">!                         guint           n_param_values,</span>
<span class="line-modified">!                         const GValue   *param_values,</span>
<span class="line-modified">!                         gpointer        invocation_hint,</span>
<span class="line-modified">!                         gpointer        marshal_data);</span>
    /*&lt; protected &gt;*/ gpointer data;
  
<span class="line-modified">!   /*&lt; private &gt;*/   GClosureNotifyData *notifiers;</span>
  
    /* invariants/constraints:
     * - -&gt;marshal and -&gt;data are _invalid_ as soon as -&gt;is_invalid==TRUE
     * - invocation of all inotifiers occours prior to fnotifiers
     * - order of inotifiers is random
<span class="line-new-header">--- 173,34 ---</span>
   * A #GClosure represents a callback supplied by the programmer.
   */
  struct _GClosure
  {
    /*&lt; private &gt;*/
<span class="line-modified">!   volatile        guint  ref_count : 15;</span>
    /* meta_marshal is not used anymore but must be zero for historical reasons
       as it was exposed in the G_CLOSURE_N_NOTIFIERS macro */
<span class="line-modified">!   volatile        guint  meta_marshal_nouse : 1;</span>
<span class="line-modified">!   volatile        guint  n_guards : 1;</span>
<span class="line-modified">!   volatile        guint  n_fnotifiers : 2;  /* finalization notifiers */</span>
<span class="line-modified">!   volatile        guint  n_inotifiers : 8;  /* invalidation notifiers */</span>
<span class="line-modified">!   volatile        guint  in_inotify : 1;</span>
<span class="line-modified">!   volatile        guint  floating : 1;</span>
    /*&lt; protected &gt;*/
<span class="line-modified">!   volatile          guint  derivative_flag : 1;</span>
    /*&lt; public &gt;*/
<span class="line-modified">!   volatile        guint  in_marshal : 1;</span>
<span class="line-modified">!   volatile        guint  is_invalid : 1;</span>
  
<span class="line-modified">!   /*&lt; private &gt;*/ void   (*marshal)  (GClosure       *closure,</span>
<span class="line-modified">!               GValue /*out*/ *return_value,</span>
<span class="line-modified">!               guint           n_param_values,</span>
<span class="line-modified">!               const GValue   *param_values,</span>
<span class="line-modified">!               gpointer        invocation_hint,</span>
<span class="line-modified">!               gpointer      marshal_data);</span>
    /*&lt; protected &gt;*/ gpointer data;
  
<span class="line-modified">!   /*&lt; private &gt;*/ GClosureNotifyData *notifiers;</span>
  
    /* invariants/constraints:
     * - -&gt;marshal and -&gt;data are _invalid_ as soon as -&gt;is_invalid==TRUE
     * - invocation of all inotifiers occours prior to fnotifiers
     * - order of inotifiers is random
</pre>
<hr />
<pre>
<span class="line-old-header">*** 220,76 ***</span>
  };
  
  
  /* --- prototypes --- */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_cclosure_new            (GCallback  callback_func,</span>
<span class="line-modified">!                          gpointer   user_data,</span>
<span class="line-modified">!                          GClosureNotify destroy_data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_cclosure_new_swap           (GCallback  callback_func,</span>
<span class="line-modified">!                          gpointer   user_data,</span>
<span class="line-modified">!                          GClosureNotify destroy_data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_signal_type_cclosure_new        (GType          itype,</span>
<span class="line-modified">!                          guint          struct_offset);</span>
  
  
  /* --- prototypes --- */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_closure_ref             (GClosure   *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_sink            (GClosure   *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_unref           (GClosure   *closure);</span>
  /* intimidating */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_closure_new_simple          (guint       sizeof_closure,</span>
<span class="line-modified">!                          gpointer    data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_add_finalize_notifier   (GClosure       *closure,</span>
<span class="line-modified">!                          gpointer    notify_data,</span>
<span class="line-modified">!                          GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_remove_finalize_notifier    (GClosure       *closure,</span>
<span class="line-modified">!                          gpointer    notify_data,</span>
<span class="line-modified">!                          GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_add_invalidate_notifier (GClosure       *closure,</span>
<span class="line-modified">!                          gpointer    notify_data,</span>
<span class="line-modified">!                          GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_remove_invalidate_notifier  (GClosure       *closure,</span>
<span class="line-modified">!                          gpointer    notify_data,</span>
<span class="line-modified">!                          GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_add_marshal_guards      (GClosure   *closure,</span>
<span class="line-modified">!                          gpointer        pre_marshal_data,</span>
<span class="line-modified">!                          GClosureNotify  pre_marshal_notify,</span>
<span class="line-modified">!                          gpointer        post_marshal_data,</span>
<span class="line-modified">!                          GClosureNotify  post_marshal_notify);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_set_marshal         (GClosure   *closure,</span>
<span class="line-modified">!                          GClosureMarshal marshal);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_set_meta_marshal        (GClosure       *closure,</span>
<span class="line-modified">!                          gpointer    marshal_data,</span>
<span class="line-modified">!                          GClosureMarshal meta_marshal);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_invalidate          (GClosure   *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void      g_closure_invoke          (GClosure   *closure,</span>
<span class="line-modified">!                          GValue /*out*/ *return_value,</span>
<span class="line-modified">!                          guint       n_param_values,</span>
<span class="line-modified">!                          const GValue   *param_values,</span>
<span class="line-modified">!                          gpointer    invocation_hint);</span>
  
  /* FIXME:
<span class="line-modified">!    OK:  data_object::destroy        -&gt; closure_invalidate();</span>
<span class="line-modified">!    MIS: closure_invalidate()        -&gt; disconnect(closure);</span>
<span class="line-modified">!    MIS: disconnect(closure)     -&gt; (unlink) closure_unref();</span>
<span class="line-modified">!    OK:  closure_finalize()      -&gt; g_free (data_string);</span>
  
     random remarks:
     - need marshaller repo with decent aliasing to base types
     - provide marshaller collection, virtually covering anything out there
  */
<span class="line-new-header">--- 220,76 ---</span>
  };
  
  
  /* --- prototypes --- */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_cclosure_new      (GCallback  callback_func,</span>
<span class="line-modified">!              gpointer user_data,</span>
<span class="line-modified">!              GClosureNotify destroy_data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_cclosure_new_swap     (GCallback  callback_func,</span>
<span class="line-modified">!              gpointer user_data,</span>
<span class="line-modified">!              GClosureNotify destroy_data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_signal_type_cclosure_new    (GType          itype,</span>
<span class="line-modified">!              guint          struct_offset);</span>
  
  
  /* --- prototypes --- */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_closure_ref       (GClosure *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_sink      (GClosure *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_unref     (GClosure *closure);</span>
  /* intimidating */
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! GClosure* g_closure_new_simple      (guint     sizeof_closure,</span>
<span class="line-modified">!              gpointer  data);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_add_finalize_notifier (GClosure       *closure,</span>
<span class="line-modified">!              gpointer  notify_data,</span>
<span class="line-modified">!              GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_remove_finalize_notifier  (GClosure       *closure,</span>
<span class="line-modified">!              gpointer  notify_data,</span>
<span class="line-modified">!              GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_add_invalidate_notifier (GClosure       *closure,</span>
<span class="line-modified">!              gpointer  notify_data,</span>
<span class="line-modified">!              GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_remove_invalidate_notifier  (GClosure       *closure,</span>
<span class="line-modified">!              gpointer  notify_data,</span>
<span class="line-modified">!              GClosureNotify  notify_func);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_add_marshal_guards    (GClosure *closure,</span>
<span class="line-modified">!              gpointer        pre_marshal_data,</span>
<span class="line-modified">!              GClosureNotify  pre_marshal_notify,</span>
<span class="line-modified">!              gpointer        post_marshal_data,</span>
<span class="line-modified">!              GClosureNotify  post_marshal_notify);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_set_marshal     (GClosure *closure,</span>
<span class="line-modified">!              GClosureMarshal marshal);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_set_meta_marshal    (GClosure       *closure,</span>
<span class="line-modified">!              gpointer  marshal_data,</span>
<span class="line-modified">!              GClosureMarshal meta_marshal);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_invalidate      (GClosure *closure);</span>
  GLIB_AVAILABLE_IN_ALL
<span class="line-modified">! void    g_closure_invoke      (GClosure   *closure,</span>
<span class="line-modified">!              GValue /*out*/ *return_value,</span>
<span class="line-modified">!              guint     n_param_values,</span>
<span class="line-modified">!              const GValue *param_values,</span>
<span class="line-modified">!              gpointer  invocation_hint);</span>
  
  /* FIXME:
<span class="line-modified">!    OK:  data_object::destroy    -&gt; closure_invalidate();</span>
<span class="line-modified">!    MIS: closure_invalidate()    -&gt; disconnect(closure);</span>
<span class="line-modified">!    MIS: disconnect(closure)   -&gt; (unlink) closure_unref();</span>
<span class="line-modified">!    OK:  closure_finalize()    -&gt; g_free (data_string);</span>
  
     random remarks:
     - need marshaller repo with decent aliasing to base types
     - provide marshaller collection, virtually covering anything out there
  */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 302,16 ***</span>
                                   gpointer      invocation_hint,
                                   gpointer      marshal_data);
  
  GLIB_AVAILABLE_IN_ALL
  void g_cclosure_marshal_generic_va (GClosure *closure,
<span class="line-modified">!                     GValue   *return_value,</span>
<span class="line-modified">!                     gpointer  instance,</span>
<span class="line-modified">!                     va_list   args_list,</span>
<span class="line-modified">!                     gpointer  marshal_data,</span>
<span class="line-modified">!                     int       n_params,</span>
<span class="line-modified">!                     GType    *param_types);</span>
  
  
  G_END_DECLS
  
  #endif /* __G_CLOSURE_H__ */
<span class="line-new-header">--- 302,16 ---</span>
                                   gpointer      invocation_hint,
                                   gpointer      marshal_data);
  
  GLIB_AVAILABLE_IN_ALL
  void g_cclosure_marshal_generic_va (GClosure *closure,
<span class="line-modified">!             GValue   *return_value,</span>
<span class="line-modified">!             gpointer  instance,</span>
<span class="line-modified">!             va_list   args_list,</span>
<span class="line-modified">!             gpointer  marshal_data,</span>
<span class="line-modified">!             int       n_params,</span>
<span class="line-modified">!             GType    *param_types);</span>
  
  
  G_END_DECLS
  
  #endif /* __G_CLOSURE_H__ */
</pre>
<center><a href="gclosure.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="genums.c.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>