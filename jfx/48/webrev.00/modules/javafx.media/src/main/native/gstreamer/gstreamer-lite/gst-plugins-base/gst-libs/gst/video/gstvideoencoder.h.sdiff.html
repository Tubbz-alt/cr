<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/video/gstvideoencoder.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gstvideoencoder.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="gstvideometa.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gst-plugins-base/gst-libs/gst/video/gstvideoencoder.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
206  *                  Negotiate with downstream and configure buffer pools, etc.
207  *                  Subclasses should chain up to the parent implementation to
208  *                  invoke the default handler.
209  * @decide_allocation: Optional.
210  *                     Setup the allocation parameters for allocating output
211  *                     buffers. The passed in query contains the result of the
212  *                     downstream allocation query.
213  *                     Subclasses should chain up to the parent implementation to
214  *                     invoke the default handler.
215  * @propose_allocation: Optional.
216  *                      Propose buffer allocation parameters for upstream elements.
217  *                      Subclasses should chain up to the parent implementation to
218  *                      invoke the default handler.
219  * @flush:              Optional.
220  *                      Flush all remaining data from the encoder without
221  *                      pushing it downstream. Since: 1.2
222  * @sink_query:     Optional.
223  *                  Query handler on the sink pad. This function should
224  *                  return TRUE if the query could be performed. Subclasses
225  *                  should chain up to the parent implementation to invoke the
<span class="line-modified">226  *                  default handler. Since 1.4</span>
227  * @src_query:      Optional.
228  *                  Query handler on the source pad. This function should
229  *                  return TRUE if the query could be performed. Subclasses
230  *                  should chain up to the parent implementation to invoke the
<span class="line-modified">231  *                  default handler. Since 1.4</span>
232  * @transform_meta: Optional. Transform the metadata on the input buffer to the
233  *                  output buffer. By default this method is copies all meta without
234  *                  tags and meta with only the &quot;video&quot; tag. subclasses can
235  *                  implement this method and return %TRUE if the metadata is to be
<span class="line-modified">236  *                  copied. Since 1.6</span>
237  *
238  * Subclasses can override any of the available virtual methods or not, as
239  * needed. At minimum @handle_frame needs to be overridden, and @set_format
240  * and @get_caps are likely needed as well.
241  */
242 struct _GstVideoEncoderClass
243 {
244   /*&lt; private &gt;*/
245   GstElementClass  element_class;
246 
247   /*&lt; public &gt;*/
248   /* virtual methods for subclasses */
249   gboolean      (*open)         (GstVideoEncoder *encoder);
250 
251   gboolean      (*close)        (GstVideoEncoder *encoder);
252 
253   gboolean      (*start)        (GstVideoEncoder *encoder);
254 
255   gboolean      (*stop)         (GstVideoEncoder *encoder);
256 
257   gboolean      (*set_format)   (GstVideoEncoder *encoder,
<span class="line-modified">258                  GstVideoCodecState *state);</span>
259 
260   GstFlowReturn (*handle_frame) (GstVideoEncoder *encoder,
<span class="line-modified">261                  GstVideoCodecFrame *frame);</span>
262 
263   gboolean      (*reset)        (GstVideoEncoder *encoder,
<span class="line-modified">264                  gboolean hard);</span>
265 
266   GstFlowReturn (*finish)       (GstVideoEncoder *encoder);
267 
268   GstFlowReturn (*pre_push)     (GstVideoEncoder *encoder,
<span class="line-modified">269                  GstVideoCodecFrame *frame);</span>
270 
271   GstCaps *     (*getcaps)      (GstVideoEncoder *enc,
272                                  GstCaps *filter);
273 
274   gboolean      (*sink_event)   (GstVideoEncoder *encoder,
<span class="line-modified">275                  GstEvent *event);</span>
276 
277   gboolean      (*src_event)    (GstVideoEncoder *encoder,
<span class="line-modified">278                  GstEvent *event);</span>
279 
280   gboolean      (*negotiate)    (GstVideoEncoder *encoder);
281 
282   gboolean      (*decide_allocation)  (GstVideoEncoder *encoder, GstQuery *query);
283 
284   gboolean      (*propose_allocation) (GstVideoEncoder * encoder,
285                                        GstQuery * query);
286   gboolean      (*flush)              (GstVideoEncoder *encoder);
287 
288   gboolean      (*sink_query)     (GstVideoEncoder *encoder,
<span class="line-modified">289                    GstQuery *query);</span>
290 
291   gboolean      (*src_query)      (GstVideoEncoder *encoder,
<span class="line-modified">292                    GstQuery *query);</span>
293 
294   gboolean      (*transform_meta) (GstVideoEncoder *encoder,
295                                    GstVideoCodecFrame *frame,
296                                    GstMeta * meta);
297 
298   /*&lt; private &gt;*/
299   gpointer       _gst_reserved[GST_PADDING_LARGE-4];
300 };
301 
302 GST_VIDEO_API
303 GType                gst_video_encoder_get_type (void);
304 
305 GST_VIDEO_API
306 GstVideoCodecState*  gst_video_encoder_get_output_state (GstVideoEncoder *encoder);
307 
308 GST_VIDEO_API
309 GstVideoCodecState*  gst_video_encoder_set_output_state (GstVideoEncoder * encoder,
<span class="line-modified">310                              GstCaps * caps,</span>
<span class="line-modified">311                              GstVideoCodecState * reference);</span>
312 
313 GST_VIDEO_API
314 gboolean             gst_video_encoder_negotiate        (GstVideoEncoder * encoder);
315 
316 GST_VIDEO_API
317 GstVideoCodecFrame*  gst_video_encoder_get_frame        (GstVideoEncoder *encoder,
<span class="line-modified">318                                  int frame_number);</span>
319 
320 GST_VIDEO_API
321 GstVideoCodecFrame*  gst_video_encoder_get_oldest_frame (GstVideoEncoder *encoder);
322 
323 GST_VIDEO_API
324 GList *              gst_video_encoder_get_frames       (GstVideoEncoder *encoder);
325 
326 GST_VIDEO_API
327 GstBuffer *          gst_video_encoder_allocate_output_buffer (GstVideoEncoder * encoder,
328                                                                gsize size);
329 
330 GST_VIDEO_API
331 GstFlowReturn        gst_video_encoder_allocate_output_frame  (GstVideoEncoder *encoder,
<span class="line-modified">332                                        GstVideoCodecFrame *frame,</span>
333                                                                gsize size);
334 
335 GST_VIDEO_API
336 GstFlowReturn        gst_video_encoder_finish_frame (GstVideoEncoder *encoder,
<span class="line-modified">337                              GstVideoCodecFrame *frame);</span>
338 
339 GST_VIDEO_API
340 GstCaps *            gst_video_encoder_proxy_getcaps (GstVideoEncoder * enc,
<span class="line-modified">341                               GstCaps         * caps,</span>
342                                                       GstCaps         * filter);
343 
344 GST_VIDEO_API
345 void                 gst_video_encoder_set_latency (GstVideoEncoder *encoder,
<span class="line-modified">346                             GstClockTime min_latency,</span>
<span class="line-modified">347                             GstClockTime max_latency);</span>
348 
349 GST_VIDEO_API
<span class="line-modified">350 void             gst_video_encoder_get_latency (GstVideoEncoder *encoder,</span>
<span class="line-modified">351                             GstClockTime *min_latency,</span>
<span class="line-modified">352                             GstClockTime *max_latency);</span>
353 
354 GST_VIDEO_API
355 void                 gst_video_encoder_set_headers (GstVideoEncoder *encoder,
<span class="line-modified">356                             GList *headers);</span>
357 
358 GST_VIDEO_API
359 void                 gst_video_encoder_merge_tags  (GstVideoEncoder *encoder,
360                                                     const GstTagList *tags,
361                                                     GstTagMergeMode mode);
362 
363 GST_VIDEO_API
364 void                 gst_video_encoder_get_allocator (GstVideoEncoder *encoder,
365                                                       GstAllocator **allocator,
366                                                       GstAllocationParams *params);
367 
368 GST_VIDEO_API
369 void                 gst_video_encoder_set_min_pts(GstVideoEncoder *encoder, GstClockTime min_pts);
370 
371 GST_VIDEO_API
372 void                 gst_video_encoder_set_qos_enabled (GstVideoEncoder * encoder, gboolean enabled);
373 
374 GST_VIDEO_API
375 gboolean             gst_video_encoder_is_qos_enabled (GstVideoEncoder * encoder);
376 
</pre>
</td>
<td>
<hr />
<pre>
206  *                  Negotiate with downstream and configure buffer pools, etc.
207  *                  Subclasses should chain up to the parent implementation to
208  *                  invoke the default handler.
209  * @decide_allocation: Optional.
210  *                     Setup the allocation parameters for allocating output
211  *                     buffers. The passed in query contains the result of the
212  *                     downstream allocation query.
213  *                     Subclasses should chain up to the parent implementation to
214  *                     invoke the default handler.
215  * @propose_allocation: Optional.
216  *                      Propose buffer allocation parameters for upstream elements.
217  *                      Subclasses should chain up to the parent implementation to
218  *                      invoke the default handler.
219  * @flush:              Optional.
220  *                      Flush all remaining data from the encoder without
221  *                      pushing it downstream. Since: 1.2
222  * @sink_query:     Optional.
223  *                  Query handler on the sink pad. This function should
224  *                  return TRUE if the query could be performed. Subclasses
225  *                  should chain up to the parent implementation to invoke the
<span class="line-modified">226  *                  default handler. Since: 1.4</span>
227  * @src_query:      Optional.
228  *                  Query handler on the source pad. This function should
229  *                  return TRUE if the query could be performed. Subclasses
230  *                  should chain up to the parent implementation to invoke the
<span class="line-modified">231  *                  default handler. Since: 1.4</span>
232  * @transform_meta: Optional. Transform the metadata on the input buffer to the
233  *                  output buffer. By default this method is copies all meta without
234  *                  tags and meta with only the &quot;video&quot; tag. subclasses can
235  *                  implement this method and return %TRUE if the metadata is to be
<span class="line-modified">236  *                  copied. Since: 1.6</span>
237  *
238  * Subclasses can override any of the available virtual methods or not, as
239  * needed. At minimum @handle_frame needs to be overridden, and @set_format
240  * and @get_caps are likely needed as well.
241  */
242 struct _GstVideoEncoderClass
243 {
244   /*&lt; private &gt;*/
245   GstElementClass  element_class;
246 
247   /*&lt; public &gt;*/
248   /* virtual methods for subclasses */
249   gboolean      (*open)         (GstVideoEncoder *encoder);
250 
251   gboolean      (*close)        (GstVideoEncoder *encoder);
252 
253   gboolean      (*start)        (GstVideoEncoder *encoder);
254 
255   gboolean      (*stop)         (GstVideoEncoder *encoder);
256 
257   gboolean      (*set_format)   (GstVideoEncoder *encoder,
<span class="line-modified">258          GstVideoCodecState *state);</span>
259 
260   GstFlowReturn (*handle_frame) (GstVideoEncoder *encoder,
<span class="line-modified">261          GstVideoCodecFrame *frame);</span>
262 
263   gboolean      (*reset)        (GstVideoEncoder *encoder,
<span class="line-modified">264          gboolean hard);</span>
265 
266   GstFlowReturn (*finish)       (GstVideoEncoder *encoder);
267 
268   GstFlowReturn (*pre_push)     (GstVideoEncoder *encoder,
<span class="line-modified">269          GstVideoCodecFrame *frame);</span>
270 
271   GstCaps *     (*getcaps)      (GstVideoEncoder *enc,
272                                  GstCaps *filter);
273 
274   gboolean      (*sink_event)   (GstVideoEncoder *encoder,
<span class="line-modified">275          GstEvent *event);</span>
276 
277   gboolean      (*src_event)    (GstVideoEncoder *encoder,
<span class="line-modified">278          GstEvent *event);</span>
279 
280   gboolean      (*negotiate)    (GstVideoEncoder *encoder);
281 
282   gboolean      (*decide_allocation)  (GstVideoEncoder *encoder, GstQuery *query);
283 
284   gboolean      (*propose_allocation) (GstVideoEncoder * encoder,
285                                        GstQuery * query);
286   gboolean      (*flush)              (GstVideoEncoder *encoder);
287 
288   gboolean      (*sink_query)     (GstVideoEncoder *encoder,
<span class="line-modified">289            GstQuery *query);</span>
290 
291   gboolean      (*src_query)      (GstVideoEncoder *encoder,
<span class="line-modified">292            GstQuery *query);</span>
293 
294   gboolean      (*transform_meta) (GstVideoEncoder *encoder,
295                                    GstVideoCodecFrame *frame,
296                                    GstMeta * meta);
297 
298   /*&lt; private &gt;*/
299   gpointer       _gst_reserved[GST_PADDING_LARGE-4];
300 };
301 
302 GST_VIDEO_API
303 GType                gst_video_encoder_get_type (void);
304 
305 GST_VIDEO_API
306 GstVideoCodecState*  gst_video_encoder_get_output_state (GstVideoEncoder *encoder);
307 
308 GST_VIDEO_API
309 GstVideoCodecState*  gst_video_encoder_set_output_state (GstVideoEncoder * encoder,
<span class="line-modified">310                GstCaps * caps,</span>
<span class="line-modified">311                GstVideoCodecState * reference);</span>
312 
313 GST_VIDEO_API
314 gboolean             gst_video_encoder_negotiate        (GstVideoEncoder * encoder);
315 
316 GST_VIDEO_API
317 GstVideoCodecFrame*  gst_video_encoder_get_frame        (GstVideoEncoder *encoder,
<span class="line-modified">318                      int frame_number);</span>
319 
320 GST_VIDEO_API
321 GstVideoCodecFrame*  gst_video_encoder_get_oldest_frame (GstVideoEncoder *encoder);
322 
323 GST_VIDEO_API
324 GList *              gst_video_encoder_get_frames       (GstVideoEncoder *encoder);
325 
326 GST_VIDEO_API
327 GstBuffer *          gst_video_encoder_allocate_output_buffer (GstVideoEncoder * encoder,
328                                                                gsize size);
329 
330 GST_VIDEO_API
331 GstFlowReturn        gst_video_encoder_allocate_output_frame  (GstVideoEncoder *encoder,
<span class="line-modified">332                            GstVideoCodecFrame *frame,</span>
333                                                                gsize size);
334 
335 GST_VIDEO_API
336 GstFlowReturn        gst_video_encoder_finish_frame (GstVideoEncoder *encoder,
<span class="line-modified">337                  GstVideoCodecFrame *frame);</span>
338 
339 GST_VIDEO_API
340 GstCaps *            gst_video_encoder_proxy_getcaps (GstVideoEncoder * enc,
<span class="line-modified">341                   GstCaps         * caps,</span>
342                                                       GstCaps         * filter);
343 
344 GST_VIDEO_API
345 void                 gst_video_encoder_set_latency (GstVideoEncoder *encoder,
<span class="line-modified">346                 GstClockTime min_latency,</span>
<span class="line-modified">347                 GstClockTime max_latency);</span>
348 
349 GST_VIDEO_API
<span class="line-modified">350 void         gst_video_encoder_get_latency (GstVideoEncoder *encoder,</span>
<span class="line-modified">351                 GstClockTime *min_latency,</span>
<span class="line-modified">352                 GstClockTime *max_latency);</span>
353 
354 GST_VIDEO_API
355 void                 gst_video_encoder_set_headers (GstVideoEncoder *encoder,
<span class="line-modified">356                 GList *headers);</span>
357 
358 GST_VIDEO_API
359 void                 gst_video_encoder_merge_tags  (GstVideoEncoder *encoder,
360                                                     const GstTagList *tags,
361                                                     GstTagMergeMode mode);
362 
363 GST_VIDEO_API
364 void                 gst_video_encoder_get_allocator (GstVideoEncoder *encoder,
365                                                       GstAllocator **allocator,
366                                                       GstAllocationParams *params);
367 
368 GST_VIDEO_API
369 void                 gst_video_encoder_set_min_pts(GstVideoEncoder *encoder, GstClockTime min_pts);
370 
371 GST_VIDEO_API
372 void                 gst_video_encoder_set_qos_enabled (GstVideoEncoder * encoder, gboolean enabled);
373 
374 GST_VIDEO_API
375 gboolean             gst_video_encoder_is_qos_enabled (GstVideoEncoder * encoder);
376 
</pre>
</td>
</tr>
</table>
<center><a href="gstvideoencoder.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="gstvideometa.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>