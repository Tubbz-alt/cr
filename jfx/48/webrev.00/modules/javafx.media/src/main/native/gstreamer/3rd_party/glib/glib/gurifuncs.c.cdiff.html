<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gurifuncs.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="guniprop.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gurifuncs.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gurifuncs.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 81,12 ***</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_unescape_segment (const char *escaped_string,
<span class="line-modified">!             const char *escaped_string_end,</span>
<span class="line-modified">!             const char *illegal_characters)</span>
  {
    const char *in;
    char *out, *result;
    gint character;
  
<span class="line-new-header">--- 81,12 ---</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_unescape_segment (const char *escaped_string,
<span class="line-modified">!       const char *escaped_string_end,</span>
<span class="line-modified">!       const char *illegal_characters)</span>
  {
    const char *in;
    char *out, *result;
    gint character;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 102,33 ***</span>
    for (in = escaped_string; in &lt; escaped_string_end; in++)
      {
        character = *in;
  
        if (*in == &#39;%&#39;)
<span class="line-modified">!     {</span>
<span class="line-modified">!       in++;</span>
<span class="line-modified">! </span>
<span class="line-modified">!       if (escaped_string_end - in &lt; 2)</span>
<span class="line-modified">!         {</span>
<span class="line-modified">!           /* Invalid escaped char (to short) */</span>
<span class="line-modified">!           g_free (result);</span>
<span class="line-modified">!           return NULL;</span>
<span class="line-modified">!         }</span>
<span class="line-modified">! </span>
<span class="line-modified">!       character = unescape_character (in);</span>
<span class="line-modified">! </span>
<span class="line-modified">!       /* Check for an illegal character. We consider &#39;\0&#39; illegal here. */</span>
<span class="line-modified">!       if (character &lt;= 0 ||</span>
<span class="line-modified">!           (illegal_characters != NULL &amp;&amp;</span>
<span class="line-modified">!            strchr (illegal_characters, (char)character) != NULL))</span>
<span class="line-modified">!         {</span>
<span class="line-modified">!           g_free (result);</span>
<span class="line-modified">!           return NULL;</span>
<span class="line-modified">!         }</span>
<span class="line-modified">! </span>
<span class="line-modified">!       in++; /* The other char will be eaten in the loop header */</span>
<span class="line-modified">!     }</span>
        *out++ = (char)character;
      }
  
    *out = &#39;\0&#39;;
  
<span class="line-new-header">--- 102,33 ---</span>
    for (in = escaped_string; in &lt; escaped_string_end; in++)
      {
        character = *in;
  
        if (*in == &#39;%&#39;)
<span class="line-modified">!   {</span>
<span class="line-modified">!     in++;</span>
<span class="line-modified">! </span>
<span class="line-modified">!     if (escaped_string_end - in &lt; 2)</span>
<span class="line-modified">!       {</span>
<span class="line-modified">!         /* Invalid escaped char (to short) */</span>
<span class="line-modified">!         g_free (result);</span>
<span class="line-modified">!         return NULL;</span>
<span class="line-modified">!       }</span>
<span class="line-modified">! </span>
<span class="line-modified">!     character = unescape_character (in);</span>
<span class="line-modified">! </span>
<span class="line-modified">!     /* Check for an illegal character. We consider &#39;\0&#39; illegal here. */</span>
<span class="line-modified">!     if (character &lt;= 0 ||</span>
<span class="line-modified">!         (illegal_characters != NULL &amp;&amp;</span>
<span class="line-modified">!          strchr (illegal_characters, (char)character) != NULL))</span>
<span class="line-modified">!       {</span>
<span class="line-modified">!         g_free (result);</span>
<span class="line-modified">!         return NULL;</span>
<span class="line-modified">!       }</span>
<span class="line-modified">! </span>
<span class="line-modified">!     in++; /* The other char will be eaten in the loop header */</span>
<span class="line-modified">!   }</span>
        *out++ = (char)character;
      }
  
    *out = &#39;\0&#39;;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 154,11 ***</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_unescape_string (const char *escaped_string,
<span class="line-modified">!                const char *illegal_characters)</span>
  {
    return g_uri_unescape_segment (escaped_string, NULL, illegal_characters);
  }
  
  /**
<span class="line-new-header">--- 154,11 ---</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_unescape_string (const char *escaped_string,
<span class="line-modified">!            const char *illegal_characters)</span>
  {
    return g_uri_unescape_segment (escaped_string, NULL, illegal_characters);
  }
  
  /**
</pre>
<hr />
<pre>
<span class="line-old-header">*** 200,17 ***</span>
    while (1)
      {
        c = *p++;
  
        if (c == &#39;:&#39;)
<span class="line-modified">!     break;</span>
  
        if (!(g_ascii_isalnum(c) ||
<span class="line-modified">!         c == &#39;+&#39; ||</span>
<span class="line-modified">!         c == &#39;-&#39; ||</span>
<span class="line-modified">!         c == &#39;.&#39;))</span>
<span class="line-modified">!     return NULL;</span>
      }
  
    return g_strndup (uri, p - uri - 1);
  }
  
<span class="line-new-header">--- 200,17 ---</span>
    while (1)
      {
        c = *p++;
  
        if (c == &#39;:&#39;)
<span class="line-modified">!   break;</span>
  
        if (!(g_ascii_isalnum(c) ||
<span class="line-modified">!       c == &#39;+&#39; ||</span>
<span class="line-modified">!       c == &#39;-&#39; ||</span>
<span class="line-modified">!       c == &#39;.&#39;))</span>
<span class="line-modified">!   return NULL;</span>
      }
  
    return g_strndup (uri, p - uri - 1);
  }
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 235,12 ***</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_escape_string (const char *unescaped,
<span class="line-modified">!              const char  *reserved_chars_allowed,</span>
<span class="line-modified">!              gboolean     allow_utf8)</span>
  {
    GString *s;
  
    g_return_val_if_fail (unescaped != NULL, NULL);
  
<span class="line-new-header">--- 235,12 ---</span>
   *
   * Since: 2.16
   **/
  char *
  g_uri_escape_string (const char *unescaped,
<span class="line-modified">!          const char  *reserved_chars_allowed,</span>
<span class="line-modified">!          gboolean     allow_utf8)</span>
  {
    GString *s;
  
    g_return_val_if_fail (unescaped != NULL, NULL);
  
</pre>
<center><a href="guniprop.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gurifuncs.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>