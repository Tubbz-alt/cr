<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gerror.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="genviron.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gerror.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gerror.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 97  *   ;
 98  * else
 99  *   // error
100  *   ;
101  * ]|
102  *
103  * The #GError object contains three fields: @domain indicates the module
104  * the error-reporting function is located in, @code indicates the specific
105  * error that occurred, and @message is a user-readable error message with
106  * as many details as possible. Several functions are provided to deal
107  * with an error received from a called function: g_error_matches()
108  * returns %TRUE if the error matches a given domain and code,
109  * g_propagate_error() copies an error into an error location (so the
110  * calling function will receive it), and g_clear_error() clears an
111  * error location by freeing the error and resetting the location to
112  * %NULL. To display an error to the user, simply display the @message,
113  * perhaps along with additional context known only to the calling
114  * function (the file being opened, or whatever - though in the
115  * g_file_get_contents() case, the @message already contains a filename).
116  *







117  * When implementing a function that can report errors, the basic
118  * tool is g_set_error(). Typically, if a fatal error occurs you
119  * want to g_set_error(), then return immediately. g_set_error()
120  * does nothing if the error location passed to it is %NULL.
121  * Here&#39;s an example:
122  * |[&lt;!-- language=&quot;C&quot; --&gt;
123  * gint
124  * foo_open_file (GError **error)
125  * {
126  *   gint fd;
127  *   int saved_errno;
128  *


129  *   fd = open (&quot;file.txt&quot;, O_RDONLY);
130  *   saved_errno = errno;
131  *
132  *   if (fd &lt; 0)
133  *     {
134  *       g_set_error (error,
135  *                    FOO_ERROR,                 // error domain
136  *                    FOO_ERROR_BLAH,            // error code
137  *                    &quot;Failed to open file: %s&quot;, // error message format string
138  *                    g_strerror (saved_errno));
139  *       return -1;
140  *     }
141  *   else
142  *     return fd;
143  * }
144  * ]|
145  *
146  * Things are somewhat more complicated if you yourself call another
147  * function that can report a #GError. If the sub-function indicates
148  * fatal errors in some way other than reporting a #GError, such as
</pre>
<hr />
<pre>
637   else
638     g_warning (ERROR_OVERWRITTEN_WARNING, message);
639 }
640 
641 /**
642  * g_propagate_error:
643  * @dest: (out callee-allocates) (optional) (nullable): error return location
644  * @src: (transfer full): error to move into the return location
645  *
646  * If @dest is %NULL, free @src; otherwise, moves @src into *@dest.
647  * The error variable @dest points to must be %NULL.
648  *
649  * @src must be non-%NULL.
650  *
651  * Note that @src is no longer valid after this call. If you want
652  * to keep using the same GError*, you need to set it to %NULL
653  * after calling this function on it.
654  */
655 void
656 g_propagate_error (GError **dest,
<span class="line-modified">657            GError  *src)</span>
658 {
659   g_return_if_fail (src != NULL);
660 
661   if (dest == NULL)
662     {
663       if (src)
664         g_error_free (src);
665       return;
666     }
667   else
668     {
669       if (*dest != NULL)
670         {
671           g_warning (ERROR_OVERWRITTEN_WARNING, src-&gt;message);
672           g_error_free (src);
673         }
674       else
675         *dest = src;
676     }
677 }
</pre>
</td>
<td>
<hr />
<pre>
 97  *   ;
 98  * else
 99  *   // error
100  *   ;
101  * ]|
102  *
103  * The #GError object contains three fields: @domain indicates the module
104  * the error-reporting function is located in, @code indicates the specific
105  * error that occurred, and @message is a user-readable error message with
106  * as many details as possible. Several functions are provided to deal
107  * with an error received from a called function: g_error_matches()
108  * returns %TRUE if the error matches a given domain and code,
109  * g_propagate_error() copies an error into an error location (so the
110  * calling function will receive it), and g_clear_error() clears an
111  * error location by freeing the error and resetting the location to
112  * %NULL. To display an error to the user, simply display the @message,
113  * perhaps along with additional context known only to the calling
114  * function (the file being opened, or whatever - though in the
115  * g_file_get_contents() case, the @message already contains a filename).
116  *
<span class="line-added">117  * Note, however, that many error messages are too technical to display to the</span>
<span class="line-added">118  * user in an application, so prefer to use g_error_matches() to categorize errors</span>
<span class="line-added">119  * from called functions, and build an appropriate error message for the context</span>
<span class="line-added">120  * within your application. Error messages from a #GError are more appropriate</span>
<span class="line-added">121  * to be printed in system logs or on the command line. They are typically</span>
<span class="line-added">122  * translated.</span>
<span class="line-added">123  *</span>
124  * When implementing a function that can report errors, the basic
125  * tool is g_set_error(). Typically, if a fatal error occurs you
126  * want to g_set_error(), then return immediately. g_set_error()
127  * does nothing if the error location passed to it is %NULL.
128  * Here&#39;s an example:
129  * |[&lt;!-- language=&quot;C&quot; --&gt;
130  * gint
131  * foo_open_file (GError **error)
132  * {
133  *   gint fd;
134  *   int saved_errno;
135  *
<span class="line-added">136  *   g_return_val_if_fail (error == NULL || *error == NULL, -1);</span>
<span class="line-added">137  *</span>
138  *   fd = open (&quot;file.txt&quot;, O_RDONLY);
139  *   saved_errno = errno;
140  *
141  *   if (fd &lt; 0)
142  *     {
143  *       g_set_error (error,
144  *                    FOO_ERROR,                 // error domain
145  *                    FOO_ERROR_BLAH,            // error code
146  *                    &quot;Failed to open file: %s&quot;, // error message format string
147  *                    g_strerror (saved_errno));
148  *       return -1;
149  *     }
150  *   else
151  *     return fd;
152  * }
153  * ]|
154  *
155  * Things are somewhat more complicated if you yourself call another
156  * function that can report a #GError. If the sub-function indicates
157  * fatal errors in some way other than reporting a #GError, such as
</pre>
<hr />
<pre>
646   else
647     g_warning (ERROR_OVERWRITTEN_WARNING, message);
648 }
649 
650 /**
651  * g_propagate_error:
652  * @dest: (out callee-allocates) (optional) (nullable): error return location
653  * @src: (transfer full): error to move into the return location
654  *
655  * If @dest is %NULL, free @src; otherwise, moves @src into *@dest.
656  * The error variable @dest points to must be %NULL.
657  *
658  * @src must be non-%NULL.
659  *
660  * Note that @src is no longer valid after this call. If you want
661  * to keep using the same GError*, you need to set it to %NULL
662  * after calling this function on it.
663  */
664 void
665 g_propagate_error (GError **dest,
<span class="line-modified">666        GError  *src)</span>
667 {
668   g_return_if_fail (src != NULL);
669 
670   if (dest == NULL)
671     {
672       if (src)
673         g_error_free (src);
674       return;
675     }
676   else
677     {
678       if (*dest != NULL)
679         {
680           g_warning (ERROR_OVERWRITTEN_WARNING, src-&gt;message);
681           g_error_free (src);
682         }
683       else
684         *dest = src;
685     }
686 }
</pre>
</td>
</tr>
</table>
<center><a href="genviron.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gerror.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>