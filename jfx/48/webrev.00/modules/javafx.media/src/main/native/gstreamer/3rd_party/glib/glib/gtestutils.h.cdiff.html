<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gtestutils.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gtestutils.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gthread-posix.c.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gtestutils.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 85,10 ***</span>
<span class="line-new-header">--- 85,27 ---</span>
                                                                             (long double) __l1, &quot;==&quot;, (long double) __l2, &#39;i&#39;); \
                                               else if (__l1 != 0 &amp;&amp; memcmp (__m1, __m2, __l1) != 0) \
                                                 g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \
                                                                      &quot;assertion failed (&quot; #m1 &quot; == &quot; #m2 &quot;)&quot;); \
                                          } G_STMT_END
<span class="line-added">+ #define g_assert_cmpvariant(v1, v2) \</span>
<span class="line-added">+   G_STMT_START \</span>
<span class="line-added">+   { \</span>
<span class="line-added">+     GVariant *__v1 = (v1), *__v2 = (v2); \</span>
<span class="line-added">+     if (!g_variant_equal (__v1, __v2)) \</span>
<span class="line-added">+       { \</span>
<span class="line-added">+         gchar *__s1, *__s2, *__msg; \</span>
<span class="line-added">+         __s1 = g_variant_print (__v1, TRUE); \</span>
<span class="line-added">+         __s2 = g_variant_print (__v2, TRUE); \</span>
<span class="line-added">+         __msg = g_strdup_printf (&quot;assertion failed (&quot; #v1 &quot; == &quot; #v2 &quot;): %s does not equal %s&quot;, __s1, __s2); \</span>
<span class="line-added">+         g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, __msg); \</span>
<span class="line-added">+         g_free (__s1); \</span>
<span class="line-added">+         g_free (__s2); \</span>
<span class="line-added">+         g_free (__msg); \</span>
<span class="line-added">+       } \</span>
<span class="line-added">+   } \</span>
<span class="line-added">+   G_STMT_END</span>
  #define g_assert_no_error(err)          G_STMT_START { \
                                               if (err) \
                                                 g_assertion_message_error (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \
                                                   #err, err, 0, 0); \
                                          } G_STMT_END
</pre>
<hr />
<pre>
<span class="line-old-header">*** 105,21 ***</span>
<span class="line-new-header">--- 122,43 ---</span>
  #define g_assert_false(expr)            G_STMT_START { \
                                               if G_LIKELY (!(expr)) ; else \
                                                 g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \
                                                                      &quot;&#39;&quot; #expr &quot;&#39; should be FALSE&quot;); \
                                          } G_STMT_END
<span class="line-added">+ </span>
<span class="line-added">+ /* Use nullptr in C++ to catch misuse of these macros. */</span>
<span class="line-added">+ #if defined(__cplusplus) &amp;&amp; __cplusplus &gt;= 201100L</span>
<span class="line-added">+ #define g_assert_null(expr)             G_STMT_START { if G_LIKELY ((expr) == nullptr) ; else \</span>
<span class="line-added">+                                                g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \</span>
<span class="line-added">+                                                                     &quot;&#39;&quot; #expr &quot;&#39; should be nullptr&quot;); \</span>
<span class="line-added">+                                         } G_STMT_END</span>
<span class="line-added">+ #define g_assert_nonnull(expr)          G_STMT_START { \</span>
<span class="line-added">+                                              if G_LIKELY ((expr) != nullptr) ; else \</span>
<span class="line-added">+                                                g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \</span>
<span class="line-added">+                                                                     &quot;&#39;&quot; #expr &quot;&#39; should not be nullptr&quot;); \</span>
<span class="line-added">+                                         } G_STMT_END</span>
<span class="line-added">+ #else /* not C++ */</span>
  #define g_assert_null(expr)             G_STMT_START { if G_LIKELY ((expr) == NULL) ; else \
                                                 g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \
                                                                      &quot;&#39;&quot; #expr &quot;&#39; should be NULL&quot;); \
                                          } G_STMT_END
  #define g_assert_nonnull(expr)          G_STMT_START { \
                                               if G_LIKELY ((expr) != NULL) ; else \
                                                 g_assertion_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, \
                                                                      &quot;&#39;&quot; #expr &quot;&#39; should not be NULL&quot;); \
                                          } G_STMT_END
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  #ifdef G_DISABLE_ASSERT
<span class="line-added">+ /* https://gcc.gnu.org/onlinedocs/gcc-8.3.0/gcc/Other-Builtins.html#index-_005f_005fbuiltin_005funreachable</span>
<span class="line-added">+  * GCC 5 is not a strict lower bound for versions of GCC which provide __builtin_unreachable(). */</span>
<span class="line-added">+ #if __GNUC__ &gt;= 5 || g_macro__has_builtin(__builtin_unreachable)</span>
<span class="line-added">+ #define g_assert_not_reached()          G_STMT_START { (void) 0; __builtin_unreachable (); } G_STMT_END</span>
<span class="line-added">+ #else  /* if __builtin_unreachable() is not supported: */</span>
  #define g_assert_not_reached()          G_STMT_START { (void) 0; } G_STMT_END
<span class="line-added">+ #endif</span>
<span class="line-added">+ </span>
  #define g_assert(expr)                  G_STMT_START { (void) 0; } G_STMT_END
  #else /* !G_DISABLE_ASSERT */
  #define g_assert_not_reached()          G_STMT_START { g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, NULL); } G_STMT_END
  #define g_assert(expr)                  G_STMT_START { \
                                               if G_LIKELY (expr) ; else \
</pre>
<hr />
<pre>
<span class="line-old-header">*** 146,10 ***</span>
<span class="line-new-header">--- 185,40 ---</span>
  GLIB_AVAILABLE_IN_ALL
  void    g_test_init                     (int            *argc,
                                           char         ***argv,
                                           ...) G_GNUC_NULL_TERMINATED;
  
<span class="line-added">+ /**</span>
<span class="line-added">+  * G_TEST_OPTION_ISOLATE_DIRS:</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Creates a unique temporary directory for each unit test and uses</span>
<span class="line-added">+  * g_set_user_dirs() to set XDG directories to point into subdirectories of it</span>
<span class="line-added">+  * for the duration of the unit test. The directory tree is cleaned up after the</span>
<span class="line-added">+  * test finishes successfully. Note that this doesn&#39;t take effect until</span>
<span class="line-added">+  * g_test_run() is called, so calls to (for example) g_get_user_home_dir() will</span>
<span class="line-added">+  * return the system-wide value when made in a test program&#39;s main() function.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * The following functions will return subdirectories of the temporary directory</span>
<span class="line-added">+  * when this option is used. The specific subdirectory paths in use are not</span>
<span class="line-added">+  * guaranteed to be stable API - always use a getter function to retrieve them.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  *  - g_get_home_dir()</span>
<span class="line-added">+  *  - g_get_user_cache_dir()</span>
<span class="line-added">+  *  - g_get_system_config_dirs()</span>
<span class="line-added">+  *  - g_get_user_config_dir()</span>
<span class="line-added">+  *  - g_get_system_data_dirs()</span>
<span class="line-added">+  *  - g_get_user_data_dir()</span>
<span class="line-added">+  *  - g_get_user_runtime_dir()</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * The subdirectories may not be created by the test harness; as with normal</span>
<span class="line-added">+  * calls to functions like g_get_user_cache_dir(), the caller must be prepared</span>
<span class="line-added">+  * to create the directory if it doesn&#39;t exist.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.60</span>
<span class="line-added">+  */</span>
<span class="line-added">+ #define G_TEST_OPTION_ISOLATE_DIRS &quot;isolate_dirs&quot;</span>
<span class="line-added">+ </span>
  /* While we discourage its use, g_assert() is often used in unit tests
   * (especially in legacy code). g_assert_*() should really be used instead.
   * g_assert() can be disabled at client program compile time, which can render
   * tests useless. Highlight that to the user. */
  #ifdef G_DISABLE_ASSERT
</pre>
<hr />
<pre>
<span class="line-old-header">*** 211,31 ***</span>
  GLIB_AVAILABLE_IN_2_38
  gboolean g_test_failed                  (void);
  GLIB_AVAILABLE_IN_2_38
  void    g_test_set_nonfatal_assertions  (void);
  
<span class="line-modified">! /* hook up a test with fixture under test path */</span>
  #define g_test_add(testpath, Fixture, tdata, fsetup, ftest, fteardown) \
<span class="line-modified">!                     G_STMT_START {          \</span>
                                           void (*add_vtable) (const char*,       \
                                                      gsize,             \
                                                      gconstpointer,     \
                                                      void (*) (Fixture*, gconstpointer),   \
                                                      void (*) (Fixture*, gconstpointer),   \
                                                      void (*) (Fixture*, gconstpointer)) =  (void (*) (const gchar *, gsize, gconstpointer, void (*) (Fixture*, gconstpointer), void (*) (Fixture*, gconstpointer), void (*) (Fixture*, gconstpointer))) g_test_add_vtable; \
                                           add_vtable \
                                            (testpath, sizeof (Fixture), tdata, fsetup, ftest, fteardown); \
<span class="line-modified">!                     } G_STMT_END</span>
  
  /* add test messages to the test report */
  GLIB_AVAILABLE_IN_ALL
  void    g_test_message                  (const char *format,
                                           ...) G_GNUC_PRINTF (1, 2);
  GLIB_AVAILABLE_IN_ALL
  void    g_test_bug_base                 (const char *uri_pattern);
  GLIB_AVAILABLE_IN_ALL
  void    g_test_bug                      (const char *bug_uri_snippet);
  /* measure test timings */
  GLIB_AVAILABLE_IN_ALL
  void    g_test_timer_start              (void);
  GLIB_AVAILABLE_IN_ALL
  double  g_test_timer_elapsed            (void); /* elapsed seconds */
<span class="line-new-header">--- 280,51 ---</span>
  GLIB_AVAILABLE_IN_2_38
  gboolean g_test_failed                  (void);
  GLIB_AVAILABLE_IN_2_38
  void    g_test_set_nonfatal_assertions  (void);
  
<span class="line-modified">! /**</span>
<span class="line-added">+  * g_test_add:</span>
<span class="line-added">+  * @testpath:  The test path for a new test case.</span>
<span class="line-added">+  * @Fixture:   The type of a fixture data structure.</span>
<span class="line-added">+  * @tdata:     Data argument for the test functions.</span>
<span class="line-added">+  * @fsetup:    The function to set up the fixture data.</span>
<span class="line-added">+  * @ftest:     The actual test function.</span>
<span class="line-added">+  * @fteardown: The function to tear down the fixture data.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Hook up a new test case at @testpath, similar to g_test_add_func().</span>
<span class="line-added">+  * A fixture data structure with setup and teardown functions may be provided,</span>
<span class="line-added">+  * similar to g_test_create_case().</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * g_test_add() is implemented as a macro, so that the fsetup(), ftest() and</span>
<span class="line-added">+  * fteardown() callbacks can expect a @Fixture pointer as their first argument</span>
<span class="line-added">+  * in a type safe manner. They otherwise have type #GTestFixtureFunc.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Since: 2.16</span>
<span class="line-added">+  */</span>
  #define g_test_add(testpath, Fixture, tdata, fsetup, ftest, fteardown) \
<span class="line-modified">!           G_STMT_START {      \</span>
                                           void (*add_vtable) (const char*,       \
                                                      gsize,             \
                                                      gconstpointer,     \
                                                      void (*) (Fixture*, gconstpointer),   \
                                                      void (*) (Fixture*, gconstpointer),   \
                                                      void (*) (Fixture*, gconstpointer)) =  (void (*) (const gchar *, gsize, gconstpointer, void (*) (Fixture*, gconstpointer), void (*) (Fixture*, gconstpointer), void (*) (Fixture*, gconstpointer))) g_test_add_vtable; \
                                           add_vtable \
                                            (testpath, sizeof (Fixture), tdata, fsetup, ftest, fteardown); \
<span class="line-modified">!           } G_STMT_END</span>
  
  /* add test messages to the test report */
  GLIB_AVAILABLE_IN_ALL
  void    g_test_message                  (const char *format,
                                           ...) G_GNUC_PRINTF (1, 2);
  GLIB_AVAILABLE_IN_ALL
  void    g_test_bug_base                 (const char *uri_pattern);
  GLIB_AVAILABLE_IN_ALL
  void    g_test_bug                      (const char *bug_uri_snippet);
<span class="line-added">+ GLIB_AVAILABLE_IN_2_62</span>
<span class="line-added">+ void    g_test_summary                  (const char *summary);</span>
  /* measure test timings */
  GLIB_AVAILABLE_IN_ALL
  void    g_test_timer_start              (void);
  GLIB_AVAILABLE_IN_ALL
  double  g_test_timer_elapsed            (void); /* elapsed seconds */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 248,20 ***</span>
  GLIB_AVAILABLE_IN_ALL
  void    g_test_queue_destroy            (GDestroyNotify destroy_func,
                                           gpointer       destroy_data);
  #define g_test_queue_unref(gobject)     g_test_queue_destroy (g_object_unref, gobject)
  
  typedef enum {
    G_TEST_TRAP_SILENCE_STDOUT    = 1 &lt;&lt; 7,
    G_TEST_TRAP_SILENCE_STDERR    = 1 &lt;&lt; 8,
    G_TEST_TRAP_INHERIT_STDIN     = 1 &lt;&lt; 9
<span class="line-modified">! } GTestTrapFlags;</span>
  
  GLIB_DEPRECATED_IN_2_38_FOR (g_test_trap_subprocess)
  gboolean g_test_trap_fork               (guint64              usec_timeout,
                                           GTestTrapFlags       test_trap_flags);
  
  typedef enum {
    G_TEST_SUBPROCESS_INHERIT_STDIN  = 1 &lt;&lt; 0,
    G_TEST_SUBPROCESS_INHERIT_STDOUT = 1 &lt;&lt; 1,
    G_TEST_SUBPROCESS_INHERIT_STDERR = 1 &lt;&lt; 2
  } GTestSubprocessFlags;
<span class="line-new-header">--- 337,45 ---</span>
  GLIB_AVAILABLE_IN_ALL
  void    g_test_queue_destroy            (GDestroyNotify destroy_func,
                                           gpointer       destroy_data);
  #define g_test_queue_unref(gobject)     g_test_queue_destroy (g_object_unref, gobject)
  
<span class="line-added">+ /**</span>
<span class="line-added">+  * GTestTrapFlags:</span>
<span class="line-added">+  * @G_TEST_TRAP_SILENCE_STDOUT: Redirect stdout of the test child to</span>
<span class="line-added">+  *     `/dev/null` so it cannot be observed on the console during test</span>
<span class="line-added">+  *     runs. The actual output is still captured though to allow later</span>
<span class="line-added">+  *     tests with g_test_trap_assert_stdout().</span>
<span class="line-added">+  * @G_TEST_TRAP_SILENCE_STDERR: Redirect stderr of the test child to</span>
<span class="line-added">+  *     `/dev/null` so it cannot be observed on the console during test</span>
<span class="line-added">+  *     runs. The actual output is still captured though to allow later</span>
<span class="line-added">+  *     tests with g_test_trap_assert_stderr().</span>
<span class="line-added">+  * @G_TEST_TRAP_INHERIT_STDIN: If this flag is given, stdin of the</span>
<span class="line-added">+  *     child process is shared with stdin of its parent process.</span>
<span class="line-added">+  *     It is redirected to `/dev/null` otherwise.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Test traps are guards around forked tests.</span>
<span class="line-added">+  * These flags determine what traps to set.</span>
<span class="line-added">+  *</span>
<span class="line-added">+  * Deprecated: 2.38: #GTestTrapFlags is used only with g_test_trap_fork(),</span>
<span class="line-added">+  * which is deprecated. g_test_trap_subprocess() uses</span>
<span class="line-added">+  * #GTestSubprocessFlags.</span>
<span class="line-added">+  */</span>
  typedef enum {
    G_TEST_TRAP_SILENCE_STDOUT    = 1 &lt;&lt; 7,
    G_TEST_TRAP_SILENCE_STDERR    = 1 &lt;&lt; 8,
    G_TEST_TRAP_INHERIT_STDIN     = 1 &lt;&lt; 9
<span class="line-modified">! } GTestTrapFlags GLIB_DEPRECATED_TYPE_IN_2_38_FOR(GTestSubprocessFlags);</span>
<span class="line-added">+ </span>
<span class="line-added">+ G_GNUC_BEGIN_IGNORE_DEPRECATIONS</span>
  
  GLIB_DEPRECATED_IN_2_38_FOR (g_test_trap_subprocess)
  gboolean g_test_trap_fork               (guint64              usec_timeout,
                                           GTestTrapFlags       test_trap_flags);
  
<span class="line-added">+ G_GNUC_END_IGNORE_DEPRECATIONS</span>
<span class="line-added">+ </span>
  typedef enum {
    G_TEST_SUBPROCESS_INHERIT_STDIN  = 1 &lt;&lt; 0,
    G_TEST_SUBPROCESS_INHERIT_STDOUT = 1 &lt;&lt; 1,
    G_TEST_SUBPROCESS_INHERIT_STDERR = 1 &lt;&lt; 2
  } GTestSubprocessFlags;
</pre>
<center><a href="gtestutils.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gthread-posix.c.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>