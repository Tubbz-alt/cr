<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gvaluearray.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gvalue.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gvaluearray.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gvaluearray.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -53,10 +53,13 @@</span>
   *
   * |[&lt;!-- language=&quot;C&quot; --&gt;
   *   GArray *array = g_array_sized_new (FALSE, TRUE, sizeof (GValue), 10);
   *   g_array_set_clear_func (array, (GDestroyNotify) g_value_unset);
   * ]|
<span class="udiff-line-added">+  *</span>
<span class="udiff-line-added">+  * Deprecated: 2.32: Use #GArray instead, if possible for the given use case,</span>
<span class="udiff-line-added">+  *    as described above.</span>
   */
  
  #define GROUP_N_VALUES  (8) /* power of 2 !! */
  
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -72,22 +75,22 @@</span>
   *
   * Deprecated: 2.32: Use g_array_index() instead.
   */
  GValue*
  g_value_array_get_nth (GValueArray *value_array,
<span class="udiff-line-modified-removed">-                guint        index)</span>
<span class="udiff-line-modified-added">+            guint        index)</span>
  {
    g_return_val_if_fail (value_array != NULL, NULL);
    g_return_val_if_fail (index &lt; value_array-&gt;n_values, NULL);
  
    return value_array-&gt;values + index;
  }
  
  static inline void
  value_array_grow (GValueArray *value_array,
<span class="udiff-line-modified-removed">-           guint        n_values,</span>
<span class="udiff-line-modified-removed">-           gboolean     zero_init)</span>
<span class="udiff-line-modified-added">+       guint        n_values,</span>
<span class="udiff-line-modified-added">+       gboolean     zero_init)</span>
  {
    g_return_if_fail (n_values &gt;= value_array-&gt;n_values);
  
    value_array-&gt;n_values = n_values;
    if (value_array-&gt;n_values &gt; value_array-&gt;n_prealloced)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -95,13 +98,13 @@</span>
        guint i = value_array-&gt;n_prealloced;
  
        value_array-&gt;n_prealloced = (value_array-&gt;n_values + GROUP_N_VALUES - 1) &amp; ~(GROUP_N_VALUES - 1);
        value_array-&gt;values = g_renew (GValue, value_array-&gt;values, value_array-&gt;n_prealloced);
        if (!zero_init)
<span class="udiff-line-modified-removed">-     i = value_array-&gt;n_values;</span>
<span class="udiff-line-modified-added">+   i = value_array-&gt;n_values;</span>
        memset (value_array-&gt;values + i, 0,
<span class="udiff-line-modified-removed">-           (value_array-&gt;n_prealloced - i) * sizeof (value_array-&gt;values[0]));</span>
<span class="udiff-line-modified-added">+         (value_array-&gt;n_prealloced - i) * sizeof (value_array-&gt;values[0]));</span>
      }
  }
  
  /**
   * g_value_array_new:
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -152,11 +155,11 @@</span>
    for (i = 0; i &lt; value_array-&gt;n_values; i++)
      {
        GValue *value = value_array-&gt;values + i;
  
        if (G_VALUE_TYPE (value) != 0) /* we allow unset values in the array */
<span class="udiff-line-modified-removed">-     g_value_unset (value);</span>
<span class="udiff-line-modified-added">+   g_value_unset (value);</span>
      }
    g_free (value_array-&gt;values);
    g_slice_free (GValueArray, value_array);
  }
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -190,14 +193,14 @@</span>
    new_array-&gt;n_prealloced = 0;
    value_array_grow (new_array, value_array-&gt;n_values, TRUE);
    for (i = 0; i &lt; new_array-&gt;n_values; i++)
      if (G_VALUE_TYPE (value_array-&gt;values + i) != 0)
        {
<span class="udiff-line-modified-removed">-     GValue *value = new_array-&gt;values + i;</span>
<span class="udiff-line-modified-added">+   GValue *value = new_array-&gt;values + i;</span>
  
<span class="udiff-line-modified-removed">-     g_value_init (value, G_VALUE_TYPE (value_array-&gt;values + i));</span>
<span class="udiff-line-modified-removed">-     g_value_copy (value_array-&gt;values + i, value);</span>
<span class="udiff-line-modified-added">+   g_value_init (value, G_VALUE_TYPE (value_array-&gt;values + i));</span>
<span class="udiff-line-modified-added">+   g_value_copy (value_array-&gt;values + i, value);</span>
        }
    return new_array;
  }
  
  /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -213,11 +216,11 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_prepend_val() instead.
   */
  GValueArray*
  g_value_array_prepend (GValueArray  *value_array,
<span class="udiff-line-modified-removed">-                const GValue *value)</span>
<span class="udiff-line-modified-added">+            const GValue *value)</span>
  {
    g_return_val_if_fail (value_array != NULL, NULL);
  
    G_GNUC_BEGIN_IGNORE_DEPRECATIONS
    return g_value_array_insert (value_array, 0, value);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -236,11 +239,11 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_append_val() instead.
   */
  GValueArray*
  g_value_array_append (GValueArray  *value_array,
<span class="udiff-line-modified-removed">-               const GValue *value)</span>
<span class="udiff-line-modified-added">+           const GValue *value)</span>
  {
    g_return_val_if_fail (value_array != NULL, NULL);
  
    G_GNUC_BEGIN_IGNORE_DEPRECATIONS
    return g_value_array_insert (value_array, value_array-&gt;n_values, value);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -260,12 +263,12 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_insert_val() instead.
   */
  GValueArray*
  g_value_array_insert (GValueArray  *value_array,
<span class="udiff-line-modified-removed">-               guint         index,</span>
<span class="udiff-line-modified-removed">-               const GValue *value)</span>
<span class="udiff-line-modified-added">+           guint         index,</span>
<span class="udiff-line-modified-added">+           const GValue *value)</span>
  {
    guint i;
  
    g_return_val_if_fail (value_array != NULL, NULL);
    g_return_val_if_fail (index &lt;= value_array-&gt;n_values, value_array);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -296,11 +299,11 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_remove_index() instead.
   */
  GValueArray*
  g_value_array_remove (GValueArray *value_array,
<span class="udiff-line-modified-removed">-               guint        index)</span>
<span class="udiff-line-modified-added">+           guint        index)</span>
  {
    g_return_val_if_fail (value_array != NULL, NULL);
    g_return_val_if_fail (index &lt; value_array-&gt;n_values, value_array);
  
    if (G_VALUE_TYPE (value_array-&gt;values + index) != 0)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -330,19 +333,19 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_sort().
   */
  GValueArray*
  g_value_array_sort (GValueArray *value_array,
<span class="udiff-line-modified-removed">-             GCompareFunc compare_func)</span>
<span class="udiff-line-modified-added">+         GCompareFunc compare_func)</span>
  {
    g_return_val_if_fail (compare_func != NULL, NULL);
  
    if (value_array-&gt;n_values)
      qsort (value_array-&gt;values,
<span class="udiff-line-modified-removed">-        value_array-&gt;n_values,</span>
<span class="udiff-line-modified-removed">-        sizeof (value_array-&gt;values[0]),</span>
<span class="udiff-line-modified-removed">-        compare_func);</span>
<span class="udiff-line-modified-added">+      value_array-&gt;n_values,</span>
<span class="udiff-line-modified-added">+      sizeof (value_array-&gt;values[0]),</span>
<span class="udiff-line-modified-added">+      compare_func);</span>
    return value_array;
  }
  
  /**
   * g_value_array_sort_with_data: (rename-to g_value_array_sort)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -360,18 +363,18 @@</span>
   *
   * Deprecated: 2.32: Use #GArray and g_array_sort_with_data().
   */
  GValueArray*
  g_value_array_sort_with_data (GValueArray     *value_array,
<span class="udiff-line-modified-removed">-                   GCompareDataFunc compare_func,</span>
<span class="udiff-line-modified-removed">-                   gpointer         user_data)</span>
<span class="udiff-line-modified-added">+             GCompareDataFunc compare_func,</span>
<span class="udiff-line-modified-added">+             gpointer         user_data)</span>
  {
    g_return_val_if_fail (value_array != NULL, NULL);
    g_return_val_if_fail (compare_func != NULL, NULL);
  
    if (value_array-&gt;n_values)
      g_qsort_with_data (value_array-&gt;values,
<span class="udiff-line-modified-removed">-                value_array-&gt;n_values,</span>
<span class="udiff-line-modified-removed">-                sizeof (value_array-&gt;values[0]),</span>
<span class="udiff-line-modified-removed">-                compare_func, user_data);</span>
<span class="udiff-line-modified-added">+            value_array-&gt;n_values,</span>
<span class="udiff-line-modified-added">+            sizeof (value_array-&gt;values[0]),</span>
<span class="udiff-line-modified-added">+            compare_func, user_data);</span>
    return value_array;
  }
</pre>
<center><a href="gvalue.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gvaluearray.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>