<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gnulib/verify.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="vasnprintf.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="xsize.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gnulib/verify.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /* Compile-time assert-like macros.
  2 
<span class="line-modified">  3    Copyright (C) 2005-2006, 2009-2016 Free Software Foundation, Inc.</span>
  4 
  5    This program is free software: you can redistribute it and/or modify
  6    it under the terms of the GNU Lesser General Public License as published by
  7    the Free Software Foundation; either version 2.1 of the License, or
  8    (at your option) any later version.
  9 
 10    This program is distributed in the hope that it will be useful,
 11    but WITHOUT ANY WARRANTY; without even the implied warranty of
 12    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 13    GNU Lesser General Public License for more details.
 14 
 15    You should have received a copy of the GNU Lesser General Public License
<span class="line-modified"> 16    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.  */</span>
 17 
 18 /* Written by Paul Eggert, Bruno Haible, and Jim Meyering.  */
 19 
 20 #ifndef _GL_VERIFY_H
 21 #define _GL_VERIFY_H
 22 
 23 
 24 /* Define _GL_HAVE__STATIC_ASSERT to 1 if _Static_assert works as per C11.
 25    This is supported by GCC 4.6.0 and later, in C mode, and its use
 26    here generates easier-to-read diagnostics when verify (R) fails.
 27 
 28    Define _GL_HAVE_STATIC_ASSERT to 1 if static_assert works as per C++11.
<span class="line-modified"> 29    This will likely be supported by future GCC versions, in C++ mode.</span>
 30 
 31    Use this only with GCC.  If we were willing to slow &#39;configure&#39;
 32    down we could also use it with other compilers, but since this
 33    affects only the quality of diagnostics, why bother?  */
 34 #if (4 &lt; __GNUC__ + (6 &lt;= __GNUC_MINOR__) \
 35      &amp;&amp; (201112L &lt;= __STDC_VERSION__  || !defined __STRICT_ANSI__) \
 36      &amp;&amp; !defined __cplusplus)
 37 # define _GL_HAVE__STATIC_ASSERT 1
 38 #endif
<span class="line-modified"> 39 /* The condition (99 &lt; __GNUC__) is temporary, until we know about the</span>
<span class="line-removed"> 40    first G++ release that supports static_assert.  */</span>
<span class="line-removed"> 41 #if (99 &lt; __GNUC__) &amp;&amp; defined __cplusplus</span>
 42 # define _GL_HAVE_STATIC_ASSERT 1
 43 #endif
 44 
 45 /* FreeBSD 9.1 &lt;sys/cdefs.h&gt;, included by &lt;stddef.h&gt; and lots of other
 46    system headers, defines a conflicting _Static_assert that is no
 47    better than ours; override it.  */
 48 #ifndef _GL_HAVE_STATIC_ASSERT
 49 # include &lt;stddef.h&gt;
 50 # undef _Static_assert
 51 #endif
 52 
 53 /* Each of these macros verifies that its argument R is nonzero.  To
 54    be portable, R should be an integer constant expression.  Unlike
 55    assert (R), there is no run-time overhead.
 56 
 57    If _Static_assert works, verify (R) uses it directly.  Similarly,
 58    _GL_VERIFY_TRUE works by packaging a _Static_assert inside a struct
 59    that is an operand of sizeof.
 60 
 61    The code below uses several ideas for C++ compilers, and for C
</pre>
<hr />
<pre>
189 # define _GL_VERIFY_TYPE(R, DIAGNOSTIC) \
190     struct {                                   \
191       _Static_assert (R, DIAGNOSTIC);          \
192       int _gl_dummy;                          \
193     }
194 #else
195 # define _GL_VERIFY_TYPE(R, DIAGNOSTIC) \
196     struct { unsigned int _gl_verify_error_if_negative: (R) ? 1 : -1; }
197 #endif
198 
199 /* Verify requirement R at compile-time, as a declaration without a
200    trailing &#39;;&#39;.  If R is false, fail at compile-time, preferably
201    with a diagnostic that includes the string-literal DIAGNOSTIC.
202 
203    Unfortunately, unlike C11, this implementation must appear as an
204    ordinary declaration, and cannot appear inside struct { ... }.  */
205 
206 #ifdef _GL_HAVE__STATIC_ASSERT
207 # define _GL_VERIFY _Static_assert
208 #else
<span class="line-modified">209 # define _GL_VERIFY(R, DIAGNOSTIC)                     \</span>
<span class="line-modified">210     extern int (*_GL_GENSYM (_gl_verify_function) (void))          \</span>
211       [_GL_VERIFY_TRUE (R, DIAGNOSTIC)]
212 #endif
213 
214 /* _GL_STATIC_ASSERT_H is defined if this code is copied into assert.h.  */
215 #ifdef _GL_STATIC_ASSERT_H
216 # if !defined _GL_HAVE__STATIC_ASSERT &amp;&amp; !defined _Static_assert
217 #  define _Static_assert(R, DIAGNOSTIC) _GL_VERIFY (R, DIAGNOSTIC)
218 # endif
219 # if !defined _GL_HAVE_STATIC_ASSERT &amp;&amp; !defined static_assert
220 #  define static_assert _Static_assert /* C11 requires this #define.  */
221 # endif
222 #endif
223 
224 /* @assert.h omit start@  */
225 
226 /* Each of these macros verifies that its argument R is nonzero.  To
227    be portable, R should be an integer constant expression.  Unlike
228    assert (R), there is no run-time overhead.
229 
230    There are two macros, since no single macro can be used in all
231    contexts in C.  verify_true (R) is for scalar contexts, including
232    integer constant expression contexts.  verify (R) is for declaration
233    contexts, e.g., the top level.  */
234 
235 /* Verify requirement R at compile-time, as an integer constant expression.
236    Return 1.  This is equivalent to verify_expr (R, 1).
237 
238    verify_true is obsolescent; please use verify_expr instead.  */
239 
240 #define verify_true(R) _GL_VERIFY_TRUE (R, &quot;verify_true (&quot; #R &quot;)&quot;)
241 
242 /* Verify requirement R at compile-time.  Return the value of the
243    expression E.  */
244 
245 #define verify_expr(R, E) \
246    (_GL_VERIFY_TRUE (R, &quot;verify_expr (&quot; #R &quot;, &quot; #E &quot;)&quot;) ? (E) : (E))
247 
248 /* Verify requirement R at compile-time, as a declaration without a
249    trailing &#39;;&#39;.  */
250 
<span class="line-modified">251 #define verify(R) _GL_VERIFY (R, &quot;verify (&quot; #R &quot;)&quot;)</span>
<span class="line-modified">252 </span>
<span class="line-removed">253 #ifdef __has_builtin</span>
<span class="line-removed">254 # define _GL_MACRO__has_builtin __has_builtin</span>
255 #else
<span class="line-modified">256 # define _GL_MACRO__has_builtin(x) 0</span>





257 #endif
258 
259 /* Assume that R always holds.  This lets the compiler optimize
260    accordingly.  R should not have side-effects; it may or may not be
261    evaluated.  Behavior is undefined if R is false.  */
262 
<span class="line-modified">263 #if (_GL_MACRO__has_builtin (__builtin_unreachable) \</span>
264      || 4 &lt; __GNUC__ + (5 &lt;= __GNUC_MINOR__))
265 # define assume(R) ((R) ? (void) 0 : __builtin_unreachable ())
266 #elif 1200 &lt;= _MSC_VER
267 # define assume(R) __assume (R)
<span class="line-modified">268 #elif (defined lint \</span>
<span class="line-modified">269        &amp;&amp; (_GL_MACRO__has_builtin (__builtin_trap) \</span>
270            || 3 &lt; __GNUC__ + (3 &lt; __GNUC_MINOR__ + (4 &lt;= __GNUC_PATCHLEVEL__))))
271   /* Doing it this way helps various packages when configured with
272      --enable-gcc-warnings, which compiles with -Dlint.  It&#39;s nicer
273      when &#39;assume&#39; silences warnings even with older GCCs.  */
274 # define assume(R) ((R) ? (void) 0 : __builtin_trap ())
275 #else
<span class="line-modified">276 # define assume(R) ((void) (0 &amp;&amp; (R)))</span>

277 #endif
278 
279 /* @assert.h omit end@  */
280 
281 #endif
</pre>
</td>
<td>
<hr />
<pre>
  1 /* Compile-time assert-like macros.
  2 
<span class="line-modified">  3    Copyright (C) 2005-2006, 2009-2019 Free Software Foundation, Inc.</span>
  4 
  5    This program is free software: you can redistribute it and/or modify
  6    it under the terms of the GNU Lesser General Public License as published by
  7    the Free Software Foundation; either version 2.1 of the License, or
  8    (at your option) any later version.
  9 
 10    This program is distributed in the hope that it will be useful,
 11    but WITHOUT ANY WARRANTY; without even the implied warranty of
 12    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 13    GNU Lesser General Public License for more details.
 14 
 15    You should have received a copy of the GNU Lesser General Public License
<span class="line-modified"> 16    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.  */</span>
 17 
 18 /* Written by Paul Eggert, Bruno Haible, and Jim Meyering.  */
 19 
 20 #ifndef _GL_VERIFY_H
 21 #define _GL_VERIFY_H
 22 
 23 
 24 /* Define _GL_HAVE__STATIC_ASSERT to 1 if _Static_assert works as per C11.
 25    This is supported by GCC 4.6.0 and later, in C mode, and its use
 26    here generates easier-to-read diagnostics when verify (R) fails.
 27 
 28    Define _GL_HAVE_STATIC_ASSERT to 1 if static_assert works as per C++11.
<span class="line-modified"> 29    This is supported by GCC 6.1.0 and later, in C++ mode.</span>
 30 
 31    Use this only with GCC.  If we were willing to slow &#39;configure&#39;
 32    down we could also use it with other compilers, but since this
 33    affects only the quality of diagnostics, why bother?  */
 34 #if (4 &lt; __GNUC__ + (6 &lt;= __GNUC_MINOR__) \
 35      &amp;&amp; (201112L &lt;= __STDC_VERSION__  || !defined __STRICT_ANSI__) \
 36      &amp;&amp; !defined __cplusplus)
 37 # define _GL_HAVE__STATIC_ASSERT 1
 38 #endif
<span class="line-modified"> 39 #if (6 &lt;= __GNUC__) &amp;&amp; defined __cplusplus</span>


 40 # define _GL_HAVE_STATIC_ASSERT 1
 41 #endif
 42 
 43 /* FreeBSD 9.1 &lt;sys/cdefs.h&gt;, included by &lt;stddef.h&gt; and lots of other
 44    system headers, defines a conflicting _Static_assert that is no
 45    better than ours; override it.  */
 46 #ifndef _GL_HAVE_STATIC_ASSERT
 47 # include &lt;stddef.h&gt;
 48 # undef _Static_assert
 49 #endif
 50 
 51 /* Each of these macros verifies that its argument R is nonzero.  To
 52    be portable, R should be an integer constant expression.  Unlike
 53    assert (R), there is no run-time overhead.
 54 
 55    If _Static_assert works, verify (R) uses it directly.  Similarly,
 56    _GL_VERIFY_TRUE works by packaging a _Static_assert inside a struct
 57    that is an operand of sizeof.
 58 
 59    The code below uses several ideas for C++ compilers, and for C
</pre>
<hr />
<pre>
187 # define _GL_VERIFY_TYPE(R, DIAGNOSTIC) \
188     struct {                                   \
189       _Static_assert (R, DIAGNOSTIC);          \
190       int _gl_dummy;                          \
191     }
192 #else
193 # define _GL_VERIFY_TYPE(R, DIAGNOSTIC) \
194     struct { unsigned int _gl_verify_error_if_negative: (R) ? 1 : -1; }
195 #endif
196 
197 /* Verify requirement R at compile-time, as a declaration without a
198    trailing &#39;;&#39;.  If R is false, fail at compile-time, preferably
199    with a diagnostic that includes the string-literal DIAGNOSTIC.
200 
201    Unfortunately, unlike C11, this implementation must appear as an
202    ordinary declaration, and cannot appear inside struct { ... }.  */
203 
204 #ifdef _GL_HAVE__STATIC_ASSERT
205 # define _GL_VERIFY _Static_assert
206 #else
<span class="line-modified">207 # define _GL_VERIFY(R, DIAGNOSTIC)               \</span>
<span class="line-modified">208     extern int (*_GL_GENSYM (_gl_verify_function) (void))        \</span>
209       [_GL_VERIFY_TRUE (R, DIAGNOSTIC)]
210 #endif
211 
212 /* _GL_STATIC_ASSERT_H is defined if this code is copied into assert.h.  */
213 #ifdef _GL_STATIC_ASSERT_H
214 # if !defined _GL_HAVE__STATIC_ASSERT &amp;&amp; !defined _Static_assert
215 #  define _Static_assert(R, DIAGNOSTIC) _GL_VERIFY (R, DIAGNOSTIC)
216 # endif
217 # if !defined _GL_HAVE_STATIC_ASSERT &amp;&amp; !defined static_assert
218 #  define static_assert _Static_assert /* C11 requires this #define.  */
219 # endif
220 #endif
221 
222 /* @assert.h omit start@  */
223 
224 /* Each of these macros verifies that its argument R is nonzero.  To
225    be portable, R should be an integer constant expression.  Unlike
226    assert (R), there is no run-time overhead.
227 
228    There are two macros, since no single macro can be used in all
229    contexts in C.  verify_true (R) is for scalar contexts, including
230    integer constant expression contexts.  verify (R) is for declaration
231    contexts, e.g., the top level.  */
232 
233 /* Verify requirement R at compile-time, as an integer constant expression.
234    Return 1.  This is equivalent to verify_expr (R, 1).
235 
236    verify_true is obsolescent; please use verify_expr instead.  */
237 
238 #define verify_true(R) _GL_VERIFY_TRUE (R, &quot;verify_true (&quot; #R &quot;)&quot;)
239 
240 /* Verify requirement R at compile-time.  Return the value of the
241    expression E.  */
242 
243 #define verify_expr(R, E) \
244    (_GL_VERIFY_TRUE (R, &quot;verify_expr (&quot; #R &quot;, &quot; #E &quot;)&quot;) ? (E) : (E))
245 
246 /* Verify requirement R at compile-time, as a declaration without a
247    trailing &#39;;&#39;.  */
248 
<span class="line-modified">249 #ifdef __GNUC__</span>
<span class="line-modified">250 # define verify(R) _GL_VERIFY (R, &quot;verify (&quot; #R &quot;)&quot;)</span>


251 #else
<span class="line-modified">252 /* PGI barfs if R is long.  Play it safe.  */</span>
<span class="line-added">253 # define verify(R) _GL_VERIFY (R, &quot;verify (...)&quot;)</span>
<span class="line-added">254 #endif</span>
<span class="line-added">255 </span>
<span class="line-added">256 #ifndef __has_builtin</span>
<span class="line-added">257 # define __has_builtin(x) 0</span>
258 #endif
259 
260 /* Assume that R always holds.  This lets the compiler optimize
261    accordingly.  R should not have side-effects; it may or may not be
262    evaluated.  Behavior is undefined if R is false.  */
263 
<span class="line-modified">264 #if (__has_builtin (__builtin_unreachable) \</span>
265      || 4 &lt; __GNUC__ + (5 &lt;= __GNUC_MINOR__))
266 # define assume(R) ((R) ? (void) 0 : __builtin_unreachable ())
267 #elif 1200 &lt;= _MSC_VER
268 # define assume(R) __assume (R)
<span class="line-modified">269 #elif ((defined GCC_LINT || defined lint) \</span>
<span class="line-modified">270        &amp;&amp; (__has_builtin (__builtin_trap) \</span>
271            || 3 &lt; __GNUC__ + (3 &lt; __GNUC_MINOR__ + (4 &lt;= __GNUC_PATCHLEVEL__))))
272   /* Doing it this way helps various packages when configured with
273      --enable-gcc-warnings, which compiles with -Dlint.  It&#39;s nicer
274      when &#39;assume&#39; silences warnings even with older GCCs.  */
275 # define assume(R) ((R) ? (void) 0 : __builtin_trap ())
276 #else
<span class="line-modified">277   /* Some tools grok NOTREACHED, e.g., Oracle Studio 12.6.  */</span>
<span class="line-added">278 # define assume(R) ((R) ? (void) 0 : /*NOTREACHED*/ (void) 0)</span>
279 #endif
280 
281 /* @assert.h omit end@  */
282 
283 #endif
</pre>
</td>
</tr>
</table>
<center><a href="vasnprintf.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="xsize.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>