<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Frames modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/gmacros.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
    <script type="text/javascript" src="../../../../../../../../../navigation.js"></script>
  </head>
<body onkeypress="keypress(event);">
<a name="0"></a>
<hr />
<pre>   1 /* GLIB - Library of useful routines for C programming
   2  * Copyright (C) 1995-1997  Peter Mattis, Spencer Kimball and Josh MacDonald
   3  *
   4  * This library is free software; you can redistribute it and/or
   5  * modify it under the terms of the GNU Lesser General Public
   6  * License as published by the Free Software Foundation; either
   7  * version 2.1 of the License, or (at your option) any later version.
   8  *
   9  * This library is distributed in the hope that it will be useful,
  10  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  11  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
  12  * Lesser General Public License for more details.
  13  *
  14  * You should have received a copy of the GNU Lesser General Public
  15  * License along with this library; if not, see &lt;http://www.gnu.org/licenses/&gt;.
  16  */
  17 
  18 /*
  19  * Modified by the GLib Team and others 1997-2000.  See the AUTHORS
  20  * file for a list of people on the GLib Team.  See the ChangeLog
  21  * files for a list of changes.  These files are distributed with
  22  * GLib at ftp://ftp.gtk.org/pub/gtk/.
  23  */
  24 
  25 /* This file must not include any other glib header file and must thus
  26  * not refer to variables from glibconfig.h
  27  */
  28 
  29 #ifndef __G_MACROS_H__
  30 #define __G_MACROS_H__
  31 
  32 #if !defined (__GLIB_H_INSIDE__) &amp;&amp; !defined (GLIB_COMPILATION)
  33 #error &quot;Only &lt;glib.h&gt; can be included directly.&quot;
  34 #endif
  35 
  36 /* We include stddef.h to get the system&#39;s definition of NULL
  37  */
  38 #include &lt;stddef.h&gt;
  39 
  40 #ifdef __GNUC__
  41 #define G_GNUC_CHECK_VERSION(major, minor) \
  42     ((__GNUC__ &gt; (major)) || \
  43      ((__GNUC__ == (major)) &amp;&amp; \
  44       (__GNUC_MINOR__ &gt;= (minor))))
  45 #else
  46 #define G_GNUC_CHECK_VERSION(major, minor) 0
  47 #endif
  48 
  49 /* Here we provide G_GNUC_EXTENSION as an alias for __extension__,
  50  * where this is valid. This allows for warningless compilation of
  51  * &quot;long long&quot; types even in the presence of &#39;-ansi -pedantic&#39;.
  52  */
  53 #if     __GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &gt;= 8)
  54 #define G_GNUC_EXTENSION __extension__
  55 #else
  56 #define G_GNUC_EXTENSION
  57 #endif
  58 
  59 /* Every compiler that we target supports inlining, but some of them may
  60  * complain about it if we don&#39;t say &quot;__inline&quot;.  If we have C99, or if
  61  * we are using C++, then we can use &quot;inline&quot; directly.  Unfortunately
  62  * Visual Studio does not support __STDC_VERSION__, so we need to check
  63  * whether we are on Visual Studio 2013 or earlier to see that we need to
  64  * say &quot;__inline&quot; in C mode.
  65  * Otherwise, we say &quot;__inline&quot; to avoid the warning.
  66  */
  67 #define G_CAN_INLINE
  68 #ifndef __cplusplus
  69 # ifdef _MSC_VER
  70 #  if (_MSC_VER &lt; 1900)
  71 #   define G_INLINE_DEFINE_NEEDED
  72 #  endif
  73 # elif !defined(__STDC_VERSION__) || (__STDC_VERSION__ &lt; 199900)
  74 #  define G_INLINE_DEFINE_NEEDED
  75 # endif
  76 #endif
  77 
  78 #ifdef G_INLINE_DEFINE_NEEDED
  79 # undef inline
  80 # define inline __inline
  81 #endif
  82 
  83 #undef G_INLINE_DEFINE_NEEDED
  84 
<a name="1" id="anc1"></a><span class="line-added">  85 /**</span>
<span class="line-added">  86  * G_INLINE_FUNC:</span>
<span class="line-added">  87  *</span>
<span class="line-added">  88  * This macro used to be used to conditionally define inline functions</span>
<span class="line-added">  89  * in a compatible way before this feature was supported in all</span>
<span class="line-added">  90  * compilers.  These days, GLib requires inlining support from the</span>
<span class="line-added">  91  * compiler, so your GLib-using programs can safely assume that the</span>
<span class="line-added">  92  * &quot;inline&quot; keywork works properly.</span>
<span class="line-added">  93  *</span>
<span class="line-added">  94  * Never use this macro anymore.  Just say &quot;static inline&quot;.</span>
<span class="line-added">  95  *</span>
<span class="line-added">  96  * Deprecated: 2.48: Use &quot;static inline&quot; instead</span>
<span class="line-added">  97  */</span>
<span class="line-added">  98 </span>
  99 /* For historical reasons we need to continue to support those who
 100  * define G_IMPLEMENT_INLINES to mean &quot;don&#39;t implement this here&quot;.
 101  */
 102 #ifdef G_IMPLEMENT_INLINES
<a name="2" id="anc2"></a><span class="line-modified"> 103 #  define G_INLINE_FUNC extern GLIB_DEPRECATED_MACRO_IN_2_48_FOR(static inline)</span>
 104 #  undef  G_CAN_INLINE
 105 #else
<a name="3" id="anc3"></a><span class="line-modified"> 106 #  define G_INLINE_FUNC static inline GLIB_DEPRECATED_MACRO_IN_2_48_FOR(static inline)</span>
 107 #endif /* G_IMPLEMENT_INLINES */
 108 
 109 /* Provide macros to feature the GCC function attribute.
 110  */
<a name="4" id="anc4"></a><span class="line-added"> 111 </span>
<span class="line-added"> 112 /**</span>
<span class="line-added"> 113  * G_GNUC_PURE:</span>
<span class="line-added"> 114  *</span>
<span class="line-added"> 115  * Expands to the GNU C `pure` function attribute if the compiler is gcc.</span>
<span class="line-added"> 116  * Declaring a function as `pure` enables better optimization of calls to</span>
<span class="line-added"> 117  * the function. A `pure` function has no effects except its return value</span>
<span class="line-added"> 118  * and the return value depends only on the parameters and/or global</span>
<span class="line-added"> 119  * variables.</span>
<span class="line-added"> 120  *</span>
<span class="line-added"> 121  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 122  *</span>
<span class="line-added"> 123  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 124  * gboolean g_type_check_value (const GValue *value) G_GNUC_PURE;</span>
<span class="line-added"> 125  * ]|</span>
<span class="line-added"> 126  *</span>
<span class="line-added"> 127  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-pure-function-attribute) for more details.</span>
<span class="line-added"> 128  */</span>
<span class="line-added"> 129 </span>
<span class="line-added"> 130 /**</span>
<span class="line-added"> 131  * G_GNUC_MALLOC:</span>
<span class="line-added"> 132  *</span>
<span class="line-added"> 133  * Expands to the</span>
<span class="line-added"> 134  * [GNU C `malloc` function attribute](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-functions-that-behave-like-malloc)</span>
<span class="line-added"> 135  * if the compiler is gcc.</span>
<span class="line-added"> 136  * Declaring a function as `malloc` enables better optimization of the function,</span>
<span class="line-added"> 137  * but must only be done if the allocation behaviour of the function is fully</span>
<span class="line-added"> 138  * understood, otherwise miscompilation can result.</span>
<span class="line-added"> 139  *</span>
<span class="line-added"> 140  * A function can have the `malloc` attribute if it returns a pointer which is</span>
<span class="line-added"> 141  * guaranteed to not alias with any other pointer valid when the function</span>
<span class="line-added"> 142  * returns, and moreover no pointers to valid objects occur in any storage</span>
<span class="line-added"> 143  * addressed by the returned pointer.</span>
<span class="line-added"> 144  *</span>
<span class="line-added"> 145  * In practice, this means that `G_GNUC_MALLOC` can be used with any function</span>
<span class="line-added"> 146  * which returns unallocated or zeroed-out memory, but not with functions which</span>
<span class="line-added"> 147  * return initialised structures containing other pointers, or with functions</span>
<span class="line-added"> 148  * that reallocate memory. This definition changed in GLib 2.58 to match the</span>
<span class="line-added"> 149  * stricter definition introduced around GCC 5.</span>
<span class="line-added"> 150  *</span>
<span class="line-added"> 151  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 152  *</span>
<span class="line-added"> 153  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 154  * gpointer g_malloc (gsize n_bytes) G_GNUC_MALLOC G_GNUC_ALLOC_SIZE(1);</span>
<span class="line-added"> 155  * ]|</span>
<span class="line-added"> 156  *</span>
<span class="line-added"> 157  * See the</span>
<span class="line-added"> 158  * [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-functions-that-behave-like-malloc)</span>
<span class="line-added"> 159  * for more details.</span>
<span class="line-added"> 160  *</span>
<span class="line-added"> 161  * Since: 2.6</span>
<span class="line-added"> 162  */</span>
<span class="line-added"> 163 </span>
<span class="line-added"> 164 /**</span>
<span class="line-added"> 165  * G_GNUC_NO_INLINE:</span>
<span class="line-added"> 166  *</span>
<span class="line-added"> 167  * Expands to the GNU C `noinline` function attribute if the compiler is gcc.</span>
<span class="line-added"> 168  * If the compiler is not gcc, this macro expands to nothing.</span>
<span class="line-added"> 169  *</span>
<span class="line-added"> 170  * Declaring a function as `noinline` prevents the function from being</span>
<span class="line-added"> 171  * considered for inlining.</span>
<span class="line-added"> 172  *</span>
<span class="line-added"> 173  * The attribute may be placed before the declaration or definition,</span>
<span class="line-added"> 174  * right before the `static` keyword.</span>
<span class="line-added"> 175  *</span>
<span class="line-added"> 176  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 177  * G_GNUC_NO_INLINE</span>
<span class="line-added"> 178  * static int</span>
<span class="line-added"> 179  * do_not_inline_this (void)</span>
<span class="line-added"> 180  * {</span>
<span class="line-added"> 181  *   ...</span>
<span class="line-added"> 182  * }</span>
<span class="line-added"> 183  * ]|</span>
<span class="line-added"> 184  *</span>
<span class="line-added"> 185  * See the</span>
<span class="line-added"> 186  * [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-noinline-function-attribute)</span>
<span class="line-added"> 187  * for more details.</span>
<span class="line-added"> 188  *</span>
<span class="line-added"> 189  * Since: 2.58</span>
<span class="line-added"> 190  */</span>
<span class="line-added"> 191 </span>
 192 #if    __GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &gt;= 96)
 193 #define G_GNUC_PURE __attribute__((__pure__))
 194 #define G_GNUC_MALLOC __attribute__((__malloc__))
 195 #define G_GNUC_NO_INLINE __attribute__((noinline))
 196 #else
 197 #define G_GNUC_PURE
 198 #define G_GNUC_MALLOC
 199 #define G_GNUC_NO_INLINE
 200 #endif
 201 
<a name="5" id="anc5"></a><span class="line-added"> 202 /**</span>
<span class="line-added"> 203  * G_GNUC_NULL_TERMINATED:</span>
<span class="line-added"> 204  *</span>
<span class="line-added"> 205  * Expands to the GNU C `sentinel` function attribute if the compiler is gcc.</span>
<span class="line-added"> 206  * This function attribute only applies to variadic functions and instructs</span>
<span class="line-added"> 207  * the compiler to check that the argument list is terminated with an</span>
<span class="line-added"> 208  * explicit %NULL.</span>
<span class="line-added"> 209  *</span>
<span class="line-added"> 210  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 211  *</span>
<span class="line-added"> 212  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 213  * gchar *g_strconcat (const gchar *string1,</span>
<span class="line-added"> 214  *                     ...) G_GNUC_NULL_TERMINATED;</span>
<span class="line-added"> 215  * ]|</span>
<span class="line-added"> 216  *</span>
<span class="line-added"> 217  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-sentinel-function-attribute) for more details.</span>
<span class="line-added"> 218  *</span>
<span class="line-added"> 219  * Since: 2.8</span>
<span class="line-added"> 220  */</span>
 221 #if     __GNUC__ &gt;= 4
 222 #define G_GNUC_NULL_TERMINATED __attribute__((__sentinel__))
 223 #else
 224 #define G_GNUC_NULL_TERMINATED
 225 #endif
 226 
 227 /*
 228  * We can only use __typeof__ on GCC &gt;= 4.8, and not when compiling C++. Since
 229  * __typeof__ is used in a few places in GLib, provide a pre-processor symbol
 230  * to factor the check out from callers.
 231  *
 232  * This symbol is private.
 233  */
 234 #undef g_has_typeof
 235 #if defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 8)) &amp;&amp; !defined(__cplusplus)
 236 #define g_has_typeof
 237 #endif
 238 
 239 /*
 240  * Clang feature detection: http://clang.llvm.org/docs/LanguageExtensions.html
 241  * These are not available on GCC, but since the pre-processor doesn&#39;t do
 242  * operator short-circuiting, we can&#39;t use it in a statement or we&#39;ll get:
 243  *
 244  * error: missing binary operator before token &quot;(&quot;
 245  *
 246  * So we define it to 0 to satisfy the pre-processor.
 247  */
 248 
 249 #ifdef __has_attribute
 250 #define g_macro__has_attribute __has_attribute
 251 #else
 252 #define g_macro__has_attribute(x) 0
 253 #endif
 254 
 255 #ifdef __has_feature
 256 #define g_macro__has_feature __has_feature
 257 #else
 258 #define g_macro__has_feature(x) 0
 259 #endif
 260 
 261 #ifdef __has_builtin
 262 #define g_macro__has_builtin __has_builtin
 263 #else
 264 #define g_macro__has_builtin(x) 0
 265 #endif
 266 
<a name="6" id="anc6"></a><span class="line-added"> 267 /**</span>
<span class="line-added"> 268  * G_GNUC_ALLOC_SIZE:</span>
<span class="line-added"> 269  * @x: the index of the argument specifying the allocation size</span>
<span class="line-added"> 270  *</span>
<span class="line-added"> 271  * Expands to the GNU C `alloc_size` function attribute if the compiler</span>
<span class="line-added"> 272  * is a new enough gcc. This attribute tells the compiler that the</span>
<span class="line-added"> 273  * function returns a pointer to memory of a size that is specified</span>
<span class="line-added"> 274  * by the @xth function parameter.</span>
<span class="line-added"> 275  *</span>
<span class="line-added"> 276  * Place the attribute after the function declaration, just before the</span>
<span class="line-added"> 277  * semicolon.</span>
<span class="line-added"> 278  *</span>
<span class="line-added"> 279  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 280  * gpointer g_malloc (gsize n_bytes) G_GNUC_MALLOC G_GNUC_ALLOC_SIZE(1);</span>
<span class="line-added"> 281  * ]|</span>
<span class="line-added"> 282  *</span>
<span class="line-added"> 283  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-alloc_005fsize-function-attribute) for more details.</span>
<span class="line-added"> 284  *</span>
<span class="line-added"> 285  * Since: 2.18</span>
<span class="line-added"> 286  */</span>
<span class="line-added"> 287 </span>
<span class="line-added"> 288 /**</span>
<span class="line-added"> 289  * G_GNUC_ALLOC_SIZE2:</span>
<span class="line-added"> 290  * @x: the index of the argument specifying one factor of the allocation size</span>
<span class="line-added"> 291  * @y: the index of the argument specifying the second factor of the allocation size</span>
<span class="line-added"> 292  *</span>
<span class="line-added"> 293  * Expands to the GNU C `alloc_size` function attribute if the compiler is a</span>
<span class="line-added"> 294  * new enough gcc. This attribute tells the compiler that the function returns</span>
<span class="line-added"> 295  * a pointer to memory of a size that is specified by the product of two</span>
<span class="line-added"> 296  * function parameters.</span>
<span class="line-added"> 297  *</span>
<span class="line-added"> 298  * Place the attribute after the function declaration, just before the</span>
<span class="line-added"> 299  * semicolon.</span>
<span class="line-added"> 300  *</span>
<span class="line-added"> 301  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 302  * gpointer g_malloc_n (gsize n_blocks,</span>
<span class="line-added"> 303  *                      gsize n_block_bytes) G_GNUC_MALLOC G_GNUC_ALLOC_SIZE2(1, 2);</span>
<span class="line-added"> 304  * ]|</span>
<span class="line-added"> 305  *</span>
<span class="line-added"> 306  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-alloc_005fsize-function-attribute) for more details.</span>
<span class="line-added"> 307  *</span>
<span class="line-added"> 308  * Since: 2.18</span>
<span class="line-added"> 309  */</span>
 310 #if     (!defined(__clang__) &amp;&amp; ((__GNUC__ &gt; 4) || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 3))) || \
 311         (defined(__clang__) &amp;&amp; g_macro__has_attribute(__alloc_size__))
 312 #define G_GNUC_ALLOC_SIZE(x) __attribute__((__alloc_size__(x)))
 313 #define G_GNUC_ALLOC_SIZE2(x,y) __attribute__((__alloc_size__(x,y)))
 314 #else
 315 #define G_GNUC_ALLOC_SIZE(x)
 316 #define G_GNUC_ALLOC_SIZE2(x,y)
 317 #endif
 318 
<a name="7" id="anc7"></a><span class="line-added"> 319 /**</span>
<span class="line-added"> 320  * G_GNUC_PRINTF:</span>
<span class="line-added"> 321  * @format_idx: the index of the argument corresponding to the</span>
<span class="line-added"> 322  *     format string (the arguments are numbered from 1)</span>
<span class="line-added"> 323  * @arg_idx: the index of the first of the format arguments, or 0 if</span>
<span class="line-added"> 324  *     there are no format arguments</span>
<span class="line-added"> 325  *</span>
<span class="line-added"> 326  * Expands to the GNU C `format` function attribute if the compiler is gcc.</span>
<span class="line-added"> 327  * This is used for declaring functions which take a variable number of</span>
<span class="line-added"> 328  * arguments, with the same syntax as `printf()`. It allows the compiler</span>
<span class="line-added"> 329  * to type-check the arguments passed to the function.</span>
<span class="line-added"> 330  *</span>
<span class="line-added"> 331  * Place the attribute after the function declaration, just before the</span>
<span class="line-added"> 332  * semicolon.</span>
<span class="line-added"> 333  *</span>
<span class="line-added"> 334  * See the</span>
<span class="line-added"> 335  * [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-Wformat-3288)</span>
<span class="line-added"> 336  * for more details.</span>
<span class="line-added"> 337  *</span>
<span class="line-added"> 338  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 339  * gint g_snprintf (gchar  *string,</span>
<span class="line-added"> 340  *                  gulong       n,</span>
<span class="line-added"> 341  *                  gchar const *format,</span>
<span class="line-added"> 342  *                  ...) G_GNUC_PRINTF (3, 4);</span>
<span class="line-added"> 343  * ]|</span>
<span class="line-added"> 344  */</span>
<span class="line-added"> 345 </span>
<span class="line-added"> 346 /**</span>
<span class="line-added"> 347  * G_GNUC_SCANF:</span>
<span class="line-added"> 348  * @format_idx: the index of the argument corresponding to</span>
<span class="line-added"> 349  *     the format string (the arguments are numbered from 1)</span>
<span class="line-added"> 350  * @arg_idx: the index of the first of the format arguments, or 0 if</span>
<span class="line-added"> 351  *     there are no format arguments</span>
<span class="line-added"> 352  *</span>
<span class="line-added"> 353  * Expands to the GNU C `format` function attribute if the compiler is gcc.</span>
<span class="line-added"> 354  * This is used for declaring functions which take a variable number of</span>
<span class="line-added"> 355  * arguments, with the same syntax as `scanf()`. It allows the compiler</span>
<span class="line-added"> 356  * to type-check the arguments passed to the function.</span>
<span class="line-added"> 357  *</span>
<span class="line-added"> 358  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 359  * int my_scanf (MyStream *stream,</span>
<span class="line-added"> 360  *               const char *format,</span>
<span class="line-added"> 361  *               ...) G_GNUC_SCANF (2, 3);</span>
<span class="line-added"> 362  * int my_vscanf (MyStream *stream,</span>
<span class="line-added"> 363  *                const char *format,</span>
<span class="line-added"> 364  *                va_list ap) G_GNUC_SCANF (2, 0);</span>
<span class="line-added"> 365  * ]|</span>
<span class="line-added"> 366  *</span>
<span class="line-added"> 367  * See the</span>
<span class="line-added"> 368  * [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-Wformat-3288)</span>
<span class="line-added"> 369  * for details.</span>
<span class="line-added"> 370  */</span>
<span class="line-added"> 371 </span>
<span class="line-added"> 372 /**</span>
<span class="line-added"> 373  * G_GNUC_STRFTIME:</span>
<span class="line-added"> 374  * @format_idx: the index of the argument corresponding to</span>
<span class="line-added"> 375  *     the format string (the arguments are numbered from 1)</span>
<span class="line-added"> 376  *</span>
<span class="line-added"> 377  * Expands to the GNU C `strftime` format function attribute if the compiler</span>
<span class="line-added"> 378  * is gcc. This is used for declaring functions which take a format argument</span>
<span class="line-added"> 379  * which is passed to `strftime()` or an API implementing its formats. It allows</span>
<span class="line-added"> 380  * the compiler check the format passed to the function.</span>
<span class="line-added"> 381  *</span>
<span class="line-added"> 382  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 383  * gsize my_strftime (MyBuffer *buffer,</span>
<span class="line-added"> 384  *                    const char *format,</span>
<span class="line-added"> 385  *                    const struct tm *tm) G_GNUC_STRFTIME (2);</span>
<span class="line-added"> 386  * ]|</span>
<span class="line-added"> 387  *</span>
<span class="line-added"> 388  * See the</span>
<span class="line-added"> 389  * [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-Wformat-3288)</span>
<span class="line-added"> 390  * for details.</span>
<span class="line-added"> 391  *</span>
<span class="line-added"> 392  * Since: 2.60</span>
<span class="line-added"> 393  */</span>
<span class="line-added"> 394 </span>
<span class="line-added"> 395 /**</span>
<span class="line-added"> 396  * G_GNUC_FORMAT:</span>
<span class="line-added"> 397  * @arg_idx: the index of the argument</span>
<span class="line-added"> 398  *</span>
<span class="line-added"> 399  * Expands to the GNU C `format_arg` function attribute if the compiler</span>
<span class="line-added"> 400  * is gcc. This function attribute specifies that a function takes a</span>
<span class="line-added"> 401  * format string for a `printf()`, `scanf()`, `strftime()` or `strfmon()` style</span>
<span class="line-added"> 402  * function and modifies it, so that the result can be passed to a `printf()`,</span>
<span class="line-added"> 403  * `scanf()`, `strftime()` or `strfmon()` style function (with the remaining</span>
<span class="line-added"> 404  * arguments to the format function the same as they would have been</span>
<span class="line-added"> 405  * for the unmodified string).</span>
<span class="line-added"> 406  *</span>
<span class="line-added"> 407  * Place the attribute after the function declaration, just before the</span>
<span class="line-added"> 408  * semicolon.</span>
<span class="line-added"> 409  *</span>
<span class="line-added"> 410  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-Wformat-nonliteral-1) for more details.</span>
<span class="line-added"> 411  *</span>
<span class="line-added"> 412  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 413  * gchar *g_dgettext (gchar *domain_name, gchar *msgid) G_GNUC_FORMAT (2);</span>
<span class="line-added"> 414  * ]|</span>
<span class="line-added"> 415  */</span>
<span class="line-added"> 416 </span>
<span class="line-added"> 417 /**</span>
<span class="line-added"> 418  * G_GNUC_NORETURN:</span>
<span class="line-added"> 419  *</span>
<span class="line-added"> 420  * Expands to the GNU C `noreturn` function attribute if the compiler is gcc.</span>
<span class="line-added"> 421  * It is used for declaring functions which never return. It enables</span>
<span class="line-added"> 422  * optimization of the function, and avoids possible compiler warnings.</span>
<span class="line-added"> 423  *</span>
<span class="line-added"> 424  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 425  *</span>
<span class="line-added"> 426  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 427  * void g_abort (void) G_GNUC_NORETURN;</span>
<span class="line-added"> 428  * ]|</span>
<span class="line-added"> 429  *</span>
<span class="line-added"> 430  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-noreturn-function-attribute) for more details.</span>
<span class="line-added"> 431  */</span>
<span class="line-added"> 432 </span>
<span class="line-added"> 433 /**</span>
<span class="line-added"> 434  * G_GNUC_CONST:</span>
<span class="line-added"> 435  *</span>
<span class="line-added"> 436  * Expands to the GNU C `const` function attribute if the compiler is gcc.</span>
<span class="line-added"> 437  * Declaring a function as `const` enables better optimization of calls to</span>
<span class="line-added"> 438  * the function. A `const` function doesn&#39;t examine any values except its</span>
<span class="line-added"> 439  * parameters, and has no effects except its return value.</span>
<span class="line-added"> 440  *</span>
<span class="line-added"> 441  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 442  *</span>
<span class="line-added"> 443  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 444  * gchar g_ascii_tolower (gchar c) G_GNUC_CONST;</span>
<span class="line-added"> 445  * ]|</span>
<span class="line-added"> 446  *</span>
<span class="line-added"> 447  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-const-function-attribute) for more details.</span>
<span class="line-added"> 448  *</span>
<span class="line-added"> 449  * A function that has pointer arguments and examines the data pointed to</span>
<span class="line-added"> 450  * must not be declared `const`. Likewise, a function that calls a non-`const`</span>
<span class="line-added"> 451  * function usually must not be `const`. It doesn&#39;t make sense for a `const`</span>
<span class="line-added"> 452  * function to return `void`.</span>
<span class="line-added"> 453  */</span>
<span class="line-added"> 454 </span>
<span class="line-added"> 455 /**</span>
<span class="line-added"> 456  * G_GNUC_UNUSED:</span>
<span class="line-added"> 457  *</span>
<span class="line-added"> 458  * Expands to the GNU C `unused` function attribute if the compiler is gcc.</span>
<span class="line-added"> 459  * It is used for declaring functions and arguments which may never be used.</span>
<span class="line-added"> 460  * It avoids possible compiler warnings.</span>
<span class="line-added"> 461  *</span>
<span class="line-added"> 462  * For functions, place the attribute after the declaration, just before the</span>
<span class="line-added"> 463  * semicolon. For arguments, place the attribute at the beginning of the</span>
<span class="line-added"> 464  * argument declaration.</span>
<span class="line-added"> 465  *</span>
<span class="line-added"> 466  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 467  * void my_unused_function (G_GNUC_UNUSED gint unused_argument,</span>
<span class="line-added"> 468  *                          gint other_argument) G_GNUC_UNUSED;</span>
<span class="line-added"> 469  * ]|</span>
<span class="line-added"> 470  *</span>
<span class="line-added"> 471  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-unused-function-attribute) for more details.</span>
<span class="line-added"> 472  */</span>
<span class="line-added"> 473 </span>
<span class="line-added"> 474 /**</span>
<span class="line-added"> 475  * G_GNUC_NO_INSTRUMENT:</span>
<span class="line-added"> 476  *</span>
<span class="line-added"> 477  * Expands to the GNU C `no_instrument_function` function attribute if the</span>
<span class="line-added"> 478  * compiler is gcc. Functions with this attribute will not be instrumented</span>
<span class="line-added"> 479  * for profiling, when the compiler is called with the</span>
<span class="line-added"> 480  * `-finstrument-functions` option.</span>
<span class="line-added"> 481  *</span>
<span class="line-added"> 482  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 483  *</span>
<span class="line-added"> 484  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 485  * int do_uninteresting_things (void) G_GNUC_NO_INSTRUMENT;</span>
<span class="line-added"> 486  * ]|</span>
<span class="line-added"> 487  *</span>
<span class="line-added"> 488  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-no_005finstrument_005ffunction-function-attribute) for more details.</span>
<span class="line-added"> 489  */</span>
<span class="line-added"> 490 </span>
 491 #if     __GNUC__ &gt; 2 || (__GNUC__ == 2 &amp;&amp; __GNUC_MINOR__ &gt; 4)
 492 #if !defined (__clang__) &amp;&amp; G_GNUC_CHECK_VERSION (4, 4)
 493 #define G_GNUC_PRINTF( format_idx, arg_idx )    \
 494   __attribute__((__format__ (gnu_printf, format_idx, arg_idx)))
 495 #define G_GNUC_SCANF( format_idx, arg_idx )     \
 496   __attribute__((__format__ (gnu_scanf, format_idx, arg_idx)))
<a name="8" id="anc8"></a><span class="line-added"> 497 #define G_GNUC_STRFTIME( format_idx )    \</span>
<span class="line-added"> 498   __attribute__((__format__ (gnu_strftime, format_idx, 0)))</span>
 499 #else
 500 #define G_GNUC_PRINTF( format_idx, arg_idx )    \
 501   __attribute__((__format__ (__printf__, format_idx, arg_idx)))
 502 #define G_GNUC_SCANF( format_idx, arg_idx )     \
 503   __attribute__((__format__ (__scanf__, format_idx, arg_idx)))
<a name="9" id="anc9"></a><span class="line-added"> 504 #define G_GNUC_STRFTIME( format_idx )    \</span>
<span class="line-added"> 505   __attribute__((__format__ (__strftime__, format_idx, 0)))</span>
 506 #endif
 507 #define G_GNUC_FORMAT( arg_idx )                \
 508   __attribute__((__format_arg__ (arg_idx)))
 509 #define G_GNUC_NORETURN                         \
 510   __attribute__((__noreturn__))
 511 #define G_GNUC_CONST                            \
 512   __attribute__((__const__))
 513 #define G_GNUC_UNUSED                           \
 514   __attribute__((__unused__))
<a name="10" id="anc10"></a><span class="line-modified"> 515 #define G_GNUC_NO_INSTRUMENT      \</span>
 516   __attribute__((__no_instrument_function__))
 517 #else   /* !__GNUC__ */
 518 #define G_GNUC_PRINTF( format_idx, arg_idx )
 519 #define G_GNUC_SCANF( format_idx, arg_idx )
<a name="11" id="anc11"></a><span class="line-added"> 520 #define G_GNUC_STRFTIME( format_idx )</span>
 521 #define G_GNUC_FORMAT( arg_idx )
<a name="12" id="anc12"></a><span class="line-added"> 522 /* NOTE: MSVC has __declspec(noreturn) but unlike GCC __attribute__,</span>
<span class="line-added"> 523  * __declspec can only be placed at the start of the function prototype</span>
<span class="line-added"> 524  * and not at the end, so we can&#39;t use it without breaking API.</span>
<span class="line-added"> 525  */</span>
 526 #define G_GNUC_NORETURN
 527 #define G_GNUC_CONST
 528 #define G_GNUC_UNUSED
 529 #define G_GNUC_NO_INSTRUMENT
 530 #endif  /* !__GNUC__ */
 531 
<a name="13" id="anc13"></a><span class="line-modified"> 532 /**</span>
<span class="line-added"> 533  * G_GNUC_FALLTHROUGH:</span>
<span class="line-added"> 534  *</span>
<span class="line-added"> 535  * Expands to the GNU C `fallthrough` statement attribute if the compiler is gcc.</span>
<span class="line-added"> 536  * This allows declaring case statement to explicitly fall through in switch</span>
<span class="line-added"> 537  * statements. To enable this feature, use `-Wimplicit-fallthrough` during</span>
<span class="line-added"> 538  * compilation.</span>
<span class="line-added"> 539  *</span>
<span class="line-added"> 540  * Put the attribute right before the case statement you want to fall through</span>
<span class="line-added"> 541  * to.</span>
<span class="line-added"> 542  *</span>
<span class="line-added"> 543  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 544  * switch (foo)</span>
<span class="line-added"> 545  *   {</span>
<span class="line-added"> 546  *     case 1:</span>
<span class="line-added"> 547  *       g_message (&quot;it&#39;s 1&quot;);</span>
<span class="line-added"> 548  *       G_GNUC_FALLTHROUGH;</span>
<span class="line-added"> 549  *     case 2:</span>
<span class="line-added"> 550  *       g_message (&quot;it&#39;s either 1 or 2&quot;);</span>
<span class="line-added"> 551  *       break;</span>
<span class="line-added"> 552  *   }</span>
<span class="line-added"> 553  * ]|</span>
<span class="line-added"> 554  *</span>
<span class="line-added"> 555  *</span>
<span class="line-added"> 556  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Statement-Attributes.html#index-fallthrough-statement-attribute) for more details.</span>
<span class="line-added"> 557  *</span>
<span class="line-added"> 558  * Since: 2.60</span>
<span class="line-added"> 559  */</span>
<span class="line-added"> 560 #if    __GNUC__ &gt; 6</span>
<span class="line-added"> 561 #define G_GNUC_FALLTHROUGH __attribute__((fallthrough))</span>
<span class="line-added"> 562 #else</span>
<span class="line-added"> 563 #define G_GNUC_FALLTHROUGH</span>
<span class="line-added"> 564 #endif /* __GNUC__ */</span>
<span class="line-added"> 565 </span>
<span class="line-added"> 566 /**</span>
<span class="line-added"> 567  * G_GNUC_DEPRECATED:</span>
<span class="line-added"> 568  *</span>
<span class="line-added"> 569  * Expands to the GNU C `deprecated` attribute if the compiler is gcc.</span>
<span class="line-added"> 570  * It can be used to mark `typedef`s, variables and functions as deprecated.</span>
<span class="line-added"> 571  * When called with the `-Wdeprecated-declarations` option,</span>
<span class="line-added"> 572  * gcc will generate warnings when deprecated interfaces are used.</span>
<span class="line-added"> 573  *</span>
<span class="line-added"> 574  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 575  *</span>
<span class="line-added"> 576  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 577  * int my_mistake (void) G_GNUC_DEPRECATED;</span>
<span class="line-added"> 578  * ]|</span>
<span class="line-added"> 579  *</span>
<span class="line-added"> 580  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-deprecated-function-attribute) for more details.</span>
<span class="line-added"> 581  *</span>
<span class="line-added"> 582  * Since: 2.2</span>
<span class="line-added"> 583  */</span>
<span class="line-added"> 584 #if    __GNUC__ &gt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 1) || defined (__clang__)</span>
 585 #define G_GNUC_DEPRECATED __attribute__((__deprecated__))
 586 #else
 587 #define G_GNUC_DEPRECATED
 588 #endif /* __GNUC__ */
 589 
<a name="14" id="anc14"></a><span class="line-modified"> 590 /**</span>
<span class="line-added"> 591  * G_GNUC_DEPRECATED_FOR:</span>
<span class="line-added"> 592  * @f: the intended replacement for the deprecated symbol,</span>
<span class="line-added"> 593  *     such as the name of a function</span>
<span class="line-added"> 594  *</span>
<span class="line-added"> 595  * Like %G_GNUC_DEPRECATED, but names the intended replacement for the</span>
<span class="line-added"> 596  * deprecated symbol if the version of gcc in use is new enough to support</span>
<span class="line-added"> 597  * custom deprecation messages.</span>
<span class="line-added"> 598  *</span>
<span class="line-added"> 599  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 600  *</span>
<span class="line-added"> 601  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 602  * int my_mistake (void) G_GNUC_DEPRECATED_FOR(my_replacement);</span>
<span class="line-added"> 603  * ]|</span>
<span class="line-added"> 604  *</span>
<span class="line-added"> 605  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-deprecated-function-attribute) for more details.</span>
<span class="line-added"> 606  *</span>
<span class="line-added"> 607  * Note that if @f is a macro, it will be expanded in the warning message.</span>
<span class="line-added"> 608  * You can enclose it in quotes to prevent this. (The quotes will show up</span>
<span class="line-added"> 609  * in the warning, but it&#39;s better than showing the macro expansion.)</span>
<span class="line-added"> 610  *</span>
<span class="line-added"> 611  * Since: 2.26</span>
<span class="line-added"> 612  */</span>
<span class="line-added"> 613 #if    __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 5) || defined (__clang__)</span>
 614 #define G_GNUC_DEPRECATED_FOR(f)                        \
 615   __attribute__((deprecated(&quot;Use &quot; #f &quot; instead&quot;)))
 616 #else
 617 #define G_GNUC_DEPRECATED_FOR(f)        G_GNUC_DEPRECATED
 618 #endif /* __GNUC__ */
 619 
 620 #ifdef __ICC
 621 #define G_GNUC_BEGIN_IGNORE_DEPRECATIONS                \
 622   _Pragma (&quot;warning (push)&quot;)                            \
 623   _Pragma (&quot;warning (disable:1478)&quot;)
<a name="15" id="anc15"></a><span class="line-modified"> 624 #define G_GNUC_END_IGNORE_DEPRECATIONS      \</span>
 625   _Pragma (&quot;warning (pop)&quot;)
 626 #elif    __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6)
<a name="16" id="anc16"></a><span class="line-modified"> 627 #define G_GNUC_BEGIN_IGNORE_DEPRECATIONS    \</span>
<span class="line-modified"> 628   _Pragma (&quot;GCC diagnostic push&quot;)     \</span>
 629   _Pragma (&quot;GCC diagnostic ignored \&quot;-Wdeprecated-declarations\&quot;&quot;)
<a name="17" id="anc17"></a><span class="line-modified"> 630 #define G_GNUC_END_IGNORE_DEPRECATIONS      \</span>
 631   _Pragma (&quot;GCC diagnostic pop&quot;)
<a name="18" id="anc18"></a><span class="line-modified"> 632 #elif defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1500) &amp;&amp; !defined (__clang__)</span>
<span class="line-modified"> 633 #define G_GNUC_BEGIN_IGNORE_DEPRECATIONS    \</span>
 634   __pragma (warning (push))  \
 635   __pragma (warning (disable : 4996))
<a name="19" id="anc19"></a><span class="line-modified"> 636 #define G_GNUC_END_IGNORE_DEPRECATIONS      \</span>
 637   __pragma (warning (pop))
 638 #elif defined (__clang__)
 639 #define G_GNUC_BEGIN_IGNORE_DEPRECATIONS \
 640   _Pragma(&quot;clang diagnostic push&quot;) \
 641   _Pragma(&quot;clang diagnostic ignored \&quot;-Wdeprecated-declarations\&quot;&quot;)
 642 #define G_GNUC_END_IGNORE_DEPRECATIONS \
 643   _Pragma(&quot;clang diagnostic pop&quot;)
 644 #else
 645 #define G_GNUC_BEGIN_IGNORE_DEPRECATIONS
 646 #define G_GNUC_END_IGNORE_DEPRECATIONS
 647 #endif
 648 
<a name="20" id="anc20"></a><span class="line-added"> 649 /**</span>
<span class="line-added"> 650  * G_GNUC_MAY_ALIAS:</span>
<span class="line-added"> 651  *</span>
<span class="line-added"> 652  * Expands to the GNU C `may_alias` type attribute if the compiler is gcc.</span>
<span class="line-added"> 653  * Types with this attribute will not be subjected to type-based alias</span>
<span class="line-added"> 654  * analysis, but are assumed to alias with any other type, just like `char`.</span>
<span class="line-added"> 655  *</span>
<span class="line-added"> 656  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#index-may_005falias-type-attribute) for details.</span>
<span class="line-added"> 657  *</span>
<span class="line-added"> 658  * Since: 2.14</span>
<span class="line-added"> 659  */</span>
 660 #if     __GNUC__ &gt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 3)
 661 #define G_GNUC_MAY_ALIAS __attribute__((may_alias))
 662 #else
 663 #define G_GNUC_MAY_ALIAS
 664 #endif
 665 
<a name="21" id="anc21"></a><span class="line-added"> 666 /**</span>
<span class="line-added"> 667  * G_GNUC_WARN_UNUSED_RESULT:</span>
<span class="line-added"> 668  *</span>
<span class="line-added"> 669  * Expands to the GNU C `warn_unused_result` function attribute if the compiler</span>
<span class="line-added"> 670  * is gcc. This function attribute makes the compiler emit a warning if the</span>
<span class="line-added"> 671  * result of a function call is ignored.</span>
<span class="line-added"> 672  *</span>
<span class="line-added"> 673  * Place the attribute after the declaration, just before the semicolon.</span>
<span class="line-added"> 674  *</span>
<span class="line-added"> 675  * |[&lt;!-- language=&quot;C&quot; --&gt;</span>
<span class="line-added"> 676  * GList *g_list_append (GList *list,</span>
<span class="line-added"> 677  *                       gpointer data) G_GNUC_WARN_UNUSED_RESULT;</span>
<span class="line-added"> 678  * ]|</span>
<span class="line-added"> 679  *</span>
<span class="line-added"> 680  * See the [GNU C documentation](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-warn_005funused_005fresult-function-attribute) for more details.</span>
<span class="line-added"> 681  *</span>
<span class="line-added"> 682  * Since: 2.10</span>
<span class="line-added"> 683  */</span>
 684 #if    __GNUC__ &gt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 4)
 685 #define G_GNUC_WARN_UNUSED_RESULT __attribute__((warn_unused_result))
 686 #else
 687 #define G_GNUC_WARN_UNUSED_RESULT
 688 #endif /* __GNUC__ */
 689 
<a name="22" id="anc22"></a><span class="line-modified"> 690 /**</span>
<span class="line-added"> 691  * G_GNUC_FUNCTION:</span>
<span class="line-added"> 692  *</span>
<span class="line-added"> 693  * Expands to &quot;&quot; on all modern compilers, and to  __FUNCTION__ on gcc</span>
<span class="line-added"> 694  * version 2.x. Don&#39;t use it.</span>
<span class="line-added"> 695  *</span>
<span class="line-added"> 696  * Deprecated: 2.16: Use G_STRFUNC() instead</span>
<span class="line-added"> 697  */</span>
<span class="line-added"> 698 </span>
<span class="line-added"> 699 /**</span>
<span class="line-added"> 700  * G_GNUC_PRETTY_FUNCTION:</span>
<span class="line-added"> 701  *</span>
<span class="line-added"> 702  * Expands to &quot;&quot; on all modern compilers, and to __PRETTY_FUNCTION__</span>
<span class="line-added"> 703  * on gcc version 2.x. Don&#39;t use it.</span>
<span class="line-added"> 704  *</span>
<span class="line-added"> 705  * Deprecated: 2.16: Use G_STRFUNC() instead</span>
<span class="line-added"> 706  */</span>
<span class="line-added"> 707 </span>
 708 /* Wrap the gcc __PRETTY_FUNCTION__ and __FUNCTION__ variables with
 709  * macros, so we can refer to them as strings unconditionally.
 710  * usage not-recommended since gcc-3.0
<a name="23" id="anc23"></a><span class="line-added"> 711  *</span>
<span class="line-added"> 712  * Mark them as deprecated since 2.26, since that&#39;s when version macros were</span>
<span class="line-added"> 713  * introduced.</span>
 714  */
 715 #if defined (__GNUC__) &amp;&amp; (__GNUC__ &lt; 3)
<a name="24" id="anc24"></a><span class="line-modified"> 716 #define G_GNUC_FUNCTION         __FUNCTION__ GLIB_DEPRECATED_MACRO_IN_2_26_FOR(G_STRFUNC)</span>
<span class="line-modified"> 717 #define G_GNUC_PRETTY_FUNCTION  __PRETTY_FUNCTION__ GLIB_DEPRECATED_MACRO_IN_2_26_FOR(G_STRFUNC)</span>
 718 #else   /* !__GNUC__ */
<a name="25" id="anc25"></a><span class="line-modified"> 719 #define G_GNUC_FUNCTION         &quot;&quot; GLIB_DEPRECATED_MACRO_IN_2_26_FOR(G_STRFUNC)</span>
<span class="line-modified"> 720 #define G_GNUC_PRETTY_FUNCTION  &quot;&quot; GLIB_DEPRECATED_MACRO_IN_2_26_FOR(G_STRFUNC)</span>
 721 #endif  /* !__GNUC__ */
<a name="26" id="anc26"></a>
 722 
 723 #if g_macro__has_feature(attribute_analyzer_noreturn) &amp;&amp; defined(__clang_analyzer__)
 724 #define G_ANALYZER_ANALYZING 1
 725 #define G_ANALYZER_NORETURN __attribute__((analyzer_noreturn))
 726 #else
 727 #define G_ANALYZER_ANALYZING 0
 728 #define G_ANALYZER_NORETURN
 729 #endif
 730 
<a name="27" id="anc27"></a><span class="line-modified"> 731 #define G_STRINGIFY(macro_or_string)  G_STRINGIFY_ARG (macro_or_string)</span>
<span class="line-modified"> 732 #define G_STRINGIFY_ARG(contents) #contents</span>
 733 
 734 #ifndef __GI_SCANNER__ /* The static assert macro really confuses the introspection parser */
 735 #define G_PASTE_ARGS(identifier1,identifier2) identifier1 ## identifier2
 736 #define G_PASTE(identifier1,identifier2)      G_PASTE_ARGS (identifier1, identifier2)
<a name="28" id="anc28"></a><span class="line-added"> 737 #if defined(__STDC_VERSION__) &amp;&amp; __STDC_VERSION__ &gt;= 201112L</span>
<span class="line-added"> 738 #define G_STATIC_ASSERT(expr) _Static_assert (expr, &quot;Expression evaluates to false&quot;)</span>
<span class="line-added"> 739 #elif (defined(__cplusplus) &amp;&amp; __cplusplus &gt;= 201103L) || \</span>
<span class="line-added"> 740       (defined(__cplusplus) &amp;&amp; defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1600)) || \</span>
<span class="line-added"> 741       (defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1800))</span>
<span class="line-added"> 742 #define G_STATIC_ASSERT(expr) static_assert (expr, &quot;Expression evaluates to false&quot;)</span>
<span class="line-added"> 743 #else</span>
 744 #ifdef __COUNTER__
 745 #define G_STATIC_ASSERT(expr) typedef char G_PASTE (_GStaticAssertCompileTimeAssertion_, __COUNTER__)[(expr) ? 1 : -1] G_GNUC_UNUSED
 746 #else
 747 #define G_STATIC_ASSERT(expr) typedef char G_PASTE (_GStaticAssertCompileTimeAssertion_, __LINE__)[(expr) ? 1 : -1] G_GNUC_UNUSED
 748 #endif
<a name="29" id="anc29"></a><span class="line-added"> 749 #endif /* __STDC_VERSION__ */</span>
 750 #define G_STATIC_ASSERT_EXPR(expr) ((void) sizeof (char[(expr) ? 1 : -1]))
<a name="30" id="anc30"></a><span class="line-modified"> 751 #endif /* !__GI_SCANNER__ */</span>
 752 
 753 /* Provide a string identifying the current code position */
 754 #if defined(__GNUC__) &amp;&amp; (__GNUC__ &lt; 3) &amp;&amp; !defined(__cplusplus)
<a name="31" id="anc31"></a><span class="line-modified"> 755 #define G_STRLOC  __FILE__ &quot;:&quot; G_STRINGIFY (__LINE__) &quot;:&quot; __PRETTY_FUNCTION__ &quot;()&quot;</span>
 756 #else
<a name="32" id="anc32"></a><span class="line-modified"> 757 #define G_STRLOC  __FILE__ &quot;:&quot; G_STRINGIFY (__LINE__)</span>
 758 #endif
 759 
 760 /* Provide a string identifying the current function, non-concatenatable */
 761 #if defined (__GNUC__) &amp;&amp; defined (__cplusplus)
 762 #define G_STRFUNC     ((const char*) (__PRETTY_FUNCTION__))
 763 #elif defined (__STDC_VERSION__) &amp;&amp; __STDC_VERSION__ &gt;= 199901L
 764 #define G_STRFUNC     ((const char*) (__func__))
 765 #elif defined (__GNUC__) || (defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt; 1300))
 766 #define G_STRFUNC     ((const char*) (__FUNCTION__))
 767 #else
 768 #define G_STRFUNC     ((const char*) (&quot;???&quot;))
 769 #endif
 770 
 771 /* Guard C code in headers, while including them from C++ */
 772 #ifdef  __cplusplus
 773 #define G_BEGIN_DECLS  extern &quot;C&quot; {
 774 #define G_END_DECLS    }
 775 #else
 776 #define G_BEGIN_DECLS
 777 #define G_END_DECLS
 778 #endif
 779 
 780 /* Provide definitions for some commonly used macros.
 781  *  Some of them are only provided if they haven&#39;t already
 782  *  been defined. It is assumed that if they are already
 783  *  defined then the current definition is correct.
 784  */
 785 #ifndef NULL
 786 #  ifdef __cplusplus
 787 #  define NULL        (0L)
 788 #  else /* !__cplusplus */
 789 #  define NULL        ((void*) 0)
 790 #  endif /* !__cplusplus */
 791 #endif
 792 
 793 #ifndef FALSE
<a name="33" id="anc33"></a><span class="line-modified"> 794 #define FALSE (0)</span>
 795 #endif
 796 
 797 #ifndef TRUE
<a name="34" id="anc34"></a><span class="line-modified"> 798 #define TRUE  (!FALSE)</span>
 799 #endif
 800 
 801 #undef  MAX
 802 #define MAX(a, b)  (((a) &gt; (b)) ? (a) : (b))
 803 
 804 #undef  MIN
 805 #define MIN(a, b)  (((a) &lt; (b)) ? (a) : (b))
 806 
 807 #undef  ABS
 808 #define ABS(a)     (((a) &lt; 0) ? -(a) : (a))
 809 
 810 #undef  CLAMP
 811 #define CLAMP(x, low, high)  (((x) &gt; (high)) ? (high) : (((x) &lt; (low)) ? (low) : (x)))
 812 
 813 #define G_APPROX_VALUE(a, b, epsilon) \
 814   (((a) &gt; (b) ? (a) - (b) : (b) - (a)) &lt; (epsilon))
 815 
 816 /* Count the number of elements in an array. The array must be defined
 817  * as such; using this with a dynamically allocated array will give
 818  * incorrect results.
 819  */
<a name="35" id="anc35"></a><span class="line-modified"> 820 #define G_N_ELEMENTS(arr)   (sizeof (arr) / sizeof ((arr)[0]))</span>
 821 
 822 /* Macros by analogy to GINT_TO_POINTER, GPOINTER_TO_INT
 823  */
 824 #define GPOINTER_TO_SIZE(p) ((gsize) (p))
 825 #define GSIZE_TO_POINTER(s) ((gpointer) (gsize) (s))
 826 
 827 /* Provide convenience macros for handling structure
 828  * fields through their offsets.
 829  */
 830 
 831 #if (defined(__GNUC__)  &amp;&amp; __GNUC__ &gt;= 4) || defined (_MSC_VER)
 832 #define G_STRUCT_OFFSET(struct_type, member) \
 833       ((glong) offsetof (struct_type, member))
 834 #else
<a name="36" id="anc36"></a><span class="line-modified"> 835 #define G_STRUCT_OFFSET(struct_type, member)  \</span>
 836       ((glong) ((guint8*) &amp;((struct_type*) 0)-&gt;member))
 837 #endif
 838 
 839 #define G_STRUCT_MEMBER_P(struct_p, struct_offset)   \
 840     ((gpointer) ((guint8*) (struct_p) + (glong) (struct_offset)))
 841 #define G_STRUCT_MEMBER(member_type, struct_p, struct_offset)   \
 842     (*(member_type*) G_STRUCT_MEMBER_P ((struct_p), (struct_offset)))
 843 
 844 /* Provide simple macro statement wrappers:
 845  *   G_STMT_START { statements; } G_STMT_END;
 846  * This can be used as a single statement, like:
 847  *   if (x) G_STMT_START { ... } G_STMT_END; else ...
 848  * This intentionally does not use compiler extensions like GCC&#39;s &#39;({...})&#39; to
 849  * avoid portability issue or side effects when compiled with different compilers.
 850  * MSVC complains about &quot;while(0)&quot;: C4127: &quot;Conditional expression is constant&quot;,
 851  * so we use __pragma to avoid the warning since the use here is intentional.
 852  */
 853 #if !(defined (G_STMT_START) &amp;&amp; defined (G_STMT_END))
 854 #define G_STMT_START  do
 855 #if defined (_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1500)
 856 #define G_STMT_END \
 857     __pragma(warning(push)) \
 858     __pragma(warning(disable:4127)) \
 859     while(0) \
 860     __pragma(warning(pop))
 861 #else
 862 #define G_STMT_END    while (0)
 863 #endif
 864 #endif
 865 
<a name="37" id="anc37"></a><span class="line-modified"> 866 /* Provide G_ALIGNOF alignment macro.</span>
<span class="line-modified"> 867  *</span>
<span class="line-modified"> 868  * Note we cannot use the gcc __alignof__ operator here, as that returns the</span>
<span class="line-modified"> 869  * preferred alignment rather than the minimal alignment. See</span>
<span class="line-added"> 870  * https://gitlab.gnome.org/GNOME/glib/merge_requests/538/diffs#note_390790.</span>
<span class="line-added"> 871  */</span>
<span class="line-added"> 872 </span>
<span class="line-added"> 873 /**</span>
<span class="line-added"> 874  * G_ALIGNOF</span>
<span class="line-added"> 875  * @type: a type-name</span>
<span class="line-added"> 876  *</span>
<span class="line-added"> 877  * Return the minimal alignment required by the platform ABI for values of the given</span>
<span class="line-added"> 878  * type. The address of a variable or struct member of the given type must always be</span>
<span class="line-added"> 879  * a multiple of this alignment. For example, most platforms require int variables</span>
<span class="line-added"> 880  * to be aligned at a 4-byte boundary, so `G_ALIGNOF (int)` is 4 on most platforms.</span>
<span class="line-added"> 881  *</span>
<span class="line-added"> 882  * Note this is not necessarily the same as the value returned by GCC&#39;s</span>
<span class="line-added"> 883  * `__alignof__` operator, which returns the preferred alignment for a type.</span>
<span class="line-added"> 884  * The preferred alignment may be a stricter alignment than the minimal</span>
<span class="line-added"> 885  * alignment.</span>
<span class="line-added"> 886  *</span>
<span class="line-added"> 887  * Since: 2.60</span>
<span class="line-added"> 888  */</span>
<span class="line-added"> 889 #if defined(__STDC_VERSION__) &amp;&amp; __STDC_VERSION__ &gt;= 201112L &amp;&amp; !defined(__cplusplus)</span>
<span class="line-added"> 890 #define G_ALIGNOF(type) _Alignof (type)</span>
 891 #else
<a name="38" id="anc38"></a><span class="line-modified"> 892 #define G_ALIGNOF(type) (G_STRUCT_OFFSET (struct { char a; type b; }, b))</span>
 893 #endif
<a name="39" id="anc39"></a><span class="line-added"> 894 </span>
<span class="line-added"> 895 /**</span>
<span class="line-added"> 896  * G_CONST_RETURN:</span>
<span class="line-added"> 897  *</span>
<span class="line-added"> 898  * If %G_DISABLE_CONST_RETURNS is defined, this macro expands</span>
<span class="line-added"> 899  * to nothing. By default, the macro expands to const. The macro</span>
<span class="line-added"> 900  * can be used in place of const for functions that return a value</span>
<span class="line-added"> 901  * that should not be modified. The purpose of this macro is to allow</span>
<span class="line-added"> 902  * us to turn on const for returned constant strings by default, while</span>
<span class="line-added"> 903  * allowing programmers who find that annoying to turn it off. This macro</span>
<span class="line-added"> 904  * should only be used for return values and for &quot;out&quot; parameters, it</span>
<span class="line-added"> 905  * doesn&#39;t make sense for &quot;in&quot; parameters.</span>
<span class="line-added"> 906  *</span>
<span class="line-added"> 907  * Deprecated: 2.30: API providers should replace all existing uses with</span>
<span class="line-added"> 908  * const and API consumers should adjust their code accordingly</span>
<span class="line-added"> 909  */</span>
<span class="line-added"> 910 #ifdef G_DISABLE_CONST_RETURNS</span>
<span class="line-added"> 911 #define G_CONST_RETURN GLIB_DEPRECATED_MACRO_IN_2_30_FOR(const)</span>
<span class="line-added"> 912 #else</span>
<span class="line-added"> 913 #define G_CONST_RETURN const GLIB_DEPRECATED_MACRO_IN_2_30_FOR(const)</span>
 914 #endif
 915 
 916 /*
 917  * The G_LIKELY and G_UNLIKELY macros let the programmer give hints to
 918  * the compiler about the expected result of an expression. Some compilers
 919  * can use this information for optimizations.
 920  *
 921  * The _G_BOOLEAN_EXPR macro is intended to trigger a gcc warning when
 922  * putting assignments in g_return_if_fail ().
 923  */
 924 #if defined(__GNUC__) &amp;&amp; (__GNUC__ &gt; 2) &amp;&amp; defined(__OPTIMIZE__)
 925 #define _G_BOOLEAN_EXPR(expr)                   \
 926  G_GNUC_EXTENSION ({                            \
 927    int _g_boolean_var_;                         \
 928    if (expr)                                    \
 929       _g_boolean_var_ = 1;                      \
 930    else                                         \
 931       _g_boolean_var_ = 0;                      \
 932    _g_boolean_var_;                             \
 933 })
<a name="40" id="anc40"></a><span class="line-modified"> 934 #define G_LIKELY(expr) (__builtin_expect (_G_BOOLEAN_EXPR(expr), 1))</span>
<span class="line-modified"> 935 #define G_UNLIKELY(expr) (__builtin_expect (_G_BOOLEAN_EXPR(expr), 0))</span>
 936 #else
 937 #define G_LIKELY(expr) (expr)
 938 #define G_UNLIKELY(expr) (expr)
 939 #endif
 940 
<a name="41" id="anc41"></a><span class="line-modified"> 941 #if    __GNUC__ &gt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 1) || defined (__clang__)</span>
 942 #define G_DEPRECATED __attribute__((__deprecated__))
 943 #elif defined(_MSC_VER) &amp;&amp; (_MSC_VER &gt;= 1300)
 944 #define G_DEPRECATED __declspec(deprecated)
 945 #else
 946 #define G_DEPRECATED
 947 #endif
 948 
<a name="42" id="anc42"></a><span class="line-modified"> 949 #if    __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 5) || defined (__clang__)</span>
 950 #define G_DEPRECATED_FOR(f) __attribute__((__deprecated__(&quot;Use &#39;&quot; #f &quot;&#39; instead&quot;)))
 951 #elif defined(_MSC_FULL_VER) &amp;&amp; (_MSC_FULL_VER &gt; 140050320)
 952 #define G_DEPRECATED_FOR(f) __declspec(deprecated(&quot;is deprecated. Use &#39;&quot; #f &quot;&#39; instead&quot;))
 953 #else
 954 #define G_DEPRECATED_FOR(f) G_DEPRECATED
 955 #endif
 956 
<a name="43" id="anc43"></a><span class="line-modified"> 957 #if    __GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 5) || defined (__clang__)</span>
 958 #define G_UNAVAILABLE(maj,min) __attribute__((deprecated(&quot;Not available before &quot; #maj &quot;.&quot; #min)))
 959 #elif defined(_MSC_FULL_VER) &amp;&amp; (_MSC_FULL_VER &gt; 140050320)
 960 #define G_UNAVAILABLE(maj,min) __declspec(deprecated(&quot;is not available before &quot; #maj &quot;.&quot; #min))
 961 #else
 962 #define G_UNAVAILABLE(maj,min) G_DEPRECATED
 963 #endif
 964 
 965 #ifndef _GLIB_EXTERN
 966 #define _GLIB_EXTERN extern
 967 #endif
 968 
<a name="44" id="anc44"></a><span class="line-modified"> 969 /* These macros are used to mark deprecated symbols in GLib headers,</span>
 970  * and thus have to be exposed in installed headers. But please
 971  * do *not* use them in other projects. Instead, use G_DEPRECATED
 972  * or define your own wrappers around it.
 973  */
 974 
 975 #ifdef GLIB_DISABLE_DEPRECATION_WARNINGS
 976 #define GLIB_DEPRECATED _GLIB_EXTERN
 977 #define GLIB_DEPRECATED_FOR(f) _GLIB_EXTERN
 978 #define GLIB_UNAVAILABLE(maj,min) _GLIB_EXTERN
 979 #else
 980 #define GLIB_DEPRECATED G_DEPRECATED _GLIB_EXTERN
 981 #define GLIB_DEPRECATED_FOR(f) G_DEPRECATED_FOR(f) _GLIB_EXTERN
 982 #define GLIB_UNAVAILABLE(maj,min) G_UNAVAILABLE(maj,min) _GLIB_EXTERN
 983 #endif
 984 
<a name="45" id="anc45"></a><span class="line-added"> 985 #if !defined(GLIB_DISABLE_DEPRECATION_WARNINGS) &amp;&amp; \</span>
<span class="line-added"> 986     (__GNUC__ &gt; 4 || (__GNUC__ == 4 &amp;&amp; __GNUC_MINOR__ &gt;= 6) || \</span>
<span class="line-added"> 987      __clang_major__ &gt; 3 || (__clang_major__ == 3 &amp;&amp; __clang_minor__ &gt;= 4))</span>
<span class="line-added"> 988 #define _GLIB_GNUC_DO_PRAGMA(x) _Pragma(G_STRINGIFY (x))</span>
<span class="line-added"> 989 #define GLIB_DEPRECATED_MACRO _GLIB_GNUC_DO_PRAGMA(GCC warning &quot;Deprecated pre-processor symbol&quot;)</span>
<span class="line-added"> 990 #define GLIB_DEPRECATED_MACRO_FOR(f) _GLIB_GNUC_DO_PRAGMA(GCC warning #f)</span>
<span class="line-added"> 991 #define GLIB_UNAVAILABLE_MACRO(maj,min) _GLIB_GNUC_DO_PRAGMA(GCC warning &quot;Not available before &quot; #maj &quot;.&quot; #min)</span>
<span class="line-added"> 992 #else</span>
<span class="line-added"> 993 #define GLIB_DEPRECATED_MACRO</span>
<span class="line-added"> 994 #define GLIB_DEPRECATED_MACRO_FOR(f)</span>
<span class="line-added"> 995 #define GLIB_UNAVAILABLE_MACRO(maj,min)</span>
<span class="line-added"> 996 #endif</span>
<span class="line-added"> 997 </span>
<span class="line-added"> 998 #if !defined(GLIB_DISABLE_DEPRECATION_WARNINGS) &amp;&amp; \</span>
<span class="line-added"> 999     ((defined (__GNUC__) &amp;&amp; (__GNUC__ &gt; 6 || (__GNUC__ == 6 &amp;&amp; __GNUC_MINOR__ &gt;= 1))) || \</span>
<span class="line-added">1000      (defined (__clang_major__) &amp;&amp; (__clang_major__ &gt; 3 || (__clang_major__ == 3 &amp;&amp; __clang_minor__ &gt;= 0))))</span>
<span class="line-added">1001 #define GLIB_DEPRECATED_ENUMERATOR G_DEPRECATED</span>
<span class="line-added">1002 #define GLIB_DEPRECATED_ENUMERATOR_FOR(f) G_DEPRECATED_FOR(f)</span>
<span class="line-added">1003 #define GLIB_UNAVAILABLE_ENUMERATOR(maj,min) G_UNAVAILABLE(maj,min)</span>
<span class="line-added">1004 #else</span>
<span class="line-added">1005 #define GLIB_DEPRECATED_ENUMERATOR</span>
<span class="line-added">1006 #define GLIB_DEPRECATED_ENUMERATOR_FOR(f)</span>
<span class="line-added">1007 #define GLIB_UNAVAILABLE_ENUMERATOR(maj,min)</span>
<span class="line-added">1008 #endif</span>
<span class="line-added">1009 </span>
<span class="line-added">1010 #if !defined(GLIB_DISABLE_DEPRECATION_WARNINGS) &amp;&amp; \</span>
<span class="line-added">1011     ((defined (__GNUC__) &amp;&amp; (__GNUC__ &gt; 3 || (__GNUC__ == 3 &amp;&amp; __GNUC_MINOR__ &gt;= 1))) || \</span>
<span class="line-added">1012      (defined (__clang_major__) &amp;&amp; (__clang_major__ &gt; 3 || (__clang_major__ == 3 &amp;&amp; __clang_minor__ &gt;= 0))))</span>
<span class="line-added">1013 #define GLIB_DEPRECATED_TYPE G_DEPRECATED</span>
<span class="line-added">1014 #define GLIB_DEPRECATED_TYPE_FOR(f) G_DEPRECATED_FOR(f)</span>
<span class="line-added">1015 #define GLIB_UNAVAILABLE_TYPE(maj,min) G_UNAVAILABLE(maj,min)</span>
<span class="line-added">1016 #else</span>
<span class="line-added">1017 #define GLIB_DEPRECATED_TYPE</span>
<span class="line-added">1018 #define GLIB_DEPRECATED_TYPE_FOR(f)</span>
<span class="line-added">1019 #define GLIB_UNAVAILABLE_TYPE(maj,min)</span>
<span class="line-added">1020 #endif</span>
<span class="line-added">1021 </span>
1022 #ifndef __GI_SCANNER__
1023 
<a name="46" id="anc46"></a><span class="line-modified">1024 #if defined (__GNUC__) || defined (__clang__)</span>
1025 
1026 /* these macros are private */
1027 #define _GLIB_AUTOPTR_FUNC_NAME(TypeName) glib_autoptr_cleanup_##TypeName
<a name="47" id="anc47"></a><span class="line-added">1028 #define _GLIB_AUTOPTR_CLEAR_FUNC_NAME(TypeName) glib_autoptr_clear_##TypeName</span>
1029 #define _GLIB_AUTOPTR_TYPENAME(TypeName)  TypeName##_autoptr
1030 #define _GLIB_AUTOPTR_LIST_FUNC_NAME(TypeName) glib_listautoptr_cleanup_##TypeName
1031 #define _GLIB_AUTOPTR_LIST_TYPENAME(TypeName)  TypeName##_listautoptr
1032 #define _GLIB_AUTOPTR_SLIST_FUNC_NAME(TypeName) glib_slistautoptr_cleanup_##TypeName
1033 #define _GLIB_AUTOPTR_SLIST_TYPENAME(TypeName)  TypeName##_slistautoptr
<a name="48" id="anc48"></a><span class="line-added">1034 #define _GLIB_AUTOPTR_QUEUE_FUNC_NAME(TypeName) glib_queueautoptr_cleanup_##TypeName</span>
<span class="line-added">1035 #define _GLIB_AUTOPTR_QUEUE_TYPENAME(TypeName)  TypeName##_queueautoptr</span>
1036 #define _GLIB_AUTO_FUNC_NAME(TypeName)    glib_auto_cleanup_##TypeName
1037 #define _GLIB_CLEANUP(func)               __attribute__((cleanup(func)))
<a name="49" id="anc49"></a><span class="line-added">1038 #define _GLIB_DEFINE_AUTOPTR_CLEANUP_FUNCS(TypeName, ParentName, cleanup) \</span>
<span class="line-added">1039   typedef TypeName *_GLIB_AUTOPTR_TYPENAME(TypeName);                                                           \</span>
<span class="line-added">1040   typedef GList *_GLIB_AUTOPTR_LIST_TYPENAME(TypeName);                                                         \</span>
<span class="line-added">1041   typedef GSList *_GLIB_AUTOPTR_SLIST_TYPENAME(TypeName);                                                       \</span>
<span class="line-added">1042   typedef GQueue *_GLIB_AUTOPTR_QUEUE_TYPENAME(TypeName);                                                       \</span>
<span class="line-added">1043   G_GNUC_BEGIN_IGNORE_DEPRECATIONS                                                                              \</span>
<span class="line-added">1044   static G_GNUC_UNUSED inline void _GLIB_AUTOPTR_CLEAR_FUNC_NAME(TypeName) (TypeName *_ptr)                     \</span>
<span class="line-added">1045     { if (_ptr) (cleanup) ((ParentName *) _ptr); }                                                              \</span>
<span class="line-added">1046   static G_GNUC_UNUSED inline void _GLIB_AUTOPTR_FUNC_NAME(TypeName) (TypeName **_ptr)                          \</span>
<span class="line-added">1047     { _GLIB_AUTOPTR_CLEAR_FUNC_NAME(TypeName) (*_ptr); }                                                        \</span>
<span class="line-added">1048   static G_GNUC_UNUSED inline void _GLIB_AUTOPTR_LIST_FUNC_NAME(TypeName) (GList **_l)                          \</span>
<span class="line-added">1049     { g_list_free_full (*_l, (GDestroyNotify) (void(*)(void)) cleanup); }                                       \</span>
<span class="line-added">1050   static G_GNUC_UNUSED inline void _GLIB_AUTOPTR_SLIST_FUNC_NAME(TypeName) (GSList **_l)                        \</span>
<span class="line-added">1051     { g_slist_free_full (*_l, (GDestroyNotify) (void(*)(void)) cleanup); }                                      \</span>
<span class="line-added">1052   static G_GNUC_UNUSED inline void _GLIB_AUTOPTR_QUEUE_FUNC_NAME(TypeName) (GQueue **_q)                        \</span>
<span class="line-added">1053     { if (*_q) g_queue_free_full (*_q, (GDestroyNotify) (void(*)(void)) cleanup); }                             \</span>
<span class="line-added">1054   G_GNUC_END_IGNORE_DEPRECATIONS</span>
1055 #define _GLIB_DEFINE_AUTOPTR_CHAINUP(ModuleObjName, ParentName) \
<a name="50" id="anc50"></a><span class="line-modified">1056   _GLIB_DEFINE_AUTOPTR_CLEANUP_FUNCS(ModuleObjName, ParentName, _GLIB_AUTOPTR_CLEAR_FUNC_NAME(ParentName))</span>


1057 
1058 
1059 /* these macros are API */
1060 #define G_DEFINE_AUTOPTR_CLEANUP_FUNC(TypeName, func) \
<a name="51" id="anc51"></a><span class="line-modified">1061   _GLIB_DEFINE_AUTOPTR_CLEANUP_FUNCS(TypeName, TypeName, func)</span>







1062 #define G_DEFINE_AUTO_CLEANUP_CLEAR_FUNC(TypeName, func) \
1063   G_GNUC_BEGIN_IGNORE_DEPRECATIONS                                                                              \
1064   static inline void _GLIB_AUTO_FUNC_NAME(TypeName) (TypeName *_ptr) { (func) (_ptr); }                         \
1065   G_GNUC_END_IGNORE_DEPRECATIONS
1066 #define G_DEFINE_AUTO_CLEANUP_FREE_FUNC(TypeName, func, none) \
1067   G_GNUC_BEGIN_IGNORE_DEPRECATIONS                                                                              \
1068   static inline void _GLIB_AUTO_FUNC_NAME(TypeName) (TypeName *_ptr) { if (*_ptr != none) (func) (*_ptr); }     \
1069   G_GNUC_END_IGNORE_DEPRECATIONS
1070 #define g_autoptr(TypeName) _GLIB_CLEANUP(_GLIB_AUTOPTR_FUNC_NAME(TypeName)) _GLIB_AUTOPTR_TYPENAME(TypeName)
1071 #define g_autolist(TypeName) _GLIB_CLEANUP(_GLIB_AUTOPTR_LIST_FUNC_NAME(TypeName)) _GLIB_AUTOPTR_LIST_TYPENAME(TypeName)
1072 #define g_autoslist(TypeName) _GLIB_CLEANUP(_GLIB_AUTOPTR_SLIST_FUNC_NAME(TypeName)) _GLIB_AUTOPTR_SLIST_TYPENAME(TypeName)
<a name="52" id="anc52"></a><span class="line-added">1073 #define g_autoqueue(TypeName) _GLIB_CLEANUP(_GLIB_AUTOPTR_QUEUE_FUNC_NAME(TypeName)) _GLIB_AUTOPTR_QUEUE_TYPENAME(TypeName)</span>
1074 #define g_auto(TypeName) _GLIB_CLEANUP(_GLIB_AUTO_FUNC_NAME(TypeName)) TypeName
1075 #define g_autofree _GLIB_CLEANUP(g_autoptr_cleanup_generic_gfree)
1076 
1077 #else /* not GNU C */
1078 /* this (dummy) macro is private */
1079 #define _GLIB_DEFINE_AUTOPTR_CHAINUP(ModuleObjName, ParentName)
1080 
1081 /* these (dummy) macros are API */
1082 #define G_DEFINE_AUTOPTR_CLEANUP_FUNC(TypeName, func)
1083 #define G_DEFINE_AUTO_CLEANUP_CLEAR_FUNC(TypeName, func)
1084 #define G_DEFINE_AUTO_CLEANUP_FREE_FUNC(TypeName, func, none)
1085 
1086 /* no declaration of g_auto() or g_autoptr() here */
1087 #endif /* __GNUC__ */
1088 
1089 #else
1090 
1091 #define _GLIB_DEFINE_AUTOPTR_CHAINUP(ModuleObjName, ParentName)
1092 
1093 #define G_DEFINE_AUTOPTR_CLEANUP_FUNC(TypeName, func)
1094 #define G_DEFINE_AUTO_CLEANUP_CLEAR_FUNC(TypeName, func)
1095 #define G_DEFINE_AUTO_CLEANUP_FREE_FUNC(TypeName, func, none)
1096 
1097 #endif /* __GI_SCANNER__ */
1098 
1099 #endif /* __G_MACROS_H__ */
<a name="53" id="anc53"></a><b style="font-size: large; color: red">--- EOF ---</b>
















































































</pre>
<input id="eof" value="53" type="hidden" />
</body>
</html>