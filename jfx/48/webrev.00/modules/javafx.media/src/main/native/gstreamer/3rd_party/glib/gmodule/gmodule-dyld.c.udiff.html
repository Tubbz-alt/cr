<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gmodule/gmodule-dyld.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gmodule-dl.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gmodule-win32.c.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gmodule/gmodule-dyld.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -23,12 +23,12 @@</span>
  
  static gpointer self_module = GINT_TO_POINTER (1);
  
  static gpointer
  _g_module_open (const gchar *file_name,
<span class="udiff-line-modified-removed">-         gboolean     bind_lazy,</span>
<span class="udiff-line-modified-removed">-         gboolean     bind_local)</span>
<span class="udiff-line-modified-added">+     gboolean     bind_lazy,</span>
<span class="udiff-line-modified-added">+     gboolean     bind_local)</span>
  {
    NSObjectFileImage image;
    NSObjectFileImageReturnCode ret;
    NSModule module;
    unsigned long options;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -36,32 +36,32 @@</span>
  
    ret = NSCreateObjectFileImageFromFile (file_name, &amp;image);
    if (ret != NSObjectFileImageSuccess)
      {
        switch (ret)
<span class="udiff-line-modified-removed">-     {</span>
<span class="udiff-line-modified-removed">-     case NSObjectFileImageInappropriateFile:</span>
<span class="udiff-line-modified-removed">-     case NSObjectFileImageFormat:</span>
<span class="udiff-line-modified-removed">-       msg = g_strdup_printf (&quot;%s is not a loadable module&quot;, file_name);</span>
<span class="udiff-line-modified-removed">-       break;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-     case NSObjectFileImageArch:</span>
<span class="udiff-line-modified-removed">-       msg = g_strdup_printf (&quot;%s is not built for this architecture&quot;,</span>
<span class="udiff-line-modified-removed">-                  file_name);</span>
<span class="udiff-line-modified-removed">-       break;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-     case NSObjectFileImageAccess:</span>
<span class="udiff-line-modified-removed">-       if (access (file_name, F_OK) == 0)</span>
<span class="udiff-line-modified-removed">-         msg = g_strdup_printf (&quot;%s: permission denied&quot;, file_name);</span>
<span class="udiff-line-modified-removed">-       else</span>
<span class="udiff-line-modified-removed">-         msg = g_strdup_printf (&quot;%s: no such file or directory&quot;, file_name);</span>
<span class="udiff-line-modified-removed">-       break;</span>
<span class="udiff-line-modified-removed">- </span>
<span class="udiff-line-modified-removed">-     default:</span>
<span class="udiff-line-modified-removed">-       msg = g_strdup_printf (&quot;unknown error for %s&quot;, file_name);</span>
<span class="udiff-line-modified-removed">-       break;</span>
<span class="udiff-line-modified-removed">-     }</span>
<span class="udiff-line-modified-added">+   {</span>
<span class="udiff-line-modified-added">+   case NSObjectFileImageInappropriateFile:</span>
<span class="udiff-line-modified-added">+   case NSObjectFileImageFormat:</span>
<span class="udiff-line-modified-added">+     msg = g_strdup_printf (&quot;%s is not a loadable module&quot;, file_name);</span>
<span class="udiff-line-modified-added">+     break;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   case NSObjectFileImageArch:</span>
<span class="udiff-line-modified-added">+     msg = g_strdup_printf (&quot;%s is not built for this architecture&quot;,</span>
<span class="udiff-line-modified-added">+          file_name);</span>
<span class="udiff-line-modified-added">+     break;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   case NSObjectFileImageAccess:</span>
<span class="udiff-line-modified-added">+     if (access (file_name, F_OK) == 0)</span>
<span class="udiff-line-modified-added">+       msg = g_strdup_printf (&quot;%s: permission denied&quot;, file_name);</span>
<span class="udiff-line-modified-added">+     else</span>
<span class="udiff-line-modified-added">+       msg = g_strdup_printf (&quot;%s: no such file or directory&quot;, file_name);</span>
<span class="udiff-line-modified-added">+     break;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+   default:</span>
<span class="udiff-line-modified-added">+     msg = g_strdup_printf (&quot;unknown error for %s&quot;, file_name);</span>
<span class="udiff-line-modified-added">+     break;</span>
<span class="udiff-line-modified-added">+   }</span>
  
        g_module_set_error (msg);
        g_free (msg);
        return NULL;
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -95,32 +95,32 @@</span>
    return &amp;self_module;
  }
  
  static void
  _g_module_close (gpointer handle,
<span class="udiff-line-modified-removed">-          gboolean is_unref)</span>
<span class="udiff-line-modified-added">+      gboolean is_unref)</span>
  {
    if (handle == &amp;self_module)
      return;
  
    if (!NSUnLinkModule (handle, 0))
      g_module_set_error (&quot;could not unlink module&quot;);
  }
  
  static gpointer
  _g_module_symbol (gpointer     handle,
<span class="udiff-line-modified-removed">-           const gchar *symbol_name)</span>
<span class="udiff-line-modified-added">+       const gchar *symbol_name)</span>
  {
    NSSymbol sym;
    char *msg;
  
    if (handle == &amp;self_module)
      {
        if (NSIsSymbolNameDefined (symbol_name))
<span class="udiff-line-modified-removed">-     sym = NSLookupAndBindSymbol (symbol_name);</span>
<span class="udiff-line-modified-added">+   sym = NSLookupAndBindSymbol (symbol_name);</span>
        else
<span class="udiff-line-modified-removed">-     sym = NULL;</span>
<span class="udiff-line-modified-added">+   sym = NULL;</span>
      }
    else
      sym = NSLookupSymbolInModule (handle, symbol_name);
  
    if (!sym)
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -134,18 +134,18 @@</span>
    return NSAddressOfSymbol (sym);
  }
  
  static gchar*
  _g_module_build_path (const gchar *directory,
<span class="udiff-line-modified-removed">-               const gchar *module_name)</span>
<span class="udiff-line-modified-added">+           const gchar *module_name)</span>
  {
    if (directory &amp;&amp; *directory)
      {
        if (strncmp (module_name, &quot;lib&quot;, 3) == 0)
<span class="udiff-line-modified-removed">-     return g_strconcat (directory, &quot;/&quot;, module_name, NULL);</span>
<span class="udiff-line-modified-added">+   return g_strconcat (directory, &quot;/&quot;, module_name, NULL);</span>
        else
<span class="udiff-line-modified-removed">-     return g_strconcat (directory, &quot;/lib&quot;, module_name, &quot;.&quot; G_MODULE_SUFFIX, NULL);</span>
<span class="udiff-line-modified-added">+   return g_strconcat (directory, &quot;/lib&quot;, module_name, &quot;.&quot; G_MODULE_SUFFIX, NULL);</span>
      }
    else if (strncmp (module_name, &quot;lib&quot;, 3) == 0)
      return g_strdup (module_name);
    else
      return g_strconcat (&quot;lib&quot;, module_name, &quot;.&quot; G_MODULE_SUFFIX, NULL);
</pre>
<center><a href="gmodule-dl.c.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gmodule-win32.c.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>