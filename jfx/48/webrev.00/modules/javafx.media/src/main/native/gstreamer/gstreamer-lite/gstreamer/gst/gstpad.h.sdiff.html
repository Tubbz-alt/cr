<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gstreamer/gst/gstpad.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gstpad.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gstpadtemplate.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/gstreamer-lite/gstreamer/gst/gstpad.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  63 
  64 #include &lt;glib.h&gt;
  65 
  66 GST_API
  67 const gchar   * gst_pad_mode_get_name (GstPadMode mode);
  68 
  69 #include &lt;gst/gstobject.h&gt;
  70 #include &lt;gst/gstbuffer.h&gt;
  71 #include &lt;gst/gstbufferlist.h&gt;
  72 #include &lt;gst/gstcaps.h&gt;
  73 #include &lt;gst/gstpadtemplate.h&gt;
  74 #include &lt;gst/gstevent.h&gt;
  75 #include &lt;gst/gstquery.h&gt;
  76 #include &lt;gst/gsttask.h&gt;
  77 
  78 G_BEGIN_DECLS
  79 
  80 /*
  81  * Pad base class
  82  */
<span class="line-modified">  83 #define GST_TYPE_PAD            (gst_pad_get_type ())</span>
<span class="line-modified">  84 #define GST_IS_PAD(obj)         (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GST_TYPE_PAD))</span>
<span class="line-modified">  85 #define GST_IS_PAD_CLASS(klass)     (G_TYPE_CHECK_CLASS_TYPE ((klass), GST_TYPE_PAD))</span>
<span class="line-modified">  86 #define GST_PAD(obj)            (G_TYPE_CHECK_INSTANCE_CAST ((obj), GST_TYPE_PAD, GstPad))</span>
<span class="line-modified">  87 #define GST_PAD_CLASS(klass)        (G_TYPE_CHECK_CLASS_CAST ((klass), GST_TYPE_PAD, GstPadClass))</span>
<span class="line-modified">  88 #define GST_PAD_CAST(obj)       ((GstPad*)(obj))</span>
  89 
  90 
  91 
  92 /**
  93  * GstPadLinkReturn:
<span class="line-modified">  94  * @GST_PAD_LINK_OK     : link succeeded</span>
  95  * @GST_PAD_LINK_WRONG_HIERARCHY: pads have no common grandparent
  96  * @GST_PAD_LINK_WAS_LINKED : pad was already linked
  97  * @GST_PAD_LINK_WRONG_DIRECTION: pads have wrong direction
<span class="line-modified">  98  * @GST_PAD_LINK_NOFORMAT   : pads do not have common format</span>
<span class="line-modified">  99  * @GST_PAD_LINK_NOSCHED    : pads cannot cooperate in scheduling</span>
<span class="line-modified"> 100  * @GST_PAD_LINK_REFUSED    : refused for some reason</span>
 101  *
 102  * Result values from gst_pad_link and friends.
 103  */
 104 typedef enum {
 105   GST_PAD_LINK_OK               =  0,
 106   GST_PAD_LINK_WRONG_HIERARCHY  = -1,
 107   GST_PAD_LINK_WAS_LINKED       = -2,
 108   GST_PAD_LINK_WRONG_DIRECTION  = -3,
 109   GST_PAD_LINK_NOFORMAT         = -4,
 110   GST_PAD_LINK_NOSCHED          = -5,
 111   GST_PAD_LINK_REFUSED          = -6
 112 } GstPadLinkReturn;
 113 
 114 /**
 115  * GST_PAD_LINK_FAILED:
 116  * @ret: the #GstPadLinkReturn value
 117  *
 118  * Macro to test if the given #GstPadLinkReturn value indicates a failed
 119  * link step.
 120  */
 121 #define GST_PAD_LINK_FAILED(ret) ((ret) &lt; GST_PAD_LINK_OK)
 122 
 123 /**
 124  * GST_PAD_LINK_SUCCESSFUL:
 125  * @ret: the #GstPadLinkReturn value
 126  *
 127  * Macro to test if the given #GstPadLinkReturn value indicates a successful
 128  * link step.
 129  */
 130 #define GST_PAD_LINK_SUCCESSFUL(ret) ((ret) &gt;= GST_PAD_LINK_OK)
 131 
 132 /**
 133  * GstFlowReturn:
<span class="line-modified"> 134  * @GST_FLOW_OK:         Data passing was ok.</span>
<span class="line-modified"> 135  * @GST_FLOW_NOT_LINKED:     Pad is not linked.</span>
 136  * @GST_FLOW_FLUSHING:           Pad is flushing.
 137  * @GST_FLOW_EOS:                Pad is EOS.
<span class="line-modified"> 138  * @GST_FLOW_NOT_NEGOTIATED:     Pad is not negotiated.</span>
<span class="line-modified"> 139  * @GST_FLOW_ERROR:      Some (fatal) error occurred. Element generating</span>
 140  *                               this error should post an error message with more
 141  *                               details.
 142  * @GST_FLOW_NOT_SUPPORTED:  This operation is not supported.
<span class="line-modified"> 143  * @GST_FLOW_CUSTOM_SUCCESS:     Elements can use values starting from</span>
 144  *                               this (and higher) to define custom success
 145  *                               codes.
 146  * @GST_FLOW_CUSTOM_SUCCESS_1:   Pre-defined custom success code (define your
 147  *                               custom success code to this to avoid compiler
 148  *                               warnings).
 149  * @GST_FLOW_CUSTOM_SUCCESS_2:   Pre-defined custom success code.
 150  * @GST_FLOW_CUSTOM_ERROR:   Elements can use values starting from
 151  *                               this (and lower) to define custom error codes.
<span class="line-modified"> 152  * @GST_FLOW_CUSTOM_ERROR_1:     Pre-defined custom error code (define your</span>
 153  *                               custom error code to this to avoid compiler
 154  *                               warnings).
<span class="line-modified"> 155  * @GST_FLOW_CUSTOM_ERROR_2:     Pre-defined custom error code.</span>
 156  *
 157  * The result of passing data to a pad.
 158  *
 159  * Note that the custom return values should not be exposed outside of the
 160  * element scope.
 161  */
 162 typedef enum {
 163   /* custom success starts here */
 164   GST_FLOW_CUSTOM_SUCCESS_2 = 102,
 165   GST_FLOW_CUSTOM_SUCCESS_1 = 101,
 166   GST_FLOW_CUSTOM_SUCCESS = 100,
 167 
 168   /* core predefined */
<span class="line-modified"> 169   GST_FLOW_OK         =  0,</span>
 170   /* expected failures */
 171   GST_FLOW_NOT_LINKED     = -1,
 172   GST_FLOW_FLUSHING       = -2,
 173   /* error cases */
 174   GST_FLOW_EOS            = -3,
 175   GST_FLOW_NOT_NEGOTIATED = -4,
<span class="line-modified"> 176   GST_FLOW_ERROR      = -5,</span>
 177   GST_FLOW_NOT_SUPPORTED  = -6,
 178 
 179   /* custom error starts here */
 180   GST_FLOW_CUSTOM_ERROR   = -100,
 181   GST_FLOW_CUSTOM_ERROR_1 = -101,
 182   GST_FLOW_CUSTOM_ERROR_2 = -102
 183 } GstFlowReturn;
 184 
 185 GST_API
 186 const gchar *         gst_flow_get_name (GstFlowReturn ret);
 187 
 188 GST_API
 189 GQuark                gst_flow_to_quark (GstFlowReturn ret);
 190 
 191 GST_API
 192 const gchar *         gst_pad_link_get_name (GstPadLinkReturn ret);
 193 
 194 /**
 195  * GstPadLinkCheck:
 196  * @GST_PAD_LINK_CHECK_NOTHING: Don&#39;t check hierarchy or caps compatibility.
</pre>
<hr />
<pre>
 227   /* Not really checks, more like flags
 228    * Added here to avoid creating a new gst_pad_link_variant */
 229   GST_PAD_LINK_CHECK_NO_RECONFIGURE = 1 &lt;&lt; 3,
 230 
 231   GST_PAD_LINK_CHECK_DEFAULT       = GST_PAD_LINK_CHECK_HIERARCHY | GST_PAD_LINK_CHECK_CAPS
 232 } GstPadLinkCheck;
 233 
 234 /* pad states */
 235 /**
 236  * GstPadActivateFunction:
 237  * @pad: a #GstPad
 238  * @parent: the parent of @pad
 239  *
 240  * This function is called when the pad is activated during the element
 241  * READY to PAUSED state change. By default this function will call the
 242  * activate function that puts the pad in push mode but elements can
 243  * override this function to activate the pad in pull mode if they wish.
 244  *
 245  * Returns: %TRUE if the pad could be activated.
 246  */
<span class="line-modified"> 247 typedef gboolean        (*GstPadActivateFunction)   (GstPad *pad, GstObject *parent);</span>
 248 /**
 249  * GstPadActivateModeFunction:
 250  * @pad: a #GstPad
 251  * @parent: the parent of @pad
 252  * @mode: the requested activation mode of @pad
 253  * @active: activate or deactivate the pad.
 254  *
 255  * The prototype of the push and pull activate functions.
 256  *
 257  * Returns: %TRUE if the pad could be activated or deactivated.
 258  */
<span class="line-modified"> 259 typedef gboolean        (*GstPadActivateModeFunction)   (GstPad *pad, GstObject *parent,</span>
 260                                                                  GstPadMode mode, gboolean active);
 261 
 262 
 263 /* data passing */
 264 /**
 265  * GstPadChainFunction:
 266  * @pad: the sink #GstPad that performed the chain.
 267  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 268  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 269  *          during the execution of this function.
 270  * @buffer: (transfer full): the #GstBuffer that is chained, not %NULL.
 271  *
 272  * A function that will be called on sinkpads when chaining buffers.
 273  * The function typically processes the data contained in the buffer and
 274  * either consumes the data or passes it on to the internally linked pad(s).
 275  *
 276  * The implementer of this function receives a refcount to @buffer and should
 277  * gst_buffer_unref() when the buffer is no longer needed.
 278  *
 279  * When a chain function detects an error in the data stream, it must post an
 280  * error on the bus and return an appropriate #GstFlowReturn value.
 281  *
 282  * Returns: #GST_FLOW_OK for success
 283  */
<span class="line-modified"> 284 typedef GstFlowReturn       (*GstPadChainFunction)      (GstPad *pad, GstObject *parent,</span>
 285                                                                  GstBuffer *buffer);
 286 
 287 /**
 288  * GstPadChainListFunction:
 289  * @pad: the sink #GstPad that performed the chain.
 290  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 291  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 292  *          during the execution of this function.
 293  * @list: (transfer full): the #GstBufferList that is chained, not %NULL.
 294  *
 295  * A function that will be called on sinkpads when chaining buffer lists.
 296  * The function typically processes the data contained in the buffer list and
 297  * either consumes the data or passes it on to the internally linked pad(s).
 298  *
 299  * The implementer of this function receives a refcount to @list and
 300  * should gst_buffer_list_unref() when the list is no longer needed.
 301  *
 302  * When a chainlist function detects an error in the data stream, it must
 303  * post an error on the bus and return an appropriate #GstFlowReturn value.
 304  *
 305  * Returns: #GST_FLOW_OK for success
 306  */
<span class="line-modified"> 307 typedef GstFlowReturn       (*GstPadChainListFunction)  (GstPad *pad, GstObject *parent,</span>
 308                                                                  GstBufferList *list);
 309 
 310 /**
 311  * GstPadGetRangeFunction:
 312  * @pad: the src #GstPad to perform the getrange on.
 313  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 314  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 315  *          during the execution of this function.
 316  * @offset: the offset of the range
 317  * @length: the length of the range
 318  * @buffer: a memory location to hold the result buffer, cannot be %NULL.
 319  *
 320  * This function will be called on source pads when a peer element
 321  * request a buffer at the specified @offset and @length. If this function
 322  * returns #GST_FLOW_OK, the result buffer will be stored in @buffer. The
 323  * contents of @buffer is invalid for any other return value.
 324  *
 325  * This function is installed on a source pad with
 326  * gst_pad_set_getrange_function() and can only be called on source pads after
 327  * they are successfully activated with gst_pad_activate_mode() with the
</pre>
<hr />
<pre>
 337  * contain a valid buffer.
 338  *
 339  * The buffer size of @buffer will only be smaller than @length when @offset is
 340  * near the end of the stream. In all other cases, the size of @buffer must be
 341  * exactly the requested size.
 342  *
 343  * It is allowed to call this function with a 0 @length and valid @offset, in
 344  * which case @buffer will contain a 0-sized buffer and the function returns
 345  * #GST_FLOW_OK.
 346  *
 347  * When this function is called with a -1 @offset, the sequentially next buffer
 348  * of length @length in the stream is returned.
 349  *
 350  * When this function is called with a -1 @length, a buffer with a default
 351  * optimal length is returned in @buffer. The length might depend on the value
 352  * of @offset.
 353  *
 354  * Returns: #GST_FLOW_OK for success and a valid buffer in @buffer. Any other
 355  * return value leaves @buffer undefined.
 356  */
<span class="line-modified"> 357 typedef GstFlowReturn       (*GstPadGetRangeFunction)   (GstPad *pad, GstObject *parent,</span>
 358                                                                  guint64 offset, guint length,
 359                                                                  GstBuffer **buffer);
 360 
 361 /**
 362  * GstPadEventFunction:
 363  * @pad: the #GstPad to handle the event.
 364  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 365  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 366  *          during the execution of this function.
 367  * @event: (transfer full): the #GstEvent to handle.
 368  *
 369  * Function signature to handle an event for the pad.
 370  *
 371  * Returns: %TRUE if the pad could handle the event.
 372  */
<span class="line-modified"> 373 typedef gboolean        (*GstPadEventFunction)      (GstPad *pad, GstObject *parent,</span>
 374                                                                  GstEvent *event);
 375 
 376 /**
 377  * GstPadEventFullFunction:
 378  * @pad: the #GstPad to handle the event.
 379  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 380  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 381  *          during the execution of this function.
 382  * @event: (transfer full): the #GstEvent to handle.
 383  *
 384  * Function signature to handle an event for the pad.
 385  *
 386  * This variant is for specific elements that will take into account the
 387  * last downstream flow return (from a pad push), in which case they can
 388  * return it.
 389  *
 390  * Returns: %GST_FLOW_OK if the event was handled properly, or any other
 391  * #GstFlowReturn dependent on downstream state.
 392  *
 393  * Since: 1.8
 394  */
<span class="line-modified"> 395 typedef GstFlowReturn       (*GstPadEventFullFunction)  (GstPad *pad, GstObject *parent,</span>
 396                                                                  GstEvent *event);
 397 
 398 
 399 /* internal links */
 400 /**
 401  * GstPadIterIntLinkFunction:
 402  * @pad: The #GstPad to query.
 403  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 404  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 405  *          during the execution of this function.
 406  *
 407  * The signature of the internal pad link iterator function.
 408  *
 409  * Returns: a new #GstIterator that will iterate over all pads that are
 410  * linked to the given pad on the inside of the parent element.
 411  *
 412  * the caller must call gst_iterator_free() after usage.
 413  */
 414 typedef GstIterator*           (*GstPadIterIntLinkFunction)    (GstPad *pad, GstObject *parent);
 415 
 416 /* generic query function */
 417 /**
 418  * GstPadQueryFunction:
 419  * @pad: the #GstPad to query.
 420  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 421  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 422  *          during the execution of this function.
 423  * @query: the #GstQuery object to execute
 424  *
 425  * The signature of the query function.
 426  *
 427  * Returns: %TRUE if the query could be performed.
 428  */
<span class="line-modified"> 429 typedef gboolean        (*GstPadQueryFunction)      (GstPad *pad, GstObject *parent,</span>
 430                                                                  GstQuery *query);
 431 
 432 
 433 /* linking */
 434 /**
 435  * GstPadLinkFunction:
 436  * @pad: the #GstPad that is linked.
 437  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 438  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 439  *          during the execution of this function.
 440  * @peer: the peer #GstPad of the link
 441  *
 442  * Function signature to handle a new link on the pad.
 443  *
 444  * Returns: the result of the link with the specified peer.
 445  */
<span class="line-modified"> 446 typedef GstPadLinkReturn    (*GstPadLinkFunction)       (GstPad *pad, GstObject *parent, GstPad *peer);</span>
 447 /**
 448  * GstPadUnlinkFunction:
 449  * @pad: the #GstPad that is linked.
 450  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 451  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 452  *          during the execution of this function.
 453  *
 454  * Function signature to handle a unlinking the pad prom its peer.



 455  */
<span class="line-modified"> 456 typedef void            (*GstPadUnlinkFunction)     (GstPad *pad, GstObject *parent);</span>
 457 
 458 
 459 /* misc */
 460 /**
 461  * GstPadForwardFunction:
 462  * @pad: the #GstPad that is forwarded.
 463  * @user_data: the gpointer to optional user data.
 464  *
 465  * A forward function is called for all internally linked pads, see
 466  * gst_pad_forward().
 467  *
 468  * Returns: %TRUE if the dispatching procedure has to be stopped.
 469  */
<span class="line-modified"> 470 typedef gboolean        (*GstPadForwardFunction)    (GstPad *pad, gpointer user_data);</span>
 471 
 472 /**
 473  * GstPadProbeType:
 474  * @GST_PAD_PROBE_TYPE_INVALID: invalid probe type
 475  * @GST_PAD_PROBE_TYPE_IDLE: probe idle pads and block while the callback is called
 476  * @GST_PAD_PROBE_TYPE_BLOCK: probe and block pads
 477  * @GST_PAD_PROBE_TYPE_BUFFER: probe buffers
 478  * @GST_PAD_PROBE_TYPE_BUFFER_LIST: probe buffer lists
 479  * @GST_PAD_PROBE_TYPE_EVENT_DOWNSTREAM: probe downstream events
 480  * @GST_PAD_PROBE_TYPE_EVENT_UPSTREAM: probe upstream events
 481  * @GST_PAD_PROBE_TYPE_EVENT_FLUSH: probe flush events. This probe has to be
 482  *     explicitly enabled and is not included in the
 483  *     @@GST_PAD_PROBE_TYPE_EVENT_DOWNSTREAM or
 484  *     @@GST_PAD_PROBE_TYPE_EVENT_UPSTREAM probe types.
 485  * @GST_PAD_PROBE_TYPE_QUERY_DOWNSTREAM: probe downstream queries
 486  * @GST_PAD_PROBE_TYPE_QUERY_UPSTREAM: probe upstream queries
 487  * @GST_PAD_PROBE_TYPE_PUSH: probe push
 488  * @GST_PAD_PROBE_TYPE_PULL: probe pull
 489  * @GST_PAD_PROBE_TYPE_BLOCKING: probe and block at the next opportunity, at data flow or when idle
 490  * @GST_PAD_PROBE_TYPE_DATA_DOWNSTREAM: probe downstream data (buffers, buffer lists, and events)
</pre>
<hr />
<pre>
 575  * @id: the id of the probe
 576  * @data: (allow-none): type specific data, check the @type field to know the
 577  *    datatype.  This field can be %NULL.
 578  * @offset: offset of pull probe, this field is valid when @type contains
 579  *    #GST_PAD_PROBE_TYPE_PULL
 580  * @size: size of pull probe, this field is valid when @type contains
 581  *    #GST_PAD_PROBE_TYPE_PULL
 582  *
 583  * Info passed in the #GstPadProbeCallback.
 584  */
 585 struct _GstPadProbeInfo
 586 {
 587   GstPadProbeType type;
 588   gulong id;
 589   gpointer data;
 590   guint64 offset;
 591   guint size;
 592 
 593   /*&lt; private &gt;*/
 594   union {
<span class="line-modified"> 595   gpointer _gst_reserved[GST_PADDING];</span>
 596     struct {
 597       GstFlowReturn flow_ret;
 598     } abi;
 599   } ABI;
 600 };
 601 
 602 #define GST_PAD_PROBE_INFO_TYPE(d)         ((d)-&gt;type)
 603 #define GST_PAD_PROBE_INFO_ID(d)           ((d)-&gt;id)
 604 #define GST_PAD_PROBE_INFO_DATA(d)         ((d)-&gt;data)
 605 #define GST_PAD_PROBE_INFO_FLOW_RETURN(d)  ((d)-&gt;ABI.abi.flow_ret)
 606 
 607 #define GST_PAD_PROBE_INFO_BUFFER(d)       GST_BUFFER_CAST(GST_PAD_PROBE_INFO_DATA(d))
 608 #define GST_PAD_PROBE_INFO_BUFFER_LIST(d)  GST_BUFFER_LIST_CAST(GST_PAD_PROBE_INFO_DATA(d))
 609 #define GST_PAD_PROBE_INFO_EVENT(d)        GST_EVENT_CAST(GST_PAD_PROBE_INFO_DATA(d))
 610 #define GST_PAD_PROBE_INFO_QUERY(d)        GST_QUERY_CAST(GST_PAD_PROBE_INFO_DATA(d))
 611 
 612 #define GST_PAD_PROBE_INFO_OFFSET(d)       ((d)-&gt;offset)
 613 #define GST_PAD_PROBE_INFO_SIZE(d)         ((d)-&gt;size)
 614 
 615 GST_API
</pre>
<hr />
<pre>
 675  * @GST_PAD_FLAG_PENDING_EVENTS: the pad has pending events
 676  * @GST_PAD_FLAG_FIXED_CAPS: the pad is using fixed caps. This means that
 677  *     once the caps are set on the pad, the default caps query function
 678  *     will only return those caps.
 679  * @GST_PAD_FLAG_PROXY_CAPS: the default event and query handler will forward
 680  *                      all events and queries to the internally linked pads
 681  *                      instead of discarding them.
 682  * @GST_PAD_FLAG_PROXY_ALLOCATION: the default query handler will forward
 683  *                      allocation queries to the internally linked pads
 684  *                      instead of discarding them.
 685  * @GST_PAD_FLAG_PROXY_SCHEDULING: the default query handler will forward
 686  *                      scheduling queries to the internally linked pads
 687  *                      instead of discarding them.
 688  * @GST_PAD_FLAG_ACCEPT_INTERSECT: the default accept-caps handler will check
 689  *                      it the caps intersect the query-caps result instead
 690  *                      of checking for a subset. This is interesting for
 691  *                      parsers that can accept incompletely specified caps.
 692  * @GST_PAD_FLAG_ACCEPT_TEMPLATE: the default accept-caps handler will use
 693  *                      the template pad caps instead of query caps to
 694  *                      compare with the accept caps. Use this in combination
<span class="line-modified"> 695  *                      with %GST_PAD_FLAG_ACCEPT_INTERSECT. (Since 1.6)</span>
 696  * @GST_PAD_FLAG_LAST: offset to define more flags
 697  *
 698  * Pad state flags
 699  */
 700 typedef enum {
 701   GST_PAD_FLAG_BLOCKED          = (GST_OBJECT_FLAG_LAST &lt;&lt; 0),
 702   GST_PAD_FLAG_FLUSHING         = (GST_OBJECT_FLAG_LAST &lt;&lt; 1),
 703   GST_PAD_FLAG_EOS              = (GST_OBJECT_FLAG_LAST &lt;&lt; 2),
 704   GST_PAD_FLAG_BLOCKING         = (GST_OBJECT_FLAG_LAST &lt;&lt; 3),
 705   GST_PAD_FLAG_NEED_PARENT      = (GST_OBJECT_FLAG_LAST &lt;&lt; 4),
 706   GST_PAD_FLAG_NEED_RECONFIGURE = (GST_OBJECT_FLAG_LAST &lt;&lt; 5),
 707   GST_PAD_FLAG_PENDING_EVENTS   = (GST_OBJECT_FLAG_LAST &lt;&lt; 6),
 708   GST_PAD_FLAG_FIXED_CAPS       = (GST_OBJECT_FLAG_LAST &lt;&lt; 7),
 709   GST_PAD_FLAG_PROXY_CAPS       = (GST_OBJECT_FLAG_LAST &lt;&lt; 8),
 710   GST_PAD_FLAG_PROXY_ALLOCATION = (GST_OBJECT_FLAG_LAST &lt;&lt; 9),
 711   GST_PAD_FLAG_PROXY_SCHEDULING = (GST_OBJECT_FLAG_LAST &lt;&lt; 10),
 712   GST_PAD_FLAG_ACCEPT_INTERSECT = (GST_OBJECT_FLAG_LAST &lt;&lt; 11),
 713   GST_PAD_FLAG_ACCEPT_TEMPLATE  = (GST_OBJECT_FLAG_LAST &lt;&lt; 12),
 714   /* padding */
 715   GST_PAD_FLAG_LAST        = (GST_OBJECT_FLAG_LAST &lt;&lt; 16)
</pre>
<hr />
<pre>
 719  * GstPad:
 720  * @element_private: private data owned by the parent element
 721  * @padtemplate: padtemplate for this pad
 722  * @direction: the direction of the pad, cannot change after creating
 723  *             the pad.
 724  *
 725  * The #GstPad structure. Use the functions to update the variables.
 726  */
 727 struct _GstPad {
 728   GstObject                      object;
 729 
 730   /*&lt; public &gt;*/
 731   gpointer                       element_private;
 732 
 733   GstPadTemplate                *padtemplate;
 734 
 735   GstPadDirection                direction;
 736 
 737   /*&lt; private &gt;*/
 738   /* streaming rec_lock */
<span class="line-modified"> 739   GRecMutex              stream_rec_lock;</span>
<span class="line-modified"> 740   GstTask           *task;</span>
 741 
 742   /* block cond, mutex is from the object */
<span class="line-modified"> 743   GCond              block_cond;</span>
 744   GHookList                      probes;
 745 
<span class="line-modified"> 746   GstPadMode                 mode;</span>
<span class="line-modified"> 747   GstPadActivateFunction     activatefunc;</span>
 748   gpointer                       activatedata;
 749   GDestroyNotify                 activatenotify;
<span class="line-modified"> 750   GstPadActivateModeFunction     activatemodefunc;</span>
 751   gpointer                       activatemodedata;
 752   GDestroyNotify                 activatemodenotify;
 753 
 754   /* pad link */
<span class="line-modified"> 755   GstPad            *peer;</span>
<span class="line-modified"> 756   GstPadLinkFunction         linkfunc;</span>
 757   gpointer                       linkdata;
 758   GDestroyNotify                 linknotify;
<span class="line-modified"> 759   GstPadUnlinkFunction       unlinkfunc;</span>
 760   gpointer                       unlinkdata;
 761   GDestroyNotify                 unlinknotify;
 762 
 763   /* data transport functions */
<span class="line-modified"> 764   GstPadChainFunction        chainfunc;</span>
 765   gpointer                       chaindata;
 766   GDestroyNotify                 chainnotify;
 767   GstPadChainListFunction        chainlistfunc;
 768   gpointer                       chainlistdata;
 769   GDestroyNotify                 chainlistnotify;
<span class="line-modified"> 770   GstPadGetRangeFunction     getrangefunc;</span>
 771   gpointer                       getrangedata;
 772   GDestroyNotify                 getrangenotify;
<span class="line-modified"> 773   GstPadEventFunction        eventfunc;</span>
 774   gpointer                       eventdata;
 775   GDestroyNotify                 eventnotify;
 776 
 777   /* pad offset */
 778   gint64                         offset;
 779 
 780   /* generic query method */
<span class="line-modified"> 781   GstPadQueryFunction        queryfunc;</span>
 782   gpointer                       querydata;
 783   GDestroyNotify                 querynotify;
 784 
 785   /* internal links */
 786   GstPadIterIntLinkFunction      iterintlinkfunc;
 787   gpointer                       iterintlinkdata;
 788   GDestroyNotify                 iterintlinknotify;
 789 
 790   /* counts number of probes attached. */
<span class="line-modified"> 791   gint               num_probes;</span>
<span class="line-modified"> 792   gint               num_blocked;</span>
 793 
 794   GstPadPrivate                 *priv;
 795 
 796   union {
 797     gpointer _gst_reserved[GST_PADDING];
 798     struct {
 799       GstFlowReturn last_flowret;
 800       GstPadEventFullFunction eventfullfunc;
 801     } abi;
 802   } ABI;
 803 };
 804 
 805 struct _GstPadClass {
<span class="line-modified"> 806   GstObjectClass    parent_class;</span>
 807 
 808   /* signal callbacks */
<span class="line-modified"> 809   void      (*linked)       (GstPad *pad, GstPad *peer);</span>
<span class="line-modified"> 810   void      (*unlinked)     (GstPad *pad, GstPad *peer);</span>
 811 
 812   /*&lt; private &gt;*/
 813   gpointer _gst_reserved[GST_PADDING];
 814 };
 815 
 816 
 817 /***** helper macros *****/
 818 /* GstPad */
 819 
 820 /**
 821  * GST_PAD_NAME:
 822  * @pad: a #GstPad
 823  *
 824  * Get name of the given pad.
 825  * No locking is performed in this function, use gst_pad_get_name() instead.
 826  */
<span class="line-modified"> 827 #define GST_PAD_NAME(pad)       (GST_OBJECT_NAME(pad))</span>
 828 /**
 829  * GST_PAD_PARENT:
 830  * @pad: a #GstPad
 831  *
 832  * Get the @pad parent.
 833  * No locking is performed in this function, use gst_pad_get_parent() instead.
 834  */
<span class="line-modified"> 835 #define GST_PAD_PARENT(pad)     (GST_ELEMENT_CAST(GST_OBJECT_PARENT(pad)))</span>
 836 /**
 837  * GST_PAD_ELEMENT_PRIVATE:
 838  * @pad: a #GstPad
 839  *
 840  * Get the private data of @pad, which is usually some pad- or stream-specific
 841  * structure created by the element and set on the pad when creating it.
 842  * No locking is performed in this function.
 843  */
 844 #define GST_PAD_ELEMENT_PRIVATE(pad)    (GST_PAD_CAST(pad)-&gt;element_private)
 845 /**
 846  * GST_PAD_PAD_TEMPLATE:
 847  * @pad: a #GstPad
 848  *
 849  * Get the @pad #GstPadTemplate. It describes the possible media types
 850  * a @pad or an element factory can handle.
 851  */
<span class="line-modified"> 852 #define GST_PAD_PAD_TEMPLATE(pad)   (GST_PAD_CAST(pad)-&gt;padtemplate)</span>
 853 /**
 854  * GST_PAD_DIRECTION:
 855  * @pad: a #GstPad
 856  *
 857  * Get the #GstPadDirection of the given @pad. Accessor macro, use
 858  * gst_pad_get_direction() instead.
 859  */
<span class="line-modified"> 860 #define GST_PAD_DIRECTION(pad)      (GST_PAD_CAST(pad)-&gt;direction)</span>
 861 /**
 862  * GST_PAD_TASK:
 863  * @pad: a #GstPad
 864  *
 865  * Get the #GstTask of @pad. Accessor macro used by GStreamer. Use the
 866  * gst_pad_start_task(), gst_pad_stop_task() and gst_pad_pause_task()
 867  * functions instead.
 868  */
<span class="line-modified"> 869 #define GST_PAD_TASK(pad)       (GST_PAD_CAST(pad)-&gt;task)</span>
 870 /**
 871  * GST_PAD_MODE:
 872  * @pad: a #GstPad
 873  *
 874  * Get the #GstPadMode of pad, which will be GST_PAD_MODE_NONE if the pad
 875  * has not been activated yet, and otherwise either GST_PAD_MODE_PUSH or
 876  * GST_PAD_MODE_PULL depending on which mode the pad was activated in.
 877  */
<span class="line-modified"> 878 #define GST_PAD_MODE(pad)           (GST_PAD_CAST(pad)-&gt;mode)</span>
 879 /**
 880  * GST_PAD_ACTIVATEFUNC:
 881  * @pad: a #GstPad
 882  *
 883  * Get the #GstPadActivateFunction from @pad.
 884  */
<span class="line-modified"> 885 #define GST_PAD_ACTIVATEFUNC(pad)   (GST_PAD_CAST(pad)-&gt;activatefunc)</span>
 886 /**
 887  * GST_PAD_ACTIVATEMODEFUNC:
 888  * @pad: a #GstPad
 889  *
 890  * Get the #GstPadActivateModeFunction from the given @pad.
 891  */
<span class="line-modified"> 892 #define GST_PAD_ACTIVATEMODEFUNC(pad)   (GST_PAD_CAST(pad)-&gt;activatemodefunc)</span>
 893 /**
 894  * GST_PAD_CHAINFUNC:
 895  * @pad: a #GstPad
 896  *
 897  * Get the #GstPadChainFunction from the given @pad.
 898  */
<span class="line-modified"> 899 #define GST_PAD_CHAINFUNC(pad)      (GST_PAD_CAST(pad)-&gt;chainfunc)</span>
 900 /**
 901  * GST_PAD_CHAINLISTFUNC:
 902  * @pad: a #GstPad
 903  *
 904  * Get the #GstPadChainListFunction from the given @pad.
 905  */
 906 #define GST_PAD_CHAINLISTFUNC(pad)      (GST_PAD_CAST(pad)-&gt;chainlistfunc)
 907 /**
 908  * GST_PAD_GETRANGEFUNC:
 909  * @pad: a #GstPad
 910  *
 911  * Get the #GstPadGetRangeFunction from the given @pad.
 912  */
<span class="line-modified"> 913 #define GST_PAD_GETRANGEFUNC(pad)   (GST_PAD_CAST(pad)-&gt;getrangefunc)</span>
 914 /**
 915  * GST_PAD_EVENTFUNC:
 916  * @pad: a #GstPad
 917  *
 918  * Get the #GstPadEventFunction from the given @pad, which
 919  * is the function that handles events on the pad. You can
 920  * use this to set your own event handling function on a pad
 921  * after you create it.  If your element derives from a base
 922  * class, use the base class&#39;s virtual functions instead.
 923  */
<span class="line-modified"> 924 #define GST_PAD_EVENTFUNC(pad)      (GST_PAD_CAST(pad)-&gt;eventfunc)</span>
 925 /**
 926  * GST_PAD_EVENTFULLFUNC:
 927  * @pad: a #GstPad
 928  *
 929  * Get the #GstPadEventFullFunction from the given @pad, which
 930  * is the function that handles events on the pad. You can
 931  * use this to set your own event handling function on a pad
 932  * after you create it.  If your element derives from a base
 933  * class, use the base class&#39;s virtual functions instead.
 934  *
 935  * Since: 1.8
 936  */
 937 #define GST_PAD_EVENTFULLFUNC(pad)  (GST_PAD_CAST(pad)-&gt;ABI.abi.eventfullfunc)
 938 /**
 939  * GST_PAD_QUERYFUNC:
 940  * @pad: a #GstPad
 941  *
 942  * Get the #GstPadQueryFunction from @pad, which is the function
 943  * that handles queries on the pad. You can  use this to set your
 944  * own query handling function on a pad after you create it. If your
 945  * element derives from a base class, use the base class&#39;s virtual
 946  * functions instead.
 947  */
<span class="line-modified"> 948 #define GST_PAD_QUERYFUNC(pad)      (GST_PAD_CAST(pad)-&gt;queryfunc)</span>
 949 /**
 950  * GST_PAD_ITERINTLINKFUNC:
 951  * @pad: a #GstPad
 952  *
 953  * Get the #GstPadIterIntLinkFunction from the given @pad.
 954  */
 955 #define GST_PAD_ITERINTLINKFUNC(pad)    (GST_PAD_CAST(pad)-&gt;iterintlinkfunc)
 956 /**
 957  * GST_PAD_PEER:
 958  * @pad: a #GstPad
 959  *
 960  * Return the pad&#39;s peer member. This member is a pointer to the linked @pad.
 961  * No locking is performed in this function, use gst_pad_get_peer() instead.
 962  */
<span class="line-modified"> 963 #define GST_PAD_PEER(pad)       (GST_PAD_CAST(pad)-&gt;peer)</span>
 964 /**
 965  * GST_PAD_LINKFUNC:
 966  * @pad: a #GstPad
 967  *
 968  * Get the #GstPadLinkFunction for the given @pad.
 969  */
<span class="line-modified"> 970 #define GST_PAD_LINKFUNC(pad)       (GST_PAD_CAST(pad)-&gt;linkfunc)</span>
 971 /**
 972  * GST_PAD_UNLINKFUNC:
 973  * @pad: a #GstPad
 974  *
 975  * Get the #GstPadUnlinkFunction from the given @pad.
 976  */
<span class="line-modified"> 977 #define GST_PAD_UNLINKFUNC(pad)     (GST_PAD_CAST(pad)-&gt;unlinkfunc)</span>
 978 /**
 979  * GST_PAD_IS_SRC:
 980  * @pad: a #GstPad
 981  *
 982  * Returns: %TRUE if the pad is a source pad (i.e. produces data).
 983  */
<span class="line-modified"> 984 #define GST_PAD_IS_SRC(pad)     (GST_PAD_DIRECTION(pad) == GST_PAD_SRC)</span>
 985 /**
 986  * GST_PAD_IS_SINK:
 987  * @pad: a #GstPad
 988  *
 989  * Returns: %TRUE if the pad is a sink pad (i.e. consumes data).
 990  */
<span class="line-modified"> 991 #define GST_PAD_IS_SINK(pad)        (GST_PAD_DIRECTION(pad) == GST_PAD_SINK)</span>
 992 /**
 993  * GST_PAD_IS_LINKED:
 994  * @pad: a #GstPad
 995  *
 996  * Returns: %TRUE if the pad is linked to another pad. Use gst_pad_is_linked()
 997  * instead.
 998  */
<span class="line-modified"> 999 #define GST_PAD_IS_LINKED(pad)      (GST_PAD_PEER(pad) != NULL)</span>
1000 /**
1001  * GST_PAD_IS_ACTIVE:
1002  * @pad: a #GstPad
1003  *
1004  * Returns: %TRUE if the pad has been activated.
1005  */
1006 #define GST_PAD_IS_ACTIVE(pad)          (GST_PAD_MODE(pad) != GST_PAD_MODE_NONE)
1007 /**
1008  * GST_PAD_IS_BLOCKED:
1009  * @pad: a #GstPad
1010  *
1011  * Check if the dataflow on a @pad is blocked. Use gst_pad_is_blocked() instead.
1012  */
<span class="line-modified">1013 #define GST_PAD_IS_BLOCKED(pad)     (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_BLOCKED))</span>
1014 /**
1015  * GST_PAD_IS_BLOCKING:
1016  * @pad: a #GstPad
1017  *
1018  * Check if the @pad is currently blocking on a buffer or event. Use
1019  * gst_pad_is_blocking() instead.
1020  */
<span class="line-modified">1021 #define GST_PAD_IS_BLOCKING(pad)    (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_BLOCKING))</span>
1022 /**
1023  * GST_PAD_IS_FLUSHING:
1024  * @pad: a #GstPad
1025  *
1026  * Check if the given @pad is flushing.
1027  */
<span class="line-modified">1028 #define GST_PAD_IS_FLUSHING(pad)    (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_FLUSHING))</span>
1029 /**
1030  * GST_PAD_SET_FLUSHING:
1031  * @pad: a #GstPad
1032  *
1033  * Set the given @pad to flushing state, which means it will not accept any
1034  * more events, queries or buffers, and return GST_FLOW_FLUSHING if any buffers
1035  * are pushed on it. This usually happens when the pad is shut down or when
1036  * a flushing seek happens. This is used inside GStreamer when flush start/stop
1037  * events pass through pads, or when an element state is changed and pads are
1038  * activated or deactivated.
1039  */
<span class="line-modified">1040 #define GST_PAD_SET_FLUSHING(pad)   (GST_OBJECT_FLAG_SET (pad, GST_PAD_FLAG_FLUSHING))</span>
1041 /**
1042  * GST_PAD_UNSET_FLUSHING:
1043  * @pad: a #GstPad
1044  *
1045  * Unset the flushing flag.
1046  */
1047 #define GST_PAD_UNSET_FLUSHING(pad) (GST_OBJECT_FLAG_UNSET (pad, GST_PAD_FLAG_FLUSHING))
1048 /**
1049  * GST_PAD_IS_EOS:
1050  * @pad: a #GstPad
1051  *
1052  * Check if the @pad is in EOS state.
1053  */
1054 #define GST_PAD_IS_EOS(pad)         (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_EOS))
1055 /**
1056  * GST_PAD_NEEDS_RECONFIGURE:
1057  * @pad: a #GstPad
1058  *
1059  * Check if the @pad should be reconfigured/renegotiated.
1060  * The flag has to be unset manually after reconfiguration happened.
</pre>
<hr />
<pre>
1257  *
1258  * Release the pad&#39;s stream lock.
1259  */
1260 #define GST_PAD_STREAM_UNLOCK(pad)      g_rec_mutex_unlock(GST_PAD_GET_STREAM_LOCK(pad))
1261 /**
1262  * GST_PAD_LAST_FLOW_RETURN:
1263  * @pad: a #GstPad
1264  *
1265  * Gets the last flow return on this pad
1266  *
1267  * Since: 1.4
1268  */
1269 #define GST_PAD_LAST_FLOW_RETURN(pad)   (GST_PAD_CAST(pad)-&gt;ABI.abi.last_flowret)
1270 
1271 #define GST_PAD_BLOCK_GET_COND(pad)     (&amp;GST_PAD_CAST(pad)-&gt;block_cond)
1272 #define GST_PAD_BLOCK_WAIT(pad)         (g_cond_wait(GST_PAD_BLOCK_GET_COND (pad), GST_OBJECT_GET_LOCK (pad)))
1273 #define GST_PAD_BLOCK_SIGNAL(pad)       (g_cond_signal(GST_PAD_BLOCK_GET_COND (pad)))
1274 #define GST_PAD_BLOCK_BROADCAST(pad)    (g_cond_broadcast(GST_PAD_BLOCK_GET_COND (pad)))
1275 
1276 GST_API
<span class="line-modified">1277 GType           gst_pad_get_type            (void);</span>
1278 
1279 /* creating pads */
1280 
1281 GST_API
<span class="line-modified">1282 GstPad*         gst_pad_new             (const gchar *name, GstPadDirection direction);</span>
1283 
1284 GST_API
<span class="line-modified">1285 GstPad*         gst_pad_new_from_template       (GstPadTemplate *templ, const gchar *name);</span>
1286 
1287 GST_API
<span class="line-modified">1288 GstPad*         gst_pad_new_from_static_template    (GstStaticPadTemplate *templ, const gchar *name);</span>
1289 
1290 
1291 /**
1292  * gst_pad_get_name:
1293  * @pad: the pad to get the name from
1294  *
1295  * Get a copy of the name of the pad. g_free() after usage.
1296  *
1297  * MT safe.
1298  */
1299 #define gst_pad_get_name(pad) gst_object_get_name (GST_OBJECT_CAST (pad))
1300 /**
1301  * gst_pad_get_parent:
1302  * @pad: the pad to get the parent of
1303  *
1304  * Get the parent of @pad. This function increases the refcount
1305  * of the parent object so you should gst_object_unref() it after usage.
1306  * Can return %NULL if the pad did not have a parent.
1307  *
1308  * MT safe.
1309  *
1310  * Returns: (nullable): the parent
1311  */
1312 #define gst_pad_get_parent(pad) gst_object_get_parent (GST_OBJECT_CAST (pad))
1313 
1314 GST_API
<span class="line-modified">1315 GstPadDirection     gst_pad_get_direction           (GstPad *pad);</span>
1316 
1317 GST_API
<span class="line-modified">1318 gboolean        gst_pad_set_active          (GstPad *pad, gboolean active);</span>
1319 
1320 GST_API
<span class="line-modified">1321 gboolean        gst_pad_is_active           (GstPad *pad);</span>
1322 
1323 GST_API
<span class="line-modified">1324 gboolean        gst_pad_activate_mode           (GstPad *pad, GstPadMode mode,</span>
1325                                                                  gboolean active);
1326 GST_API
1327 gulong                  gst_pad_add_probe                       (GstPad *pad,
<span class="line-modified">1328                                  GstPadProbeType mask,</span>
<span class="line-modified">1329                                  GstPadProbeCallback callback,</span>
1330                                                                  gpointer user_data,
1331                                                                  GDestroyNotify destroy_data);
1332 GST_API
1333 void                    gst_pad_remove_probe                    (GstPad *pad, gulong id);
1334 
1335 GST_API
<span class="line-modified">1336 gboolean        gst_pad_is_blocked          (GstPad *pad);</span>
1337 
1338 GST_API
<span class="line-modified">1339 gboolean        gst_pad_is_blocking         (GstPad *pad);</span>
1340 
1341 GST_API
1342 void                    gst_pad_mark_reconfigure                (GstPad *pad);
1343 
1344 GST_API
<span class="line-modified">1345 gboolean        gst_pad_needs_reconfigure               (GstPad *pad);</span>
1346 
1347 GST_API
<span class="line-modified">1348 gboolean        gst_pad_check_reconfigure               (GstPad *pad);</span>
1349 
1350 GST_API
<span class="line-modified">1351 void            gst_pad_set_element_private     (GstPad *pad, gpointer priv);</span>
1352 
1353 GST_API
<span class="line-modified">1354 gpointer        gst_pad_get_element_private     (GstPad *pad);</span>
1355 
1356 GST_API
<span class="line-modified">1357 GstPadTemplate*     gst_pad_get_pad_template        (GstPad *pad);</span>
1358 
1359 GST_API
1360 GstFlowReturn           gst_pad_store_sticky_event              (GstPad *pad, GstEvent *event);
1361 
1362 GST_API
1363 GstEvent*               gst_pad_get_sticky_event                (GstPad *pad, GstEventType event_type,
1364                                                                  guint idx);
1365 
1366 GST_API
1367 void                    gst_pad_sticky_events_foreach           (GstPad *pad, GstPadStickyEventsForeachFunction foreach_func, gpointer user_data);
1368 
1369 /* data passing setup functions */
1370 
1371 GST_API
<span class="line-modified">1372 void            gst_pad_set_activate_function_full  (GstPad *pad,</span>
1373                                                                  GstPadActivateFunction activate,
1374                                                                  gpointer user_data,
1375                                                                  GDestroyNotify notify);
1376 GST_API
<span class="line-modified">1377 void            gst_pad_set_activatemode_function_full  (GstPad *pad,</span>
1378                                                                  GstPadActivateModeFunction activatemode,
1379                                                                  gpointer user_data,
1380                                                                  GDestroyNotify notify);
1381 /* data passing functions */
1382 
1383 GST_API
<span class="line-modified">1384 void            gst_pad_set_chain_function_full     (GstPad *pad,</span>
1385                                                                  GstPadChainFunction chain,
1386                                                                  gpointer user_data,
1387                                                                  GDestroyNotify notify);
1388 GST_API
<span class="line-modified">1389 void            gst_pad_set_chain_list_function_full    (GstPad *pad,</span>
1390                                                                  GstPadChainListFunction chainlist,
1391                                                                  gpointer user_data,
1392                                                                  GDestroyNotify notify);
1393 GST_API
<span class="line-modified">1394 void            gst_pad_set_getrange_function_full  (GstPad *pad,</span>
1395                                                                  GstPadGetRangeFunction get,
1396                                                                  gpointer user_data,
1397                                                                  GDestroyNotify notify);
1398 GST_API
<span class="line-modified">1399 void            gst_pad_set_event_function_full     (GstPad *pad,</span>
1400                                                                  GstPadEventFunction event,
1401                                                                  gpointer user_data,
1402                                                                  GDestroyNotify notify);
1403 GST_API
<span class="line-modified">1404 void            gst_pad_set_event_full_function_full    (GstPad *pad,</span>
1405                                                                  GstPadEventFullFunction event,
1406                                                                  gpointer user_data,
1407                                                                  GDestroyNotify notify);
1408 
1409 #define gst_pad_set_activate_function(p,f)      gst_pad_set_activate_function_full((p),(f),NULL,NULL)
1410 #define gst_pad_set_activatemode_function(p,f)  gst_pad_set_activatemode_function_full((p),(f),NULL,NULL)
1411 #define gst_pad_set_chain_function(p,f)         gst_pad_set_chain_function_full((p),(f),NULL,NULL)
1412 #define gst_pad_set_chain_list_function(p,f)    gst_pad_set_chain_list_function_full((p),(f),NULL,NULL)
1413 #define gst_pad_set_getrange_function(p,f)      gst_pad_set_getrange_function_full((p),(f),NULL,NULL)
1414 #define gst_pad_set_event_function(p,f)         gst_pad_set_event_function_full((p),(f),NULL,NULL)
1415 #define gst_pad_set_event_full_function(p,f)    gst_pad_set_event_full_function_full((p),(f),NULL,NULL)
1416 
1417 /* pad links */
1418 
1419 GST_API
<span class="line-modified">1420 void            gst_pad_set_link_function_full      (GstPad *pad,</span>
1421                                                                  GstPadLinkFunction link,
1422                                                                  gpointer user_data,
1423                                                                  GDestroyNotify notify);
1424 GST_API
<span class="line-modified">1425 void            gst_pad_set_unlink_function_full        (GstPad *pad,</span>
1426                                                                  GstPadUnlinkFunction unlink,
1427                                                                  gpointer user_data,
1428                                                                  GDestroyNotify notify);
1429 
1430 #define gst_pad_set_link_function(p,f)          gst_pad_set_link_function_full((p),(f),NULL,NULL)
1431 #define gst_pad_set_unlink_function(p,f)        gst_pad_set_unlink_function_full((p),(f),NULL,NULL)
1432 
1433 GST_API
1434 gboolean                gst_pad_can_link                        (GstPad *srcpad, GstPad *sinkpad);
1435 
1436 GST_API
<span class="line-modified">1437 GstPadLinkReturn        gst_pad_link                (GstPad *srcpad, GstPad *sinkpad);</span>
1438 
1439 GST_API
<span class="line-modified">1440 GstPadLinkReturn        gst_pad_link_full           (GstPad *srcpad, GstPad *sinkpad, GstPadLinkCheck flags);</span>
1441 
1442 GST_API
<span class="line-modified">1443 gboolean        gst_pad_unlink              (GstPad *srcpad, GstPad *sinkpad);</span>
1444 
1445 GST_API
<span class="line-modified">1446 gboolean        gst_pad_is_linked           (GstPad *pad);</span>
1447 
1448 GST_API
<span class="line-modified">1449 GstPad*         gst_pad_get_peer            (GstPad *pad);</span>
1450 
1451 GST_API
<span class="line-modified">1452 GstCaps*                gst_pad_get_pad_template_caps       (GstPad *pad);</span>
1453 
1454 /* capsnego function for linked/unlinked pads */
1455 
1456 GST_API
<span class="line-modified">1457 GstCaps *       gst_pad_get_current_caps                (GstPad * pad);</span>
1458 
1459 GST_API
<span class="line-modified">1460 gboolean        gst_pad_has_current_caps                (GstPad * pad);</span>
1461 
1462 /* capsnego for linked pads */
1463 
1464 GST_API
<span class="line-modified">1465 GstCaps *       gst_pad_get_allowed_caps        (GstPad * pad);</span>
1466 
1467 /* pad offsets */
1468 
1469 GST_API
1470 gint64                  gst_pad_get_offset                      (GstPad *pad);
1471 
1472 GST_API
1473 void                    gst_pad_set_offset                      (GstPad *pad, gint64 offset);
1474 
1475 /* data passing functions to peer */
1476 
1477 GST_API
<span class="line-modified">1478 GstFlowReturn       gst_pad_push                (GstPad *pad, GstBuffer *buffer);</span>
1479 
1480 GST_API
<span class="line-modified">1481 GstFlowReturn       gst_pad_push_list           (GstPad *pad, GstBufferList *list);</span>
1482 
1483 GST_API
<span class="line-modified">1484 GstFlowReturn       gst_pad_pull_range          (GstPad *pad, guint64 offset, guint size,</span>
<span class="line-modified">1485                                  GstBuffer **buffer);</span>
1486 GST_API
<span class="line-modified">1487 gboolean        gst_pad_push_event          (GstPad *pad, GstEvent *event);</span>
1488 
1489 GST_API
<span class="line-modified">1490 gboolean        gst_pad_event_default           (GstPad *pad, GstObject *parent,</span>
1491                                                                  GstEvent *event);
1492 GST_API
1493 GstFlowReturn           gst_pad_get_last_flow_return            (GstPad *pad);
1494 
1495 /* data passing functions on pad */
1496 
1497 GST_API
<span class="line-modified">1498 GstFlowReturn       gst_pad_chain               (GstPad *pad, GstBuffer *buffer);</span>
1499 
1500 GST_API
<span class="line-modified">1501 GstFlowReturn       gst_pad_chain_list                      (GstPad *pad, GstBufferList *list);</span>
1502 
1503 GST_API
<span class="line-modified">1504 GstFlowReturn       gst_pad_get_range           (GstPad *pad, guint64 offset, guint size,</span>
<span class="line-modified">1505                                  GstBuffer **buffer);</span>
1506 GST_API
<span class="line-modified">1507 gboolean        gst_pad_send_event          (GstPad *pad, GstEvent *event);</span>
1508 
1509 /* pad tasks */
1510 
1511 GST_API
<span class="line-modified">1512 gboolean        gst_pad_start_task          (GstPad *pad, GstTaskFunction func,</span>
<span class="line-modified">1513                                  gpointer user_data, GDestroyNotify notify);</span>
1514 GST_API
<span class="line-modified">1515 gboolean        gst_pad_pause_task          (GstPad *pad);</span>
1516 
1517 GST_API
<span class="line-modified">1518 gboolean        gst_pad_stop_task           (GstPad *pad);</span>
1519 
1520 GST_API
<span class="line-modified">1521 GstTaskState    gst_pad_get_task_state      (GstPad *pad);</span>
1522 
1523 /* internal links */
1524 
1525 GST_API
1526 void                    gst_pad_set_iterate_internal_links_function_full (GstPad * pad,
1527                                                                  GstPadIterIntLinkFunction iterintlink,
1528                                                                  gpointer user_data,
1529                                                                  GDestroyNotify notify);
1530 
1531 GST_API
1532 GstIterator *           gst_pad_iterate_internal_links          (GstPad * pad);
1533 
1534 GST_API
1535 GstIterator *           gst_pad_iterate_internal_links_default  (GstPad * pad, GstObject *parent);
1536 
1537 #define gst_pad_set_iterate_internal_links_function(p,f) gst_pad_set_iterate_internal_links_function_full((p),(f),NULL,NULL)
1538 
1539 /* generic query function */
1540 
1541 GST_API
<span class="line-modified">1542 gboolean        gst_pad_query               (GstPad *pad, GstQuery *query);</span>
1543 
1544 GST_API
<span class="line-modified">1545 gboolean        gst_pad_peer_query          (GstPad *pad, GstQuery *query);</span>
1546 
1547 GST_API
<span class="line-modified">1548 void            gst_pad_set_query_function_full     (GstPad *pad, GstPadQueryFunction query,</span>
1549                                                                  gpointer user_data,
1550                                                                  GDestroyNotify notify);
1551 GST_API
<span class="line-modified">1552 gboolean        gst_pad_query_default           (GstPad *pad, GstObject *parent,</span>
1553                                                                  GstQuery *query);
1554 
1555 #define gst_pad_set_query_function(p,f)   gst_pad_set_query_function_full((p),(f),NULL,NULL)
1556 
1557 /* misc helper functions */
1558 
1559 GST_API
<span class="line-modified">1560 gboolean        gst_pad_forward                         (GstPad *pad, GstPadForwardFunction forward,</span>
<span class="line-modified">1561                                  gpointer user_data);</span>
1562 
1563 #ifdef G_DEFINE_AUTOPTR_CLEANUP_FUNC
1564 G_DEFINE_AUTOPTR_CLEANUP_FUNC(GstPad, gst_object_unref)
1565 #endif
1566 
1567 G_END_DECLS
1568 
1569 #endif /* __GST_PAD_H__ */
</pre>
</td>
<td>
<hr />
<pre>
  63 
  64 #include &lt;glib.h&gt;
  65 
  66 GST_API
  67 const gchar   * gst_pad_mode_get_name (GstPadMode mode);
  68 
  69 #include &lt;gst/gstobject.h&gt;
  70 #include &lt;gst/gstbuffer.h&gt;
  71 #include &lt;gst/gstbufferlist.h&gt;
  72 #include &lt;gst/gstcaps.h&gt;
  73 #include &lt;gst/gstpadtemplate.h&gt;
  74 #include &lt;gst/gstevent.h&gt;
  75 #include &lt;gst/gstquery.h&gt;
  76 #include &lt;gst/gsttask.h&gt;
  77 
  78 G_BEGIN_DECLS
  79 
  80 /*
  81  * Pad base class
  82  */
<span class="line-modified">  83 #define GST_TYPE_PAD      (gst_pad_get_type ())</span>
<span class="line-modified">  84 #define GST_IS_PAD(obj)     (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GST_TYPE_PAD))</span>
<span class="line-modified">  85 #define GST_IS_PAD_CLASS(klass)   (G_TYPE_CHECK_CLASS_TYPE ((klass), GST_TYPE_PAD))</span>
<span class="line-modified">  86 #define GST_PAD(obj)      (G_TYPE_CHECK_INSTANCE_CAST ((obj), GST_TYPE_PAD, GstPad))</span>
<span class="line-modified">  87 #define GST_PAD_CLASS(klass)    (G_TYPE_CHECK_CLASS_CAST ((klass), GST_TYPE_PAD, GstPadClass))</span>
<span class="line-modified">  88 #define GST_PAD_CAST(obj)   ((GstPad*)(obj))</span>
  89 
  90 
  91 
  92 /**
  93  * GstPadLinkReturn:
<span class="line-modified">  94  * @GST_PAD_LINK_OK   : link succeeded</span>
  95  * @GST_PAD_LINK_WRONG_HIERARCHY: pads have no common grandparent
  96  * @GST_PAD_LINK_WAS_LINKED : pad was already linked
  97  * @GST_PAD_LINK_WRONG_DIRECTION: pads have wrong direction
<span class="line-modified">  98  * @GST_PAD_LINK_NOFORMAT : pads do not have common format</span>
<span class="line-modified">  99  * @GST_PAD_LINK_NOSCHED  : pads cannot cooperate in scheduling</span>
<span class="line-modified"> 100  * @GST_PAD_LINK_REFUSED  : refused for some reason</span>
 101  *
 102  * Result values from gst_pad_link and friends.
 103  */
 104 typedef enum {
 105   GST_PAD_LINK_OK               =  0,
 106   GST_PAD_LINK_WRONG_HIERARCHY  = -1,
 107   GST_PAD_LINK_WAS_LINKED       = -2,
 108   GST_PAD_LINK_WRONG_DIRECTION  = -3,
 109   GST_PAD_LINK_NOFORMAT         = -4,
 110   GST_PAD_LINK_NOSCHED          = -5,
 111   GST_PAD_LINK_REFUSED          = -6
 112 } GstPadLinkReturn;
 113 
 114 /**
 115  * GST_PAD_LINK_FAILED:
 116  * @ret: the #GstPadLinkReturn value
 117  *
 118  * Macro to test if the given #GstPadLinkReturn value indicates a failed
 119  * link step.
 120  */
 121 #define GST_PAD_LINK_FAILED(ret) ((ret) &lt; GST_PAD_LINK_OK)
 122 
 123 /**
 124  * GST_PAD_LINK_SUCCESSFUL:
 125  * @ret: the #GstPadLinkReturn value
 126  *
 127  * Macro to test if the given #GstPadLinkReturn value indicates a successful
 128  * link step.
 129  */
 130 #define GST_PAD_LINK_SUCCESSFUL(ret) ((ret) &gt;= GST_PAD_LINK_OK)
 131 
 132 /**
 133  * GstFlowReturn:
<span class="line-modified"> 134  * @GST_FLOW_OK:     Data passing was ok.</span>
<span class="line-modified"> 135  * @GST_FLOW_NOT_LINKED:   Pad is not linked.</span>
 136  * @GST_FLOW_FLUSHING:           Pad is flushing.
 137  * @GST_FLOW_EOS:                Pad is EOS.
<span class="line-modified"> 138  * @GST_FLOW_NOT_NEGOTIATED:   Pad is not negotiated.</span>
<span class="line-modified"> 139  * @GST_FLOW_ERROR:    Some (fatal) error occurred. Element generating</span>
 140  *                               this error should post an error message with more
 141  *                               details.
 142  * @GST_FLOW_NOT_SUPPORTED:  This operation is not supported.
<span class="line-modified"> 143  * @GST_FLOW_CUSTOM_SUCCESS:   Elements can use values starting from</span>
 144  *                               this (and higher) to define custom success
 145  *                               codes.
 146  * @GST_FLOW_CUSTOM_SUCCESS_1:   Pre-defined custom success code (define your
 147  *                               custom success code to this to avoid compiler
 148  *                               warnings).
 149  * @GST_FLOW_CUSTOM_SUCCESS_2:   Pre-defined custom success code.
 150  * @GST_FLOW_CUSTOM_ERROR:   Elements can use values starting from
 151  *                               this (and lower) to define custom error codes.
<span class="line-modified"> 152  * @GST_FLOW_CUSTOM_ERROR_1:   Pre-defined custom error code (define your</span>
 153  *                               custom error code to this to avoid compiler
 154  *                               warnings).
<span class="line-modified"> 155  * @GST_FLOW_CUSTOM_ERROR_2:   Pre-defined custom error code.</span>
 156  *
 157  * The result of passing data to a pad.
 158  *
 159  * Note that the custom return values should not be exposed outside of the
 160  * element scope.
 161  */
 162 typedef enum {
 163   /* custom success starts here */
 164   GST_FLOW_CUSTOM_SUCCESS_2 = 102,
 165   GST_FLOW_CUSTOM_SUCCESS_1 = 101,
 166   GST_FLOW_CUSTOM_SUCCESS = 100,
 167 
 168   /* core predefined */
<span class="line-modified"> 169   GST_FLOW_OK     =  0,</span>
 170   /* expected failures */
 171   GST_FLOW_NOT_LINKED     = -1,
 172   GST_FLOW_FLUSHING       = -2,
 173   /* error cases */
 174   GST_FLOW_EOS            = -3,
 175   GST_FLOW_NOT_NEGOTIATED = -4,
<span class="line-modified"> 176   GST_FLOW_ERROR    = -5,</span>
 177   GST_FLOW_NOT_SUPPORTED  = -6,
 178 
 179   /* custom error starts here */
 180   GST_FLOW_CUSTOM_ERROR   = -100,
 181   GST_FLOW_CUSTOM_ERROR_1 = -101,
 182   GST_FLOW_CUSTOM_ERROR_2 = -102
 183 } GstFlowReturn;
 184 
 185 GST_API
 186 const gchar *         gst_flow_get_name (GstFlowReturn ret);
 187 
 188 GST_API
 189 GQuark                gst_flow_to_quark (GstFlowReturn ret);
 190 
 191 GST_API
 192 const gchar *         gst_pad_link_get_name (GstPadLinkReturn ret);
 193 
 194 /**
 195  * GstPadLinkCheck:
 196  * @GST_PAD_LINK_CHECK_NOTHING: Don&#39;t check hierarchy or caps compatibility.
</pre>
<hr />
<pre>
 227   /* Not really checks, more like flags
 228    * Added here to avoid creating a new gst_pad_link_variant */
 229   GST_PAD_LINK_CHECK_NO_RECONFIGURE = 1 &lt;&lt; 3,
 230 
 231   GST_PAD_LINK_CHECK_DEFAULT       = GST_PAD_LINK_CHECK_HIERARCHY | GST_PAD_LINK_CHECK_CAPS
 232 } GstPadLinkCheck;
 233 
 234 /* pad states */
 235 /**
 236  * GstPadActivateFunction:
 237  * @pad: a #GstPad
 238  * @parent: the parent of @pad
 239  *
 240  * This function is called when the pad is activated during the element
 241  * READY to PAUSED state change. By default this function will call the
 242  * activate function that puts the pad in push mode but elements can
 243  * override this function to activate the pad in pull mode if they wish.
 244  *
 245  * Returns: %TRUE if the pad could be activated.
 246  */
<span class="line-modified"> 247 typedef gboolean    (*GstPadActivateFunction) (GstPad *pad, GstObject *parent);</span>
 248 /**
 249  * GstPadActivateModeFunction:
 250  * @pad: a #GstPad
 251  * @parent: the parent of @pad
 252  * @mode: the requested activation mode of @pad
 253  * @active: activate or deactivate the pad.
 254  *
 255  * The prototype of the push and pull activate functions.
 256  *
 257  * Returns: %TRUE if the pad could be activated or deactivated.
 258  */
<span class="line-modified"> 259 typedef gboolean    (*GstPadActivateModeFunction) (GstPad *pad, GstObject *parent,</span>
 260                                                                  GstPadMode mode, gboolean active);
 261 
 262 
 263 /* data passing */
 264 /**
 265  * GstPadChainFunction:
 266  * @pad: the sink #GstPad that performed the chain.
 267  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 268  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 269  *          during the execution of this function.
 270  * @buffer: (transfer full): the #GstBuffer that is chained, not %NULL.
 271  *
 272  * A function that will be called on sinkpads when chaining buffers.
 273  * The function typically processes the data contained in the buffer and
 274  * either consumes the data or passes it on to the internally linked pad(s).
 275  *
 276  * The implementer of this function receives a refcount to @buffer and should
 277  * gst_buffer_unref() when the buffer is no longer needed.
 278  *
 279  * When a chain function detects an error in the data stream, it must post an
 280  * error on the bus and return an appropriate #GstFlowReturn value.
 281  *
 282  * Returns: #GST_FLOW_OK for success
 283  */
<span class="line-modified"> 284 typedef GstFlowReturn   (*GstPadChainFunction)    (GstPad *pad, GstObject *parent,</span>
 285                                                                  GstBuffer *buffer);
 286 
 287 /**
 288  * GstPadChainListFunction:
 289  * @pad: the sink #GstPad that performed the chain.
 290  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 291  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 292  *          during the execution of this function.
 293  * @list: (transfer full): the #GstBufferList that is chained, not %NULL.
 294  *
 295  * A function that will be called on sinkpads when chaining buffer lists.
 296  * The function typically processes the data contained in the buffer list and
 297  * either consumes the data or passes it on to the internally linked pad(s).
 298  *
 299  * The implementer of this function receives a refcount to @list and
 300  * should gst_buffer_list_unref() when the list is no longer needed.
 301  *
 302  * When a chainlist function detects an error in the data stream, it must
 303  * post an error on the bus and return an appropriate #GstFlowReturn value.
 304  *
 305  * Returns: #GST_FLOW_OK for success
 306  */
<span class="line-modified"> 307 typedef GstFlowReturn   (*GstPadChainListFunction)  (GstPad *pad, GstObject *parent,</span>
 308                                                                  GstBufferList *list);
 309 
 310 /**
 311  * GstPadGetRangeFunction:
 312  * @pad: the src #GstPad to perform the getrange on.
 313  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 314  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 315  *          during the execution of this function.
 316  * @offset: the offset of the range
 317  * @length: the length of the range
 318  * @buffer: a memory location to hold the result buffer, cannot be %NULL.
 319  *
 320  * This function will be called on source pads when a peer element
 321  * request a buffer at the specified @offset and @length. If this function
 322  * returns #GST_FLOW_OK, the result buffer will be stored in @buffer. The
 323  * contents of @buffer is invalid for any other return value.
 324  *
 325  * This function is installed on a source pad with
 326  * gst_pad_set_getrange_function() and can only be called on source pads after
 327  * they are successfully activated with gst_pad_activate_mode() with the
</pre>
<hr />
<pre>
 337  * contain a valid buffer.
 338  *
 339  * The buffer size of @buffer will only be smaller than @length when @offset is
 340  * near the end of the stream. In all other cases, the size of @buffer must be
 341  * exactly the requested size.
 342  *
 343  * It is allowed to call this function with a 0 @length and valid @offset, in
 344  * which case @buffer will contain a 0-sized buffer and the function returns
 345  * #GST_FLOW_OK.
 346  *
 347  * When this function is called with a -1 @offset, the sequentially next buffer
 348  * of length @length in the stream is returned.
 349  *
 350  * When this function is called with a -1 @length, a buffer with a default
 351  * optimal length is returned in @buffer. The length might depend on the value
 352  * of @offset.
 353  *
 354  * Returns: #GST_FLOW_OK for success and a valid buffer in @buffer. Any other
 355  * return value leaves @buffer undefined.
 356  */
<span class="line-modified"> 357 typedef GstFlowReturn   (*GstPadGetRangeFunction) (GstPad *pad, GstObject *parent,</span>
 358                                                                  guint64 offset, guint length,
 359                                                                  GstBuffer **buffer);
 360 
 361 /**
 362  * GstPadEventFunction:
 363  * @pad: the #GstPad to handle the event.
 364  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 365  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 366  *          during the execution of this function.
 367  * @event: (transfer full): the #GstEvent to handle.
 368  *
 369  * Function signature to handle an event for the pad.
 370  *
 371  * Returns: %TRUE if the pad could handle the event.
 372  */
<span class="line-modified"> 373 typedef gboolean    (*GstPadEventFunction)    (GstPad *pad, GstObject *parent,</span>
 374                                                                  GstEvent *event);
 375 
 376 /**
 377  * GstPadEventFullFunction:
 378  * @pad: the #GstPad to handle the event.
 379  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 380  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 381  *          during the execution of this function.
 382  * @event: (transfer full): the #GstEvent to handle.
 383  *
 384  * Function signature to handle an event for the pad.
 385  *
 386  * This variant is for specific elements that will take into account the
 387  * last downstream flow return (from a pad push), in which case they can
 388  * return it.
 389  *
 390  * Returns: %GST_FLOW_OK if the event was handled properly, or any other
 391  * #GstFlowReturn dependent on downstream state.
 392  *
 393  * Since: 1.8
 394  */
<span class="line-modified"> 395 typedef GstFlowReturn   (*GstPadEventFullFunction)  (GstPad *pad, GstObject *parent,</span>
 396                                                                  GstEvent *event);
 397 
 398 
 399 /* internal links */
 400 /**
 401  * GstPadIterIntLinkFunction:
 402  * @pad: The #GstPad to query.
 403  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 404  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 405  *          during the execution of this function.
 406  *
 407  * The signature of the internal pad link iterator function.
 408  *
 409  * Returns: a new #GstIterator that will iterate over all pads that are
 410  * linked to the given pad on the inside of the parent element.
 411  *
 412  * the caller must call gst_iterator_free() after usage.
 413  */
 414 typedef GstIterator*           (*GstPadIterIntLinkFunction)    (GstPad *pad, GstObject *parent);
 415 
 416 /* generic query function */
 417 /**
 418  * GstPadQueryFunction:
 419  * @pad: the #GstPad to query.
 420  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 421  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 422  *          during the execution of this function.
 423  * @query: the #GstQuery object to execute
 424  *
 425  * The signature of the query function.
 426  *
 427  * Returns: %TRUE if the query could be performed.
 428  */
<span class="line-modified"> 429 typedef gboolean    (*GstPadQueryFunction)    (GstPad *pad, GstObject *parent,</span>
 430                                                                  GstQuery *query);
 431 
 432 
 433 /* linking */
 434 /**
 435  * GstPadLinkFunction:
 436  * @pad: the #GstPad that is linked.
 437  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 438  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 439  *          during the execution of this function.
 440  * @peer: the peer #GstPad of the link
 441  *
 442  * Function signature to handle a new link on the pad.
 443  *
 444  * Returns: the result of the link with the specified peer.
 445  */
<span class="line-modified"> 446 typedef GstPadLinkReturn  (*GstPadLinkFunction)   (GstPad *pad, GstObject *parent, GstPad *peer);</span>
 447 /**
 448  * GstPadUnlinkFunction:
 449  * @pad: the #GstPad that is linked.
 450  * @parent: (allow-none): the parent of @pad. If the #GST_PAD_FLAG_NEED_PARENT
 451  *          flag is set, @parent is guaranteed to be not-%NULL and remain valid
 452  *          during the execution of this function.
 453  *
 454  * Function signature to handle a unlinking the pad prom its peer.
<span class="line-added"> 455  *</span>
<span class="line-added"> 456  * The pad&#39;s lock is already held when the unlink function is called, so most</span>
<span class="line-added"> 457  * pad functions cannot be called from within the callback.</span>
 458  */
<span class="line-modified"> 459 typedef void      (*GstPadUnlinkFunction)   (GstPad *pad, GstObject *parent);</span>
 460 
 461 
 462 /* misc */
 463 /**
 464  * GstPadForwardFunction:
 465  * @pad: the #GstPad that is forwarded.
 466  * @user_data: the gpointer to optional user data.
 467  *
 468  * A forward function is called for all internally linked pads, see
 469  * gst_pad_forward().
 470  *
 471  * Returns: %TRUE if the dispatching procedure has to be stopped.
 472  */
<span class="line-modified"> 473 typedef gboolean    (*GstPadForwardFunction)  (GstPad *pad, gpointer user_data);</span>
 474 
 475 /**
 476  * GstPadProbeType:
 477  * @GST_PAD_PROBE_TYPE_INVALID: invalid probe type
 478  * @GST_PAD_PROBE_TYPE_IDLE: probe idle pads and block while the callback is called
 479  * @GST_PAD_PROBE_TYPE_BLOCK: probe and block pads
 480  * @GST_PAD_PROBE_TYPE_BUFFER: probe buffers
 481  * @GST_PAD_PROBE_TYPE_BUFFER_LIST: probe buffer lists
 482  * @GST_PAD_PROBE_TYPE_EVENT_DOWNSTREAM: probe downstream events
 483  * @GST_PAD_PROBE_TYPE_EVENT_UPSTREAM: probe upstream events
 484  * @GST_PAD_PROBE_TYPE_EVENT_FLUSH: probe flush events. This probe has to be
 485  *     explicitly enabled and is not included in the
 486  *     @@GST_PAD_PROBE_TYPE_EVENT_DOWNSTREAM or
 487  *     @@GST_PAD_PROBE_TYPE_EVENT_UPSTREAM probe types.
 488  * @GST_PAD_PROBE_TYPE_QUERY_DOWNSTREAM: probe downstream queries
 489  * @GST_PAD_PROBE_TYPE_QUERY_UPSTREAM: probe upstream queries
 490  * @GST_PAD_PROBE_TYPE_PUSH: probe push
 491  * @GST_PAD_PROBE_TYPE_PULL: probe pull
 492  * @GST_PAD_PROBE_TYPE_BLOCKING: probe and block at the next opportunity, at data flow or when idle
 493  * @GST_PAD_PROBE_TYPE_DATA_DOWNSTREAM: probe downstream data (buffers, buffer lists, and events)
</pre>
<hr />
<pre>
 578  * @id: the id of the probe
 579  * @data: (allow-none): type specific data, check the @type field to know the
 580  *    datatype.  This field can be %NULL.
 581  * @offset: offset of pull probe, this field is valid when @type contains
 582  *    #GST_PAD_PROBE_TYPE_PULL
 583  * @size: size of pull probe, this field is valid when @type contains
 584  *    #GST_PAD_PROBE_TYPE_PULL
 585  *
 586  * Info passed in the #GstPadProbeCallback.
 587  */
 588 struct _GstPadProbeInfo
 589 {
 590   GstPadProbeType type;
 591   gulong id;
 592   gpointer data;
 593   guint64 offset;
 594   guint size;
 595 
 596   /*&lt; private &gt;*/
 597   union {
<span class="line-modified"> 598     gpointer _gst_reserved[GST_PADDING];</span>
 599     struct {
 600       GstFlowReturn flow_ret;
 601     } abi;
 602   } ABI;
 603 };
 604 
 605 #define GST_PAD_PROBE_INFO_TYPE(d)         ((d)-&gt;type)
 606 #define GST_PAD_PROBE_INFO_ID(d)           ((d)-&gt;id)
 607 #define GST_PAD_PROBE_INFO_DATA(d)         ((d)-&gt;data)
 608 #define GST_PAD_PROBE_INFO_FLOW_RETURN(d)  ((d)-&gt;ABI.abi.flow_ret)
 609 
 610 #define GST_PAD_PROBE_INFO_BUFFER(d)       GST_BUFFER_CAST(GST_PAD_PROBE_INFO_DATA(d))
 611 #define GST_PAD_PROBE_INFO_BUFFER_LIST(d)  GST_BUFFER_LIST_CAST(GST_PAD_PROBE_INFO_DATA(d))
 612 #define GST_PAD_PROBE_INFO_EVENT(d)        GST_EVENT_CAST(GST_PAD_PROBE_INFO_DATA(d))
 613 #define GST_PAD_PROBE_INFO_QUERY(d)        GST_QUERY_CAST(GST_PAD_PROBE_INFO_DATA(d))
 614 
 615 #define GST_PAD_PROBE_INFO_OFFSET(d)       ((d)-&gt;offset)
 616 #define GST_PAD_PROBE_INFO_SIZE(d)         ((d)-&gt;size)
 617 
 618 GST_API
</pre>
<hr />
<pre>
 678  * @GST_PAD_FLAG_PENDING_EVENTS: the pad has pending events
 679  * @GST_PAD_FLAG_FIXED_CAPS: the pad is using fixed caps. This means that
 680  *     once the caps are set on the pad, the default caps query function
 681  *     will only return those caps.
 682  * @GST_PAD_FLAG_PROXY_CAPS: the default event and query handler will forward
 683  *                      all events and queries to the internally linked pads
 684  *                      instead of discarding them.
 685  * @GST_PAD_FLAG_PROXY_ALLOCATION: the default query handler will forward
 686  *                      allocation queries to the internally linked pads
 687  *                      instead of discarding them.
 688  * @GST_PAD_FLAG_PROXY_SCHEDULING: the default query handler will forward
 689  *                      scheduling queries to the internally linked pads
 690  *                      instead of discarding them.
 691  * @GST_PAD_FLAG_ACCEPT_INTERSECT: the default accept-caps handler will check
 692  *                      it the caps intersect the query-caps result instead
 693  *                      of checking for a subset. This is interesting for
 694  *                      parsers that can accept incompletely specified caps.
 695  * @GST_PAD_FLAG_ACCEPT_TEMPLATE: the default accept-caps handler will use
 696  *                      the template pad caps instead of query caps to
 697  *                      compare with the accept caps. Use this in combination
<span class="line-modified"> 698  *                      with %GST_PAD_FLAG_ACCEPT_INTERSECT. (Since: 1.6)</span>
 699  * @GST_PAD_FLAG_LAST: offset to define more flags
 700  *
 701  * Pad state flags
 702  */
 703 typedef enum {
 704   GST_PAD_FLAG_BLOCKED          = (GST_OBJECT_FLAG_LAST &lt;&lt; 0),
 705   GST_PAD_FLAG_FLUSHING         = (GST_OBJECT_FLAG_LAST &lt;&lt; 1),
 706   GST_PAD_FLAG_EOS              = (GST_OBJECT_FLAG_LAST &lt;&lt; 2),
 707   GST_PAD_FLAG_BLOCKING         = (GST_OBJECT_FLAG_LAST &lt;&lt; 3),
 708   GST_PAD_FLAG_NEED_PARENT      = (GST_OBJECT_FLAG_LAST &lt;&lt; 4),
 709   GST_PAD_FLAG_NEED_RECONFIGURE = (GST_OBJECT_FLAG_LAST &lt;&lt; 5),
 710   GST_PAD_FLAG_PENDING_EVENTS   = (GST_OBJECT_FLAG_LAST &lt;&lt; 6),
 711   GST_PAD_FLAG_FIXED_CAPS       = (GST_OBJECT_FLAG_LAST &lt;&lt; 7),
 712   GST_PAD_FLAG_PROXY_CAPS       = (GST_OBJECT_FLAG_LAST &lt;&lt; 8),
 713   GST_PAD_FLAG_PROXY_ALLOCATION = (GST_OBJECT_FLAG_LAST &lt;&lt; 9),
 714   GST_PAD_FLAG_PROXY_SCHEDULING = (GST_OBJECT_FLAG_LAST &lt;&lt; 10),
 715   GST_PAD_FLAG_ACCEPT_INTERSECT = (GST_OBJECT_FLAG_LAST &lt;&lt; 11),
 716   GST_PAD_FLAG_ACCEPT_TEMPLATE  = (GST_OBJECT_FLAG_LAST &lt;&lt; 12),
 717   /* padding */
 718   GST_PAD_FLAG_LAST        = (GST_OBJECT_FLAG_LAST &lt;&lt; 16)
</pre>
<hr />
<pre>
 722  * GstPad:
 723  * @element_private: private data owned by the parent element
 724  * @padtemplate: padtemplate for this pad
 725  * @direction: the direction of the pad, cannot change after creating
 726  *             the pad.
 727  *
 728  * The #GstPad structure. Use the functions to update the variables.
 729  */
 730 struct _GstPad {
 731   GstObject                      object;
 732 
 733   /*&lt; public &gt;*/
 734   gpointer                       element_private;
 735 
 736   GstPadTemplate                *padtemplate;
 737 
 738   GstPadDirection                direction;
 739 
 740   /*&lt; private &gt;*/
 741   /* streaming rec_lock */
<span class="line-modified"> 742   GRecMutex            stream_rec_lock;</span>
<span class="line-modified"> 743   GstTask     *task;</span>
 744 
 745   /* block cond, mutex is from the object */
<span class="line-modified"> 746   GCond        block_cond;</span>
 747   GHookList                      probes;
 748 
<span class="line-modified"> 749   GstPadMode             mode;</span>
<span class="line-modified"> 750   GstPadActivateFunction   activatefunc;</span>
 751   gpointer                       activatedata;
 752   GDestroyNotify                 activatenotify;
<span class="line-modified"> 753   GstPadActivateModeFunction   activatemodefunc;</span>
 754   gpointer                       activatemodedata;
 755   GDestroyNotify                 activatemodenotify;
 756 
 757   /* pad link */
<span class="line-modified"> 758   GstPad      *peer;</span>
<span class="line-modified"> 759   GstPadLinkFunction     linkfunc;</span>
 760   gpointer                       linkdata;
 761   GDestroyNotify                 linknotify;
<span class="line-modified"> 762   GstPadUnlinkFunction     unlinkfunc;</span>
 763   gpointer                       unlinkdata;
 764   GDestroyNotify                 unlinknotify;
 765 
 766   /* data transport functions */
<span class="line-modified"> 767   GstPadChainFunction    chainfunc;</span>
 768   gpointer                       chaindata;
 769   GDestroyNotify                 chainnotify;
 770   GstPadChainListFunction        chainlistfunc;
 771   gpointer                       chainlistdata;
 772   GDestroyNotify                 chainlistnotify;
<span class="line-modified"> 773   GstPadGetRangeFunction   getrangefunc;</span>
 774   gpointer                       getrangedata;
 775   GDestroyNotify                 getrangenotify;
<span class="line-modified"> 776   GstPadEventFunction    eventfunc;</span>
 777   gpointer                       eventdata;
 778   GDestroyNotify                 eventnotify;
 779 
 780   /* pad offset */
 781   gint64                         offset;
 782 
 783   /* generic query method */
<span class="line-modified"> 784   GstPadQueryFunction    queryfunc;</span>
 785   gpointer                       querydata;
 786   GDestroyNotify                 querynotify;
 787 
 788   /* internal links */
 789   GstPadIterIntLinkFunction      iterintlinkfunc;
 790   gpointer                       iterintlinkdata;
 791   GDestroyNotify                 iterintlinknotify;
 792 
 793   /* counts number of probes attached. */
<span class="line-modified"> 794   gint         num_probes;</span>
<span class="line-modified"> 795   gint         num_blocked;</span>
 796 
 797   GstPadPrivate                 *priv;
 798 
 799   union {
 800     gpointer _gst_reserved[GST_PADDING];
 801     struct {
 802       GstFlowReturn last_flowret;
 803       GstPadEventFullFunction eventfullfunc;
 804     } abi;
 805   } ABI;
 806 };
 807 
 808 struct _GstPadClass {
<span class="line-modified"> 809   GstObjectClass  parent_class;</span>
 810 
 811   /* signal callbacks */
<span class="line-modified"> 812   void    (*linked)   (GstPad *pad, GstPad *peer);</span>
<span class="line-modified"> 813   void    (*unlinked)   (GstPad *pad, GstPad *peer);</span>
 814 
 815   /*&lt; private &gt;*/
 816   gpointer _gst_reserved[GST_PADDING];
 817 };
 818 
 819 
 820 /***** helper macros *****/
 821 /* GstPad */
 822 
 823 /**
 824  * GST_PAD_NAME:
 825  * @pad: a #GstPad
 826  *
 827  * Get name of the given pad.
 828  * No locking is performed in this function, use gst_pad_get_name() instead.
 829  */
<span class="line-modified"> 830 #define GST_PAD_NAME(pad)   (GST_OBJECT_NAME(pad))</span>
 831 /**
 832  * GST_PAD_PARENT:
 833  * @pad: a #GstPad
 834  *
 835  * Get the @pad parent.
 836  * No locking is performed in this function, use gst_pad_get_parent() instead.
 837  */
<span class="line-modified"> 838 #define GST_PAD_PARENT(pad)   (GST_ELEMENT_CAST(GST_OBJECT_PARENT(pad)))</span>
 839 /**
 840  * GST_PAD_ELEMENT_PRIVATE:
 841  * @pad: a #GstPad
 842  *
 843  * Get the private data of @pad, which is usually some pad- or stream-specific
 844  * structure created by the element and set on the pad when creating it.
 845  * No locking is performed in this function.
 846  */
 847 #define GST_PAD_ELEMENT_PRIVATE(pad)    (GST_PAD_CAST(pad)-&gt;element_private)
 848 /**
 849  * GST_PAD_PAD_TEMPLATE:
 850  * @pad: a #GstPad
 851  *
 852  * Get the @pad #GstPadTemplate. It describes the possible media types
 853  * a @pad or an element factory can handle.
 854  */
<span class="line-modified"> 855 #define GST_PAD_PAD_TEMPLATE(pad) (GST_PAD_CAST(pad)-&gt;padtemplate)</span>
 856 /**
 857  * GST_PAD_DIRECTION:
 858  * @pad: a #GstPad
 859  *
 860  * Get the #GstPadDirection of the given @pad. Accessor macro, use
 861  * gst_pad_get_direction() instead.
 862  */
<span class="line-modified"> 863 #define GST_PAD_DIRECTION(pad)    (GST_PAD_CAST(pad)-&gt;direction)</span>
 864 /**
 865  * GST_PAD_TASK:
 866  * @pad: a #GstPad
 867  *
 868  * Get the #GstTask of @pad. Accessor macro used by GStreamer. Use the
 869  * gst_pad_start_task(), gst_pad_stop_task() and gst_pad_pause_task()
 870  * functions instead.
 871  */
<span class="line-modified"> 872 #define GST_PAD_TASK(pad)   (GST_PAD_CAST(pad)-&gt;task)</span>
 873 /**
 874  * GST_PAD_MODE:
 875  * @pad: a #GstPad
 876  *
 877  * Get the #GstPadMode of pad, which will be GST_PAD_MODE_NONE if the pad
 878  * has not been activated yet, and otherwise either GST_PAD_MODE_PUSH or
 879  * GST_PAD_MODE_PULL depending on which mode the pad was activated in.
 880  */
<span class="line-modified"> 881 #define GST_PAD_MODE(pad)         (GST_PAD_CAST(pad)-&gt;mode)</span>
 882 /**
 883  * GST_PAD_ACTIVATEFUNC:
 884  * @pad: a #GstPad
 885  *
 886  * Get the #GstPadActivateFunction from @pad.
 887  */
<span class="line-modified"> 888 #define GST_PAD_ACTIVATEFUNC(pad) (GST_PAD_CAST(pad)-&gt;activatefunc)</span>
 889 /**
 890  * GST_PAD_ACTIVATEMODEFUNC:
 891  * @pad: a #GstPad
 892  *
 893  * Get the #GstPadActivateModeFunction from the given @pad.
 894  */
<span class="line-modified"> 895 #define GST_PAD_ACTIVATEMODEFUNC(pad) (GST_PAD_CAST(pad)-&gt;activatemodefunc)</span>
 896 /**
 897  * GST_PAD_CHAINFUNC:
 898  * @pad: a #GstPad
 899  *
 900  * Get the #GstPadChainFunction from the given @pad.
 901  */
<span class="line-modified"> 902 #define GST_PAD_CHAINFUNC(pad)    (GST_PAD_CAST(pad)-&gt;chainfunc)</span>
 903 /**
 904  * GST_PAD_CHAINLISTFUNC:
 905  * @pad: a #GstPad
 906  *
 907  * Get the #GstPadChainListFunction from the given @pad.
 908  */
 909 #define GST_PAD_CHAINLISTFUNC(pad)      (GST_PAD_CAST(pad)-&gt;chainlistfunc)
 910 /**
 911  * GST_PAD_GETRANGEFUNC:
 912  * @pad: a #GstPad
 913  *
 914  * Get the #GstPadGetRangeFunction from the given @pad.
 915  */
<span class="line-modified"> 916 #define GST_PAD_GETRANGEFUNC(pad) (GST_PAD_CAST(pad)-&gt;getrangefunc)</span>
 917 /**
 918  * GST_PAD_EVENTFUNC:
 919  * @pad: a #GstPad
 920  *
 921  * Get the #GstPadEventFunction from the given @pad, which
 922  * is the function that handles events on the pad. You can
 923  * use this to set your own event handling function on a pad
 924  * after you create it.  If your element derives from a base
 925  * class, use the base class&#39;s virtual functions instead.
 926  */
<span class="line-modified"> 927 #define GST_PAD_EVENTFUNC(pad)    (GST_PAD_CAST(pad)-&gt;eventfunc)</span>
 928 /**
 929  * GST_PAD_EVENTFULLFUNC:
 930  * @pad: a #GstPad
 931  *
 932  * Get the #GstPadEventFullFunction from the given @pad, which
 933  * is the function that handles events on the pad. You can
 934  * use this to set your own event handling function on a pad
 935  * after you create it.  If your element derives from a base
 936  * class, use the base class&#39;s virtual functions instead.
 937  *
 938  * Since: 1.8
 939  */
 940 #define GST_PAD_EVENTFULLFUNC(pad)  (GST_PAD_CAST(pad)-&gt;ABI.abi.eventfullfunc)
 941 /**
 942  * GST_PAD_QUERYFUNC:
 943  * @pad: a #GstPad
 944  *
 945  * Get the #GstPadQueryFunction from @pad, which is the function
 946  * that handles queries on the pad. You can  use this to set your
 947  * own query handling function on a pad after you create it. If your
 948  * element derives from a base class, use the base class&#39;s virtual
 949  * functions instead.
 950  */
<span class="line-modified"> 951 #define GST_PAD_QUERYFUNC(pad)    (GST_PAD_CAST(pad)-&gt;queryfunc)</span>
 952 /**
 953  * GST_PAD_ITERINTLINKFUNC:
 954  * @pad: a #GstPad
 955  *
 956  * Get the #GstPadIterIntLinkFunction from the given @pad.
 957  */
 958 #define GST_PAD_ITERINTLINKFUNC(pad)    (GST_PAD_CAST(pad)-&gt;iterintlinkfunc)
 959 /**
 960  * GST_PAD_PEER:
 961  * @pad: a #GstPad
 962  *
 963  * Return the pad&#39;s peer member. This member is a pointer to the linked @pad.
 964  * No locking is performed in this function, use gst_pad_get_peer() instead.
 965  */
<span class="line-modified"> 966 #define GST_PAD_PEER(pad)   (GST_PAD_CAST(pad)-&gt;peer)</span>
 967 /**
 968  * GST_PAD_LINKFUNC:
 969  * @pad: a #GstPad
 970  *
 971  * Get the #GstPadLinkFunction for the given @pad.
 972  */
<span class="line-modified"> 973 #define GST_PAD_LINKFUNC(pad)   (GST_PAD_CAST(pad)-&gt;linkfunc)</span>
 974 /**
 975  * GST_PAD_UNLINKFUNC:
 976  * @pad: a #GstPad
 977  *
 978  * Get the #GstPadUnlinkFunction from the given @pad.
 979  */
<span class="line-modified"> 980 #define GST_PAD_UNLINKFUNC(pad)   (GST_PAD_CAST(pad)-&gt;unlinkfunc)</span>
 981 /**
 982  * GST_PAD_IS_SRC:
 983  * @pad: a #GstPad
 984  *
 985  * Returns: %TRUE if the pad is a source pad (i.e. produces data).
 986  */
<span class="line-modified"> 987 #define GST_PAD_IS_SRC(pad)   (GST_PAD_DIRECTION(pad) == GST_PAD_SRC)</span>
 988 /**
 989  * GST_PAD_IS_SINK:
 990  * @pad: a #GstPad
 991  *
 992  * Returns: %TRUE if the pad is a sink pad (i.e. consumes data).
 993  */
<span class="line-modified"> 994 #define GST_PAD_IS_SINK(pad)    (GST_PAD_DIRECTION(pad) == GST_PAD_SINK)</span>
 995 /**
 996  * GST_PAD_IS_LINKED:
 997  * @pad: a #GstPad
 998  *
 999  * Returns: %TRUE if the pad is linked to another pad. Use gst_pad_is_linked()
1000  * instead.
1001  */
<span class="line-modified">1002 #define GST_PAD_IS_LINKED(pad)    (GST_PAD_PEER(pad) != NULL)</span>
1003 /**
1004  * GST_PAD_IS_ACTIVE:
1005  * @pad: a #GstPad
1006  *
1007  * Returns: %TRUE if the pad has been activated.
1008  */
1009 #define GST_PAD_IS_ACTIVE(pad)          (GST_PAD_MODE(pad) != GST_PAD_MODE_NONE)
1010 /**
1011  * GST_PAD_IS_BLOCKED:
1012  * @pad: a #GstPad
1013  *
1014  * Check if the dataflow on a @pad is blocked. Use gst_pad_is_blocked() instead.
1015  */
<span class="line-modified">1016 #define GST_PAD_IS_BLOCKED(pad)   (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_BLOCKED))</span>
1017 /**
1018  * GST_PAD_IS_BLOCKING:
1019  * @pad: a #GstPad
1020  *
1021  * Check if the @pad is currently blocking on a buffer or event. Use
1022  * gst_pad_is_blocking() instead.
1023  */
<span class="line-modified">1024 #define GST_PAD_IS_BLOCKING(pad)  (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_BLOCKING))</span>
1025 /**
1026  * GST_PAD_IS_FLUSHING:
1027  * @pad: a #GstPad
1028  *
1029  * Check if the given @pad is flushing.
1030  */
<span class="line-modified">1031 #define GST_PAD_IS_FLUSHING(pad)  (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_FLUSHING))</span>
1032 /**
1033  * GST_PAD_SET_FLUSHING:
1034  * @pad: a #GstPad
1035  *
1036  * Set the given @pad to flushing state, which means it will not accept any
1037  * more events, queries or buffers, and return GST_FLOW_FLUSHING if any buffers
1038  * are pushed on it. This usually happens when the pad is shut down or when
1039  * a flushing seek happens. This is used inside GStreamer when flush start/stop
1040  * events pass through pads, or when an element state is changed and pads are
1041  * activated or deactivated.
1042  */
<span class="line-modified">1043 #define GST_PAD_SET_FLUSHING(pad) (GST_OBJECT_FLAG_SET (pad, GST_PAD_FLAG_FLUSHING))</span>
1044 /**
1045  * GST_PAD_UNSET_FLUSHING:
1046  * @pad: a #GstPad
1047  *
1048  * Unset the flushing flag.
1049  */
1050 #define GST_PAD_UNSET_FLUSHING(pad) (GST_OBJECT_FLAG_UNSET (pad, GST_PAD_FLAG_FLUSHING))
1051 /**
1052  * GST_PAD_IS_EOS:
1053  * @pad: a #GstPad
1054  *
1055  * Check if the @pad is in EOS state.
1056  */
1057 #define GST_PAD_IS_EOS(pad)         (GST_OBJECT_FLAG_IS_SET (pad, GST_PAD_FLAG_EOS))
1058 /**
1059  * GST_PAD_NEEDS_RECONFIGURE:
1060  * @pad: a #GstPad
1061  *
1062  * Check if the @pad should be reconfigured/renegotiated.
1063  * The flag has to be unset manually after reconfiguration happened.
</pre>
<hr />
<pre>
1260  *
1261  * Release the pad&#39;s stream lock.
1262  */
1263 #define GST_PAD_STREAM_UNLOCK(pad)      g_rec_mutex_unlock(GST_PAD_GET_STREAM_LOCK(pad))
1264 /**
1265  * GST_PAD_LAST_FLOW_RETURN:
1266  * @pad: a #GstPad
1267  *
1268  * Gets the last flow return on this pad
1269  *
1270  * Since: 1.4
1271  */
1272 #define GST_PAD_LAST_FLOW_RETURN(pad)   (GST_PAD_CAST(pad)-&gt;ABI.abi.last_flowret)
1273 
1274 #define GST_PAD_BLOCK_GET_COND(pad)     (&amp;GST_PAD_CAST(pad)-&gt;block_cond)
1275 #define GST_PAD_BLOCK_WAIT(pad)         (g_cond_wait(GST_PAD_BLOCK_GET_COND (pad), GST_OBJECT_GET_LOCK (pad)))
1276 #define GST_PAD_BLOCK_SIGNAL(pad)       (g_cond_signal(GST_PAD_BLOCK_GET_COND (pad)))
1277 #define GST_PAD_BLOCK_BROADCAST(pad)    (g_cond_broadcast(GST_PAD_BLOCK_GET_COND (pad)))
1278 
1279 GST_API
<span class="line-modified">1280 GType     gst_pad_get_type      (void);</span>
1281 
1282 /* creating pads */
1283 
1284 GST_API
<span class="line-modified">1285 GstPad*     gst_pad_new       (const gchar *name, GstPadDirection direction);</span>
1286 
1287 GST_API
<span class="line-modified">1288 GstPad*     gst_pad_new_from_template   (GstPadTemplate *templ, const gchar *name);</span>
1289 
1290 GST_API
<span class="line-modified">1291 GstPad*     gst_pad_new_from_static_template  (GstStaticPadTemplate *templ, const gchar *name);</span>
1292 
1293 
1294 /**
1295  * gst_pad_get_name:
1296  * @pad: the pad to get the name from
1297  *
1298  * Get a copy of the name of the pad. g_free() after usage.
1299  *
1300  * MT safe.
1301  */
1302 #define gst_pad_get_name(pad) gst_object_get_name (GST_OBJECT_CAST (pad))
1303 /**
1304  * gst_pad_get_parent:
1305  * @pad: the pad to get the parent of
1306  *
1307  * Get the parent of @pad. This function increases the refcount
1308  * of the parent object so you should gst_object_unref() it after usage.
1309  * Can return %NULL if the pad did not have a parent.
1310  *
1311  * MT safe.
1312  *
1313  * Returns: (nullable): the parent
1314  */
1315 #define gst_pad_get_parent(pad) gst_object_get_parent (GST_OBJECT_CAST (pad))
1316 
1317 GST_API
<span class="line-modified">1318 GstPadDirection   gst_pad_get_direction     (GstPad *pad);</span>
1319 
1320 GST_API
<span class="line-modified">1321 gboolean    gst_pad_set_active      (GstPad *pad, gboolean active);</span>
1322 
1323 GST_API
<span class="line-modified">1324 gboolean    gst_pad_is_active     (GstPad *pad);</span>
1325 
1326 GST_API
<span class="line-modified">1327 gboolean    gst_pad_activate_mode     (GstPad *pad, GstPadMode mode,</span>
1328                                                                  gboolean active);
1329 GST_API
1330 gulong                  gst_pad_add_probe                       (GstPad *pad,
<span class="line-modified">1331                  GstPadProbeType mask,</span>
<span class="line-modified">1332                  GstPadProbeCallback callback,</span>
1333                                                                  gpointer user_data,
1334                                                                  GDestroyNotify destroy_data);
1335 GST_API
1336 void                    gst_pad_remove_probe                    (GstPad *pad, gulong id);
1337 
1338 GST_API
<span class="line-modified">1339 gboolean    gst_pad_is_blocked      (GstPad *pad);</span>
1340 
1341 GST_API
<span class="line-modified">1342 gboolean    gst_pad_is_blocking     (GstPad *pad);</span>
1343 
1344 GST_API
1345 void                    gst_pad_mark_reconfigure                (GstPad *pad);
1346 
1347 GST_API
<span class="line-modified">1348 gboolean    gst_pad_needs_reconfigure               (GstPad *pad);</span>
1349 
1350 GST_API
<span class="line-modified">1351 gboolean    gst_pad_check_reconfigure               (GstPad *pad);</span>
1352 
1353 GST_API
<span class="line-modified">1354 void      gst_pad_set_element_private   (GstPad *pad, gpointer priv);</span>
1355 
1356 GST_API
<span class="line-modified">1357 gpointer    gst_pad_get_element_private   (GstPad *pad);</span>
1358 
1359 GST_API
<span class="line-modified">1360 GstPadTemplate*   gst_pad_get_pad_template    (GstPad *pad);</span>
1361 
1362 GST_API
1363 GstFlowReturn           gst_pad_store_sticky_event              (GstPad *pad, GstEvent *event);
1364 
1365 GST_API
1366 GstEvent*               gst_pad_get_sticky_event                (GstPad *pad, GstEventType event_type,
1367                                                                  guint idx);
1368 
1369 GST_API
1370 void                    gst_pad_sticky_events_foreach           (GstPad *pad, GstPadStickyEventsForeachFunction foreach_func, gpointer user_data);
1371 
1372 /* data passing setup functions */
1373 
1374 GST_API
<span class="line-modified">1375 void      gst_pad_set_activate_function_full  (GstPad *pad,</span>
1376                                                                  GstPadActivateFunction activate,
1377                                                                  gpointer user_data,
1378                                                                  GDestroyNotify notify);
1379 GST_API
<span class="line-modified">1380 void      gst_pad_set_activatemode_function_full  (GstPad *pad,</span>
1381                                                                  GstPadActivateModeFunction activatemode,
1382                                                                  gpointer user_data,
1383                                                                  GDestroyNotify notify);
1384 /* data passing functions */
1385 
1386 GST_API
<span class="line-modified">1387 void      gst_pad_set_chain_function_full   (GstPad *pad,</span>
1388                                                                  GstPadChainFunction chain,
1389                                                                  gpointer user_data,
1390                                                                  GDestroyNotify notify);
1391 GST_API
<span class="line-modified">1392 void      gst_pad_set_chain_list_function_full  (GstPad *pad,</span>
1393                                                                  GstPadChainListFunction chainlist,
1394                                                                  gpointer user_data,
1395                                                                  GDestroyNotify notify);
1396 GST_API
<span class="line-modified">1397 void      gst_pad_set_getrange_function_full  (GstPad *pad,</span>
1398                                                                  GstPadGetRangeFunction get,
1399                                                                  gpointer user_data,
1400                                                                  GDestroyNotify notify);
1401 GST_API
<span class="line-modified">1402 void      gst_pad_set_event_function_full   (GstPad *pad,</span>
1403                                                                  GstPadEventFunction event,
1404                                                                  gpointer user_data,
1405                                                                  GDestroyNotify notify);
1406 GST_API
<span class="line-modified">1407 void      gst_pad_set_event_full_function_full  (GstPad *pad,</span>
1408                                                                  GstPadEventFullFunction event,
1409                                                                  gpointer user_data,
1410                                                                  GDestroyNotify notify);
1411 
1412 #define gst_pad_set_activate_function(p,f)      gst_pad_set_activate_function_full((p),(f),NULL,NULL)
1413 #define gst_pad_set_activatemode_function(p,f)  gst_pad_set_activatemode_function_full((p),(f),NULL,NULL)
1414 #define gst_pad_set_chain_function(p,f)         gst_pad_set_chain_function_full((p),(f),NULL,NULL)
1415 #define gst_pad_set_chain_list_function(p,f)    gst_pad_set_chain_list_function_full((p),(f),NULL,NULL)
1416 #define gst_pad_set_getrange_function(p,f)      gst_pad_set_getrange_function_full((p),(f),NULL,NULL)
1417 #define gst_pad_set_event_function(p,f)         gst_pad_set_event_function_full((p),(f),NULL,NULL)
1418 #define gst_pad_set_event_full_function(p,f)    gst_pad_set_event_full_function_full((p),(f),NULL,NULL)
1419 
1420 /* pad links */
1421 
1422 GST_API
<span class="line-modified">1423 void      gst_pad_set_link_function_full    (GstPad *pad,</span>
1424                                                                  GstPadLinkFunction link,
1425                                                                  gpointer user_data,
1426                                                                  GDestroyNotify notify);
1427 GST_API
<span class="line-modified">1428 void      gst_pad_set_unlink_function_full        (GstPad *pad,</span>
1429                                                                  GstPadUnlinkFunction unlink,
1430                                                                  gpointer user_data,
1431                                                                  GDestroyNotify notify);
1432 
1433 #define gst_pad_set_link_function(p,f)          gst_pad_set_link_function_full((p),(f),NULL,NULL)
1434 #define gst_pad_set_unlink_function(p,f)        gst_pad_set_unlink_function_full((p),(f),NULL,NULL)
1435 
1436 GST_API
1437 gboolean                gst_pad_can_link                        (GstPad *srcpad, GstPad *sinkpad);
1438 
1439 GST_API
<span class="line-modified">1440 GstPadLinkReturn        gst_pad_link        (GstPad *srcpad, GstPad *sinkpad);</span>
1441 
1442 GST_API
<span class="line-modified">1443 GstPadLinkReturn        gst_pad_link_full     (GstPad *srcpad, GstPad *sinkpad, GstPadLinkCheck flags);</span>
1444 
1445 GST_API
<span class="line-modified">1446 gboolean    gst_pad_unlink        (GstPad *srcpad, GstPad *sinkpad);</span>
1447 
1448 GST_API
<span class="line-modified">1449 gboolean    gst_pad_is_linked     (GstPad *pad);</span>
1450 
1451 GST_API
<span class="line-modified">1452 GstPad*     gst_pad_get_peer      (GstPad *pad);</span>
1453 
1454 GST_API
<span class="line-modified">1455 GstCaps*                gst_pad_get_pad_template_caps   (GstPad *pad);</span>
1456 
1457 /* capsnego function for linked/unlinked pads */
1458 
1459 GST_API
<span class="line-modified">1460 GstCaps *   gst_pad_get_current_caps                (GstPad * pad);</span>
1461 
1462 GST_API
<span class="line-modified">1463 gboolean    gst_pad_has_current_caps                (GstPad * pad);</span>
1464 
1465 /* capsnego for linked pads */
1466 
1467 GST_API
<span class="line-modified">1468 GstCaps *   gst_pad_get_allowed_caps    (GstPad * pad);</span>
1469 
1470 /* pad offsets */
1471 
1472 GST_API
1473 gint64                  gst_pad_get_offset                      (GstPad *pad);
1474 
1475 GST_API
1476 void                    gst_pad_set_offset                      (GstPad *pad, gint64 offset);
1477 
1478 /* data passing functions to peer */
1479 
1480 GST_API
<span class="line-modified">1481 GstFlowReturn   gst_pad_push        (GstPad *pad, GstBuffer *buffer);</span>
1482 
1483 GST_API
<span class="line-modified">1484 GstFlowReturn   gst_pad_push_list     (GstPad *pad, GstBufferList *list);</span>
1485 
1486 GST_API
<span class="line-modified">1487 GstFlowReturn   gst_pad_pull_range      (GstPad *pad, guint64 offset, guint size,</span>
<span class="line-modified">1488                  GstBuffer **buffer);</span>
1489 GST_API
<span class="line-modified">1490 gboolean    gst_pad_push_event      (GstPad *pad, GstEvent *event);</span>
1491 
1492 GST_API
<span class="line-modified">1493 gboolean    gst_pad_event_default     (GstPad *pad, GstObject *parent,</span>
1494                                                                  GstEvent *event);
1495 GST_API
1496 GstFlowReturn           gst_pad_get_last_flow_return            (GstPad *pad);
1497 
1498 /* data passing functions on pad */
1499 
1500 GST_API
<span class="line-modified">1501 GstFlowReturn   gst_pad_chain       (GstPad *pad, GstBuffer *buffer);</span>
1502 
1503 GST_API
<span class="line-modified">1504 GstFlowReturn   gst_pad_chain_list                      (GstPad *pad, GstBufferList *list);</span>
1505 
1506 GST_API
<span class="line-modified">1507 GstFlowReturn   gst_pad_get_range     (GstPad *pad, guint64 offset, guint size,</span>
<span class="line-modified">1508                  GstBuffer **buffer);</span>
1509 GST_API
<span class="line-modified">1510 gboolean    gst_pad_send_event      (GstPad *pad, GstEvent *event);</span>
1511 
1512 /* pad tasks */
1513 
1514 GST_API
<span class="line-modified">1515 gboolean    gst_pad_start_task      (GstPad *pad, GstTaskFunction func,</span>
<span class="line-modified">1516                  gpointer user_data, GDestroyNotify notify);</span>
1517 GST_API
<span class="line-modified">1518 gboolean    gst_pad_pause_task      (GstPad *pad);</span>
1519 
1520 GST_API
<span class="line-modified">1521 gboolean    gst_pad_stop_task     (GstPad *pad);</span>
1522 
1523 GST_API
<span class="line-modified">1524 GstTaskState  gst_pad_get_task_state    (GstPad *pad);</span>
1525 
1526 /* internal links */
1527 
1528 GST_API
1529 void                    gst_pad_set_iterate_internal_links_function_full (GstPad * pad,
1530                                                                  GstPadIterIntLinkFunction iterintlink,
1531                                                                  gpointer user_data,
1532                                                                  GDestroyNotify notify);
1533 
1534 GST_API
1535 GstIterator *           gst_pad_iterate_internal_links          (GstPad * pad);
1536 
1537 GST_API
1538 GstIterator *           gst_pad_iterate_internal_links_default  (GstPad * pad, GstObject *parent);
1539 
1540 #define gst_pad_set_iterate_internal_links_function(p,f) gst_pad_set_iterate_internal_links_function_full((p),(f),NULL,NULL)
1541 
1542 /* generic query function */
1543 
1544 GST_API
<span class="line-modified">1545 gboolean    gst_pad_query       (GstPad *pad, GstQuery *query);</span>
1546 
1547 GST_API
<span class="line-modified">1548 gboolean    gst_pad_peer_query      (GstPad *pad, GstQuery *query);</span>
1549 
1550 GST_API
<span class="line-modified">1551 void      gst_pad_set_query_function_full   (GstPad *pad, GstPadQueryFunction query,</span>
1552                                                                  gpointer user_data,
1553                                                                  GDestroyNotify notify);
1554 GST_API
<span class="line-modified">1555 gboolean    gst_pad_query_default     (GstPad *pad, GstObject *parent,</span>
1556                                                                  GstQuery *query);
1557 
1558 #define gst_pad_set_query_function(p,f)   gst_pad_set_query_function_full((p),(f),NULL,NULL)
1559 
1560 /* misc helper functions */
1561 
1562 GST_API
<span class="line-modified">1563 gboolean    gst_pad_forward                         (GstPad *pad, GstPadForwardFunction forward,</span>
<span class="line-modified">1564                  gpointer user_data);</span>
1565 
1566 #ifdef G_DEFINE_AUTOPTR_CLEANUP_FUNC
1567 G_DEFINE_AUTOPTR_CLEANUP_FUNC(GstPad, gst_object_unref)
1568 #endif
1569 
1570 G_END_DECLS
1571 
1572 #endif /* __GST_PAD_H__ */
</pre>
</td>
</tr>
</table>
<center><a href="gstpad.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gstpadtemplate.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>