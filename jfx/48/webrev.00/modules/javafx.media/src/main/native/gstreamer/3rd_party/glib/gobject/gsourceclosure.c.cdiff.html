<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gsourceclosure.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gsignal.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gsourceclosure.h.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gsourceclosure.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 35,17 ***</span>
    static volatile GType etype = 0;
  
    if (g_once_init_enter (&amp;etype))
      {
        static const GFlagsValue values[] = {
<span class="line-modified">!     { G_IO_IN,   &quot;G_IO_IN&quot;,   &quot;in&quot; },</span>
<span class="line-modified">!     { G_IO_OUT,  &quot;G_IO_OUT&quot;,  &quot;out&quot; },</span>
<span class="line-modified">!     { G_IO_PRI,  &quot;G_IO_PRI&quot;,  &quot;pri&quot; },</span>
<span class="line-modified">!     { G_IO_ERR,  &quot;G_IO_ERR&quot;,  &quot;err&quot; },</span>
<span class="line-modified">!     { G_IO_HUP,  &quot;G_IO_HUP&quot;,  &quot;hup&quot; },</span>
<span class="line-modified">!     { G_IO_NVAL, &quot;G_IO_NVAL&quot;, &quot;nval&quot; },</span>
<span class="line-modified">!     { 0, NULL, NULL }</span>
        };
        GType type_id = g_flags_register_static (&quot;GIOCondition&quot;, values);
        g_once_init_leave (&amp;etype, type_id);
      }
    return etype;
<span class="line-new-header">--- 35,17 ---</span>
    static volatile GType etype = 0;
  
    if (g_once_init_enter (&amp;etype))
      {
        static const GFlagsValue values[] = {
<span class="line-modified">!   { G_IO_IN,   &quot;G_IO_IN&quot;,   &quot;in&quot; },</span>
<span class="line-modified">!   { G_IO_OUT,  &quot;G_IO_OUT&quot;,  &quot;out&quot; },</span>
<span class="line-modified">!   { G_IO_PRI,  &quot;G_IO_PRI&quot;,  &quot;pri&quot; },</span>
<span class="line-modified">!   { G_IO_ERR,  &quot;G_IO_ERR&quot;,  &quot;err&quot; },</span>
<span class="line-modified">!   { G_IO_HUP,  &quot;G_IO_HUP&quot;,  &quot;hup&quot; },</span>
<span class="line-modified">!   { G_IO_NVAL, &quot;G_IO_NVAL&quot;, &quot;nval&quot; },</span>
<span class="line-modified">!   { 0, NULL, NULL }</span>
        };
        GType type_id = g_flags_register_static (&quot;GIOCondition&quot;, values);
        g_once_init_leave (&amp;etype, type_id);
      }
    return etype;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 54,15 ***</span>
  /* We need to hand-write this marshaler, since it doesn&#39;t have an
   * instance object.
   */
  static void
  source_closure_marshal_BOOLEAN__VOID (GClosure     *closure,
<span class="line-modified">!                       GValue       *return_value,</span>
<span class="line-modified">!                       guint         n_param_values,</span>
<span class="line-modified">!                       const GValue *param_values,</span>
<span class="line-modified">!                       gpointer      invocation_hint,</span>
<span class="line-modified">!                       gpointer      marshal_data)</span>
  {
    GSourceFunc callback;
    GCClosure *cc = (GCClosure*) closure;
    gboolean v_return;
  
<span class="line-new-header">--- 54,15 ---</span>
  /* We need to hand-write this marshaler, since it doesn&#39;t have an
   * instance object.
   */
  static void
  source_closure_marshal_BOOLEAN__VOID (GClosure     *closure,
<span class="line-modified">!               GValue       *return_value,</span>
<span class="line-modified">!               guint         n_param_values,</span>
<span class="line-modified">!               const GValue *param_values,</span>
<span class="line-modified">!               gpointer      invocation_hint,</span>
<span class="line-modified">!               gpointer      marshal_data)</span>
  {
    GSourceFunc callback;
    GCClosure *cc = (GCClosure*) closure;
    gboolean v_return;
  
</pre>
<hr />
<pre>
<span class="line-old-header">*** 76,12 ***</span>
    g_value_set_boolean (return_value, v_return);
  }
  
  static gboolean
  io_watch_closure_callback (GIOChannel   *channel,
<span class="line-modified">!                GIOCondition  condition,</span>
<span class="line-modified">!                gpointer      data)</span>
  {
    GClosure *closure = data;
  
    GValue params[2] = { G_VALUE_INIT, G_VALUE_INIT };
    GValue result_value = G_VALUE_INIT;
<span class="line-new-header">--- 76,12 ---</span>
    g_value_set_boolean (return_value, v_return);
  }
  
  static gboolean
  io_watch_closure_callback (GIOChannel   *channel,
<span class="line-modified">!          GIOCondition  condition,</span>
<span class="line-modified">!          gpointer      data)</span>
  {
    GClosure *closure = data;
  
    GValue params[2] = { G_VALUE_INIT, G_VALUE_INIT };
    GValue result_value = G_VALUE_INIT;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 187,13 ***</span>
    return result;
  }
  
  static void
  closure_callback_get (gpointer     cb_data,
<span class="line-modified">!               GSource     *source,</span>
<span class="line-modified">!               GSourceFunc *func,</span>
<span class="line-modified">!               gpointer    *data)</span>
  {
    GSourceFunc closure_callback = source-&gt;source_funcs-&gt;closure_callback;
  
    if (!closure_callback)
      {
<span class="line-new-header">--- 187,13 ---</span>
    return result;
  }
  
  static void
  closure_callback_get (gpointer     cb_data,
<span class="line-modified">!           GSource     *source,</span>
<span class="line-modified">!           GSourceFunc *func,</span>
<span class="line-modified">!           gpointer    *data)</span>
  {
    GSourceFunc closure_callback = source-&gt;source_funcs-&gt;closure_callback;
  
    if (!closure_callback)
      {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 241,11 ***</span>
   * and @closure_marshal fields of the #GSourceFuncs structure must have been
   * filled in with pointers to appropriate functions.
   */
  void
  g_source_set_closure (GSource  *source,
<span class="line-modified">!               GClosure *closure)</span>
  {
    g_return_if_fail (source != NULL);
    g_return_if_fail (closure != NULL);
  
    if (!source-&gt;source_funcs-&gt;closure_callback &amp;&amp;
<span class="line-new-header">--- 241,11 ---</span>
   * and @closure_marshal fields of the #GSourceFuncs structure must have been
   * filled in with pointers to appropriate functions.
   */
  void
  g_source_set_closure (GSource  *source,
<span class="line-modified">!           GClosure *closure)</span>
  {
    g_return_if_fail (source != NULL);
    g_return_if_fail (closure != NULL);
  
    if (!source-&gt;source_funcs-&gt;closure_callback &amp;&amp;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 270,29 ***</span>
  
    if (G_CLOSURE_NEEDS_MARSHAL (closure))
      {
        GClosureMarshal marshal = (GClosureMarshal)source-&gt;source_funcs-&gt;closure_marshal;
        if (marshal)
<span class="line-modified">!     g_closure_set_marshal (closure, marshal);</span>
        else if (source-&gt;source_funcs == &amp;g_idle_funcs ||
  #ifdef G_OS_UNIX
                 source-&gt;source_funcs == &amp;g_unix_signal_funcs ||
  #endif
                 source-&gt;source_funcs == &amp;g_timeout_funcs)
<span class="line-modified">!     g_closure_set_marshal (closure, source_closure_marshal_BOOLEAN__VOID);</span>
        else
          g_closure_set_marshal (closure, g_cclosure_marshal_generic);
      }
  }
  
  static void
  dummy_closure_marshal (GClosure     *closure,
<span class="line-modified">!                GValue       *return_value,</span>
<span class="line-modified">!                guint         n_param_values,</span>
<span class="line-modified">!                const GValue *param_values,</span>
<span class="line-modified">!                gpointer      invocation_hint,</span>
<span class="line-modified">!                gpointer      marshal_data)</span>
  {
    if (G_VALUE_HOLDS_BOOLEAN (return_value))
      g_value_set_boolean (return_value, TRUE);
  }
  
<span class="line-new-header">--- 270,29 ---</span>
  
    if (G_CLOSURE_NEEDS_MARSHAL (closure))
      {
        GClosureMarshal marshal = (GClosureMarshal)source-&gt;source_funcs-&gt;closure_marshal;
        if (marshal)
<span class="line-modified">!   g_closure_set_marshal (closure, marshal);</span>
        else if (source-&gt;source_funcs == &amp;g_idle_funcs ||
  #ifdef G_OS_UNIX
                 source-&gt;source_funcs == &amp;g_unix_signal_funcs ||
  #endif
                 source-&gt;source_funcs == &amp;g_timeout_funcs)
<span class="line-modified">!   g_closure_set_marshal (closure, source_closure_marshal_BOOLEAN__VOID);</span>
        else
          g_closure_set_marshal (closure, g_cclosure_marshal_generic);
      }
  }
  
  static void
  dummy_closure_marshal (GClosure     *closure,
<span class="line-modified">!            GValue       *return_value,</span>
<span class="line-modified">!            guint         n_param_values,</span>
<span class="line-modified">!            const GValue *param_values,</span>
<span class="line-modified">!            gpointer      invocation_hint,</span>
<span class="line-modified">!            gpointer      marshal_data)</span>
  {
    if (G_VALUE_HOLDS_BOOLEAN (return_value))
      g_value_set_boolean (return_value, TRUE);
  }
  
</pre>
<center><a href="gsignal.h.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gsourceclosure.h.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>