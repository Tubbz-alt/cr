<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/win_iconv.c</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="libcharset/localcharset.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../gmodule/gmodule-dl.c.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/glib/win_iconv.c</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 431,12 ***</span>
       */
      {37, &quot;IBM037&quot;}, /* IBM EBCDIC US-Canada */
      {437, &quot;IBM437&quot;}, /* OEM United States */
      {500, &quot;IBM500&quot;}, /* IBM EBCDIC International */
      {708, &quot;ASMO-708&quot;}, /* Arabic (ASMO 708) */
<span class="line-modified">!     /* 709      Arabic (ASMO-449+, BCON V4) */</span>
<span class="line-modified">!     /* 710      Arabic - Transparent Arabic */</span>
      {720, &quot;DOS-720&quot;}, /* Arabic (Transparent ASMO); Arabic (DOS) */
      {737, &quot;ibm737&quot;}, /* OEM Greek (formerly 437G); Greek (DOS) */
      {775, &quot;ibm775&quot;}, /* OEM Baltic; Baltic (DOS) */
      {850, &quot;ibm850&quot;}, /* OEM Multilingual Latin 1; Western European (DOS) */
      {852, &quot;ibm852&quot;}, /* OEM Latin 2; Central European (DOS) */
<span class="line-new-header">--- 431,12 ---</span>
       */
      {37, &quot;IBM037&quot;}, /* IBM EBCDIC US-Canada */
      {437, &quot;IBM437&quot;}, /* OEM United States */
      {500, &quot;IBM500&quot;}, /* IBM EBCDIC International */
      {708, &quot;ASMO-708&quot;}, /* Arabic (ASMO 708) */
<span class="line-modified">!     /* 709    Arabic (ASMO-449+, BCON V4) */</span>
<span class="line-modified">!     /* 710    Arabic - Transparent Arabic */</span>
      {720, &quot;DOS-720&quot;}, /* Arabic (Transparent ASMO); Arabic (DOS) */
      {737, &quot;ibm737&quot;}, /* OEM Greek (formerly 437G); Greek (DOS) */
      {775, &quot;ibm775&quot;}, /* OEM Baltic; Baltic (DOS) */
      {850, &quot;ibm850&quot;}, /* OEM Multilingual Latin 1; Western European (DOS) */
      {852, &quot;ibm852&quot;}, /* OEM Latin 2; Central European (DOS) */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 532,11 ***</span>
      {20924, &quot;IBM00924&quot;}, /* IBM EBCDIC Latin 1/Open System (1047 + Euro symbol) */
      {20932, &quot;EUC-JP&quot;}, /* Japanese (JIS 0208-1990 and 0121-1990) */
      {20936, &quot;x-cp20936&quot;}, /* Simplified Chinese (GB2312); Chinese Simplified (GB2312-80) */
      {20949, &quot;x-cp20949&quot;}, /* Korean Wansung */
      {21025, &quot;cp1025&quot;}, /* IBM EBCDIC Cyrillic Serbian-Bulgarian */
<span class="line-modified">!     /* 21027        (deprecated) */</span>
      {21866, &quot;koi8-u&quot;}, /* Ukrainian (KOI8-U); Cyrillic (KOI8-U) */
      {28591, &quot;iso-8859-1&quot;}, /* ISO 8859-1 Latin 1; Western European (ISO) */
      {28591, &quot;iso8859-1&quot;}, /* ISO 8859-1 Latin 1; Western European (ISO) */
      {28591, &quot;iso_8859-1&quot;},
      {28591, &quot;iso_8859_1&quot;},
<span class="line-new-header">--- 532,11 ---</span>
      {20924, &quot;IBM00924&quot;}, /* IBM EBCDIC Latin 1/Open System (1047 + Euro symbol) */
      {20932, &quot;EUC-JP&quot;}, /* Japanese (JIS 0208-1990 and 0121-1990) */
      {20936, &quot;x-cp20936&quot;}, /* Simplified Chinese (GB2312); Chinese Simplified (GB2312-80) */
      {20949, &quot;x-cp20949&quot;}, /* Korean Wansung */
      {21025, &quot;cp1025&quot;}, /* IBM EBCDIC Cyrillic Serbian-Bulgarian */
<span class="line-modified">!     /* 21027    (deprecated) */</span>
      {21866, &quot;koi8-u&quot;}, /* Ukrainian (KOI8-U); Cyrillic (KOI8-U) */
      {28591, &quot;iso-8859-1&quot;}, /* ISO 8859-1 Latin 1; Western European (ISO) */
      {28591, &quot;iso8859-1&quot;}, /* ISO 8859-1 Latin 1; Western European (ISO) */
      {28591, &quot;iso_8859-1&quot;},
      {28591, &quot;iso_8859_1&quot;},
</pre>
<hr />
<pre>
<span class="line-old-header">*** 589,22 ***</span>
      {50221, &quot;csISO2022JP&quot;}, /* ISO 2022 Japanese with halfwidth Katakana; Japanese (JIS-Allow 1 byte Kana) */
      {50222, &quot;iso-2022-jp&quot;}, /* ISO 2022 Japanese JIS X 0201-1989; Japanese (JIS-Allow 1 byte Kana - SO/SI) */
      {50225, &quot;iso-2022-kr&quot;}, /* ISO 2022 Korean */
      {50225, &quot;iso2022-kr&quot;}, /* ISO 2022 Korean */
      {50227, &quot;x-cp50227&quot;}, /* ISO 2022 Simplified Chinese; Chinese Simplified (ISO 2022) */
<span class="line-modified">!     /* 50229        ISO 2022 Traditional Chinese */</span>
<span class="line-modified">!     /* 50930        EBCDIC Japanese (Katakana) Extended */</span>
<span class="line-modified">!     /* 50931        EBCDIC US-Canada and Japanese */</span>
<span class="line-modified">!     /* 50933        EBCDIC Korean Extended and Korean */</span>
<span class="line-modified">!     /* 50935        EBCDIC Simplified Chinese Extended and Simplified Chinese */</span>
<span class="line-modified">!     /* 50936        EBCDIC Simplified Chinese */</span>
<span class="line-modified">!     /* 50937        EBCDIC US-Canada and Traditional Chinese */</span>
<span class="line-modified">!     /* 50939        EBCDIC Japanese (Latin) Extended and Japanese */</span>
      {51932, &quot;euc-jp&quot;}, /* EUC Japanese */
      {51936, &quot;EUC-CN&quot;}, /* EUC Simplified Chinese; Chinese Simplified (EUC) */
      {51949, &quot;euc-kr&quot;}, /* EUC Korean */
<span class="line-modified">!     /* 51950        EUC Traditional Chinese */</span>
      {52936, &quot;hz-gb-2312&quot;}, /* HZ-GB2312 Simplified Chinese; Chinese Simplified (HZ) */
      {54936, &quot;GB18030&quot;}, /* Windows XP and later: GB18030 Simplified Chinese (4 byte); Chinese Simplified (GB18030) */
      {57002, &quot;x-iscii-de&quot;}, /* ISCII Devanagari */
      {57003, &quot;x-iscii-be&quot;}, /* ISCII Bengali */
      {57004, &quot;x-iscii-ta&quot;}, /* ISCII Tamil */
<span class="line-new-header">--- 589,22 ---</span>
      {50221, &quot;csISO2022JP&quot;}, /* ISO 2022 Japanese with halfwidth Katakana; Japanese (JIS-Allow 1 byte Kana) */
      {50222, &quot;iso-2022-jp&quot;}, /* ISO 2022 Japanese JIS X 0201-1989; Japanese (JIS-Allow 1 byte Kana - SO/SI) */
      {50225, &quot;iso-2022-kr&quot;}, /* ISO 2022 Korean */
      {50225, &quot;iso2022-kr&quot;}, /* ISO 2022 Korean */
      {50227, &quot;x-cp50227&quot;}, /* ISO 2022 Simplified Chinese; Chinese Simplified (ISO 2022) */
<span class="line-modified">!     /* 50229    ISO 2022 Traditional Chinese */</span>
<span class="line-modified">!     /* 50930    EBCDIC Japanese (Katakana) Extended */</span>
<span class="line-modified">!     /* 50931    EBCDIC US-Canada and Japanese */</span>
<span class="line-modified">!     /* 50933    EBCDIC Korean Extended and Korean */</span>
<span class="line-modified">!     /* 50935    EBCDIC Simplified Chinese Extended and Simplified Chinese */</span>
<span class="line-modified">!     /* 50936    EBCDIC Simplified Chinese */</span>
<span class="line-modified">!     /* 50937    EBCDIC US-Canada and Traditional Chinese */</span>
<span class="line-modified">!     /* 50939    EBCDIC Japanese (Latin) Extended and Japanese */</span>
      {51932, &quot;euc-jp&quot;}, /* EUC Japanese */
      {51936, &quot;EUC-CN&quot;}, /* EUC Simplified Chinese; Chinese Simplified (EUC) */
      {51949, &quot;euc-kr&quot;}, /* EUC Korean */
<span class="line-modified">!     /* 51950    EUC Traditional Chinese */</span>
      {52936, &quot;hz-gb-2312&quot;}, /* HZ-GB2312 Simplified Chinese; Chinese Simplified (HZ) */
      {54936, &quot;GB18030&quot;}, /* Windows XP and later: GB18030 Simplified Chinese (4 byte); Chinese Simplified (GB18030) */
      {57002, &quot;x-iscii-de&quot;}, /* ISCII Devanagari */
      {57003, &quot;x-iscii-be&quot;}, /* ISCII Bengali */
      {57004, &quot;x-iscii-ta&quot;}, /* ISCII Tamil */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 995,20 ***</span>
          cv-&gt;mbtowc = mlang_mbtowc;
          cv-&gt;wctomb = mlang_wctomb;
          cv-&gt;mblen = eucjp_mblen;
      }
      else if (IsValidCodePage(cv-&gt;codepage)
<span class="line-modified">!          &amp;&amp; GetCPInfo(cv-&gt;codepage, &amp;cpinfo) != 0)</span>
      {
          cv-&gt;mbtowc = kernel_mbtowc;
          cv-&gt;wctomb = kernel_wctomb;
          if (cpinfo.MaxCharSize == 1)
              cv-&gt;mblen = sbcs_mblen;
          else if (cpinfo.MaxCharSize == 2)
              cv-&gt;mblen = dbcs_mblen;
          else
<span class="line-modified">!         cv-&gt;mblen = mbcs_mblen;</span>
      }
      else
      {
          /* not supported */
          free(name);
<span class="line-new-header">--- 995,20 ---</span>
          cv-&gt;mbtowc = mlang_mbtowc;
          cv-&gt;wctomb = mlang_wctomb;
          cv-&gt;mblen = eucjp_mblen;
      }
      else if (IsValidCodePage(cv-&gt;codepage)
<span class="line-modified">!        &amp;&amp; GetCPInfo(cv-&gt;codepage, &amp;cpinfo) != 0)</span>
      {
          cv-&gt;mbtowc = kernel_mbtowc;
          cv-&gt;wctomb = kernel_wctomb;
          if (cpinfo.MaxCharSize == 1)
              cv-&gt;mblen = sbcs_mblen;
          else if (cpinfo.MaxCharSize == 2)
              cv-&gt;mblen = dbcs_mblen;
          else
<span class="line-modified">!       cv-&gt;mblen = mbcs_mblen;</span>
      }
      else
      {
          /* not supported */
          free(name);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1036,11 ***</span>
  name_to_codepage(const char *name)
  {
      int i;
  
      if (*name == &#39;\0&#39; ||
<span class="line-modified">!     strcmp(name, &quot;char&quot;) == 0)</span>
          return GetACP();
      else if (strcmp(name, &quot;wchar_t&quot;) == 0)
          return 1200;
      else if (_strnicmp(name, &quot;cp&quot;, 2) == 0)
          return atoi(name + 2); /* CP123 */
<span class="line-new-header">--- 1036,11 ---</span>
  name_to_codepage(const char *name)
  {
      int i;
  
      if (*name == &#39;\0&#39; ||
<span class="line-modified">!   strcmp(name, &quot;char&quot;) == 0)</span>
          return GetACP();
      else if (strcmp(name, &quot;wchar_t&quot;) == 0)
          return 1200;
      else if (_strnicmp(name, &quot;cp&quot;, 2) == 0)
          return atoi(name + 2); /* CP123 */
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1096,15 ***</span>
   */
  static int
  mbtowc_flags(int codepage)
  {
      return (codepage == 50220 || codepage == 50221 ||
<span class="line-modified">!         codepage == 50222 || codepage == 50225 ||</span>
<span class="line-modified">!         codepage == 50227 || codepage == 50229 ||</span>
<span class="line-modified">!         codepage == 52936 || codepage == 54936 ||</span>
<span class="line-modified">!         (codepage &gt;= 57002 &amp;&amp; codepage &lt;= 57011) ||</span>
<span class="line-modified">!         codepage == 65000 || codepage == 42) ? 0 : MB_ERR_INVALID_CHARS;</span>
  }
  
  /*
   * Check if codepage is one those for which the lpUsedDefaultChar
   * parameter to WideCharToMultiByte() must be NULL.  The docs in
<span class="line-new-header">--- 1096,15 ---</span>
   */
  static int
  mbtowc_flags(int codepage)
  {
      return (codepage == 50220 || codepage == 50221 ||
<span class="line-modified">!       codepage == 50222 || codepage == 50225 ||</span>
<span class="line-modified">!       codepage == 50227 || codepage == 50229 ||</span>
<span class="line-modified">!       codepage == 52936 || codepage == 54936 ||</span>
<span class="line-modified">!       (codepage &gt;= 57002 &amp;&amp; codepage &lt;= 57011) ||</span>
<span class="line-modified">!       codepage == 65000 || codepage == 42) ? 0 : MB_ERR_INVALID_CHARS;</span>
  }
  
  /*
   * Check if codepage is one those for which the lpUsedDefaultChar
   * parameter to WideCharToMultiByte() must be NULL.  The docs in
</pre>
<hr />
<pre>
<span class="line-old-header">*** 1312,24 ***</span>
  mbcs_mblen(csconv_t *cv, const uchar *buf, int bufsize)
  {
      int len = 0;
  
      if (cv-&gt;codepage == 54936) {
<span class="line-modified">!     if (buf[0] &lt;= 0x7F) len = 1;</span>
<span class="line-modified">!     else if (buf[0] &gt;= 0x81 &amp;&amp; buf[0] &lt;= 0xFE &amp;&amp;</span>
<span class="line-modified">!          bufsize &gt;= 2 &amp;&amp;</span>
<span class="line-modified">!          ((buf[1] &gt;= 0x40 &amp;&amp; buf[1] &lt;= 0x7E) ||</span>
<span class="line-modified">!           (buf[1] &gt;= 0x80 &amp;&amp; buf[1] &lt;= 0xFE))) len = 2;</span>
<span class="line-modified">!     else if (buf[0] &gt;= 0x81 &amp;&amp; buf[0] &lt;= 0xFE &amp;&amp;</span>
<span class="line-modified">!          bufsize &gt;= 4 &amp;&amp;</span>
<span class="line-modified">!          buf[1] &gt;= 0x30 &amp;&amp; buf[1] &lt;= 0x39) len = 4;</span>
<span class="line-modified">!     else</span>
<span class="line-modified">!         return seterror(EINVAL);</span>
<span class="line-modified">!     return len;</span>
      }
      else
<span class="line-modified">!     return seterror(EINVAL);</span>
  }
  
  static int
  utf8_mblen(csconv_t *cv UNUSED, const uchar *buf, int bufsize)
  {
<span class="line-new-header">--- 1312,24 ---</span>
  mbcs_mblen(csconv_t *cv, const uchar *buf, int bufsize)
  {
      int len = 0;
  
      if (cv-&gt;codepage == 54936) {
<span class="line-modified">!   if (buf[0] &lt;= 0x7F) len = 1;</span>
<span class="line-modified">!   else if (buf[0] &gt;= 0x81 &amp;&amp; buf[0] &lt;= 0xFE &amp;&amp;</span>
<span class="line-modified">!      bufsize &gt;= 2 &amp;&amp;</span>
<span class="line-modified">!      ((buf[1] &gt;= 0x40 &amp;&amp; buf[1] &lt;= 0x7E) ||</span>
<span class="line-modified">!       (buf[1] &gt;= 0x80 &amp;&amp; buf[1] &lt;= 0xFE))) len = 2;</span>
<span class="line-modified">!   else if (buf[0] &gt;= 0x81 &amp;&amp; buf[0] &lt;= 0xFE &amp;&amp;</span>
<span class="line-modified">!      bufsize &gt;= 4 &amp;&amp;</span>
<span class="line-modified">!      buf[1] &gt;= 0x30 &amp;&amp; buf[1] &lt;= 0x39) len = 4;</span>
<span class="line-modified">!   else</span>
<span class="line-modified">!       return seterror(EINVAL);</span>
<span class="line-modified">!   return len;</span>
      }
      else
<span class="line-modified">!   return seterror(EINVAL);</span>
  }
  
  static int
  utf8_mblen(csconv_t *cv UNUSED, const uchar *buf, int bufsize)
  {
</pre>
<center><a href="libcharset/localcharset.c.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../gmodule/gmodule-dl.c.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>