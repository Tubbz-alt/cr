<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gtype.h</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="gtype.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gtypemodule.c.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.media/src/main/native/gstreamer/3rd_party/glib/gobject/gtype.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  18 #define __G_TYPE_H__
  19 
  20 #if !defined (__GLIB_GOBJECT_H_INSIDE__) &amp;&amp; !defined (GOBJECT_COMPILATION)
  21 #error &quot;Only &lt;glib-object.h&gt; can be included directly.&quot;
  22 #endif
  23 
  24 #include        &lt;glib.h&gt;
  25 
  26 G_BEGIN_DECLS
  27 
  28 /* Basic Type Macros
  29  */
  30 /**
  31  * G_TYPE_FUNDAMENTAL:
  32  * @type: A #GType value.
  33  *
  34  * The fundamental type which is the ancestor of @type.
  35  * Fundamental types are types that serve as ultimate bases for the derived types,
  36  * thus they are the roots of distinct inheritance hierarchies.
  37  */
<span class="line-modified">  38 #define G_TYPE_FUNDAMENTAL(type)    (g_type_fundamental (type))</span>
  39 /**
  40  * G_TYPE_FUNDAMENTAL_MAX:
  41  *
  42  * An integer constant that represents the number of identifiers reserved
  43  * for types that are assigned at compile-time.
  44  */
<span class="line-modified">  45 #define G_TYPE_FUNDAMENTAL_MAX      (255 &lt;&lt; G_TYPE_FUNDAMENTAL_SHIFT)</span>
  46 
  47 /* Constant fundamental types,
  48  */
  49 /**
  50  * G_TYPE_INVALID:
  51  *
  52  * An invalid #GType used as error return value in some functions which return
  53  * a #GType.
  54  */
<span class="line-modified">  55 #define G_TYPE_INVALID          G_TYPE_MAKE_FUNDAMENTAL (0)</span>
  56 /**
  57  * G_TYPE_NONE:
  58  *
  59  * A fundamental type which is used as a replacement for the C
  60  * void return type.
  61  */
<span class="line-modified">  62 #define G_TYPE_NONE         G_TYPE_MAKE_FUNDAMENTAL (1)</span>
  63 /**
  64  * G_TYPE_INTERFACE:
  65  *
  66  * The fundamental type from which all interfaces are derived.
  67  */
<span class="line-modified">  68 #define G_TYPE_INTERFACE        G_TYPE_MAKE_FUNDAMENTAL (2)</span>
  69 /**
  70  * G_TYPE_CHAR:
  71  *
  72  * The fundamental type corresponding to #gchar.
  73  * The type designated by G_TYPE_CHAR is unconditionally an 8-bit signed integer.
  74  * This may or may not be the same type a the C type &quot;gchar&quot;.
  75  */
<span class="line-modified">  76 #define G_TYPE_CHAR         G_TYPE_MAKE_FUNDAMENTAL (3)</span>
  77 /**
  78  * G_TYPE_UCHAR:
  79  *
  80  * The fundamental type corresponding to #guchar.
  81  */
<span class="line-modified">  82 #define G_TYPE_UCHAR            G_TYPE_MAKE_FUNDAMENTAL (4)</span>
  83 /**
  84  * G_TYPE_BOOLEAN:
  85  *
  86  * The fundamental type corresponding to #gboolean.
  87  */
<span class="line-modified">  88 #define G_TYPE_BOOLEAN          G_TYPE_MAKE_FUNDAMENTAL (5)</span>
  89 /**
  90  * G_TYPE_INT:
  91  *
  92  * The fundamental type corresponding to #gint.
  93  */
<span class="line-modified">  94 #define G_TYPE_INT          G_TYPE_MAKE_FUNDAMENTAL (6)</span>
  95 /**
  96  * G_TYPE_UINT:
  97  *
  98  * The fundamental type corresponding to #guint.
  99  */
<span class="line-modified"> 100 #define G_TYPE_UINT         G_TYPE_MAKE_FUNDAMENTAL (7)</span>
 101 /**
 102  * G_TYPE_LONG:
 103  *
 104  * The fundamental type corresponding to #glong.
 105  */
<span class="line-modified"> 106 #define G_TYPE_LONG         G_TYPE_MAKE_FUNDAMENTAL (8)</span>
 107 /**
 108  * G_TYPE_ULONG:
 109  *
 110  * The fundamental type corresponding to #gulong.
 111  */
<span class="line-modified"> 112 #define G_TYPE_ULONG            G_TYPE_MAKE_FUNDAMENTAL (9)</span>
 113 /**
 114  * G_TYPE_INT64:
 115  *
 116  * The fundamental type corresponding to #gint64.
 117  */
<span class="line-modified"> 118 #define G_TYPE_INT64            G_TYPE_MAKE_FUNDAMENTAL (10)</span>
 119 /**
 120  * G_TYPE_UINT64:
 121  *
 122  * The fundamental type corresponding to #guint64.
 123  */
<span class="line-modified"> 124 #define G_TYPE_UINT64           G_TYPE_MAKE_FUNDAMENTAL (11)</span>
 125 /**
 126  * G_TYPE_ENUM:
 127  *
 128  * The fundamental type from which all enumeration types are derived.
 129  */
<span class="line-modified"> 130 #define G_TYPE_ENUM         G_TYPE_MAKE_FUNDAMENTAL (12)</span>
 131 /**
 132  * G_TYPE_FLAGS:
 133  *
 134  * The fundamental type from which all flags types are derived.
 135  */
<span class="line-modified"> 136 #define G_TYPE_FLAGS            G_TYPE_MAKE_FUNDAMENTAL (13)</span>
 137 /**
 138  * G_TYPE_FLOAT:
 139  *
 140  * The fundamental type corresponding to #gfloat.
 141  */
<span class="line-modified"> 142 #define G_TYPE_FLOAT            G_TYPE_MAKE_FUNDAMENTAL (14)</span>
 143 /**
 144  * G_TYPE_DOUBLE:
 145  *
 146  * The fundamental type corresponding to #gdouble.
 147  */
<span class="line-modified"> 148 #define G_TYPE_DOUBLE           G_TYPE_MAKE_FUNDAMENTAL (15)</span>
 149 /**
 150  * G_TYPE_STRING:
 151  *
 152  * The fundamental type corresponding to nul-terminated C strings.
 153  */
<span class="line-modified"> 154 #define G_TYPE_STRING           G_TYPE_MAKE_FUNDAMENTAL (16)</span>
 155 /**
 156  * G_TYPE_POINTER:
 157  *
 158  * The fundamental type corresponding to #gpointer.
 159  */
<span class="line-modified"> 160 #define G_TYPE_POINTER          G_TYPE_MAKE_FUNDAMENTAL (17)</span>
 161 /**
 162  * G_TYPE_BOXED:
 163  *
 164  * The fundamental type from which all boxed types are derived.
 165  */
<span class="line-modified"> 166 #define G_TYPE_BOXED            G_TYPE_MAKE_FUNDAMENTAL (18)</span>
 167 /**
 168  * G_TYPE_PARAM:
 169  *
 170  * The fundamental type from which all #GParamSpec types are derived.
 171  */
<span class="line-modified"> 172 #define G_TYPE_PARAM            G_TYPE_MAKE_FUNDAMENTAL (19)</span>
 173 /**
 174  * G_TYPE_OBJECT:
 175  *
 176  * The fundamental type for #GObject.
 177  */
<span class="line-modified"> 178 #define G_TYPE_OBJECT           G_TYPE_MAKE_FUNDAMENTAL (20)</span>
 179 /**
 180  * G_TYPE_VARIANT:
 181  *
 182  * The fundamental type corresponding to #GVariant.
 183  *
 184  * All floating #GVariant instances passed through the #GType system are
 185  * consumed.
 186  *
 187  * Note that callbacks in closures, and signal handlers
 188  * for signals of return type %G_TYPE_VARIANT, must never return floating
 189  * variants.
 190  *
 191  * Note: GLib 2.24 did include a boxed type with this name. It was replaced
 192  * with this fundamental type in 2.26.
 193  *
 194  * Since: 2.26
 195  */
 196 #define G_TYPE_VARIANT                  G_TYPE_MAKE_FUNDAMENTAL (21)
 197 
 198 
 199 /* Reserved fundamental type numbers to create new fundamental
 200  * type IDs with G_TYPE_MAKE_FUNDAMENTAL().
<span class="line-modified"> 201  * Send email to gtk-devel-list@gnome.org for reservations.</span>


 202  */
 203 /**
 204  * G_TYPE_FUNDAMENTAL_SHIFT:
 205  *
 206  * Shift value used in converting numbers to type IDs.
 207  */
<span class="line-modified"> 208 #define G_TYPE_FUNDAMENTAL_SHIFT    (2)</span>
 209 /**
 210  * G_TYPE_MAKE_FUNDAMENTAL:
 211  * @x: the fundamental type number.
 212  *
 213  * Get the type ID for the fundamental type number @x.
 214  * Use g_type_fundamental_next() instead of this macro to create new fundamental
 215  * types.
 216  *
 217  * Returns: the GType
 218  */
 219 #define G_TYPE_MAKE_FUNDAMENTAL(x)  ((GType) ((x) &lt;&lt; G_TYPE_FUNDAMENTAL_SHIFT))
 220 /**
 221  * G_TYPE_RESERVED_GLIB_FIRST:
 222  *
 223  * First fundamental type number to create a new fundamental type id with
 224  * G_TYPE_MAKE_FUNDAMENTAL() reserved for GLib.
 225  */
 226 #define G_TYPE_RESERVED_GLIB_FIRST  (22)
 227 /**
 228  * G_TYPE_RESERVED_GLIB_LAST:
 229  *
 230  * Last fundamental type number reserved for GLib.
 231  */
<span class="line-modified"> 232 #define G_TYPE_RESERVED_GLIB_LAST   (31)</span>
 233 /**
 234  * G_TYPE_RESERVED_BSE_FIRST:
 235  *
 236  * First fundamental type number to create a new fundamental type id with
 237  * G_TYPE_MAKE_FUNDAMENTAL() reserved for BSE.
 238  */
<span class="line-modified"> 239 #define G_TYPE_RESERVED_BSE_FIRST   (32)</span>
 240 /**
 241  * G_TYPE_RESERVED_BSE_LAST:
 242  *
 243  * Last fundamental type number reserved for BSE.
 244  */
<span class="line-modified"> 245 #define G_TYPE_RESERVED_BSE_LAST    (48)</span>
 246 /**
 247  * G_TYPE_RESERVED_USER_FIRST:
 248  *
 249  * First available fundamental type number to create new fundamental
 250  * type id with G_TYPE_MAKE_FUNDAMENTAL().
 251  */
 252 #define G_TYPE_RESERVED_USER_FIRST  (49)
 253 
 254 
 255 /* Type Checking Macros
 256  */
 257 /**
 258  * G_TYPE_IS_FUNDAMENTAL:
 259  * @type: A #GType value
 260  *
 261  * Checks if @type is a fundamental type.
 262  *
 263  * Returns: %TRUE on success
 264  */
 265 #define G_TYPE_IS_FUNDAMENTAL(type)             ((type) &lt;= G_TYPE_FUNDAMENTAL_MAX)
</pre>
<hr />
<pre>
 376  * GType:
 377  *
 378  * A numerical value which represents the unique identifier of a registered
 379  * type.
 380  */
 381 #if     GLIB_SIZEOF_SIZE_T != GLIB_SIZEOF_LONG || !defined __cplusplus
 382 typedef gsize                           GType;
 383 #else   /* for historic reasons, C++ links against gulong GTypes */
 384 typedef gulong                          GType;
 385 #endif
 386 typedef struct _GValue                  GValue;
 387 typedef union  _GTypeCValue             GTypeCValue;
 388 typedef struct _GTypePlugin             GTypePlugin;
 389 typedef struct _GTypeClass              GTypeClass;
 390 typedef struct _GTypeInterface          GTypeInterface;
 391 typedef struct _GTypeInstance           GTypeInstance;
 392 typedef struct _GTypeInfo               GTypeInfo;
 393 typedef struct _GTypeFundamentalInfo    GTypeFundamentalInfo;
 394 typedef struct _GInterfaceInfo          GInterfaceInfo;
 395 typedef struct _GTypeValueTable         GTypeValueTable;
<span class="line-modified"> 396 typedef struct _GTypeQuery      GTypeQuery;</span>
 397 
 398 
 399 /* Basic Type Structures
 400  */
 401 /**
 402  * GTypeClass:
 403  *
 404  * An opaque structure used as the base of all classes.
 405  */
 406 struct _GTypeClass
 407 {
 408   /*&lt; private &gt;*/
 409   GType g_type;
 410 };
 411 /**
 412  * GTypeInstance:
 413  *
 414  * An opaque structure used as the base of all type instances.
 415  */
 416 struct _GTypeInstance
</pre>
<hr />
<pre>
 424  * An opaque structure used as the base of all interface types.
 425  */
 426 struct _GTypeInterface
 427 {
 428   /*&lt; private &gt;*/
 429   GType g_type;         /* iface type */
 430   GType g_instance_type;
 431 };
 432 /**
 433  * GTypeQuery:
 434  * @type: the #GType value of the type
 435  * @type_name: the name of the type
 436  * @class_size: the size of the class structure
 437  * @instance_size: the size of the instance structure
 438  *
 439  * A structure holding information for a specific type.
 440  * It is filled in by the g_type_query() function.
 441  */
 442 struct _GTypeQuery
 443 {
<span class="line-modified"> 444   GType     type;</span>
 445   const gchar  *type_name;
<span class="line-modified"> 446   guint     class_size;</span>
<span class="line-modified"> 447   guint     instance_size;</span>
 448 };
 449 
 450 
 451 /* Casts, checks and accessors for structured types
 452  * usage of these macros is reserved to type implementations only
 453  */
 454 /*&lt; protected &gt;*/
 455 /**
 456  * G_TYPE_CHECK_INSTANCE:
 457  * @instance: Location of a #GTypeInstance structure
 458  *
 459  * Checks if @instance is a valid #GTypeInstance structure,
 460  * otherwise issues a warning and returns %FALSE. %NULL is not a valid
 461  * #GTypeInstance.
 462  *
 463  * This macro should only be used in type implementations.
 464  *
 465  * Returns: %TRUE on success
 466  */
<span class="line-modified"> 467 #define G_TYPE_CHECK_INSTANCE(instance)             (_G_TYPE_CHI ((GTypeInstance*) (instance)))</span>
 468 /**
 469  * G_TYPE_CHECK_INSTANCE_CAST:
 470  * @instance: (nullable): Location of a #GTypeInstance structure
 471  * @g_type: The type to be returned
 472  * @c_type: The corresponding C type of @g_type
 473  *
 474  * Checks that @instance is an instance of the type identified by @g_type
 475  * and issues a warning if this is not the case. Returns @instance casted
 476  * to a pointer to @c_type.
 477  *
 478  * No warning will be issued if @instance is %NULL, and %NULL will be returned.
 479  *
 480  * This macro should only be used in type implementations.
 481  */
 482 #define G_TYPE_CHECK_INSTANCE_CAST(instance, g_type, c_type)    (_G_TYPE_CIC ((instance), (g_type), c_type))
 483 /**
 484  * G_TYPE_CHECK_INSTANCE_TYPE:
 485  * @instance: (nullable): Location of a #GTypeInstance structure.
 486  * @g_type: The type to be checked
 487  *
</pre>
<hr />
<pre>
 556  *
 557  * Checks if @g_class is a class structure of the type identified by
 558  * @g_type. If @g_class is %NULL, %FALSE will be returned.
 559  *
 560  * This macro should only be used in type implementations.
 561  *
 562  * Returns: %TRUE on success
 563  */
 564 #define G_TYPE_CHECK_CLASS_TYPE(g_class, g_type)                (_G_TYPE_CCT ((g_class), (g_type)))
 565 /**
 566  * G_TYPE_CHECK_VALUE:
 567  * @value: a #GValue
 568  *
 569  * Checks if @value has been initialized to hold values
 570  * of a value type.
 571  *
 572  * This macro should only be used in type implementations.
 573  *
 574  * Returns: %TRUE on success
 575  */
<span class="line-modified"> 576 #define G_TYPE_CHECK_VALUE(value)               (_G_TYPE_CHV ((value)))</span>
 577 /**
 578  * G_TYPE_CHECK_VALUE_TYPE:
 579  * @value: a #GValue
 580  * @g_type: The type to be checked
 581  *
 582  * Checks if @value has been initialized to hold values
 583  * of type @g_type.
 584  *
 585  * This macro should only be used in type implementations.
 586  *
 587  * Returns: %TRUE on success
 588  */
<span class="line-modified"> 589 #define G_TYPE_CHECK_VALUE_TYPE(value, g_type)          (_G_TYPE_CVH ((value), (g_type)))</span>
 590 /**
 591  * G_TYPE_FROM_INSTANCE:
 592  * @instance: Location of a valid #GTypeInstance structure
 593  *
 594  * Get the type identifier from a given @instance structure.
 595  *
 596  * This macro should only be used in type implementations.
 597  *
 598  * Returns: the #GType
 599  */
 600 #define G_TYPE_FROM_INSTANCE(instance)                          (G_TYPE_FROM_CLASS (((GTypeInstance*) (instance))-&gt;g_class))
 601 /**
 602  * G_TYPE_FROM_CLASS:
 603  * @g_class: Location of a valid #GTypeClass structure
 604  *
 605  * Get the type identifier from a given @class structure.
 606  *
 607  * This macro should only be used in type implementations.
 608  *
 609  * Returns: the #GType
</pre>
<hr />
<pre>
 621  */
 622 #define G_TYPE_FROM_INTERFACE(g_iface)                          (((GTypeInterface*) (g_iface))-&gt;g_type)
 623 
 624 /**
 625  * G_TYPE_INSTANCE_GET_PRIVATE:
 626  * @instance: the instance of a type deriving from @private_type
 627  * @g_type: the type identifying which private data to retrieve
 628  * @c_type: The C type for the private structure
 629  *
 630  * Gets the private structure for a particular type.
 631  * The private structure must have been registered in the
 632  * class_init function with g_type_class_add_private().
 633  *
 634  * This macro should only be used in type implementations.
 635  *
 636  * Since: 2.4
 637  * Deprecated: 2.58: Use %G_ADD_PRIVATE and the generated
 638  *   `your_type_get_instance_private()` function instead
 639  * Returns: (not nullable): a pointer to the private data structure
 640  */
<span class="line-modified"> 641 #define G_TYPE_INSTANCE_GET_PRIVATE(instance, g_type, c_type)   ((c_type*) g_type_instance_get_private ((GTypeInstance*) (instance), (g_type)))</span>
 642 
 643 /**
 644  * G_TYPE_CLASS_GET_PRIVATE:
 645  * @klass: the class of a type deriving from @private_type
 646  * @g_type: the type identifying which private data to retrieve
 647  * @c_type: The C type for the private structure
 648  *
 649  * Gets the private class structure for a particular type.
 650  * The private structure must have been registered in the
 651  * get_type() function with g_type_add_class_private().
 652  *
 653  * This macro should only be used in type implementations.
 654  *
 655  * Since: 2.24
 656  * Returns: (not nullable): a pointer to the private data structure
 657  */
 658 #define G_TYPE_CLASS_GET_PRIVATE(klass, g_type, c_type)   ((c_type*) g_type_class_get_private ((GTypeClass*) (klass), (g_type)))
 659 
 660 /**
 661  * GTypeDebugFlags:
 662  * @G_TYPE_DEBUG_NONE: Print no messages
 663  * @G_TYPE_DEBUG_OBJECTS: Print messages about object bookkeeping
 664  * @G_TYPE_DEBUG_SIGNALS: Print messages about signal emissions
 665  * @G_TYPE_DEBUG_MASK: Mask covering all debug flags
 666  * @G_TYPE_DEBUG_INSTANCE_COUNT: Keep a count of instances of each type
 667  *
 668  * These flags used to be passed to g_type_init_with_debug_flags() which
 669  * is now deprecated.
 670  *
 671  * If you need to enable debugging features, use the GOBJECT_DEBUG
 672  * environment variable.
 673  *
 674  * Deprecated: 2.36: g_type_init() is now done automatically
 675  */
<span class="line-modified"> 676 typedef enum    /*&lt; skip &gt;*/</span>
 677 {
 678   G_TYPE_DEBUG_NONE = 0,
 679   G_TYPE_DEBUG_OBJECTS  = 1 &lt;&lt; 0,
 680   G_TYPE_DEBUG_SIGNALS  = 1 &lt;&lt; 1,
 681   G_TYPE_DEBUG_INSTANCE_COUNT = 1 &lt;&lt; 2,
 682   G_TYPE_DEBUG_MASK = 0x07
<span class="line-modified"> 683 } GTypeDebugFlags;</span>
 684 
 685 
 686 /* --- prototypes --- */

 687 GLIB_DEPRECATED_IN_2_36
 688 void                  g_type_init                    (void);
 689 GLIB_DEPRECATED_IN_2_36
 690 void                  g_type_init_with_debug_flags   (GTypeDebugFlags  debug_flags);


 691 GLIB_AVAILABLE_IN_ALL
 692 const gchar *         g_type_name                    (GType            type);
 693 GLIB_AVAILABLE_IN_ALL
 694 GQuark                g_type_qname                   (GType            type);
 695 GLIB_AVAILABLE_IN_ALL
 696 GType                 g_type_from_name               (const gchar     *name);
 697 GLIB_AVAILABLE_IN_ALL
 698 GType                 g_type_parent                  (GType            type);
 699 GLIB_AVAILABLE_IN_ALL
 700 guint                 g_type_depth                   (GType            type);
 701 GLIB_AVAILABLE_IN_ALL
 702 GType                 g_type_next_base               (GType            leaf_type,
<span class="line-modified"> 703                               GType            root_type);</span>
 704 GLIB_AVAILABLE_IN_ALL
 705 gboolean              g_type_is_a                    (GType            type,
<span class="line-modified"> 706                               GType            is_a_type);</span>
 707 GLIB_AVAILABLE_IN_ALL
 708 gpointer              g_type_class_ref               (GType            type);
 709 GLIB_AVAILABLE_IN_ALL
 710 gpointer              g_type_class_peek              (GType            type);
 711 GLIB_AVAILABLE_IN_ALL
 712 gpointer              g_type_class_peek_static       (GType            type);
 713 GLIB_AVAILABLE_IN_ALL
 714 void                  g_type_class_unref             (gpointer         g_class);
 715 GLIB_AVAILABLE_IN_ALL
 716 gpointer              g_type_class_peek_parent       (gpointer         g_class);
 717 GLIB_AVAILABLE_IN_ALL
 718 gpointer              g_type_interface_peek          (gpointer         instance_class,
<span class="line-modified"> 719                               GType            iface_type);</span>
 720 GLIB_AVAILABLE_IN_ALL
 721 gpointer              g_type_interface_peek_parent   (gpointer         g_iface);
 722 
 723 GLIB_AVAILABLE_IN_ALL
 724 gpointer              g_type_default_interface_ref   (GType            g_type);
 725 GLIB_AVAILABLE_IN_ALL
 726 gpointer              g_type_default_interface_peek  (GType            g_type);
 727 GLIB_AVAILABLE_IN_ALL
 728 void                  g_type_default_interface_unref (gpointer         g_iface);
 729 
 730 /* g_free() the returned arrays */
 731 GLIB_AVAILABLE_IN_ALL
 732 GType*                g_type_children                (GType            type,
<span class="line-modified"> 733                               guint           *n_children);</span>
 734 GLIB_AVAILABLE_IN_ALL
 735 GType*                g_type_interfaces              (GType            type,
<span class="line-modified"> 736                               guint           *n_interfaces);</span>
 737 
 738 /* per-type _static_ data */
 739 GLIB_AVAILABLE_IN_ALL
 740 void                  g_type_set_qdata               (GType            type,
<span class="line-modified"> 741                               GQuark           quark,</span>
<span class="line-modified"> 742                               gpointer         data);</span>
 743 GLIB_AVAILABLE_IN_ALL
 744 gpointer              g_type_get_qdata               (GType            type,
<span class="line-modified"> 745                               GQuark           quark);</span>
 746 GLIB_AVAILABLE_IN_ALL
<span class="line-modified"> 747 void              g_type_query           (GType        type,</span>
<span class="line-modified"> 748                               GTypeQuery      *query);</span>
 749 
 750 GLIB_AVAILABLE_IN_2_44
 751 int                   g_type_get_instance_count      (GType            type);
 752 
 753 /* --- type registration --- */
 754 /**
 755  * GBaseInitFunc:
 756  * @g_class: (type GObject.TypeClass): The #GTypeClass structure to initialize
 757  *
 758  * A callback function used by the type system to do base initialization
 759  * of the class structures of derived types. It is called as part of the
 760  * initialization process of all derived classes and should reallocate
 761  * or reset all dynamic class members copied over from the parent class.
 762  * For example, class members (such as strings) that are not sufficiently
 763  * handled by a plain memory copy of the parent class into the derived class
 764  * have to be altered. See GClassInitFunc() for a discussion of the class
 765  * initialization process.
 766  */
 767 typedef void   (*GBaseInitFunc)              (gpointer         g_class);
 768 /**
</pre>
<hr />
<pre>
 861  * its dynamic members (dynamic_string), and finally calling its GClassInitFunc()
 862  * type_a_class_init() to initialize its static members (static_integer).
 863  * The first step in the initialization process of TypeBClass is then
 864  * a plain memory copy of the contents of TypeAClass into TypeBClass and
 865  * zero-initialization of the remaining fields in TypeBClass.
 866  * The dynamic members of TypeAClass within TypeBClass now need
 867  * reinitialization which is performed by calling type_a_base_class_init()
 868  * with an argument of TypeBClass.
 869  *
 870  * After that, the GBaseInitFunc() of TypeBClass, type_b_base_class_init()
 871  * is called to allocate the dynamic members of TypeBClass (dynamic_gstring),
 872  * and finally the GClassInitFunc() of TypeBClass, type_b_class_init(),
 873  * is called to complete the initialization process with the static members
 874  * (static_float).
 875  *
 876  * Corresponding finalization counter parts to the GBaseInitFunc() functions
 877  * have to be provided to release allocated resources at class finalization
 878  * time.
 879  */
 880 typedef void   (*GClassInitFunc)             (gpointer         g_class,
<span class="line-modified"> 881                           gpointer         class_data);</span>
 882 /**
 883  * GClassFinalizeFunc:
 884  * @g_class: (type GObject.TypeClass): The #GTypeClass structure to finalize
 885  * @class_data: The @class_data member supplied via the #GTypeInfo structure
 886  *
 887  * A callback function used by the type system to finalize a class.
 888  * This function is rarely needed, as dynamically allocated class resources
 889  * should be handled by GBaseInitFunc() and GBaseFinalizeFunc().
 890  * Also, specification of a GClassFinalizeFunc() in the #GTypeInfo
 891  * structure of a static type is invalid, because classes of static types
 892  * will never be finalized (they are artificially kept alive when their
 893  * reference count drops to zero).
 894  */
 895 typedef void   (*GClassFinalizeFunc)         (gpointer         g_class,
<span class="line-modified"> 896                           gpointer         class_data);</span>
 897 /**
 898  * GInstanceInitFunc:
 899  * @instance: The instance to initialize
 900  * @g_class: (type GObject.TypeClass): The class of the type the instance is
 901  *    created for
 902  *
 903  * A callback function used by the type system to initialize a new
 904  * instance of a type. This function initializes all instance members and
 905  * allocates any resources required by it.
 906  *
 907  * Initialization of a derived instance involves calling all its parent
 908  * types instance initializers, so the class member of the instance
 909  * is altered during its initialization to always point to the class that
 910  * belongs to the type the current initializer was introduced for.
 911  *
 912  * The extended members of @instance are guaranteed to have been filled with
 913  * zeros before this function is called.
 914  */
 915 typedef void   (*GInstanceInitFunc)          (GTypeInstance   *instance,
<span class="line-modified"> 916                           gpointer         g_class);</span>
 917 /**
 918  * GInterfaceInitFunc:
 919  * @g_iface: (type GObject.TypeInterface): The interface structure to initialize
 920  * @iface_data: The @interface_data supplied via the #GInterfaceInfo structure
 921  *
 922  * A callback function used by the type system to initialize a new
 923  * interface.  This function should initialize all internal data and
 924  * allocate any resources required by the interface.
 925  *
 926  * The members of @iface_data are guaranteed to have been filled with
 927  * zeros before this function is called.
 928  */
 929 typedef void   (*GInterfaceInitFunc)         (gpointer         g_iface,
<span class="line-modified"> 930                           gpointer         iface_data);</span>
 931 /**
 932  * GInterfaceFinalizeFunc:
 933  * @g_iface: (type GObject.TypeInterface): The interface structure to finalize
 934  * @iface_data: The @interface_data supplied via the #GInterfaceInfo structure
 935  *
 936  * A callback function used by the type system to finalize an interface.
 937  * This function should destroy any internal data and release any resources
 938  * allocated by the corresponding GInterfaceInitFunc() function.
 939  */
 940 typedef void   (*GInterfaceFinalizeFunc)     (gpointer         g_iface,
<span class="line-modified"> 941                           gpointer         iface_data);</span>
 942 /**
 943  * GTypeClassCacheFunc:
 944  * @cache_data: data that was given to the g_type_add_class_cache_func() call
 945  * @g_class: (type GObject.TypeClass): The #GTypeClass structure which is
 946  *    unreferenced
 947  *
 948  * A callback function which is called when the reference count of a class
 949  * drops to zero. It may use g_type_class_ref() to prevent the class from
 950  * being freed. You should not call g_type_class_unref() from a
 951  * #GTypeClassCacheFunc function to prevent infinite recursion, use
 952  * g_type_class_unref_uncached() instead.
 953  *
 954  * The functions have to check the class id passed in to figure
 955  * whether they actually want to cache the class of this type, since all
 956  * classes are routed through the same #GTypeClassCacheFunc chain.
 957  *
 958  * Returns: %TRUE to stop further #GTypeClassCacheFuncs from being
 959  *  called, %FALSE to continue
 960  */
 961 typedef gboolean (*GTypeClassCacheFunc)      (gpointer         cache_data,
<span class="line-modified"> 962                           GTypeClass      *g_class);</span>
 963 /**
 964  * GTypeInterfaceCheckFunc:
 965  * @check_data: data passed to g_type_add_interface_check()
 966  * @g_iface: (type GObject.TypeInterface): the interface that has been
 967  *    initialized
 968  *
 969  * A callback called after an interface vtable is initialized.
 970  * See g_type_add_interface_check().
 971  *
 972  * Since: 2.4
 973  */
 974 typedef void     (*GTypeInterfaceCheckFunc)  (gpointer         check_data,
<span class="line-modified"> 975                           gpointer         g_iface);</span>
 976 /**
 977  * GTypeFundamentalFlags:
 978  * @G_TYPE_FLAG_CLASSED: Indicates a classed type
 979  * @G_TYPE_FLAG_INSTANTIATABLE: Indicates an instantiable type (implies classed)
 980  * @G_TYPE_FLAG_DERIVABLE: Indicates a flat derivable type
 981  * @G_TYPE_FLAG_DEEP_DERIVABLE: Indicates a deep derivable type (implies derivable)
 982  *
 983  * Bit masks used to check or determine specific characteristics of a
 984  * fundamental type.
 985  */
 986 typedef enum    /*&lt; skip &gt;*/
 987 {
 988   G_TYPE_FLAG_CLASSED           = (1 &lt;&lt; 0),
 989   G_TYPE_FLAG_INSTANTIATABLE    = (1 &lt;&lt; 1),
 990   G_TYPE_FLAG_DERIVABLE         = (1 &lt;&lt; 2),
 991   G_TYPE_FLAG_DEEP_DERIVABLE    = (1 &lt;&lt; 3)
 992 } GTypeFundamentalFlags;
 993 /**
 994  * GTypeFlags:
 995  * @G_TYPE_FLAG_ABSTRACT: Indicates an abstract type. No instances can be
 996  *  created for an abstract type
 997  * @G_TYPE_FLAG_VALUE_ABSTRACT: Indicates an abstract value type, i.e. a type
 998  *  that introduces a value table, but can&#39;t be used for
 999  *  g_value_init()
1000  *
1001  * Bit masks used to check or determine characteristics of a type.
1002  */
1003 typedef enum    /*&lt; skip &gt;*/
1004 {
<span class="line-modified">1005   G_TYPE_FLAG_ABSTRACT      = (1 &lt;&lt; 4),</span>
<span class="line-modified">1006   G_TYPE_FLAG_VALUE_ABSTRACT    = (1 &lt;&lt; 5)</span>
1007 } GTypeFlags;
1008 /**
1009  * GTypeInfo:
1010  * @class_size: Size of the class structure (required for interface, classed and instantiatable types)
1011  * @base_init: Location of the base initialization function (optional)
1012  * @base_finalize: Location of the base finalization function (optional)
1013  * @class_init: Location of the class initialization function for
1014  *  classed and instantiatable types. Location of the default vtable
1015  *  inititalization function for interface types. (optional) This function
1016  *  is used both to fill in virtual functions in the class or default vtable,
1017  *  and to do type-specific setup such as registering signals and object
1018  *  properties.
1019  * @class_finalize: Location of the class finalization function for
1020  *  classed and instantiatable types. Location of the default vtable
1021  *  finalization function for interface types. (optional)
1022  * @class_data: User-supplied data passed to the class init/finalize functions
1023  * @instance_size: Size of the instance (object) structure (required for instantiatable types only)
1024  * @n_preallocs: Prior to GLib 2.10, it specified the number of pre-allocated (cached) instances to reserve memory for (0 indicates no caching). Since GLib 2.10, it is ignored, since instances are allocated with the [slice allocator][glib-Memory-Slices] now.
1025  * @instance_init: Location of the instance initialization function (optional, for instantiatable types only)
1026  * @value_table: A #GTypeValueTable function table for generic handling of GValues
</pre>
<hr />
<pre>
1229  *  if (!object_p)
1230  *    return g_strdup_printf (&quot;object location passed as NULL&quot;);
1231  *  if (!value-&gt;data[0].v_pointer)
1232  *    *object_p = NULL;
1233  *  else if (collect_flags &amp; G_VALUE_NOCOPY_CONTENTS) // always honour
1234  *    *object_p = value-&gt;data[0].v_pointer;
1235  *  else
1236  *    *object_p = g_object_ref (value-&gt;data[0].v_pointer);
1237  *  return NULL;
1238  *  ]|
1239  *
1240  * The #GTypeValueTable provides the functions required by the #GValue
1241  * implementation, to serve as a container for values of a type.
1242  */
1243 
1244 struct _GTypeValueTable
1245 {
1246   void     (*value_init)         (GValue       *value);
1247   void     (*value_free)         (GValue       *value);
1248   void     (*value_copy)         (const GValue *src_value,
<span class="line-modified">1249                   GValue       *dest_value);</span>
1250   /* varargs functionality (optional) */
1251   gpointer (*value_peek_pointer) (const GValue *value);
1252   const gchar *collect_format;
1253   gchar*   (*collect_value)      (GValue       *value,
<span class="line-modified">1254                   guint         n_collect_values,</span>
<span class="line-modified">1255                   GTypeCValue  *collect_values,</span>
<span class="line-modified">1256                   guint     collect_flags);</span>
1257   const gchar *lcopy_format;
1258   gchar*   (*lcopy_value)        (const GValue *value,
<span class="line-modified">1259                   guint         n_collect_values,</span>
<span class="line-modified">1260                   GTypeCValue  *collect_values,</span>
<span class="line-modified">1261                   guint     collect_flags);</span>
1262 };
1263 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1264 GType g_type_register_static        (GType               parent_type,</span>
<span class="line-modified">1265                      const gchar            *type_name,</span>
<span class="line-modified">1266                      const GTypeInfo        *info,</span>
<span class="line-modified">1267                      GTypeFlags          flags);</span>
1268 GLIB_AVAILABLE_IN_ALL
1269 GType g_type_register_static_simple     (GType                       parent_type,
<span class="line-modified">1270                      const gchar                *type_name,</span>
<span class="line-modified">1271                      guint                       class_size,</span>
<span class="line-modified">1272                      GClassInitFunc              class_init,</span>
<span class="line-modified">1273                      guint                       instance_size,</span>
<span class="line-modified">1274                      GInstanceInitFunc           instance_init,</span>
<span class="line-modified">1275                      GTypeFlags              flags);</span>
1276 
1277 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1278 GType g_type_register_dynamic       (GType               parent_type,</span>
<span class="line-modified">1279                      const gchar            *type_name,</span>
<span class="line-modified">1280                      GTypePlugin            *plugin,</span>
<span class="line-modified">1281                      GTypeFlags          flags);</span>
1282 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1283 GType g_type_register_fundamental   (GType               type_id,</span>
<span class="line-modified">1284                      const gchar            *type_name,</span>
<span class="line-modified">1285                      const GTypeInfo        *info,</span>
<span class="line-modified">1286                      const GTypeFundamentalInfo *finfo,</span>
<span class="line-modified">1287                      GTypeFlags          flags);</span>
1288 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1289 void  g_type_add_interface_static   (GType               instance_type,</span>
<span class="line-modified">1290                      GType               interface_type,</span>
<span class="line-modified">1291                      const GInterfaceInfo       *info);</span>
1292 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1293 void  g_type_add_interface_dynamic  (GType               instance_type,</span>
<span class="line-modified">1294                      GType               interface_type,</span>
<span class="line-modified">1295                      GTypePlugin            *plugin);</span>
1296 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1297 void  g_type_interface_add_prerequisite (GType               interface_type,</span>
<span class="line-modified">1298                      GType               prerequisite_type);</span>
1299 GLIB_AVAILABLE_IN_ALL
1300 GType*g_type_interface_prerequisites    (GType                       interface_type,
<span class="line-modified">1301                      guint                      *n_prerequisites);</span>
1302 GLIB_DEPRECATED_IN_2_58
1303 void     g_type_class_add_private       (gpointer                    g_class,
1304                                          gsize                       private_size);
1305 GLIB_AVAILABLE_IN_2_38
1306 gint     g_type_add_instance_private    (GType                       class_type,
1307                                          gsize                       private_size);
1308 GLIB_AVAILABLE_IN_ALL
1309 gpointer g_type_instance_get_private    (GTypeInstance              *instance,
1310                                          GType                       private_type);
1311 GLIB_AVAILABLE_IN_2_38
1312 void     g_type_class_adjust_private_offset (gpointer                g_class,
1313                                              gint                   *private_size_or_offset);
1314 
1315 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1316 void      g_type_add_class_private      (GType               class_type,</span>
<span class="line-modified">1317                      gsize               private_size);</span>
1318 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1319 gpointer  g_type_class_get_private      (GTypeClass             *klass,</span>
<span class="line-modified">1320                      GType               private_type);</span>
1321 GLIB_AVAILABLE_IN_2_38
1322 gint      g_type_class_get_instance_private_offset (gpointer         g_class);
1323 
1324 GLIB_AVAILABLE_IN_2_34
1325 void      g_type_ensure                 (GType                       type);
1326 GLIB_AVAILABLE_IN_2_36
1327 guint     g_type_get_type_registration_serial (void);
1328 
1329 
1330 /* --- GType boilerplate --- */
1331 /**
1332  * G_DECLARE_FINAL_TYPE:
1333  * @ModuleObjName: The name of the new type, in camel case (like GtkWidget)
1334  * @module_obj_name: The name of the new type in lowercase, with words
1335  *  separated by &#39;_&#39; (like &#39;gtk_widget&#39;)
1336  * @MODULE: The name of the module, in all caps (like &#39;GTK&#39;)
1337  * @OBJ_NAME: The bare name of the type, in all caps (like &#39;WIDGET&#39;)
1338  * @ParentName: the name of the parent type, in camel case (like GtkWidget)
1339  *
1340  * A convenience macro for emitting the usual declarations in the header file for a type which is not (at the
</pre>
<hr />
<pre>
1400   typedef struct _##ModuleObjName ModuleObjName;                                                         \
1401   typedef struct { ParentName##Class parent_class; } ModuleObjName##Class;                               \
1402                                                                                                          \
1403   _GLIB_DEFINE_AUTOPTR_CHAINUP (ModuleObjName, ParentName)                                               \
1404                                                                                                          \
1405   static inline ModuleObjName * MODULE##_##OBJ_NAME (gpointer ptr) {                                     \
1406     return G_TYPE_CHECK_INSTANCE_CAST (ptr, module_obj_name##_get_type (), ModuleObjName); }             \
1407   static inline gboolean MODULE##_IS_##OBJ_NAME (gpointer ptr) {                                         \
1408     return G_TYPE_CHECK_INSTANCE_TYPE (ptr, module_obj_name##_get_type ()); }                            \
1409   G_GNUC_END_IGNORE_DEPRECATIONS
1410 
1411 /**
1412  * G_DECLARE_DERIVABLE_TYPE:
1413  * @ModuleObjName: The name of the new type, in camel case (like GtkWidget)
1414  * @module_obj_name: The name of the new type in lowercase, with words
1415  *  separated by &#39;_&#39; (like &#39;gtk_widget&#39;)
1416  * @MODULE: The name of the module, in all caps (like &#39;GTK&#39;)
1417  * @OBJ_NAME: The bare name of the type, in all caps (like &#39;WIDGET&#39;)
1418  * @ParentName: the name of the parent type, in camel case (like GtkWidget)
1419  *
<span class="line-modified">1420  * A convenience macro for emitting the usual declarations in the header file for a type which will is intended</span>
<span class="line-modified">1421  * to be subclassed.</span>
1422  *
1423  * You might use it in a header as follows:
1424  *
1425  * |[
1426  * #ifndef _gtk_frobber_h_
1427  * #define _gtk_frobber_h_
1428  *
1429  * #define GTK_TYPE_FROBBER gtk_frobber_get_type ()
1430  * GDK_AVAILABLE_IN_3_12
1431  * G_DECLARE_DERIVABLE_TYPE (GtkFrobber, gtk_frobber, GTK, FROBBER, GtkWidget)
1432  *
1433  * struct _GtkFrobberClass
1434  * {
1435  *   GtkWidgetClass parent_class;
1436  *
1437  *   void (* handle_frob)  (GtkFrobber *frobber,
1438  *                          guint       n_frobs);
1439  *
1440  *   gpointer padding[12];
1441  * };
</pre>
<hr />
<pre>
1577     return G_TYPE_CHECK_INSTANCE_TYPE (ptr, module_obj_name##_get_type ()); }                              \
1578   static inline ModuleObjName##Interface * MODULE##_##OBJ_NAME##_GET_IFACE (gpointer ptr) {                \
1579     return G_TYPE_INSTANCE_GET_INTERFACE (ptr, module_obj_name##_get_type (), ModuleObjName##Interface); } \
1580   G_GNUC_END_IGNORE_DEPRECATIONS
1581 
1582 /**
1583  * G_DEFINE_TYPE:
1584  * @TN: The name of the new type, in Camel case.
1585  * @t_n: The name of the new type, in lowercase, with words
1586  *  separated by &#39;_&#39;.
1587  * @T_P: The #GType of the parent type.
1588  *
1589  * A convenience macro for type implementations, which declares a class
1590  * initialization function, an instance initialization function (see #GTypeInfo
1591  * for information about these) and a static variable named `t_n_parent_class`
1592  * pointing to the parent class. Furthermore, it defines  a *_get_type() function.
1593  * See G_DEFINE_TYPE_EXTENDED() for an example.
1594  *
1595  * Since: 2.4
1596  */
<span class="line-modified">1597 #define G_DEFINE_TYPE(TN, t_n, T_P)             G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, 0, {})</span>
1598 /**
1599  * G_DEFINE_TYPE_WITH_CODE:
1600  * @TN: The name of the new type, in Camel case.
1601  * @t_n: The name of the new type in lowercase, with words separated by &#39;_&#39;.
1602  * @T_P: The #GType of the parent type.
1603  * @_C_: Custom code that gets inserted in the *_get_type() function.
1604  *
1605  * A convenience macro for type implementations.
1606  * Similar to G_DEFINE_TYPE(), but allows you to insert custom code into the
1607  * *_get_type() function, e.g. interface implementations via G_IMPLEMENT_INTERFACE().
1608  * See G_DEFINE_TYPE_EXTENDED() for an example.
1609  *
1610  * Since: 2.4
1611  */
1612 #define G_DEFINE_TYPE_WITH_CODE(TN, t_n, T_P, _C_)      _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, 0) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1613 /**
1614  * G_DEFINE_TYPE_WITH_PRIVATE:
1615  * @TN: The name of the new type, in Camel case.
1616  * @t_n: The name of the new type, in lowercase, with words
1617  *  separated by &#39;_&#39;.
1618  * @T_P: The #GType of the parent type.
1619  *
1620  * A convenience macro for type implementations, which declares a class
1621  * initialization function, an instance initialization function (see #GTypeInfo
1622  * for information about these), a static variable named `t_n_parent_class`
1623  * pointing to the parent class, and adds private instance data to the type.
1624  * Furthermore, it defines a *_get_type() function. See G_DEFINE_TYPE_EXTENDED()
1625  * for an example.
1626  *
1627  * Note that private structs added with this macros must have a struct
1628  * name of the form @TN Private.
1629  *





1630  * Since: 2.38
1631  */
1632 #define G_DEFINE_TYPE_WITH_PRIVATE(TN, t_n, T_P)            G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, 0, G_ADD_PRIVATE (TN))
1633 /**
1634  * G_DEFINE_ABSTRACT_TYPE:
1635  * @TN: The name of the new type, in Camel case.
1636  * @t_n: The name of the new type, in lowercase, with words
1637  *  separated by &#39;_&#39;.
1638  * @T_P: The #GType of the parent type.
1639  *
1640  * A convenience macro for type implementations.
1641  * Similar to G_DEFINE_TYPE(), but defines an abstract type.
1642  * See G_DEFINE_TYPE_EXTENDED() for an example.
1643  *
1644  * Since: 2.4
1645  */
<span class="line-modified">1646 #define G_DEFINE_ABSTRACT_TYPE(TN, t_n, T_P)            G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT, {})</span>
1647 /**
1648  * G_DEFINE_ABSTRACT_TYPE_WITH_CODE:
1649  * @TN: The name of the new type, in Camel case.
1650  * @t_n: The name of the new type, in lowercase, with words
1651  *  separated by &#39;_&#39;.
1652  * @T_P: The #GType of the parent type.
1653  * @_C_: Custom code that gets inserted in the @type_name_get_type() function.
1654  *
1655  * A convenience macro for type implementations.
1656  * Similar to G_DEFINE_TYPE_WITH_CODE(), but defines an abstract type and
1657  * allows you to insert custom code into the *_get_type() function, e.g.
1658  * interface implementations  via G_IMPLEMENT_INTERFACE().
1659  * See G_DEFINE_TYPE_EXTENDED() for an example.
1660  *
1661  * Since: 2.4
1662  */
1663 #define G_DEFINE_ABSTRACT_TYPE_WITH_CODE(TN, t_n, T_P, _C_) _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1664 /**
1665  * G_DEFINE_ABSTRACT_TYPE_WITH_PRIVATE:
1666  * @TN: The name of the new type, in Camel case.
</pre>
<hr />
<pre>
1674  * Since: 2.38
1675  */
1676 #define G_DEFINE_ABSTRACT_TYPE_WITH_PRIVATE(TN, t_n, T_P)   G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT, G_ADD_PRIVATE (TN))
1677 /**
1678  * G_DEFINE_TYPE_EXTENDED:
1679  * @TN: The name of the new type, in Camel case.
1680  * @t_n: The name of the new type, in lowercase, with words
1681  *    separated by &#39;_&#39;.
1682  * @T_P: The #GType of the parent type.
1683  * @_f_: #GTypeFlags to pass to g_type_register_static()
1684  * @_C_: Custom code that gets inserted in the *_get_type() function.
1685  *
1686  * The most general convenience macro for type implementations, on which
1687  * G_DEFINE_TYPE(), etc are based.
1688  *
1689  * |[&lt;!-- language=&quot;C&quot; --&gt;
1690  * G_DEFINE_TYPE_EXTENDED (GtkGadget,
1691  *                         gtk_gadget,
1692  *                         GTK_TYPE_WIDGET,
1693  *                         0,

1694  *                         G_IMPLEMENT_INTERFACE (TYPE_GIZMO,
1695  *                                                gtk_gadget_gizmo_init));
1696  * ]|
1697  * expands to
1698  * |[&lt;!-- language=&quot;C&quot; --&gt;
1699  * static void     gtk_gadget_init       (GtkGadget      *self);
1700  * static void     gtk_gadget_class_init (GtkGadgetClass *klass);
1701  * static gpointer gtk_gadget_parent_class = NULL;

1702  * static void     gtk_gadget_class_intern_init (gpointer klass)
1703  * {
1704  *   gtk_gadget_parent_class = g_type_class_peek_parent (klass);


1705  *   gtk_gadget_class_init ((GtkGadgetClass*) klass);
1706  * }




1707  *
1708  * GType
1709  * gtk_gadget_get_type (void)
1710  * {
1711  *   static volatile gsize g_define_type_id__volatile = 0;
1712  *   if (g_once_init_enter (&amp;g_define_type_id__volatile))
1713  *     {
1714  *       GType g_define_type_id =
1715  *         g_type_register_static_simple (GTK_TYPE_WIDGET,
1716  *                                        g_intern_static_string (&quot;GtkGadget&quot;),
1717  *                                        sizeof (GtkGadgetClass),
1718  *                                        (GClassInitFunc) gtk_gadget_class_intern_init,
1719  *                                        sizeof (GtkGadget),
1720  *                                        (GInstanceInitFunc) gtk_gadget_init,
1721  *                                        0);
1722  *       {




1723  *         const GInterfaceInfo g_implement_interface_info = {
1724  *           (GInterfaceInitFunc) gtk_gadget_gizmo_init
1725  *         };
1726  *         g_type_add_interface_static (g_define_type_id, TYPE_GIZMO, &amp;g_implement_interface_info);
1727  *       }
1728  *       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id);
1729  *     }
1730  *   return g_define_type_id__volatile;
1731  * }
1732  * ]|
1733  * The only pieces which have to be manually provided are the definitions of
1734  * the instance and class structure and the definitions of the instance and
1735  * class init functions.
1736  *
1737  * Since: 2.4
1738  */
1739 #define G_DEFINE_TYPE_EXTENDED(TN, t_n, T_P, _f_, _C_)      _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, _f_) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1740 
1741 /**
1742  * G_DEFINE_INTERFACE:
1743  * @TN: The name of the new type, in Camel case.
1744  * @t_n: The name of the new type, in lowercase, with words separated by &#39;_&#39;.
1745  * @T_P: The #GType of the prerequisite type for the interface, or 0
1746  * (%G_TYPE_INVALID) for no prerequisite type.
1747  *
1748  * A convenience macro for #GTypeInterface definitions, which declares
1749  * a default vtable initialization function and defines a *_get_type()
1750  * function.
1751  *
1752  * The macro expects the interface initialization function to have the
1753  * name `t_n ## _default_init`, and the interface structure to have the
1754  * name `TN ## Interface`.
1755  *






1756  * Since: 2.24
1757  */
<span class="line-modified">1758 #define G_DEFINE_INTERFACE(TN, t_n, T_P)            G_DEFINE_INTERFACE_WITH_CODE(TN, t_n, T_P, ;)</span>
1759 
1760 /**
1761  * G_DEFINE_INTERFACE_WITH_CODE:
1762  * @TN: The name of the new type, in Camel case.
1763  * @t_n: The name of the new type, in lowercase, with words separated by &#39;_&#39;.
1764  * @T_P: The #GType of the prerequisite type for the interface, or 0
1765  * (%G_TYPE_INVALID) for no prerequisite type.
1766  * @_C_: Custom code that gets inserted in the *_get_type() function.
1767  *
1768  * A convenience macro for #GTypeInterface definitions. Similar to
1769  * G_DEFINE_INTERFACE(), but allows you to insert custom code into the
1770  * *_get_type() function, e.g. additional interface implementations
1771  * via G_IMPLEMENT_INTERFACE(), or additional prerequisite types. See
1772  * G_DEFINE_TYPE_EXTENDED() for a similar example using
1773  * G_DEFINE_TYPE_WITH_CODE().
1774  *
1775  * Since: 2.24
1776  */
1777 #define G_DEFINE_INTERFACE_WITH_CODE(TN, t_n, T_P, _C_)     _G_DEFINE_INTERFACE_EXTENDED_BEGIN(TN, t_n, T_P) {_C_;} _G_DEFINE_INTERFACE_EXTENDED_END()
1778 
1779 /**
1780  * G_IMPLEMENT_INTERFACE:
1781  * @TYPE_IFACE: The #GType of the interface to add
<span class="line-modified">1782  * @iface_init: The interface init function</span>
1783  *
1784  * A convenience macro to ease interface addition in the `_C_` section
1785  * of G_DEFINE_TYPE_WITH_CODE() or G_DEFINE_ABSTRACT_TYPE_WITH_CODE().
1786  * See G_DEFINE_TYPE_EXTENDED() for an example.
1787  *
1788  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1789  * macros, since it depends on variable names from those macros.
1790  *
1791  * Since: 2.4
1792  */
1793 #define G_IMPLEMENT_INTERFACE(TYPE_IFACE, iface_init)       { \
1794   const GInterfaceInfo g_implement_interface_info = { \
1795     (GInterfaceInitFunc)(void (*)(void)) iface_init, NULL, NULL \
1796   }; \
1797   g_type_add_interface_static (g_define_type_id, TYPE_IFACE, &amp;g_implement_interface_info); \
1798 }
1799 
1800 /**
1801  * G_ADD_PRIVATE:
1802  * @TypeName: the name of the type in CamelCase
</pre>
<hr />
<pre>
1840  *
1841  *   void
1842  *   my_object_set_bar (MyObject *obj,
1843  *                      gint      bar)
1844  *   {
1845  *     MyObjectPrivate *priv = my_object_get_instance_private (obj);
1846  *
1847  *     g_return_if_fail (MY_IS_OBJECT (obj));
1848  *
1849  *     if (priv-&gt;bar != bar)
1850  *       priv-&gt;bar = bar;
1851  *   }
1852  * ]|
1853  *
1854  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1855  * macros, since it depends on variable names from those macros.
1856  *
1857  * Also note that private structs added with these macros must have a struct
1858  * name of the form `TypeNamePrivate`.
1859  *
<span class="line-modified">1860  * It is safe to call _get_instance_private on %NULL or invalid object since</span>
<span class="line-modified">1861  * it&#39;s only adding an offset to the instance pointer. In that case the returned</span>
<span class="line-modified">1862  * pointer must not be dereferenced.</span>
1863  *
1864  * Since: 2.38
1865  */
1866 #define G_ADD_PRIVATE(TypeName) { \
1867   TypeName##_private_offset = \
1868     g_type_add_instance_private (g_define_type_id, sizeof (TypeName##Private)); \
1869 }
1870 
1871 /**
1872  * G_PRIVATE_OFFSET:
1873  * @TypeName: the name of the type in CamelCase
1874  * @field: the name of the field in the private data structure
1875  *
1876  * Evaluates to the offset of the @field inside the instance private data
1877  * structure for @TypeName.
1878  *
1879  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1880  * and G_ADD_PRIVATE() macros, since it depends on variable names from
1881  * those macros.
1882  *
</pre>
<hr />
<pre>
1958 \
1959 G_GNUC_UNUSED \
1960 static inline gpointer \
1961 type_name##_get_instance_private (TypeName *self) \
1962 { \
1963   return (G_STRUCT_MEMBER_P (self, TypeName##_private_offset)); \
1964 } \
1965 \
1966 GType \
1967 type_name##_get_type (void) \
1968 { \
1969   static volatile gsize g_define_type_id__volatile = 0;
1970   /* Prelude goes here */
1971 
1972 /* Added for _G_DEFINE_TYPE_EXTENDED_WITH_PRELUDE */
1973 #define _G_DEFINE_TYPE_EXTENDED_BEGIN_REGISTER(TypeName, type_name, TYPE_PARENT, flags) \
1974   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
1975     { \
1976       GType g_define_type_id = type_name##_get_type_once (); \
1977       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
<span class="line-modified">1978     }                   \</span>
<span class="line-modified">1979   return g_define_type_id__volatile;    \</span>
1980 } /* closes type_name##_get_type() */ \
1981 \
1982 G_GNUC_NO_INLINE \
1983 static GType \
1984 type_name##_get_type_once (void) \
1985 { \
1986   GType g_define_type_id = \
1987         g_type_register_static_simple (TYPE_PARENT, \
1988                                        g_intern_static_string (#TypeName), \
1989                                        sizeof (TypeName##Class), \
1990                                        (GClassInitFunc)(void (*)(void)) type_name##_class_intern_init, \
1991                                        sizeof (TypeName), \
1992                                        (GInstanceInitFunc)(void (*)(void)) type_name##_init, \
1993                                        (GTypeFlags) flags); \
1994     { /* custom code follows */
<span class="line-modified">1995 #define _G_DEFINE_TYPE_EXTENDED_END()   \</span>
<span class="line-modified">1996       /* following custom code */   \</span>
<span class="line-modified">1997     }                   \</span>
1998   return g_define_type_id; \
1999 } /* closes type_name##_get_type_once() */
2000 
2001 /* This was defined before we had G_DEFINE_TYPE_WITH_CODE_AND_PRELUDE, it&#39;s simplest
2002  * to keep it.
2003  */
2004 #define _G_DEFINE_TYPE_EXTENDED_BEGIN(TypeName, type_name, TYPE_PARENT, flags) \
2005   _G_DEFINE_TYPE_EXTENDED_BEGIN_PRE(TypeName, type_name, TYPE_PARENT) \
2006   _G_DEFINE_TYPE_EXTENDED_BEGIN_REGISTER(TypeName, type_name, TYPE_PARENT, flags) \
2007 
2008 #define _G_DEFINE_INTERFACE_EXTENDED_BEGIN(TypeName, type_name, TYPE_PREREQ) \
2009 \
2010 static void     type_name##_default_init        (TypeName##Interface *klass); \
2011 \
2012 GType \
2013 type_name##_get_type (void) \
2014 { \
2015   static volatile gsize g_define_type_id__volatile = 0; \
2016   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
2017     { \
2018       GType g_define_type_id = \
2019         g_type_register_static_simple (G_TYPE_INTERFACE, \
2020                                        g_intern_static_string (#TypeName), \
2021                                        sizeof (TypeName##Interface), \
2022                                        (GClassInitFunc)(void (*)(void)) type_name##_default_init, \
2023                                        0, \
2024                                        (GInstanceInitFunc)NULL, \
2025                                        (GTypeFlags) 0); \
<span class="line-modified">2026       if (TYPE_PREREQ) \</span>
2027         g_type_interface_add_prerequisite (g_define_type_id, TYPE_PREREQ); \
2028       { /* custom code follows */
2029 #define _G_DEFINE_INTERFACE_EXTENDED_END()  \
<span class="line-modified">2030         /* following custom code */     \</span>
<span class="line-modified">2031       }                     \</span>
2032       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
<span class="line-modified">2033     }                       \</span>
<span class="line-modified">2034   return g_define_type_id__volatile;            \</span>
2035 } /* closes type_name##_get_type() */
2036 
2037 /**
2038  * G_DEFINE_BOXED_TYPE:
2039  * @TypeName: The name of the new type, in Camel case
2040  * @type_name: The name of the new type, in lowercase, with words
2041  *  separated by &#39;_&#39;
2042  * @copy_func: the #GBoxedCopyFunc for the new type
2043  * @free_func: the #GBoxedFreeFunc for the new type
2044  *
2045  * A convenience macro for boxed type implementations, which defines a
2046  * type_name_get_type() function registering the boxed type.
2047  *
2048  * Since: 2.26
2049  */
2050 #define G_DEFINE_BOXED_TYPE(TypeName, type_name, copy_func, free_func) G_DEFINE_BOXED_TYPE_WITH_CODE (TypeName, type_name, copy_func, free_func, {})
2051 /**
2052  * G_DEFINE_BOXED_TYPE_WITH_CODE:
2053  * @TypeName: The name of the new type, in Camel case
2054  * @type_name: The name of the new type, in lowercase, with words
</pre>
<hr />
<pre>
2178 { \
2179   static volatile gsize g_define_type_id__volatile = 0; \
2180   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
2181     { \
2182       GType g_define_type_id = type_name##_get_type_once (); \
2183       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
2184     } \
2185   return g_define_type_id__volatile; \
2186 } \
2187 \
2188 G_GNUC_NO_INLINE \
2189 static GType \
2190 type_name##_get_type_once (void) \
2191 { \
2192   GType g_define_type_id = \
2193     g_pointer_type_register_static (g_intern_static_string (#TypeName)); \
2194   { /* custom code follows */
2195 
2196 /* --- protected (for fundamental type implementations) --- */
2197 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2198 GTypePlugin*     g_type_get_plugin      (GType           type);</span>
2199 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2200 GTypePlugin*     g_type_interface_get_plugin    (GType           instance_type,</span>
<span class="line-modified">2201                          GType               interface_type);</span>
2202 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2203 GType        g_type_fundamental_next    (void);</span>
2204 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2205 GType        g_type_fundamental     (GType           type_id);</span>
2206 GLIB_AVAILABLE_IN_ALL
2207 GTypeInstance*   g_type_create_instance         (GType               type);
2208 GLIB_AVAILABLE_IN_ALL
2209 void             g_type_free_instance           (GTypeInstance      *instance);
2210 
2211 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2212 void         g_type_add_class_cache_func    (gpointer        cache_data,</span>
<span class="line-modified">2213                          GTypeClassCacheFunc cache_func);</span>
2214 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2215 void         g_type_remove_class_cache_func (gpointer        cache_data,</span>
<span class="line-modified">2216                          GTypeClassCacheFunc cache_func);</span>
2217 GLIB_AVAILABLE_IN_ALL
2218 void             g_type_class_unref_uncached    (gpointer            g_class);
2219 
2220 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2221 void             g_type_add_interface_check     (gpointer            check_data,</span>
<span class="line-modified">2222                          GTypeInterfaceCheckFunc check_func);</span>
2223 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2224 void             g_type_remove_interface_check  (gpointer            check_data,</span>
<span class="line-modified">2225                          GTypeInterfaceCheckFunc check_func);</span>
2226 
2227 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2228 GTypeValueTable* g_type_value_table_peek        (GType           type);</span>
2229 
2230 
2231 /*&lt; private &gt;*/
2232 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2233 gboolean     g_type_check_instance          (GTypeInstance      *instance) G_GNUC_PURE;</span>
2234 GLIB_AVAILABLE_IN_ALL
2235 GTypeInstance*   g_type_check_instance_cast     (GTypeInstance      *instance,
<span class="line-modified">2236                          GType               iface_type);</span>
2237 GLIB_AVAILABLE_IN_ALL
2238 gboolean         g_type_check_instance_is_a (GTypeInstance      *instance,
<span class="line-modified">2239                          GType               iface_type) G_GNUC_PURE;</span>
2240 GLIB_AVAILABLE_IN_2_42
2241 gboolean         g_type_check_instance_is_fundamentally_a (GTypeInstance *instance,
2242                                                            GType          fundamental_type) G_GNUC_PURE;
2243 GLIB_AVAILABLE_IN_ALL
2244 GTypeClass*      g_type_check_class_cast        (GTypeClass         *g_class,
<span class="line-modified">2245                          GType               is_a_type);</span>
2246 GLIB_AVAILABLE_IN_ALL
2247 gboolean         g_type_check_class_is_a        (GTypeClass         *g_class,
<span class="line-modified">2248                          GType               is_a_type) G_GNUC_PURE;</span>
2249 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2250 gboolean     g_type_check_is_value_type     (GType           type) G_GNUC_CONST;</span>
2251 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2252 gboolean     g_type_check_value             (const GValue       *value) G_GNUC_PURE;</span>
2253 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2254 gboolean     g_type_check_value_holds   (const GValue       *value,</span>
<span class="line-modified">2255                          GType           type) G_GNUC_PURE;</span>
2256 GLIB_AVAILABLE_IN_ALL
2257 gboolean         g_type_test_flags              (GType               type,
<span class="line-modified">2258                          guint               flags) G_GNUC_CONST;</span>
2259 
2260 
2261 /* --- debugging functions --- */
2262 GLIB_AVAILABLE_IN_ALL
2263 const gchar *    g_type_name_from_instance      (GTypeInstance  *instance);
2264 GLIB_AVAILABLE_IN_ALL
2265 const gchar *    g_type_name_from_class         (GTypeClass *g_class);
2266 
2267 
2268 /* --- implementation bits --- */
2269 #ifndef G_DISABLE_CAST_CHECKS
2270 #  define _G_TYPE_CIC(ip, gt, ct) \
2271     ((ct*) g_type_check_instance_cast ((GTypeInstance*) ip, gt))
2272 #  define _G_TYPE_CCC(cp, gt, ct) \
2273     ((ct*) g_type_check_class_cast ((GTypeClass*) cp, gt))
2274 #else /* G_DISABLE_CAST_CHECKS */
2275 #  define _G_TYPE_CIC(ip, gt, ct)       ((ct*) ip)
2276 #  define _G_TYPE_CCC(cp, gt, ct)       ((ct*) cp)
2277 #endif /* G_DISABLE_CAST_CHECKS */
<span class="line-modified">2278 #define _G_TYPE_CHI(ip)         (g_type_check_instance ((GTypeInstance*) ip))</span>
<span class="line-modified">2279 #define _G_TYPE_CHV(vl)         (g_type_check_value ((GValue*) vl))</span>
2280 #define _G_TYPE_IGC(ip, gt, ct)         ((ct*) (((GTypeInstance*) ip)-&gt;g_class))
2281 #define _G_TYPE_IGI(ip, gt, ct)         ((ct*) g_type_interface_peek (((GTypeInstance*) ip)-&gt;g_class, gt))
2282 #define _G_TYPE_CIFT(ip, ft)            (g_type_check_instance_is_fundamentally_a ((GTypeInstance*) ip, ft))
2283 #ifdef  __GNUC__
2284 #  define _G_TYPE_CIT(ip, gt)             (G_GNUC_EXTENSION ({ \
2285   GTypeInstance *__inst = (GTypeInstance*) ip; GType __t = gt; gboolean __r; \
2286   if (!__inst) \
2287     __r = FALSE; \
2288   else if (__inst-&gt;g_class &amp;&amp; __inst-&gt;g_class-&gt;g_type == __t) \
2289     __r = TRUE; \
2290   else \
2291     __r = g_type_check_instance_is_a (__inst, __t); \
2292   __r; \
2293 }))
2294 #  define _G_TYPE_CCT(cp, gt)             (G_GNUC_EXTENSION ({ \
2295   GTypeClass *__class = (GTypeClass*) cp; GType __t = gt; gboolean __r; \
2296   if (!__class) \
2297     __r = FALSE; \
2298   else if (__class-&gt;g_type == __t) \
2299     __r = TRUE; \
2300   else \
2301     __r = g_type_check_class_is_a (__class, __t); \
2302   __r; \
2303 }))
2304 #  define _G_TYPE_CVH(vl, gt)             (G_GNUC_EXTENSION ({ \
2305   const GValue *__val = (const GValue*) vl; GType __t = gt; gboolean __r; \
2306   if (!__val) \
2307     __r = FALSE; \
<span class="line-modified">2308   else if (__val-&gt;g_type == __t)        \</span>
2309     __r = TRUE; \
2310   else \
2311     __r = g_type_check_value_holds (__val, __t); \
2312   __r; \
2313 }))
2314 #else  /* !__GNUC__ */
2315 #  define _G_TYPE_CIT(ip, gt)             (g_type_check_instance_is_a ((GTypeInstance*) ip, gt))
2316 #  define _G_TYPE_CCT(cp, gt)             (g_type_check_class_is_a ((GTypeClass*) cp, gt))
2317 #  define _G_TYPE_CVH(vl, gt)             (g_type_check_value_holds ((const GValue*) vl, gt))
2318 #endif /* !__GNUC__ */
2319 /**
2320  * G_TYPE_FLAG_RESERVED_ID_BIT:
2321  *
2322  * A bit in the type number that&#39;s supposed to be left untouched.
2323  */
2324 #define G_TYPE_FLAG_RESERVED_ID_BIT ((GType) (1 &lt;&lt; 0))
2325 
2326 G_END_DECLS
2327 
2328 #endif /* __G_TYPE_H__ */
</pre>
</td>
<td>
<hr />
<pre>
  18 #define __G_TYPE_H__
  19 
  20 #if !defined (__GLIB_GOBJECT_H_INSIDE__) &amp;&amp; !defined (GOBJECT_COMPILATION)
  21 #error &quot;Only &lt;glib-object.h&gt; can be included directly.&quot;
  22 #endif
  23 
  24 #include        &lt;glib.h&gt;
  25 
  26 G_BEGIN_DECLS
  27 
  28 /* Basic Type Macros
  29  */
  30 /**
  31  * G_TYPE_FUNDAMENTAL:
  32  * @type: A #GType value.
  33  *
  34  * The fundamental type which is the ancestor of @type.
  35  * Fundamental types are types that serve as ultimate bases for the derived types,
  36  * thus they are the roots of distinct inheritance hierarchies.
  37  */
<span class="line-modified">  38 #define G_TYPE_FUNDAMENTAL(type)  (g_type_fundamental (type))</span>
  39 /**
  40  * G_TYPE_FUNDAMENTAL_MAX:
  41  *
  42  * An integer constant that represents the number of identifiers reserved
  43  * for types that are assigned at compile-time.
  44  */
<span class="line-modified">  45 #define G_TYPE_FUNDAMENTAL_MAX    (255 &lt;&lt; G_TYPE_FUNDAMENTAL_SHIFT)</span>
  46 
  47 /* Constant fundamental types,
  48  */
  49 /**
  50  * G_TYPE_INVALID:
  51  *
  52  * An invalid #GType used as error return value in some functions which return
  53  * a #GType.
  54  */
<span class="line-modified">  55 #define G_TYPE_INVALID      G_TYPE_MAKE_FUNDAMENTAL (0)</span>
  56 /**
  57  * G_TYPE_NONE:
  58  *
  59  * A fundamental type which is used as a replacement for the C
  60  * void return type.
  61  */
<span class="line-modified">  62 #define G_TYPE_NONE     G_TYPE_MAKE_FUNDAMENTAL (1)</span>
  63 /**
  64  * G_TYPE_INTERFACE:
  65  *
  66  * The fundamental type from which all interfaces are derived.
  67  */
<span class="line-modified">  68 #define G_TYPE_INTERFACE    G_TYPE_MAKE_FUNDAMENTAL (2)</span>
  69 /**
  70  * G_TYPE_CHAR:
  71  *
  72  * The fundamental type corresponding to #gchar.
  73  * The type designated by G_TYPE_CHAR is unconditionally an 8-bit signed integer.
  74  * This may or may not be the same type a the C type &quot;gchar&quot;.
  75  */
<span class="line-modified">  76 #define G_TYPE_CHAR     G_TYPE_MAKE_FUNDAMENTAL (3)</span>
  77 /**
  78  * G_TYPE_UCHAR:
  79  *
  80  * The fundamental type corresponding to #guchar.
  81  */
<span class="line-modified">  82 #define G_TYPE_UCHAR      G_TYPE_MAKE_FUNDAMENTAL (4)</span>
  83 /**
  84  * G_TYPE_BOOLEAN:
  85  *
  86  * The fundamental type corresponding to #gboolean.
  87  */
<span class="line-modified">  88 #define G_TYPE_BOOLEAN      G_TYPE_MAKE_FUNDAMENTAL (5)</span>
  89 /**
  90  * G_TYPE_INT:
  91  *
  92  * The fundamental type corresponding to #gint.
  93  */
<span class="line-modified">  94 #define G_TYPE_INT      G_TYPE_MAKE_FUNDAMENTAL (6)</span>
  95 /**
  96  * G_TYPE_UINT:
  97  *
  98  * The fundamental type corresponding to #guint.
  99  */
<span class="line-modified"> 100 #define G_TYPE_UINT     G_TYPE_MAKE_FUNDAMENTAL (7)</span>
 101 /**
 102  * G_TYPE_LONG:
 103  *
 104  * The fundamental type corresponding to #glong.
 105  */
<span class="line-modified"> 106 #define G_TYPE_LONG     G_TYPE_MAKE_FUNDAMENTAL (8)</span>
 107 /**
 108  * G_TYPE_ULONG:
 109  *
 110  * The fundamental type corresponding to #gulong.
 111  */
<span class="line-modified"> 112 #define G_TYPE_ULONG      G_TYPE_MAKE_FUNDAMENTAL (9)</span>
 113 /**
 114  * G_TYPE_INT64:
 115  *
 116  * The fundamental type corresponding to #gint64.
 117  */
<span class="line-modified"> 118 #define G_TYPE_INT64      G_TYPE_MAKE_FUNDAMENTAL (10)</span>
 119 /**
 120  * G_TYPE_UINT64:
 121  *
 122  * The fundamental type corresponding to #guint64.
 123  */
<span class="line-modified"> 124 #define G_TYPE_UINT64     G_TYPE_MAKE_FUNDAMENTAL (11)</span>
 125 /**
 126  * G_TYPE_ENUM:
 127  *
 128  * The fundamental type from which all enumeration types are derived.
 129  */
<span class="line-modified"> 130 #define G_TYPE_ENUM     G_TYPE_MAKE_FUNDAMENTAL (12)</span>
 131 /**
 132  * G_TYPE_FLAGS:
 133  *
 134  * The fundamental type from which all flags types are derived.
 135  */
<span class="line-modified"> 136 #define G_TYPE_FLAGS      G_TYPE_MAKE_FUNDAMENTAL (13)</span>
 137 /**
 138  * G_TYPE_FLOAT:
 139  *
 140  * The fundamental type corresponding to #gfloat.
 141  */
<span class="line-modified"> 142 #define G_TYPE_FLOAT      G_TYPE_MAKE_FUNDAMENTAL (14)</span>
 143 /**
 144  * G_TYPE_DOUBLE:
 145  *
 146  * The fundamental type corresponding to #gdouble.
 147  */
<span class="line-modified"> 148 #define G_TYPE_DOUBLE     G_TYPE_MAKE_FUNDAMENTAL (15)</span>
 149 /**
 150  * G_TYPE_STRING:
 151  *
 152  * The fundamental type corresponding to nul-terminated C strings.
 153  */
<span class="line-modified"> 154 #define G_TYPE_STRING     G_TYPE_MAKE_FUNDAMENTAL (16)</span>
 155 /**
 156  * G_TYPE_POINTER:
 157  *
 158  * The fundamental type corresponding to #gpointer.
 159  */
<span class="line-modified"> 160 #define G_TYPE_POINTER      G_TYPE_MAKE_FUNDAMENTAL (17)</span>
 161 /**
 162  * G_TYPE_BOXED:
 163  *
 164  * The fundamental type from which all boxed types are derived.
 165  */
<span class="line-modified"> 166 #define G_TYPE_BOXED      G_TYPE_MAKE_FUNDAMENTAL (18)</span>
 167 /**
 168  * G_TYPE_PARAM:
 169  *
 170  * The fundamental type from which all #GParamSpec types are derived.
 171  */
<span class="line-modified"> 172 #define G_TYPE_PARAM      G_TYPE_MAKE_FUNDAMENTAL (19)</span>
 173 /**
 174  * G_TYPE_OBJECT:
 175  *
 176  * The fundamental type for #GObject.
 177  */
<span class="line-modified"> 178 #define G_TYPE_OBJECT     G_TYPE_MAKE_FUNDAMENTAL (20)</span>
 179 /**
 180  * G_TYPE_VARIANT:
 181  *
 182  * The fundamental type corresponding to #GVariant.
 183  *
 184  * All floating #GVariant instances passed through the #GType system are
 185  * consumed.
 186  *
 187  * Note that callbacks in closures, and signal handlers
 188  * for signals of return type %G_TYPE_VARIANT, must never return floating
 189  * variants.
 190  *
 191  * Note: GLib 2.24 did include a boxed type with this name. It was replaced
 192  * with this fundamental type in 2.26.
 193  *
 194  * Since: 2.26
 195  */
 196 #define G_TYPE_VARIANT                  G_TYPE_MAKE_FUNDAMENTAL (21)
 197 
 198 
 199 /* Reserved fundamental type numbers to create new fundamental
 200  * type IDs with G_TYPE_MAKE_FUNDAMENTAL().
<span class="line-modified"> 201  *</span>
<span class="line-added"> 202  * Open an issue on https://gitlab.gnome.org/GNOME/glib/issues/new for</span>
<span class="line-added"> 203  * reservations.</span>
 204  */
 205 /**
 206  * G_TYPE_FUNDAMENTAL_SHIFT:
 207  *
 208  * Shift value used in converting numbers to type IDs.
 209  */
<span class="line-modified"> 210 #define G_TYPE_FUNDAMENTAL_SHIFT  (2)</span>
 211 /**
 212  * G_TYPE_MAKE_FUNDAMENTAL:
 213  * @x: the fundamental type number.
 214  *
 215  * Get the type ID for the fundamental type number @x.
 216  * Use g_type_fundamental_next() instead of this macro to create new fundamental
 217  * types.
 218  *
 219  * Returns: the GType
 220  */
 221 #define G_TYPE_MAKE_FUNDAMENTAL(x)  ((GType) ((x) &lt;&lt; G_TYPE_FUNDAMENTAL_SHIFT))
 222 /**
 223  * G_TYPE_RESERVED_GLIB_FIRST:
 224  *
 225  * First fundamental type number to create a new fundamental type id with
 226  * G_TYPE_MAKE_FUNDAMENTAL() reserved for GLib.
 227  */
 228 #define G_TYPE_RESERVED_GLIB_FIRST  (22)
 229 /**
 230  * G_TYPE_RESERVED_GLIB_LAST:
 231  *
 232  * Last fundamental type number reserved for GLib.
 233  */
<span class="line-modified"> 234 #define G_TYPE_RESERVED_GLIB_LAST (31)</span>
 235 /**
 236  * G_TYPE_RESERVED_BSE_FIRST:
 237  *
 238  * First fundamental type number to create a new fundamental type id with
 239  * G_TYPE_MAKE_FUNDAMENTAL() reserved for BSE.
 240  */
<span class="line-modified"> 241 #define G_TYPE_RESERVED_BSE_FIRST (32)</span>
 242 /**
 243  * G_TYPE_RESERVED_BSE_LAST:
 244  *
 245  * Last fundamental type number reserved for BSE.
 246  */
<span class="line-modified"> 247 #define G_TYPE_RESERVED_BSE_LAST  (48)</span>
 248 /**
 249  * G_TYPE_RESERVED_USER_FIRST:
 250  *
 251  * First available fundamental type number to create new fundamental
 252  * type id with G_TYPE_MAKE_FUNDAMENTAL().
 253  */
 254 #define G_TYPE_RESERVED_USER_FIRST  (49)
 255 
 256 
 257 /* Type Checking Macros
 258  */
 259 /**
 260  * G_TYPE_IS_FUNDAMENTAL:
 261  * @type: A #GType value
 262  *
 263  * Checks if @type is a fundamental type.
 264  *
 265  * Returns: %TRUE on success
 266  */
 267 #define G_TYPE_IS_FUNDAMENTAL(type)             ((type) &lt;= G_TYPE_FUNDAMENTAL_MAX)
</pre>
<hr />
<pre>
 378  * GType:
 379  *
 380  * A numerical value which represents the unique identifier of a registered
 381  * type.
 382  */
 383 #if     GLIB_SIZEOF_SIZE_T != GLIB_SIZEOF_LONG || !defined __cplusplus
 384 typedef gsize                           GType;
 385 #else   /* for historic reasons, C++ links against gulong GTypes */
 386 typedef gulong                          GType;
 387 #endif
 388 typedef struct _GValue                  GValue;
 389 typedef union  _GTypeCValue             GTypeCValue;
 390 typedef struct _GTypePlugin             GTypePlugin;
 391 typedef struct _GTypeClass              GTypeClass;
 392 typedef struct _GTypeInterface          GTypeInterface;
 393 typedef struct _GTypeInstance           GTypeInstance;
 394 typedef struct _GTypeInfo               GTypeInfo;
 395 typedef struct _GTypeFundamentalInfo    GTypeFundamentalInfo;
 396 typedef struct _GInterfaceInfo          GInterfaceInfo;
 397 typedef struct _GTypeValueTable         GTypeValueTable;
<span class="line-modified"> 398 typedef struct _GTypeQuery    GTypeQuery;</span>
 399 
 400 
 401 /* Basic Type Structures
 402  */
 403 /**
 404  * GTypeClass:
 405  *
 406  * An opaque structure used as the base of all classes.
 407  */
 408 struct _GTypeClass
 409 {
 410   /*&lt; private &gt;*/
 411   GType g_type;
 412 };
 413 /**
 414  * GTypeInstance:
 415  *
 416  * An opaque structure used as the base of all type instances.
 417  */
 418 struct _GTypeInstance
</pre>
<hr />
<pre>
 426  * An opaque structure used as the base of all interface types.
 427  */
 428 struct _GTypeInterface
 429 {
 430   /*&lt; private &gt;*/
 431   GType g_type;         /* iface type */
 432   GType g_instance_type;
 433 };
 434 /**
 435  * GTypeQuery:
 436  * @type: the #GType value of the type
 437  * @type_name: the name of the type
 438  * @class_size: the size of the class structure
 439  * @instance_size: the size of the instance structure
 440  *
 441  * A structure holding information for a specific type.
 442  * It is filled in by the g_type_query() function.
 443  */
 444 struct _GTypeQuery
 445 {
<span class="line-modified"> 446   GType   type;</span>
 447   const gchar  *type_name;
<span class="line-modified"> 448   guint   class_size;</span>
<span class="line-modified"> 449   guint   instance_size;</span>
 450 };
 451 
 452 
 453 /* Casts, checks and accessors for structured types
 454  * usage of these macros is reserved to type implementations only
 455  */
 456 /*&lt; protected &gt;*/
 457 /**
 458  * G_TYPE_CHECK_INSTANCE:
 459  * @instance: Location of a #GTypeInstance structure
 460  *
 461  * Checks if @instance is a valid #GTypeInstance structure,
 462  * otherwise issues a warning and returns %FALSE. %NULL is not a valid
 463  * #GTypeInstance.
 464  *
 465  * This macro should only be used in type implementations.
 466  *
 467  * Returns: %TRUE on success
 468  */
<span class="line-modified"> 469 #define G_TYPE_CHECK_INSTANCE(instance)       (_G_TYPE_CHI ((GTypeInstance*) (instance)))</span>
 470 /**
 471  * G_TYPE_CHECK_INSTANCE_CAST:
 472  * @instance: (nullable): Location of a #GTypeInstance structure
 473  * @g_type: The type to be returned
 474  * @c_type: The corresponding C type of @g_type
 475  *
 476  * Checks that @instance is an instance of the type identified by @g_type
 477  * and issues a warning if this is not the case. Returns @instance casted
 478  * to a pointer to @c_type.
 479  *
 480  * No warning will be issued if @instance is %NULL, and %NULL will be returned.
 481  *
 482  * This macro should only be used in type implementations.
 483  */
 484 #define G_TYPE_CHECK_INSTANCE_CAST(instance, g_type, c_type)    (_G_TYPE_CIC ((instance), (g_type), c_type))
 485 /**
 486  * G_TYPE_CHECK_INSTANCE_TYPE:
 487  * @instance: (nullable): Location of a #GTypeInstance structure.
 488  * @g_type: The type to be checked
 489  *
</pre>
<hr />
<pre>
 558  *
 559  * Checks if @g_class is a class structure of the type identified by
 560  * @g_type. If @g_class is %NULL, %FALSE will be returned.
 561  *
 562  * This macro should only be used in type implementations.
 563  *
 564  * Returns: %TRUE on success
 565  */
 566 #define G_TYPE_CHECK_CLASS_TYPE(g_class, g_type)                (_G_TYPE_CCT ((g_class), (g_type)))
 567 /**
 568  * G_TYPE_CHECK_VALUE:
 569  * @value: a #GValue
 570  *
 571  * Checks if @value has been initialized to hold values
 572  * of a value type.
 573  *
 574  * This macro should only be used in type implementations.
 575  *
 576  * Returns: %TRUE on success
 577  */
<span class="line-modified"> 578 #define G_TYPE_CHECK_VALUE(value)       (_G_TYPE_CHV ((value)))</span>
 579 /**
 580  * G_TYPE_CHECK_VALUE_TYPE:
 581  * @value: a #GValue
 582  * @g_type: The type to be checked
 583  *
 584  * Checks if @value has been initialized to hold values
 585  * of type @g_type.
 586  *
 587  * This macro should only be used in type implementations.
 588  *
 589  * Returns: %TRUE on success
 590  */
<span class="line-modified"> 591 #define G_TYPE_CHECK_VALUE_TYPE(value, g_type)      (_G_TYPE_CVH ((value), (g_type)))</span>
 592 /**
 593  * G_TYPE_FROM_INSTANCE:
 594  * @instance: Location of a valid #GTypeInstance structure
 595  *
 596  * Get the type identifier from a given @instance structure.
 597  *
 598  * This macro should only be used in type implementations.
 599  *
 600  * Returns: the #GType
 601  */
 602 #define G_TYPE_FROM_INSTANCE(instance)                          (G_TYPE_FROM_CLASS (((GTypeInstance*) (instance))-&gt;g_class))
 603 /**
 604  * G_TYPE_FROM_CLASS:
 605  * @g_class: Location of a valid #GTypeClass structure
 606  *
 607  * Get the type identifier from a given @class structure.
 608  *
 609  * This macro should only be used in type implementations.
 610  *
 611  * Returns: the #GType
</pre>
<hr />
<pre>
 623  */
 624 #define G_TYPE_FROM_INTERFACE(g_iface)                          (((GTypeInterface*) (g_iface))-&gt;g_type)
 625 
 626 /**
 627  * G_TYPE_INSTANCE_GET_PRIVATE:
 628  * @instance: the instance of a type deriving from @private_type
 629  * @g_type: the type identifying which private data to retrieve
 630  * @c_type: The C type for the private structure
 631  *
 632  * Gets the private structure for a particular type.
 633  * The private structure must have been registered in the
 634  * class_init function with g_type_class_add_private().
 635  *
 636  * This macro should only be used in type implementations.
 637  *
 638  * Since: 2.4
 639  * Deprecated: 2.58: Use %G_ADD_PRIVATE and the generated
 640  *   `your_type_get_instance_private()` function instead
 641  * Returns: (not nullable): a pointer to the private data structure
 642  */
<span class="line-modified"> 643 #define G_TYPE_INSTANCE_GET_PRIVATE(instance, g_type, c_type)   ((c_type*) g_type_instance_get_private ((GTypeInstance*) (instance), (g_type))) GLIB_DEPRECATED_MACRO_IN_2_58_FOR(G_ADD_PRIVATE)</span>
 644 
 645 /**
 646  * G_TYPE_CLASS_GET_PRIVATE:
 647  * @klass: the class of a type deriving from @private_type
 648  * @g_type: the type identifying which private data to retrieve
 649  * @c_type: The C type for the private structure
 650  *
 651  * Gets the private class structure for a particular type.
 652  * The private structure must have been registered in the
 653  * get_type() function with g_type_add_class_private().
 654  *
 655  * This macro should only be used in type implementations.
 656  *
 657  * Since: 2.24
 658  * Returns: (not nullable): a pointer to the private data structure
 659  */
 660 #define G_TYPE_CLASS_GET_PRIVATE(klass, g_type, c_type)   ((c_type*) g_type_class_get_private ((GTypeClass*) (klass), (g_type)))
 661 
 662 /**
 663  * GTypeDebugFlags:
 664  * @G_TYPE_DEBUG_NONE: Print no messages
 665  * @G_TYPE_DEBUG_OBJECTS: Print messages about object bookkeeping
 666  * @G_TYPE_DEBUG_SIGNALS: Print messages about signal emissions
 667  * @G_TYPE_DEBUG_MASK: Mask covering all debug flags
 668  * @G_TYPE_DEBUG_INSTANCE_COUNT: Keep a count of instances of each type
 669  *
 670  * These flags used to be passed to g_type_init_with_debug_flags() which
 671  * is now deprecated.
 672  *
 673  * If you need to enable debugging features, use the GOBJECT_DEBUG
 674  * environment variable.
 675  *
 676  * Deprecated: 2.36: g_type_init() is now done automatically
 677  */
<span class="line-modified"> 678 typedef enum  /*&lt; skip &gt;*/</span>
 679 {
 680   G_TYPE_DEBUG_NONE = 0,
 681   G_TYPE_DEBUG_OBJECTS  = 1 &lt;&lt; 0,
 682   G_TYPE_DEBUG_SIGNALS  = 1 &lt;&lt; 1,
 683   G_TYPE_DEBUG_INSTANCE_COUNT = 1 &lt;&lt; 2,
 684   G_TYPE_DEBUG_MASK = 0x07
<span class="line-modified"> 685 } GTypeDebugFlags GLIB_DEPRECATED_TYPE_IN_2_36;</span>
 686 
 687 
 688 /* --- prototypes --- */
<span class="line-added"> 689 G_GNUC_BEGIN_IGNORE_DEPRECATIONS</span>
 690 GLIB_DEPRECATED_IN_2_36
 691 void                  g_type_init                    (void);
 692 GLIB_DEPRECATED_IN_2_36
 693 void                  g_type_init_with_debug_flags   (GTypeDebugFlags  debug_flags);
<span class="line-added"> 694 G_GNUC_END_IGNORE_DEPRECATIONS</span>
<span class="line-added"> 695 </span>
 696 GLIB_AVAILABLE_IN_ALL
 697 const gchar *         g_type_name                    (GType            type);
 698 GLIB_AVAILABLE_IN_ALL
 699 GQuark                g_type_qname                   (GType            type);
 700 GLIB_AVAILABLE_IN_ALL
 701 GType                 g_type_from_name               (const gchar     *name);
 702 GLIB_AVAILABLE_IN_ALL
 703 GType                 g_type_parent                  (GType            type);
 704 GLIB_AVAILABLE_IN_ALL
 705 guint                 g_type_depth                   (GType            type);
 706 GLIB_AVAILABLE_IN_ALL
 707 GType                 g_type_next_base               (GType            leaf_type,
<span class="line-modified"> 708                   GType            root_type);</span>
 709 GLIB_AVAILABLE_IN_ALL
 710 gboolean              g_type_is_a                    (GType            type,
<span class="line-modified"> 711                   GType            is_a_type);</span>
 712 GLIB_AVAILABLE_IN_ALL
 713 gpointer              g_type_class_ref               (GType            type);
 714 GLIB_AVAILABLE_IN_ALL
 715 gpointer              g_type_class_peek              (GType            type);
 716 GLIB_AVAILABLE_IN_ALL
 717 gpointer              g_type_class_peek_static       (GType            type);
 718 GLIB_AVAILABLE_IN_ALL
 719 void                  g_type_class_unref             (gpointer         g_class);
 720 GLIB_AVAILABLE_IN_ALL
 721 gpointer              g_type_class_peek_parent       (gpointer         g_class);
 722 GLIB_AVAILABLE_IN_ALL
 723 gpointer              g_type_interface_peek          (gpointer         instance_class,
<span class="line-modified"> 724                   GType            iface_type);</span>
 725 GLIB_AVAILABLE_IN_ALL
 726 gpointer              g_type_interface_peek_parent   (gpointer         g_iface);
 727 
 728 GLIB_AVAILABLE_IN_ALL
 729 gpointer              g_type_default_interface_ref   (GType            g_type);
 730 GLIB_AVAILABLE_IN_ALL
 731 gpointer              g_type_default_interface_peek  (GType            g_type);
 732 GLIB_AVAILABLE_IN_ALL
 733 void                  g_type_default_interface_unref (gpointer         g_iface);
 734 
 735 /* g_free() the returned arrays */
 736 GLIB_AVAILABLE_IN_ALL
 737 GType*                g_type_children                (GType            type,
<span class="line-modified"> 738                   guint           *n_children);</span>
 739 GLIB_AVAILABLE_IN_ALL
 740 GType*                g_type_interfaces              (GType            type,
<span class="line-modified"> 741                   guint           *n_interfaces);</span>
 742 
 743 /* per-type _static_ data */
 744 GLIB_AVAILABLE_IN_ALL
 745 void                  g_type_set_qdata               (GType            type,
<span class="line-modified"> 746                   GQuark           quark,</span>
<span class="line-modified"> 747                   gpointer         data);</span>
 748 GLIB_AVAILABLE_IN_ALL
 749 gpointer              g_type_get_qdata               (GType            type,
<span class="line-modified"> 750                   GQuark           quark);</span>
 751 GLIB_AVAILABLE_IN_ALL
<span class="line-modified"> 752 void          g_type_query         (GType        type,</span>
<span class="line-modified"> 753                   GTypeQuery      *query);</span>
 754 
 755 GLIB_AVAILABLE_IN_2_44
 756 int                   g_type_get_instance_count      (GType            type);
 757 
 758 /* --- type registration --- */
 759 /**
 760  * GBaseInitFunc:
 761  * @g_class: (type GObject.TypeClass): The #GTypeClass structure to initialize
 762  *
 763  * A callback function used by the type system to do base initialization
 764  * of the class structures of derived types. It is called as part of the
 765  * initialization process of all derived classes and should reallocate
 766  * or reset all dynamic class members copied over from the parent class.
 767  * For example, class members (such as strings) that are not sufficiently
 768  * handled by a plain memory copy of the parent class into the derived class
 769  * have to be altered. See GClassInitFunc() for a discussion of the class
 770  * initialization process.
 771  */
 772 typedef void   (*GBaseInitFunc)              (gpointer         g_class);
 773 /**
</pre>
<hr />
<pre>
 866  * its dynamic members (dynamic_string), and finally calling its GClassInitFunc()
 867  * type_a_class_init() to initialize its static members (static_integer).
 868  * The first step in the initialization process of TypeBClass is then
 869  * a plain memory copy of the contents of TypeAClass into TypeBClass and
 870  * zero-initialization of the remaining fields in TypeBClass.
 871  * The dynamic members of TypeAClass within TypeBClass now need
 872  * reinitialization which is performed by calling type_a_base_class_init()
 873  * with an argument of TypeBClass.
 874  *
 875  * After that, the GBaseInitFunc() of TypeBClass, type_b_base_class_init()
 876  * is called to allocate the dynamic members of TypeBClass (dynamic_gstring),
 877  * and finally the GClassInitFunc() of TypeBClass, type_b_class_init(),
 878  * is called to complete the initialization process with the static members
 879  * (static_float).
 880  *
 881  * Corresponding finalization counter parts to the GBaseInitFunc() functions
 882  * have to be provided to release allocated resources at class finalization
 883  * time.
 884  */
 885 typedef void   (*GClassInitFunc)             (gpointer         g_class,
<span class="line-modified"> 886                 gpointer         class_data);</span>
 887 /**
 888  * GClassFinalizeFunc:
 889  * @g_class: (type GObject.TypeClass): The #GTypeClass structure to finalize
 890  * @class_data: The @class_data member supplied via the #GTypeInfo structure
 891  *
 892  * A callback function used by the type system to finalize a class.
 893  * This function is rarely needed, as dynamically allocated class resources
 894  * should be handled by GBaseInitFunc() and GBaseFinalizeFunc().
 895  * Also, specification of a GClassFinalizeFunc() in the #GTypeInfo
 896  * structure of a static type is invalid, because classes of static types
 897  * will never be finalized (they are artificially kept alive when their
 898  * reference count drops to zero).
 899  */
 900 typedef void   (*GClassFinalizeFunc)         (gpointer         g_class,
<span class="line-modified"> 901                 gpointer         class_data);</span>
 902 /**
 903  * GInstanceInitFunc:
 904  * @instance: The instance to initialize
 905  * @g_class: (type GObject.TypeClass): The class of the type the instance is
 906  *    created for
 907  *
 908  * A callback function used by the type system to initialize a new
 909  * instance of a type. This function initializes all instance members and
 910  * allocates any resources required by it.
 911  *
 912  * Initialization of a derived instance involves calling all its parent
 913  * types instance initializers, so the class member of the instance
 914  * is altered during its initialization to always point to the class that
 915  * belongs to the type the current initializer was introduced for.
 916  *
 917  * The extended members of @instance are guaranteed to have been filled with
 918  * zeros before this function is called.
 919  */
 920 typedef void   (*GInstanceInitFunc)          (GTypeInstance   *instance,
<span class="line-modified"> 921                 gpointer         g_class);</span>
 922 /**
 923  * GInterfaceInitFunc:
 924  * @g_iface: (type GObject.TypeInterface): The interface structure to initialize
 925  * @iface_data: The @interface_data supplied via the #GInterfaceInfo structure
 926  *
 927  * A callback function used by the type system to initialize a new
 928  * interface.  This function should initialize all internal data and
 929  * allocate any resources required by the interface.
 930  *
 931  * The members of @iface_data are guaranteed to have been filled with
 932  * zeros before this function is called.
 933  */
 934 typedef void   (*GInterfaceInitFunc)         (gpointer         g_iface,
<span class="line-modified"> 935                 gpointer         iface_data);</span>
 936 /**
 937  * GInterfaceFinalizeFunc:
 938  * @g_iface: (type GObject.TypeInterface): The interface structure to finalize
 939  * @iface_data: The @interface_data supplied via the #GInterfaceInfo structure
 940  *
 941  * A callback function used by the type system to finalize an interface.
 942  * This function should destroy any internal data and release any resources
 943  * allocated by the corresponding GInterfaceInitFunc() function.
 944  */
 945 typedef void   (*GInterfaceFinalizeFunc)     (gpointer         g_iface,
<span class="line-modified"> 946                 gpointer         iface_data);</span>
 947 /**
 948  * GTypeClassCacheFunc:
 949  * @cache_data: data that was given to the g_type_add_class_cache_func() call
 950  * @g_class: (type GObject.TypeClass): The #GTypeClass structure which is
 951  *    unreferenced
 952  *
 953  * A callback function which is called when the reference count of a class
 954  * drops to zero. It may use g_type_class_ref() to prevent the class from
 955  * being freed. You should not call g_type_class_unref() from a
 956  * #GTypeClassCacheFunc function to prevent infinite recursion, use
 957  * g_type_class_unref_uncached() instead.
 958  *
 959  * The functions have to check the class id passed in to figure
 960  * whether they actually want to cache the class of this type, since all
 961  * classes are routed through the same #GTypeClassCacheFunc chain.
 962  *
 963  * Returns: %TRUE to stop further #GTypeClassCacheFuncs from being
 964  *  called, %FALSE to continue
 965  */
 966 typedef gboolean (*GTypeClassCacheFunc)      (gpointer         cache_data,
<span class="line-modified"> 967                 GTypeClass      *g_class);</span>
 968 /**
 969  * GTypeInterfaceCheckFunc:
 970  * @check_data: data passed to g_type_add_interface_check()
 971  * @g_iface: (type GObject.TypeInterface): the interface that has been
 972  *    initialized
 973  *
 974  * A callback called after an interface vtable is initialized.
 975  * See g_type_add_interface_check().
 976  *
 977  * Since: 2.4
 978  */
 979 typedef void     (*GTypeInterfaceCheckFunc)  (gpointer         check_data,
<span class="line-modified"> 980                 gpointer         g_iface);</span>
 981 /**
 982  * GTypeFundamentalFlags:
 983  * @G_TYPE_FLAG_CLASSED: Indicates a classed type
 984  * @G_TYPE_FLAG_INSTANTIATABLE: Indicates an instantiable type (implies classed)
 985  * @G_TYPE_FLAG_DERIVABLE: Indicates a flat derivable type
 986  * @G_TYPE_FLAG_DEEP_DERIVABLE: Indicates a deep derivable type (implies derivable)
 987  *
 988  * Bit masks used to check or determine specific characteristics of a
 989  * fundamental type.
 990  */
 991 typedef enum    /*&lt; skip &gt;*/
 992 {
 993   G_TYPE_FLAG_CLASSED           = (1 &lt;&lt; 0),
 994   G_TYPE_FLAG_INSTANTIATABLE    = (1 &lt;&lt; 1),
 995   G_TYPE_FLAG_DERIVABLE         = (1 &lt;&lt; 2),
 996   G_TYPE_FLAG_DEEP_DERIVABLE    = (1 &lt;&lt; 3)
 997 } GTypeFundamentalFlags;
 998 /**
 999  * GTypeFlags:
1000  * @G_TYPE_FLAG_ABSTRACT: Indicates an abstract type. No instances can be
1001  *  created for an abstract type
1002  * @G_TYPE_FLAG_VALUE_ABSTRACT: Indicates an abstract value type, i.e. a type
1003  *  that introduces a value table, but can&#39;t be used for
1004  *  g_value_init()
1005  *
1006  * Bit masks used to check or determine characteristics of a type.
1007  */
1008 typedef enum    /*&lt; skip &gt;*/
1009 {
<span class="line-modified">1010   G_TYPE_FLAG_ABSTRACT    = (1 &lt;&lt; 4),</span>
<span class="line-modified">1011   G_TYPE_FLAG_VALUE_ABSTRACT  = (1 &lt;&lt; 5)</span>
1012 } GTypeFlags;
1013 /**
1014  * GTypeInfo:
1015  * @class_size: Size of the class structure (required for interface, classed and instantiatable types)
1016  * @base_init: Location of the base initialization function (optional)
1017  * @base_finalize: Location of the base finalization function (optional)
1018  * @class_init: Location of the class initialization function for
1019  *  classed and instantiatable types. Location of the default vtable
1020  *  inititalization function for interface types. (optional) This function
1021  *  is used both to fill in virtual functions in the class or default vtable,
1022  *  and to do type-specific setup such as registering signals and object
1023  *  properties.
1024  * @class_finalize: Location of the class finalization function for
1025  *  classed and instantiatable types. Location of the default vtable
1026  *  finalization function for interface types. (optional)
1027  * @class_data: User-supplied data passed to the class init/finalize functions
1028  * @instance_size: Size of the instance (object) structure (required for instantiatable types only)
1029  * @n_preallocs: Prior to GLib 2.10, it specified the number of pre-allocated (cached) instances to reserve memory for (0 indicates no caching). Since GLib 2.10, it is ignored, since instances are allocated with the [slice allocator][glib-Memory-Slices] now.
1030  * @instance_init: Location of the instance initialization function (optional, for instantiatable types only)
1031  * @value_table: A #GTypeValueTable function table for generic handling of GValues
</pre>
<hr />
<pre>
1234  *  if (!object_p)
1235  *    return g_strdup_printf (&quot;object location passed as NULL&quot;);
1236  *  if (!value-&gt;data[0].v_pointer)
1237  *    *object_p = NULL;
1238  *  else if (collect_flags &amp; G_VALUE_NOCOPY_CONTENTS) // always honour
1239  *    *object_p = value-&gt;data[0].v_pointer;
1240  *  else
1241  *    *object_p = g_object_ref (value-&gt;data[0].v_pointer);
1242  *  return NULL;
1243  *  ]|
1244  *
1245  * The #GTypeValueTable provides the functions required by the #GValue
1246  * implementation, to serve as a container for values of a type.
1247  */
1248 
1249 struct _GTypeValueTable
1250 {
1251   void     (*value_init)         (GValue       *value);
1252   void     (*value_free)         (GValue       *value);
1253   void     (*value_copy)         (const GValue *src_value,
<span class="line-modified">1254           GValue       *dest_value);</span>
1255   /* varargs functionality (optional) */
1256   gpointer (*value_peek_pointer) (const GValue *value);
1257   const gchar *collect_format;
1258   gchar*   (*collect_value)      (GValue       *value,
<span class="line-modified">1259           guint         n_collect_values,</span>
<span class="line-modified">1260           GTypeCValue  *collect_values,</span>
<span class="line-modified">1261           guint   collect_flags);</span>
1262   const gchar *lcopy_format;
1263   gchar*   (*lcopy_value)        (const GValue *value,
<span class="line-modified">1264           guint         n_collect_values,</span>
<span class="line-modified">1265           GTypeCValue  *collect_values,</span>
<span class="line-modified">1266           guint   collect_flags);</span>
1267 };
1268 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1269 GType g_type_register_static    (GType           parent_type,</span>
<span class="line-modified">1270            const gchar        *type_name,</span>
<span class="line-modified">1271            const GTypeInfo      *info,</span>
<span class="line-modified">1272            GTypeFlags        flags);</span>
1273 GLIB_AVAILABLE_IN_ALL
1274 GType g_type_register_static_simple     (GType                       parent_type,
<span class="line-modified">1275            const gchar                *type_name,</span>
<span class="line-modified">1276            guint                       class_size,</span>
<span class="line-modified">1277            GClassInitFunc              class_init,</span>
<span class="line-modified">1278            guint                       instance_size,</span>
<span class="line-modified">1279            GInstanceInitFunc           instance_init,</span>
<span class="line-modified">1280            GTypeFlags              flags);</span>
1281 
1282 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1283 GType g_type_register_dynamic   (GType           parent_type,</span>
<span class="line-modified">1284            const gchar        *type_name,</span>
<span class="line-modified">1285            GTypePlugin        *plugin,</span>
<span class="line-modified">1286            GTypeFlags        flags);</span>
1287 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1288 GType g_type_register_fundamental (GType           type_id,</span>
<span class="line-modified">1289            const gchar        *type_name,</span>
<span class="line-modified">1290            const GTypeInfo      *info,</span>
<span class="line-modified">1291            const GTypeFundamentalInfo *finfo,</span>
<span class="line-modified">1292            GTypeFlags        flags);</span>
1293 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1294 void  g_type_add_interface_static (GType           instance_type,</span>
<span class="line-modified">1295            GType           interface_type,</span>
<span class="line-modified">1296            const GInterfaceInfo     *info);</span>
1297 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1298 void  g_type_add_interface_dynamic  (GType           instance_type,</span>
<span class="line-modified">1299            GType           interface_type,</span>
<span class="line-modified">1300            GTypePlugin        *plugin);</span>
1301 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1302 void  g_type_interface_add_prerequisite (GType           interface_type,</span>
<span class="line-modified">1303            GType           prerequisite_type);</span>
1304 GLIB_AVAILABLE_IN_ALL
1305 GType*g_type_interface_prerequisites    (GType                       interface_type,
<span class="line-modified">1306            guint                      *n_prerequisites);</span>
1307 GLIB_DEPRECATED_IN_2_58
1308 void     g_type_class_add_private       (gpointer                    g_class,
1309                                          gsize                       private_size);
1310 GLIB_AVAILABLE_IN_2_38
1311 gint     g_type_add_instance_private    (GType                       class_type,
1312                                          gsize                       private_size);
1313 GLIB_AVAILABLE_IN_ALL
1314 gpointer g_type_instance_get_private    (GTypeInstance              *instance,
1315                                          GType                       private_type);
1316 GLIB_AVAILABLE_IN_2_38
1317 void     g_type_class_adjust_private_offset (gpointer                g_class,
1318                                              gint                   *private_size_or_offset);
1319 
1320 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1321 void      g_type_add_class_private      (GType             class_type,</span>
<span class="line-modified">1322            gsize             private_size);</span>
1323 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">1324 gpointer  g_type_class_get_private      (GTypeClass         *klass,</span>
<span class="line-modified">1325            GType           private_type);</span>
1326 GLIB_AVAILABLE_IN_2_38
1327 gint      g_type_class_get_instance_private_offset (gpointer         g_class);
1328 
1329 GLIB_AVAILABLE_IN_2_34
1330 void      g_type_ensure                 (GType                       type);
1331 GLIB_AVAILABLE_IN_2_36
1332 guint     g_type_get_type_registration_serial (void);
1333 
1334 
1335 /* --- GType boilerplate --- */
1336 /**
1337  * G_DECLARE_FINAL_TYPE:
1338  * @ModuleObjName: The name of the new type, in camel case (like GtkWidget)
1339  * @module_obj_name: The name of the new type in lowercase, with words
1340  *  separated by &#39;_&#39; (like &#39;gtk_widget&#39;)
1341  * @MODULE: The name of the module, in all caps (like &#39;GTK&#39;)
1342  * @OBJ_NAME: The bare name of the type, in all caps (like &#39;WIDGET&#39;)
1343  * @ParentName: the name of the parent type, in camel case (like GtkWidget)
1344  *
1345  * A convenience macro for emitting the usual declarations in the header file for a type which is not (at the
</pre>
<hr />
<pre>
1405   typedef struct _##ModuleObjName ModuleObjName;                                                         \
1406   typedef struct { ParentName##Class parent_class; } ModuleObjName##Class;                               \
1407                                                                                                          \
1408   _GLIB_DEFINE_AUTOPTR_CHAINUP (ModuleObjName, ParentName)                                               \
1409                                                                                                          \
1410   static inline ModuleObjName * MODULE##_##OBJ_NAME (gpointer ptr) {                                     \
1411     return G_TYPE_CHECK_INSTANCE_CAST (ptr, module_obj_name##_get_type (), ModuleObjName); }             \
1412   static inline gboolean MODULE##_IS_##OBJ_NAME (gpointer ptr) {                                         \
1413     return G_TYPE_CHECK_INSTANCE_TYPE (ptr, module_obj_name##_get_type ()); }                            \
1414   G_GNUC_END_IGNORE_DEPRECATIONS
1415 
1416 /**
1417  * G_DECLARE_DERIVABLE_TYPE:
1418  * @ModuleObjName: The name of the new type, in camel case (like GtkWidget)
1419  * @module_obj_name: The name of the new type in lowercase, with words
1420  *  separated by &#39;_&#39; (like &#39;gtk_widget&#39;)
1421  * @MODULE: The name of the module, in all caps (like &#39;GTK&#39;)
1422  * @OBJ_NAME: The bare name of the type, in all caps (like &#39;WIDGET&#39;)
1423  * @ParentName: the name of the parent type, in camel case (like GtkWidget)
1424  *
<span class="line-modified">1425  * A convenience macro for emitting the usual declarations in the</span>
<span class="line-modified">1426  * header file for a type which is intended to be subclassed.</span>
1427  *
1428  * You might use it in a header as follows:
1429  *
1430  * |[
1431  * #ifndef _gtk_frobber_h_
1432  * #define _gtk_frobber_h_
1433  *
1434  * #define GTK_TYPE_FROBBER gtk_frobber_get_type ()
1435  * GDK_AVAILABLE_IN_3_12
1436  * G_DECLARE_DERIVABLE_TYPE (GtkFrobber, gtk_frobber, GTK, FROBBER, GtkWidget)
1437  *
1438  * struct _GtkFrobberClass
1439  * {
1440  *   GtkWidgetClass parent_class;
1441  *
1442  *   void (* handle_frob)  (GtkFrobber *frobber,
1443  *                          guint       n_frobs);
1444  *
1445  *   gpointer padding[12];
1446  * };
</pre>
<hr />
<pre>
1582     return G_TYPE_CHECK_INSTANCE_TYPE (ptr, module_obj_name##_get_type ()); }                              \
1583   static inline ModuleObjName##Interface * MODULE##_##OBJ_NAME##_GET_IFACE (gpointer ptr) {                \
1584     return G_TYPE_INSTANCE_GET_INTERFACE (ptr, module_obj_name##_get_type (), ModuleObjName##Interface); } \
1585   G_GNUC_END_IGNORE_DEPRECATIONS
1586 
1587 /**
1588  * G_DEFINE_TYPE:
1589  * @TN: The name of the new type, in Camel case.
1590  * @t_n: The name of the new type, in lowercase, with words
1591  *  separated by &#39;_&#39;.
1592  * @T_P: The #GType of the parent type.
1593  *
1594  * A convenience macro for type implementations, which declares a class
1595  * initialization function, an instance initialization function (see #GTypeInfo
1596  * for information about these) and a static variable named `t_n_parent_class`
1597  * pointing to the parent class. Furthermore, it defines  a *_get_type() function.
1598  * See G_DEFINE_TYPE_EXTENDED() for an example.
1599  *
1600  * Since: 2.4
1601  */
<span class="line-modified">1602 #define G_DEFINE_TYPE(TN, t_n, T_P)         G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, 0, {})</span>
1603 /**
1604  * G_DEFINE_TYPE_WITH_CODE:
1605  * @TN: The name of the new type, in Camel case.
1606  * @t_n: The name of the new type in lowercase, with words separated by &#39;_&#39;.
1607  * @T_P: The #GType of the parent type.
1608  * @_C_: Custom code that gets inserted in the *_get_type() function.
1609  *
1610  * A convenience macro for type implementations.
1611  * Similar to G_DEFINE_TYPE(), but allows you to insert custom code into the
1612  * *_get_type() function, e.g. interface implementations via G_IMPLEMENT_INTERFACE().
1613  * See G_DEFINE_TYPE_EXTENDED() for an example.
1614  *
1615  * Since: 2.4
1616  */
1617 #define G_DEFINE_TYPE_WITH_CODE(TN, t_n, T_P, _C_)      _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, 0) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1618 /**
1619  * G_DEFINE_TYPE_WITH_PRIVATE:
1620  * @TN: The name of the new type, in Camel case.
1621  * @t_n: The name of the new type, in lowercase, with words
1622  *  separated by &#39;_&#39;.
1623  * @T_P: The #GType of the parent type.
1624  *
1625  * A convenience macro for type implementations, which declares a class
1626  * initialization function, an instance initialization function (see #GTypeInfo
1627  * for information about these), a static variable named `t_n_parent_class`
1628  * pointing to the parent class, and adds private instance data to the type.
1629  * Furthermore, it defines a *_get_type() function. See G_DEFINE_TYPE_EXTENDED()
1630  * for an example.
1631  *
1632  * Note that private structs added with this macros must have a struct
1633  * name of the form @TN Private.
1634  *
<span class="line-added">1635  * The private instance data can be retrieved using the automatically generated</span>
<span class="line-added">1636  * getter function `t_n_get_instance_private()`.</span>
<span class="line-added">1637  *</span>
<span class="line-added">1638  * See also: G_ADD_PRIVATE()</span>
<span class="line-added">1639  *</span>
1640  * Since: 2.38
1641  */
1642 #define G_DEFINE_TYPE_WITH_PRIVATE(TN, t_n, T_P)            G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, 0, G_ADD_PRIVATE (TN))
1643 /**
1644  * G_DEFINE_ABSTRACT_TYPE:
1645  * @TN: The name of the new type, in Camel case.
1646  * @t_n: The name of the new type, in lowercase, with words
1647  *  separated by &#39;_&#39;.
1648  * @T_P: The #GType of the parent type.
1649  *
1650  * A convenience macro for type implementations.
1651  * Similar to G_DEFINE_TYPE(), but defines an abstract type.
1652  * See G_DEFINE_TYPE_EXTENDED() for an example.
1653  *
1654  * Since: 2.4
1655  */
<span class="line-modified">1656 #define G_DEFINE_ABSTRACT_TYPE(TN, t_n, T_P)        G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT, {})</span>
1657 /**
1658  * G_DEFINE_ABSTRACT_TYPE_WITH_CODE:
1659  * @TN: The name of the new type, in Camel case.
1660  * @t_n: The name of the new type, in lowercase, with words
1661  *  separated by &#39;_&#39;.
1662  * @T_P: The #GType of the parent type.
1663  * @_C_: Custom code that gets inserted in the @type_name_get_type() function.
1664  *
1665  * A convenience macro for type implementations.
1666  * Similar to G_DEFINE_TYPE_WITH_CODE(), but defines an abstract type and
1667  * allows you to insert custom code into the *_get_type() function, e.g.
1668  * interface implementations  via G_IMPLEMENT_INTERFACE().
1669  * See G_DEFINE_TYPE_EXTENDED() for an example.
1670  *
1671  * Since: 2.4
1672  */
1673 #define G_DEFINE_ABSTRACT_TYPE_WITH_CODE(TN, t_n, T_P, _C_) _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1674 /**
1675  * G_DEFINE_ABSTRACT_TYPE_WITH_PRIVATE:
1676  * @TN: The name of the new type, in Camel case.
</pre>
<hr />
<pre>
1684  * Since: 2.38
1685  */
1686 #define G_DEFINE_ABSTRACT_TYPE_WITH_PRIVATE(TN, t_n, T_P)   G_DEFINE_TYPE_EXTENDED (TN, t_n, T_P, G_TYPE_FLAG_ABSTRACT, G_ADD_PRIVATE (TN))
1687 /**
1688  * G_DEFINE_TYPE_EXTENDED:
1689  * @TN: The name of the new type, in Camel case.
1690  * @t_n: The name of the new type, in lowercase, with words
1691  *    separated by &#39;_&#39;.
1692  * @T_P: The #GType of the parent type.
1693  * @_f_: #GTypeFlags to pass to g_type_register_static()
1694  * @_C_: Custom code that gets inserted in the *_get_type() function.
1695  *
1696  * The most general convenience macro for type implementations, on which
1697  * G_DEFINE_TYPE(), etc are based.
1698  *
1699  * |[&lt;!-- language=&quot;C&quot; --&gt;
1700  * G_DEFINE_TYPE_EXTENDED (GtkGadget,
1701  *                         gtk_gadget,
1702  *                         GTK_TYPE_WIDGET,
1703  *                         0,
<span class="line-added">1704  *                         G_ADD_PRIVATE (GtkGadget)</span>
1705  *                         G_IMPLEMENT_INTERFACE (TYPE_GIZMO,
1706  *                                                gtk_gadget_gizmo_init));
1707  * ]|
1708  * expands to
1709  * |[&lt;!-- language=&quot;C&quot; --&gt;
1710  * static void     gtk_gadget_init       (GtkGadget      *self);
1711  * static void     gtk_gadget_class_init (GtkGadgetClass *klass);
1712  * static gpointer gtk_gadget_parent_class = NULL;
<span class="line-added">1713  * static gint     GtkGadget_private_offset;</span>
1714  * static void     gtk_gadget_class_intern_init (gpointer klass)
1715  * {
1716  *   gtk_gadget_parent_class = g_type_class_peek_parent (klass);
<span class="line-added">1717  *   if (GtkGadget_private_offset != 0)</span>
<span class="line-added">1718  *     g_type_class_adjust_private_offset (klass, &amp;GtkGadget_private_offset);</span>
1719  *   gtk_gadget_class_init ((GtkGadgetClass*) klass);
1720  * }
<span class="line-added">1721  * static inline gpointer gtk_gadget_get_instance_private (GtkGadget *self)</span>
<span class="line-added">1722  * {</span>
<span class="line-added">1723  *   return (G_STRUCT_MEMBER_P (self, GtkGadget_private_offset));</span>
<span class="line-added">1724  * }</span>
1725  *
1726  * GType
1727  * gtk_gadget_get_type (void)
1728  * {
1729  *   static volatile gsize g_define_type_id__volatile = 0;
1730  *   if (g_once_init_enter (&amp;g_define_type_id__volatile))
1731  *     {
1732  *       GType g_define_type_id =
1733  *         g_type_register_static_simple (GTK_TYPE_WIDGET,
1734  *                                        g_intern_static_string (&quot;GtkGadget&quot;),
1735  *                                        sizeof (GtkGadgetClass),
1736  *                                        (GClassInitFunc) gtk_gadget_class_intern_init,
1737  *                                        sizeof (GtkGadget),
1738  *                                        (GInstanceInitFunc) gtk_gadget_init,
1739  *                                        0);
1740  *       {
<span class="line-added">1741  *         GtkGadget_private_offset =</span>
<span class="line-added">1742  *           g_type_add_instance_private (g_define_type_id, sizeof (GtkGadgetPrivate));</span>
<span class="line-added">1743  *       }</span>
<span class="line-added">1744  *       {</span>
1745  *         const GInterfaceInfo g_implement_interface_info = {
1746  *           (GInterfaceInitFunc) gtk_gadget_gizmo_init
1747  *         };
1748  *         g_type_add_interface_static (g_define_type_id, TYPE_GIZMO, &amp;g_implement_interface_info);
1749  *       }
1750  *       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id);
1751  *     }
1752  *   return g_define_type_id__volatile;
1753  * }
1754  * ]|
1755  * The only pieces which have to be manually provided are the definitions of
1756  * the instance and class structure and the definitions of the instance and
1757  * class init functions.
1758  *
1759  * Since: 2.4
1760  */
1761 #define G_DEFINE_TYPE_EXTENDED(TN, t_n, T_P, _f_, _C_)      _G_DEFINE_TYPE_EXTENDED_BEGIN (TN, t_n, T_P, _f_) {_C_;} _G_DEFINE_TYPE_EXTENDED_END()
1762 
1763 /**
1764  * G_DEFINE_INTERFACE:
1765  * @TN: The name of the new type, in Camel case.
1766  * @t_n: The name of the new type, in lowercase, with words separated by &#39;_&#39;.
1767  * @T_P: The #GType of the prerequisite type for the interface, or 0
1768  * (%G_TYPE_INVALID) for no prerequisite type.
1769  *
1770  * A convenience macro for #GTypeInterface definitions, which declares
1771  * a default vtable initialization function and defines a *_get_type()
1772  * function.
1773  *
1774  * The macro expects the interface initialization function to have the
1775  * name `t_n ## _default_init`, and the interface structure to have the
1776  * name `TN ## Interface`.
1777  *
<span class="line-added">1778  * The initialization function has signature</span>
<span class="line-added">1779  * `static void t_n ## _default_init (TypeName##Interface *klass);`, rather than</span>
<span class="line-added">1780  * the full #GInterfaceInitFunc signature, for brevity and convenience. If you</span>
<span class="line-added">1781  * need to use an initialization function with an `iface_data` argument, you</span>
<span class="line-added">1782  * must write the #GTypeInterface definitions manually.</span>
<span class="line-added">1783  *</span>
1784  * Since: 2.24
1785  */
<span class="line-modified">1786 #define G_DEFINE_INTERFACE(TN, t_n, T_P)        G_DEFINE_INTERFACE_WITH_CODE(TN, t_n, T_P, ;)</span>
1787 
1788 /**
1789  * G_DEFINE_INTERFACE_WITH_CODE:
1790  * @TN: The name of the new type, in Camel case.
1791  * @t_n: The name of the new type, in lowercase, with words separated by &#39;_&#39;.
1792  * @T_P: The #GType of the prerequisite type for the interface, or 0
1793  * (%G_TYPE_INVALID) for no prerequisite type.
1794  * @_C_: Custom code that gets inserted in the *_get_type() function.
1795  *
1796  * A convenience macro for #GTypeInterface definitions. Similar to
1797  * G_DEFINE_INTERFACE(), but allows you to insert custom code into the
1798  * *_get_type() function, e.g. additional interface implementations
1799  * via G_IMPLEMENT_INTERFACE(), or additional prerequisite types. See
1800  * G_DEFINE_TYPE_EXTENDED() for a similar example using
1801  * G_DEFINE_TYPE_WITH_CODE().
1802  *
1803  * Since: 2.24
1804  */
1805 #define G_DEFINE_INTERFACE_WITH_CODE(TN, t_n, T_P, _C_)     _G_DEFINE_INTERFACE_EXTENDED_BEGIN(TN, t_n, T_P) {_C_;} _G_DEFINE_INTERFACE_EXTENDED_END()
1806 
1807 /**
1808  * G_IMPLEMENT_INTERFACE:
1809  * @TYPE_IFACE: The #GType of the interface to add
<span class="line-modified">1810  * @iface_init: (type GInterfaceInitFunc): The interface init function, of type #GInterfaceInitFunc</span>
1811  *
1812  * A convenience macro to ease interface addition in the `_C_` section
1813  * of G_DEFINE_TYPE_WITH_CODE() or G_DEFINE_ABSTRACT_TYPE_WITH_CODE().
1814  * See G_DEFINE_TYPE_EXTENDED() for an example.
1815  *
1816  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1817  * macros, since it depends on variable names from those macros.
1818  *
1819  * Since: 2.4
1820  */
1821 #define G_IMPLEMENT_INTERFACE(TYPE_IFACE, iface_init)       { \
1822   const GInterfaceInfo g_implement_interface_info = { \
1823     (GInterfaceInitFunc)(void (*)(void)) iface_init, NULL, NULL \
1824   }; \
1825   g_type_add_interface_static (g_define_type_id, TYPE_IFACE, &amp;g_implement_interface_info); \
1826 }
1827 
1828 /**
1829  * G_ADD_PRIVATE:
1830  * @TypeName: the name of the type in CamelCase
</pre>
<hr />
<pre>
1868  *
1869  *   void
1870  *   my_object_set_bar (MyObject *obj,
1871  *                      gint      bar)
1872  *   {
1873  *     MyObjectPrivate *priv = my_object_get_instance_private (obj);
1874  *
1875  *     g_return_if_fail (MY_IS_OBJECT (obj));
1876  *
1877  *     if (priv-&gt;bar != bar)
1878  *       priv-&gt;bar = bar;
1879  *   }
1880  * ]|
1881  *
1882  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1883  * macros, since it depends on variable names from those macros.
1884  *
1885  * Also note that private structs added with these macros must have a struct
1886  * name of the form `TypeNamePrivate`.
1887  *
<span class="line-modified">1888  * It is safe to call the `_get_instance_private` function on %NULL or invalid</span>
<span class="line-modified">1889  * objects since it&#39;s only adding an offset to the instance pointer. In that</span>
<span class="line-modified">1890  * case the returned pointer must not be dereferenced.</span>
1891  *
1892  * Since: 2.38
1893  */
1894 #define G_ADD_PRIVATE(TypeName) { \
1895   TypeName##_private_offset = \
1896     g_type_add_instance_private (g_define_type_id, sizeof (TypeName##Private)); \
1897 }
1898 
1899 /**
1900  * G_PRIVATE_OFFSET:
1901  * @TypeName: the name of the type in CamelCase
1902  * @field: the name of the field in the private data structure
1903  *
1904  * Evaluates to the offset of the @field inside the instance private data
1905  * structure for @TypeName.
1906  *
1907  * Note that this macro can only be used together with the G_DEFINE_TYPE_*
1908  * and G_ADD_PRIVATE() macros, since it depends on variable names from
1909  * those macros.
1910  *
</pre>
<hr />
<pre>
1986 \
1987 G_GNUC_UNUSED \
1988 static inline gpointer \
1989 type_name##_get_instance_private (TypeName *self) \
1990 { \
1991   return (G_STRUCT_MEMBER_P (self, TypeName##_private_offset)); \
1992 } \
1993 \
1994 GType \
1995 type_name##_get_type (void) \
1996 { \
1997   static volatile gsize g_define_type_id__volatile = 0;
1998   /* Prelude goes here */
1999 
2000 /* Added for _G_DEFINE_TYPE_EXTENDED_WITH_PRELUDE */
2001 #define _G_DEFINE_TYPE_EXTENDED_BEGIN_REGISTER(TypeName, type_name, TYPE_PARENT, flags) \
2002   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
2003     { \
2004       GType g_define_type_id = type_name##_get_type_once (); \
2005       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
<span class="line-modified">2006     }         \</span>
<span class="line-modified">2007   return g_define_type_id__volatile;  \</span>
2008 } /* closes type_name##_get_type() */ \
2009 \
2010 G_GNUC_NO_INLINE \
2011 static GType \
2012 type_name##_get_type_once (void) \
2013 { \
2014   GType g_define_type_id = \
2015         g_type_register_static_simple (TYPE_PARENT, \
2016                                        g_intern_static_string (#TypeName), \
2017                                        sizeof (TypeName##Class), \
2018                                        (GClassInitFunc)(void (*)(void)) type_name##_class_intern_init, \
2019                                        sizeof (TypeName), \
2020                                        (GInstanceInitFunc)(void (*)(void)) type_name##_init, \
2021                                        (GTypeFlags) flags); \
2022     { /* custom code follows */
<span class="line-modified">2023 #define _G_DEFINE_TYPE_EXTENDED_END() \</span>
<span class="line-modified">2024       /* following custom code */ \</span>
<span class="line-modified">2025     }         \</span>
2026   return g_define_type_id; \
2027 } /* closes type_name##_get_type_once() */
2028 
2029 /* This was defined before we had G_DEFINE_TYPE_WITH_CODE_AND_PRELUDE, it&#39;s simplest
2030  * to keep it.
2031  */
2032 #define _G_DEFINE_TYPE_EXTENDED_BEGIN(TypeName, type_name, TYPE_PARENT, flags) \
2033   _G_DEFINE_TYPE_EXTENDED_BEGIN_PRE(TypeName, type_name, TYPE_PARENT) \
2034   _G_DEFINE_TYPE_EXTENDED_BEGIN_REGISTER(TypeName, type_name, TYPE_PARENT, flags) \
2035 
2036 #define _G_DEFINE_INTERFACE_EXTENDED_BEGIN(TypeName, type_name, TYPE_PREREQ) \
2037 \
2038 static void     type_name##_default_init        (TypeName##Interface *klass); \
2039 \
2040 GType \
2041 type_name##_get_type (void) \
2042 { \
2043   static volatile gsize g_define_type_id__volatile = 0; \
2044   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
2045     { \
2046       GType g_define_type_id = \
2047         g_type_register_static_simple (G_TYPE_INTERFACE, \
2048                                        g_intern_static_string (#TypeName), \
2049                                        sizeof (TypeName##Interface), \
2050                                        (GClassInitFunc)(void (*)(void)) type_name##_default_init, \
2051                                        0, \
2052                                        (GInstanceInitFunc)NULL, \
2053                                        (GTypeFlags) 0); \
<span class="line-modified">2054       if (TYPE_PREREQ != G_TYPE_INVALID) \</span>
2055         g_type_interface_add_prerequisite (g_define_type_id, TYPE_PREREQ); \
2056       { /* custom code follows */
2057 #define _G_DEFINE_INTERFACE_EXTENDED_END()  \
<span class="line-modified">2058         /* following custom code */   \</span>
<span class="line-modified">2059       }           \</span>
2060       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
<span class="line-modified">2061     }           \</span>
<span class="line-modified">2062   return g_define_type_id__volatile;      \</span>
2063 } /* closes type_name##_get_type() */
2064 
2065 /**
2066  * G_DEFINE_BOXED_TYPE:
2067  * @TypeName: The name of the new type, in Camel case
2068  * @type_name: The name of the new type, in lowercase, with words
2069  *  separated by &#39;_&#39;
2070  * @copy_func: the #GBoxedCopyFunc for the new type
2071  * @free_func: the #GBoxedFreeFunc for the new type
2072  *
2073  * A convenience macro for boxed type implementations, which defines a
2074  * type_name_get_type() function registering the boxed type.
2075  *
2076  * Since: 2.26
2077  */
2078 #define G_DEFINE_BOXED_TYPE(TypeName, type_name, copy_func, free_func) G_DEFINE_BOXED_TYPE_WITH_CODE (TypeName, type_name, copy_func, free_func, {})
2079 /**
2080  * G_DEFINE_BOXED_TYPE_WITH_CODE:
2081  * @TypeName: The name of the new type, in Camel case
2082  * @type_name: The name of the new type, in lowercase, with words
</pre>
<hr />
<pre>
2206 { \
2207   static volatile gsize g_define_type_id__volatile = 0; \
2208   if (g_once_init_enter (&amp;g_define_type_id__volatile))  \
2209     { \
2210       GType g_define_type_id = type_name##_get_type_once (); \
2211       g_once_init_leave (&amp;g_define_type_id__volatile, g_define_type_id); \
2212     } \
2213   return g_define_type_id__volatile; \
2214 } \
2215 \
2216 G_GNUC_NO_INLINE \
2217 static GType \
2218 type_name##_get_type_once (void) \
2219 { \
2220   GType g_define_type_id = \
2221     g_pointer_type_register_static (g_intern_static_string (#TypeName)); \
2222   { /* custom code follows */
2223 
2224 /* --- protected (for fundamental type implementations) --- */
2225 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2226 GTypePlugin*   g_type_get_plugin    (GType         type);</span>
2227 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2228 GTypePlugin*   g_type_interface_get_plugin  (GType         instance_type,</span>
<span class="line-modified">2229              GType               interface_type);</span>
2230 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2231 GType    g_type_fundamental_next  (void);</span>
2232 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2233 GType    g_type_fundamental   (GType         type_id);</span>
2234 GLIB_AVAILABLE_IN_ALL
2235 GTypeInstance*   g_type_create_instance         (GType               type);
2236 GLIB_AVAILABLE_IN_ALL
2237 void             g_type_free_instance           (GTypeInstance      *instance);
2238 
2239 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2240 void     g_type_add_class_cache_func    (gpointer      cache_data,</span>
<span class="line-modified">2241              GTypeClassCacheFunc cache_func);</span>
2242 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2243 void     g_type_remove_class_cache_func (gpointer      cache_data,</span>
<span class="line-modified">2244              GTypeClassCacheFunc cache_func);</span>
2245 GLIB_AVAILABLE_IN_ALL
2246 void             g_type_class_unref_uncached    (gpointer            g_class);
2247 
2248 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2249 void             g_type_add_interface_check     (gpointer          check_data,</span>
<span class="line-modified">2250              GTypeInterfaceCheckFunc check_func);</span>
2251 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2252 void             g_type_remove_interface_check  (gpointer          check_data,</span>
<span class="line-modified">2253              GTypeInterfaceCheckFunc check_func);</span>
2254 
2255 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2256 GTypeValueTable* g_type_value_table_peek        (GType         type);</span>
2257 
2258 
2259 /*&lt; private &gt;*/
2260 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2261 gboolean   g_type_check_instance          (GTypeInstance      *instance) G_GNUC_PURE;</span>
2262 GLIB_AVAILABLE_IN_ALL
2263 GTypeInstance*   g_type_check_instance_cast     (GTypeInstance      *instance,
<span class="line-modified">2264              GType               iface_type);</span>
2265 GLIB_AVAILABLE_IN_ALL
2266 gboolean         g_type_check_instance_is_a (GTypeInstance      *instance,
<span class="line-modified">2267              GType               iface_type) G_GNUC_PURE;</span>
2268 GLIB_AVAILABLE_IN_2_42
2269 gboolean         g_type_check_instance_is_fundamentally_a (GTypeInstance *instance,
2270                                                            GType          fundamental_type) G_GNUC_PURE;
2271 GLIB_AVAILABLE_IN_ALL
2272 GTypeClass*      g_type_check_class_cast        (GTypeClass         *g_class,
<span class="line-modified">2273              GType               is_a_type);</span>
2274 GLIB_AVAILABLE_IN_ALL
2275 gboolean         g_type_check_class_is_a        (GTypeClass         *g_class,
<span class="line-modified">2276              GType               is_a_type) G_GNUC_PURE;</span>
2277 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2278 gboolean   g_type_check_is_value_type     (GType         type) G_GNUC_CONST;</span>
2279 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2280 gboolean   g_type_check_value             (const GValue       *value) G_GNUC_PURE;</span>
2281 GLIB_AVAILABLE_IN_ALL
<span class="line-modified">2282 gboolean   g_type_check_value_holds (const GValue     *value,</span>
<span class="line-modified">2283              GType         type) G_GNUC_PURE;</span>
2284 GLIB_AVAILABLE_IN_ALL
2285 gboolean         g_type_test_flags              (GType               type,
<span class="line-modified">2286              guint               flags) G_GNUC_CONST;</span>
2287 
2288 
2289 /* --- debugging functions --- */
2290 GLIB_AVAILABLE_IN_ALL
2291 const gchar *    g_type_name_from_instance      (GTypeInstance  *instance);
2292 GLIB_AVAILABLE_IN_ALL
2293 const gchar *    g_type_name_from_class         (GTypeClass *g_class);
2294 
2295 
2296 /* --- implementation bits --- */
2297 #ifndef G_DISABLE_CAST_CHECKS
2298 #  define _G_TYPE_CIC(ip, gt, ct) \
2299     ((ct*) g_type_check_instance_cast ((GTypeInstance*) ip, gt))
2300 #  define _G_TYPE_CCC(cp, gt, ct) \
2301     ((ct*) g_type_check_class_cast ((GTypeClass*) cp, gt))
2302 #else /* G_DISABLE_CAST_CHECKS */
2303 #  define _G_TYPE_CIC(ip, gt, ct)       ((ct*) ip)
2304 #  define _G_TYPE_CCC(cp, gt, ct)       ((ct*) cp)
2305 #endif /* G_DISABLE_CAST_CHECKS */
<span class="line-modified">2306 #define _G_TYPE_CHI(ip)     (g_type_check_instance ((GTypeInstance*) ip))</span>
<span class="line-modified">2307 #define _G_TYPE_CHV(vl)     (g_type_check_value ((GValue*) vl))</span>
2308 #define _G_TYPE_IGC(ip, gt, ct)         ((ct*) (((GTypeInstance*) ip)-&gt;g_class))
2309 #define _G_TYPE_IGI(ip, gt, ct)         ((ct*) g_type_interface_peek (((GTypeInstance*) ip)-&gt;g_class, gt))
2310 #define _G_TYPE_CIFT(ip, ft)            (g_type_check_instance_is_fundamentally_a ((GTypeInstance*) ip, ft))
2311 #ifdef  __GNUC__
2312 #  define _G_TYPE_CIT(ip, gt)             (G_GNUC_EXTENSION ({ \
2313   GTypeInstance *__inst = (GTypeInstance*) ip; GType __t = gt; gboolean __r; \
2314   if (!__inst) \
2315     __r = FALSE; \
2316   else if (__inst-&gt;g_class &amp;&amp; __inst-&gt;g_class-&gt;g_type == __t) \
2317     __r = TRUE; \
2318   else \
2319     __r = g_type_check_instance_is_a (__inst, __t); \
2320   __r; \
2321 }))
2322 #  define _G_TYPE_CCT(cp, gt)             (G_GNUC_EXTENSION ({ \
2323   GTypeClass *__class = (GTypeClass*) cp; GType __t = gt; gboolean __r; \
2324   if (!__class) \
2325     __r = FALSE; \
2326   else if (__class-&gt;g_type == __t) \
2327     __r = TRUE; \
2328   else \
2329     __r = g_type_check_class_is_a (__class, __t); \
2330   __r; \
2331 }))
2332 #  define _G_TYPE_CVH(vl, gt)             (G_GNUC_EXTENSION ({ \
2333   const GValue *__val = (const GValue*) vl; GType __t = gt; gboolean __r; \
2334   if (!__val) \
2335     __r = FALSE; \
<span class="line-modified">2336   else if (__val-&gt;g_type == __t)    \</span>
2337     __r = TRUE; \
2338   else \
2339     __r = g_type_check_value_holds (__val, __t); \
2340   __r; \
2341 }))
2342 #else  /* !__GNUC__ */
2343 #  define _G_TYPE_CIT(ip, gt)             (g_type_check_instance_is_a ((GTypeInstance*) ip, gt))
2344 #  define _G_TYPE_CCT(cp, gt)             (g_type_check_class_is_a ((GTypeClass*) cp, gt))
2345 #  define _G_TYPE_CVH(vl, gt)             (g_type_check_value_holds ((const GValue*) vl, gt))
2346 #endif /* !__GNUC__ */
2347 /**
2348  * G_TYPE_FLAG_RESERVED_ID_BIT:
2349  *
2350  * A bit in the type number that&#39;s supposed to be left untouched.
2351  */
2352 #define G_TYPE_FLAG_RESERVED_ID_BIT ((GType) (1 &lt;&lt; 0))
2353 
2354 G_END_DECLS
2355 
2356 #endif /* __G_TYPE_H__ */
</pre>
</td>
</tr>
</table>
<center><a href="gtype.c.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="gtypemodule.c.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>