<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/collationkeys.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="collationfcd.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="collationruleparser.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/collationkeys.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
386                     if(prevSecondary &lt; Collation::COMMON_WEIGHT16) {
387                         b = SEC_COMMON_LOW + remainder;
388                     } else {
389                         b = SEC_COMMON_HIGH - remainder;
390                     }
391                     secondaries.appendByte(b);
392                     commonSecondaries -= remainder;
393                     // commonSecondaries is now a multiple of SEC_COMMON_MAX_COUNT.
394                     while(commonSecondaries &gt; 0) {  // same as &gt;= SEC_COMMON_MAX_COUNT
395                         secondaries.appendByte(SEC_COMMON_MIDDLE);
396                         commonSecondaries -= SEC_COMMON_MAX_COUNT;
397                     }
398                     // commonSecondaries == 0
399                 }
400                 if(0 &lt; p &amp;&amp; p &lt;= Collation::MERGE_SEPARATOR_PRIMARY) {
401                     // The backwards secondary level compares secondary weights backwards
402                     // within segments separated by the merge separator (U+FFFE).
403                     uint8_t *secs = secondaries.data();
404                     int32_t last = secondaries.length() - 1;
405                     if(secSegmentStart &lt; last) {
<span class="line-modified">406                         uint8_t *p = secs + secSegmentStart;</span>
<span class="line-modified">407                         uint8_t *q = secs + last;</span>
408                         do {
<span class="line-modified">409                             uint8_t b = *p;</span>
<span class="line-modified">410                             *p++ = *q;</span>
<span class="line-modified">411                             *q-- = b;</span>
<span class="line-modified">412                         } while(p &lt; q);</span>
413                     }
414                     secondaries.appendByte(p == Collation::NO_CE_PRIMARY ?
415                         Collation::LEVEL_SEPARATOR_BYTE : Collation::MERGE_SEPARATOR_BYTE);
416                     prevSecondary = 0;
417                     secSegmentStart = secondaries.length();
418                 } else {
419                     secondaries.appendReverseWeight16(s);
420                     prevSecondary = s;
421                 }
422             }
423         }
424 
425         if((levels &amp; Collation::CASE_LEVEL_FLAG) != 0) {
426             if((CollationSettings::getStrength(options) == UCOL_PRIMARY) ?
427                     p == 0 : lower32 &lt;= 0xffff) {
428                 // Primary+caseLevel: Ignore case level weights of primary ignorables.
429                 // Otherwise: Ignore case level weights of secondary ignorables.
430                 // For details see the comments in the CollationCompare class.
431             } else {
432                 uint32_t c = (lower32 &gt;&gt; 8) &amp; 0xff;  // case bits &amp; tertiary lead byte
</pre>
</td>
<td>
<hr />
<pre>
386                     if(prevSecondary &lt; Collation::COMMON_WEIGHT16) {
387                         b = SEC_COMMON_LOW + remainder;
388                     } else {
389                         b = SEC_COMMON_HIGH - remainder;
390                     }
391                     secondaries.appendByte(b);
392                     commonSecondaries -= remainder;
393                     // commonSecondaries is now a multiple of SEC_COMMON_MAX_COUNT.
394                     while(commonSecondaries &gt; 0) {  // same as &gt;= SEC_COMMON_MAX_COUNT
395                         secondaries.appendByte(SEC_COMMON_MIDDLE);
396                         commonSecondaries -= SEC_COMMON_MAX_COUNT;
397                     }
398                     // commonSecondaries == 0
399                 }
400                 if(0 &lt; p &amp;&amp; p &lt;= Collation::MERGE_SEPARATOR_PRIMARY) {
401                     // The backwards secondary level compares secondary weights backwards
402                     // within segments separated by the merge separator (U+FFFE).
403                     uint8_t *secs = secondaries.data();
404                     int32_t last = secondaries.length() - 1;
405                     if(secSegmentStart &lt; last) {
<span class="line-modified">406                         uint8_t *q = secs + secSegmentStart;</span>
<span class="line-modified">407                         uint8_t *r = secs + last;</span>
408                         do {
<span class="line-modified">409                             uint8_t b = *q;</span>
<span class="line-modified">410                             *q++ = *r;</span>
<span class="line-modified">411                             *r-- = b;</span>
<span class="line-modified">412                         } while(q &lt; r);</span>
413                     }
414                     secondaries.appendByte(p == Collation::NO_CE_PRIMARY ?
415                         Collation::LEVEL_SEPARATOR_BYTE : Collation::MERGE_SEPARATOR_BYTE);
416                     prevSecondary = 0;
417                     secSegmentStart = secondaries.length();
418                 } else {
419                     secondaries.appendReverseWeight16(s);
420                     prevSecondary = s;
421                 }
422             }
423         }
424 
425         if((levels &amp; Collation::CASE_LEVEL_FLAG) != 0) {
426             if((CollationSettings::getStrength(options) == UCOL_PRIMARY) ?
427                     p == 0 : lower32 &lt;= 0xffff) {
428                 // Primary+caseLevel: Ignore case level weights of primary ignorables.
429                 // Otherwise: Ignore case level weights of secondary ignorables.
430                 // For details see the comments in the CollationCompare class.
431             } else {
432                 uint32_t c = (lower32 &gt;&gt; 8) &amp; 0xff;  // case bits &amp; tertiary lead byte
</pre>
</td>
</tr>
</table>
<center><a href="collationfcd.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="collationruleparser.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>