<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/tools/toolutil/udbgutil.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ucmstate.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="unewdata.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/tools/toolutil/udbgutil.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
383 typedef int32_t U_CALLCONV USystemParameterCallback(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status);
384 
385 struct USystemParams {
386   const char *paramName;
387   USystemParameterCallback *paramFunction;
388   const char *paramStr;
389   int32_t paramInt;
390 };
391 
392 /* parameter types */
393 U_CAPI  int32_t
394 paramEmpty(const USystemParams * /* param */, char *target, int32_t targetCapacity, UErrorCode *status) {
395   if(U_FAILURE(*status))return 0;
396   return u_terminateChars(target, targetCapacity, 0, status);
397 }
398 
399 U_CAPI  int32_t
400 paramStatic(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status) {
401   if(param-&gt;paramStr==NULL) return paramEmpty(param,target,targetCapacity,status);
402   if(U_FAILURE(*status))return 0;
<span class="line-modified">403   int32_t len = uprv_strlen(param-&gt;paramStr);</span>
404   if(target!=NULL) {
405     uprv_strncpy(target,param-&gt;paramStr,uprv_min(len,targetCapacity));
406   }
407   return u_terminateChars(target, targetCapacity, len, status);
408 }
409 
410 static const char *nullString = &quot;(null)&quot;;
411 
412 static int32_t stringToStringBuffer(char *target, int32_t targetCapacity, const char *str, UErrorCode *status) {
413   if(str==NULL) str=nullString;
414 
<span class="line-modified">415   int32_t len = uprv_strlen(str);</span>
416   if (U_SUCCESS(*status)) {
417     if(target!=NULL) {
418       uprv_strncpy(target,str,uprv_min(len,targetCapacity));
419     }
420   } else {
421     const char *s = u_errorName(*status);
<span class="line-modified">422     len = uprv_strlen(s);</span>
423     if(target!=NULL) {
424       uprv_strncpy(target,s,uprv_min(len,targetCapacity));
425     }
426   }
427   return u_terminateChars(target, targetCapacity, len, status);
428 }
429 
430 static int32_t integerToStringBuffer(char *target, int32_t targetCapacity, int32_t n, int32_t radix, UErrorCode *status) {
431   if(U_FAILURE(*status)) return 0;
432   char str[300];
433   T_CString_integerToString(str,n,radix);
434   return stringToStringBuffer(target,targetCapacity,str,status);
435 }
436 
437 U_CAPI  int32_t
438 paramInteger(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status) {
439   if(U_FAILURE(*status))return 0;
440   if(param-&gt;paramStr==NULL || param-&gt;paramStr[0]==&#39;d&#39;) {
441     return integerToStringBuffer(target,targetCapacity,param-&gt;paramInt, 10,status);
442   } else if(param-&gt;paramStr[0]==&#39;x&#39;) {
</pre>
</td>
<td>
<hr />
<pre>
383 typedef int32_t U_CALLCONV USystemParameterCallback(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status);
384 
385 struct USystemParams {
386   const char *paramName;
387   USystemParameterCallback *paramFunction;
388   const char *paramStr;
389   int32_t paramInt;
390 };
391 
392 /* parameter types */
393 U_CAPI  int32_t
394 paramEmpty(const USystemParams * /* param */, char *target, int32_t targetCapacity, UErrorCode *status) {
395   if(U_FAILURE(*status))return 0;
396   return u_terminateChars(target, targetCapacity, 0, status);
397 }
398 
399 U_CAPI  int32_t
400 paramStatic(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status) {
401   if(param-&gt;paramStr==NULL) return paramEmpty(param,target,targetCapacity,status);
402   if(U_FAILURE(*status))return 0;
<span class="line-modified">403   int32_t len = static_cast&lt;int32_t&gt;(uprv_strlen(param-&gt;paramStr));</span>
404   if(target!=NULL) {
405     uprv_strncpy(target,param-&gt;paramStr,uprv_min(len,targetCapacity));
406   }
407   return u_terminateChars(target, targetCapacity, len, status);
408 }
409 
410 static const char *nullString = &quot;(null)&quot;;
411 
412 static int32_t stringToStringBuffer(char *target, int32_t targetCapacity, const char *str, UErrorCode *status) {
413   if(str==NULL) str=nullString;
414 
<span class="line-modified">415   int32_t len = static_cast&lt;int32_t&gt;(uprv_strlen(str));</span>
416   if (U_SUCCESS(*status)) {
417     if(target!=NULL) {
418       uprv_strncpy(target,str,uprv_min(len,targetCapacity));
419     }
420   } else {
421     const char *s = u_errorName(*status);
<span class="line-modified">422     len = static_cast&lt;int32_t&gt;(uprv_strlen(s));</span>
423     if(target!=NULL) {
424       uprv_strncpy(target,s,uprv_min(len,targetCapacity));
425     }
426   }
427   return u_terminateChars(target, targetCapacity, len, status);
428 }
429 
430 static int32_t integerToStringBuffer(char *target, int32_t targetCapacity, int32_t n, int32_t radix, UErrorCode *status) {
431   if(U_FAILURE(*status)) return 0;
432   char str[300];
433   T_CString_integerToString(str,n,radix);
434   return stringToStringBuffer(target,targetCapacity,str,status);
435 }
436 
437 U_CAPI  int32_t
438 paramInteger(const USystemParams *param, char *target, int32_t targetCapacity, UErrorCode *status) {
439   if(U_FAILURE(*status))return 0;
440   if(param-&gt;paramStr==NULL || param-&gt;paramStr[0]==&#39;d&#39;) {
441     return integerToStringBuffer(target,targetCapacity,param-&gt;paramInt, 10,status);
442   } else if(param-&gt;paramStr[0]==&#39;x&#39;) {
</pre>
</td>
</tr>
</table>
<center><a href="ucmstate.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="unewdata.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>