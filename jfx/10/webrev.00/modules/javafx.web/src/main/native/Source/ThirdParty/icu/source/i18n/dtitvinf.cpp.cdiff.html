<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/dtitvinf.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="dtitvfmt.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="dtptngen.cpp.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/dtitvinf.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 324,11 ***</span>
      UCalendarDateFields validateAndProcessPatternLetter(const char *patternLetter) {
          // Check that patternLetter is just one letter
          char c0;
          if ((c0 = patternLetter[0]) != 0 &amp;&amp; patternLetter[1] == 0) {
              // Check that the pattern letter is accepted
<span class="line-modified">!             if (c0 == &#39;y&#39;) {</span>
                  return UCAL_YEAR;
              } else if (c0 == &#39;M&#39;) {
                  return UCAL_MONTH;
              } else if (c0 == &#39;d&#39;) {
                  return UCAL_DATE;
<span class="line-new-header">--- 324,13 ---</span>
      UCalendarDateFields validateAndProcessPatternLetter(const char *patternLetter) {
          // Check that patternLetter is just one letter
          char c0;
          if ((c0 = patternLetter[0]) != 0 &amp;&amp; patternLetter[1] == 0) {
              // Check that the pattern letter is accepted
<span class="line-modified">!             if (c0 == &#39;G&#39;) {</span>
<span class="line-added">+                 return UCAL_ERA;</span>
<span class="line-added">+             } else if (c0 == &#39;y&#39;) {</span>
                  return UCAL_YEAR;
              } else if (c0 == &#39;M&#39;) {
                  return UCAL_MONTH;
              } else if (c0 == &#39;d&#39;) {
                  return UCAL_DATE;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 592,11 ***</span>
  
      int32_t pos = UHASH_FIRST;
      const UHashElement* elem = NULL;
      while ( (elem = fIntervalPatterns-&gt;nextElement(pos)) != NULL ) {
          const UHashTok keyTok = elem-&gt;key;
<span class="line-modified">!         UnicodeString* skeleton = (UnicodeString*)keyTok.pointer;</span>
  #ifdef DTITVINF_DEBUG
      skeleton-&gt;extract(0,  skeleton-&gt;length(), result, &quot;UTF-8&quot;);
      sprintf(mesg, &quot;available skeletons: skeleton: %s; \n&quot;, result);
      PRINTMESG(mesg)
  #endif
<span class="line-new-header">--- 594,11 ---</span>
  
      int32_t pos = UHASH_FIRST;
      const UHashElement* elem = NULL;
      while ( (elem = fIntervalPatterns-&gt;nextElement(pos)) != NULL ) {
          const UHashTok keyTok = elem-&gt;key;
<span class="line-modified">!         UnicodeString* newSkeleton = (UnicodeString*)keyTok.pointer;</span>
  #ifdef DTITVINF_DEBUG
      skeleton-&gt;extract(0,  skeleton-&gt;length(), result, &quot;UTF-8&quot;);
      sprintf(mesg, &quot;available skeletons: skeleton: %s; \n&quot;, result);
      PRINTMESG(mesg)
  #endif
</pre>
<hr />
<pre>
<span class="line-old-header">*** 604,11 ***</span>
          // clear skeleton field width
          int8_t i;
          for ( i = 0; i &lt; fieldLength; ++i ) {
              skeletonFieldWidth[i] = 0;
          }
<span class="line-modified">!         parseSkeleton(*skeleton, skeletonFieldWidth);</span>
          // calculate distance
          int32_t distance = 0;
          int8_t fieldDifference = 1;
          for ( i = 0; i &lt; fieldLength; ++i ) {
              int32_t inputFieldWidth = inputSkeletonFieldWidth[i];
<span class="line-new-header">--- 606,11 ---</span>
          // clear skeleton field width
          int8_t i;
          for ( i = 0; i &lt; fieldLength; ++i ) {
              skeletonFieldWidth[i] = 0;
          }
<span class="line-modified">!         parseSkeleton(*newSkeleton, skeletonFieldWidth);</span>
          // calculate distance
          int32_t distance = 0;
          int8_t fieldDifference = 1;
          for ( i = 0; i &lt; fieldLength; ++i ) {
              int32_t inputFieldWidth = inputSkeletonFieldWidth[i];
</pre>
<hr />
<pre>
<span class="line-old-header">*** 630,11 ***</span>
                              (inputFieldWidth - fieldWidth) :
                              (fieldWidth - inputFieldWidth);
              }
          }
          if ( distance &lt; bestDistance ) {
<span class="line-modified">!             bestSkeleton = skeleton;</span>
              bestDistance = distance;
              bestMatchDistanceInfo = fieldDifference;
          }
          if ( distance == 0 ) {
              bestMatchDistanceInfo = 0;
<span class="line-new-header">--- 632,11 ---</span>
                              (inputFieldWidth - fieldWidth) :
                              (fieldWidth - inputFieldWidth);
              }
          }
          if ( distance &lt; bestDistance ) {
<span class="line-modified">!             bestSkeleton = newSkeleton;</span>
              bestDistance = distance;
              bestMatchDistanceInfo = fieldDifference;
          }
          if ( distance == 0 ) {
              bestMatchDistanceInfo = 0;
</pre>
<center><a href="dtitvfmt.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="dtptngen.cpp.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>