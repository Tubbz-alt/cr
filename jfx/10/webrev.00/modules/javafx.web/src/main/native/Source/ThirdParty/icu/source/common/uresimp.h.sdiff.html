<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/uresimp.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="uresdata.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="uscript.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/uresimp.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 // © 2016 and later: Unicode, Inc. and others.
  2 // License &amp; terms of use: http://www.unicode.org/copyright.html
  3 /*
  4 **********************************************************************
  5 *   Copyright (C) 2000-2016, International Business Machines
  6 *   Corporation and others.  All Rights Reserved.
  7 **********************************************************************
  8 */
  9 
 10 #ifndef URESIMP_H
 11 #define URESIMP_H
 12 
 13 #include &quot;unicode/ures.h&quot;

 14 
 15 #include &quot;uresdata.h&quot;
 16 
 17 #define kRootLocaleName         &quot;root&quot;
 18 #define kPoolBundleName         &quot;pool&quot;
 19 
 20 /*
 21  The default minor version and the version separator must be exactly one
 22  character long.
 23 */
 24 
 25 #define kDefaultMinorVersion    &quot;0&quot;
 26 #define kVersionSeparator       &quot;.&quot;
 27 #define kVersionTag             &quot;Version&quot;
 28 
 29 #define MAGIC1 19700503
 30 #define MAGIC2 19641227
 31 
 32 #define URES_MAX_ALIAS_LEVEL 256
 33 #define URES_MAX_BUFFER_SIZE 256
</pre>
<hr />
<pre>
 65     UResourceDataEntry *fData; /*for low-level access*/
 66     char *fVersion;
 67     UResourceDataEntry *fTopLevelData; /* for getting the valid locale */
 68     char *fResPath; /* full path to the resource: &quot;zh_TW/CollationElements/Sequence&quot; */
 69     ResourceData fResData;
 70     char fResBuf[RES_BUFSIZE];
 71     int32_t fResPathLen;
 72     Resource fRes;
 73     UBool fHasFallback;
 74     UBool fIsTopLevel;
 75     uint32_t fMagic1;   /* For determining if it&#39;s a stack object */
 76     uint32_t fMagic2;   /* For determining if it&#39;s a stack object */
 77     int32_t fIndex;
 78     int32_t fSize;
 79 
 80     /*const UResourceBundle *fParentRes;*/ /* needed to get the actual locale for a child resource */
 81 };
 82 
 83 U_CAPI void U_EXPORT2 ures_initStackObject(UResourceBundle* resB);
 84 






















































 85 /**
 86  * Opens a resource bundle for the locale;
 87  * if there is not even a base language bundle, then loads the root bundle;
 88  * never falls back to the default locale.
 89  *
 90  * This is used for algorithms that have good pan-Unicode default behavior,
 91  * such as case mappings, collation, and segmentation (BreakIterator).
 92  */
 93 U_CAPI UResourceBundle* U_EXPORT2
 94 ures_openNoDefault(const char* path, const char* localeID, UErrorCode* status);
 95 
 96 /* Some getters used by the copy constructor */
 97 U_CFUNC const char* ures_getName(const UResourceBundle* resB);
 98 #ifdef URES_DEBUG
 99 U_CFUNC const char* ures_getPath(const UResourceBundle* resB);
100 /**
101  * If anything was in the RB cache, dump it to the screen.
102  * @return TRUE if there was anything into the cache
103  */
104 U_CAPI UBool U_EXPORT2 ures_dumpCacheContents(void);
</pre>
<hr />
<pre>
258 U_CAPI const char* U_EXPORT2
259 ures_getVersionNumberInternal(const UResourceBundle *resourceBundle);
260 
261 /**
262  * Return the name of the Locale associated with this ResourceBundle. This API allows
263  * you to query for the real locale of the resource. For example, if you requested
264  * &quot;en_US_CALIFORNIA&quot; and only &quot;en_US&quot; bundle exists, &quot;en_US&quot; will be returned.
265  * For subresources, the locale where this resource comes from will be returned.
266  * If fallback has occured, getLocale will reflect this.
267  *
268  * This internal version avoids deprecated-warnings in ICU code.
269  *
270  * @param resourceBundle resource bundle in question
271  * @param status just for catching illegal arguments
272  * @return  A Locale name
273  */
274 U_CAPI const char* U_EXPORT2
275 ures_getLocaleInternal(const UResourceBundle* resourceBundle,
276                UErrorCode* status);
277 























278 #endif /*URESIMP_H*/
</pre>
</td>
<td>
<hr />
<pre>
  1 // © 2016 and later: Unicode, Inc. and others.
  2 // License &amp; terms of use: http://www.unicode.org/copyright.html
  3 /*
  4 **********************************************************************
  5 *   Copyright (C) 2000-2016, International Business Machines
  6 *   Corporation and others.  All Rights Reserved.
  7 **********************************************************************
  8 */
  9 
 10 #ifndef URESIMP_H
 11 #define URESIMP_H
 12 
 13 #include &quot;unicode/ures.h&quot;
<span class="line-added"> 14 #include &quot;unicode/utypes.h&quot;</span>
 15 
 16 #include &quot;uresdata.h&quot;
 17 
 18 #define kRootLocaleName         &quot;root&quot;
 19 #define kPoolBundleName         &quot;pool&quot;
 20 
 21 /*
 22  The default minor version and the version separator must be exactly one
 23  character long.
 24 */
 25 
 26 #define kDefaultMinorVersion    &quot;0&quot;
 27 #define kVersionSeparator       &quot;.&quot;
 28 #define kVersionTag             &quot;Version&quot;
 29 
 30 #define MAGIC1 19700503
 31 #define MAGIC2 19641227
 32 
 33 #define URES_MAX_ALIAS_LEVEL 256
 34 #define URES_MAX_BUFFER_SIZE 256
</pre>
<hr />
<pre>
 66     UResourceDataEntry *fData; /*for low-level access*/
 67     char *fVersion;
 68     UResourceDataEntry *fTopLevelData; /* for getting the valid locale */
 69     char *fResPath; /* full path to the resource: &quot;zh_TW/CollationElements/Sequence&quot; */
 70     ResourceData fResData;
 71     char fResBuf[RES_BUFSIZE];
 72     int32_t fResPathLen;
 73     Resource fRes;
 74     UBool fHasFallback;
 75     UBool fIsTopLevel;
 76     uint32_t fMagic1;   /* For determining if it&#39;s a stack object */
 77     uint32_t fMagic2;   /* For determining if it&#39;s a stack object */
 78     int32_t fIndex;
 79     int32_t fSize;
 80 
 81     /*const UResourceBundle *fParentRes;*/ /* needed to get the actual locale for a child resource */
 82 };
 83 
 84 U_CAPI void U_EXPORT2 ures_initStackObject(UResourceBundle* resB);
 85 
<span class="line-added"> 86 #ifdef __cplusplus</span>
<span class="line-added"> 87 </span>
<span class="line-added"> 88 U_NAMESPACE_BEGIN</span>
<span class="line-added"> 89 </span>
<span class="line-added"> 90 /**</span>
<span class="line-added"> 91  * \class StackUResourceBundle</span>
<span class="line-added"> 92  * &quot;Smart pointer&quot; like class, closes a UResourceBundle via ures_close().</span>
<span class="line-added"> 93  *</span>
<span class="line-added"> 94  * This code:</span>
<span class="line-added"> 95  *</span>
<span class="line-added"> 96  *   StackUResourceBundle bundle;</span>
<span class="line-added"> 97  *   foo(bundle.getAlias());</span>
<span class="line-added"> 98  *</span>
<span class="line-added"> 99  * Is equivalent to this code:</span>
<span class="line-added">100  *</span>
<span class="line-added">101  *   UResourceBundle bundle;</span>
<span class="line-added">102  *   ures_initStackObject(&amp;bundle);</span>
<span class="line-added">103  *   foo(&amp;bundle);</span>
<span class="line-added">104  *   ures_close(&amp;bundle);</span>
<span class="line-added">105  *</span>
<span class="line-added">106  * @see LocalUResourceBundlePointer</span>
<span class="line-added">107  * @internal</span>
<span class="line-added">108  */</span>
<span class="line-added">109 class U_COMMON_API StackUResourceBundle {</span>
<span class="line-added">110 public:</span>
<span class="line-added">111     // No heap allocation. Use only on the stack.</span>
<span class="line-added">112     static void* U_EXPORT2 operator new(size_t) U_NOEXCEPT = delete;</span>
<span class="line-added">113     static void* U_EXPORT2 operator new[](size_t) U_NOEXCEPT = delete;</span>
<span class="line-added">114 #if U_HAVE_PLACEMENT_NEW</span>
<span class="line-added">115     static void* U_EXPORT2 operator new(size_t, void*) U_NOEXCEPT = delete;</span>
<span class="line-added">116 #endif</span>
<span class="line-added">117 </span>
<span class="line-added">118     StackUResourceBundle();</span>
<span class="line-added">119     ~StackUResourceBundle();</span>
<span class="line-added">120 </span>
<span class="line-added">121     UResourceBundle* getAlias() { return &amp;bundle; }</span>
<span class="line-added">122 </span>
<span class="line-added">123     UResourceBundle&amp; ref() { return bundle; }</span>
<span class="line-added">124     const UResourceBundle&amp; ref() const { return bundle; }</span>
<span class="line-added">125 </span>
<span class="line-added">126     StackUResourceBundle(const StackUResourceBundle&amp;) = delete;</span>
<span class="line-added">127     StackUResourceBundle&amp; operator=(const StackUResourceBundle&amp;) = delete;</span>
<span class="line-added">128 </span>
<span class="line-added">129     StackUResourceBundle(StackUResourceBundle&amp;&amp;) = delete;</span>
<span class="line-added">130     StackUResourceBundle&amp; operator=(StackUResourceBundle&amp;&amp;) = delete;</span>
<span class="line-added">131 </span>
<span class="line-added">132 private:</span>
<span class="line-added">133     UResourceBundle bundle;</span>
<span class="line-added">134 };</span>
<span class="line-added">135 </span>
<span class="line-added">136 U_NAMESPACE_END</span>
<span class="line-added">137 </span>
<span class="line-added">138 #endif  /* __cplusplus */</span>
<span class="line-added">139 </span>
140 /**
141  * Opens a resource bundle for the locale;
142  * if there is not even a base language bundle, then loads the root bundle;
143  * never falls back to the default locale.
144  *
145  * This is used for algorithms that have good pan-Unicode default behavior,
146  * such as case mappings, collation, and segmentation (BreakIterator).
147  */
148 U_CAPI UResourceBundle* U_EXPORT2
149 ures_openNoDefault(const char* path, const char* localeID, UErrorCode* status);
150 
151 /* Some getters used by the copy constructor */
152 U_CFUNC const char* ures_getName(const UResourceBundle* resB);
153 #ifdef URES_DEBUG
154 U_CFUNC const char* ures_getPath(const UResourceBundle* resB);
155 /**
156  * If anything was in the RB cache, dump it to the screen.
157  * @return TRUE if there was anything into the cache
158  */
159 U_CAPI UBool U_EXPORT2 ures_dumpCacheContents(void);
</pre>
<hr />
<pre>
313 U_CAPI const char* U_EXPORT2
314 ures_getVersionNumberInternal(const UResourceBundle *resourceBundle);
315 
316 /**
317  * Return the name of the Locale associated with this ResourceBundle. This API allows
318  * you to query for the real locale of the resource. For example, if you requested
319  * &quot;en_US_CALIFORNIA&quot; and only &quot;en_US&quot; bundle exists, &quot;en_US&quot; will be returned.
320  * For subresources, the locale where this resource comes from will be returned.
321  * If fallback has occured, getLocale will reflect this.
322  *
323  * This internal version avoids deprecated-warnings in ICU code.
324  *
325  * @param resourceBundle resource bundle in question
326  * @param status just for catching illegal arguments
327  * @return  A Locale name
328  */
329 U_CAPI const char* U_EXPORT2
330 ures_getLocaleInternal(const UResourceBundle* resourceBundle,
331                UErrorCode* status);
332 
<span class="line-added">333 /**</span>
<span class="line-added">334  * Same as ures_openDirect() but uses the fill-in parameter instead of allocating a new bundle.</span>
<span class="line-added">335  *</span>
<span class="line-added">336  * @param r The existing UResourceBundle to fill in. If NULL then status will be</span>
<span class="line-added">337  *          set to U_ILLEGAL_ARGUMENT_ERROR.</span>
<span class="line-added">338  * @param packageName   The packageName and locale together point to an ICU udata object,</span>
<span class="line-added">339  *                      as defined by &lt;code&gt; udata_open( packageName, &quot;res&quot;, locale, err) &lt;/code&gt;</span>
<span class="line-added">340  *                      or equivalent.  Typically, packageName will refer to a (.dat) file, or to</span>
<span class="line-added">341  *                      a package registered with udata_setAppData(). Using a full file or directory</span>
<span class="line-added">342  *                      pathname for packageName is deprecated. If NULL, ICU data will be used.</span>
<span class="line-added">343  * @param locale  specifies the locale for which we want to open the resource</span>
<span class="line-added">344  *                if NULL, the default locale will be used. If strlen(locale) == 0</span>
<span class="line-added">345  *                root locale will be used.</span>
<span class="line-added">346  * @param status The error code.</span>
<span class="line-added">347  * @see ures_openDirect</span>
<span class="line-added">348  * @internal</span>
<span class="line-added">349  */</span>
<span class="line-added">350 U_CAPI void U_EXPORT2</span>
<span class="line-added">351 ures_openDirectFillIn(UResourceBundle *r,</span>
<span class="line-added">352                       const char *packageName,</span>
<span class="line-added">353                       const char *locale,</span>
<span class="line-added">354                       UErrorCode *status);</span>
<span class="line-added">355 </span>
356 #endif /*URESIMP_H*/
</pre>
</td>
</tr>
</table>
<center><a href="uresdata.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="uscript.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>