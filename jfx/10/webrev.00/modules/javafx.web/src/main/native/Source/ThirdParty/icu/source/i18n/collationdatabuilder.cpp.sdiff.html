<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/collationdatabuilder.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="collationbuilder.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="collationfcd.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/collationdatabuilder.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 835             ce32 = CollationData::readCE32(p);  // Default if no suffix match.
 836             return copyFromBaseCE32(c, ce32, FALSE, errorCode);
 837         }
 838         ConditionalCE32 head;
 839         UnicodeString context((UChar)0);
 840         copyContractionsFromBaseCE32(context, c, ce32, &amp;head, errorCode);
 841         ce32 = makeBuilderContextCE32(head.next);
 842         contextChars.add(c);
 843         break;
 844     }
 845     case Collation::HANGUL_TAG:
 846         errorCode = U_UNSUPPORTED_ERROR;  // We forbid tailoring of Hangul syllables.
 847         break;
 848     case Collation::OFFSET_TAG:
 849         ce32 = getCE32FromOffsetCE32(TRUE, c, ce32);
 850         break;
 851     case Collation::IMPLICIT_TAG:
 852         ce32 = encodeOneCE(Collation::unassignedCEFromCodePoint(c), errorCode);
 853         break;
 854     default:
<span class="line-modified"> 855         U_ASSERT(FALSE);  // require ce32 == base-&gt;getFinalCE32(ce32)</span>
<span class="line-removed"> 856         break;</span>
 857     }
 858     return ce32;
 859 }
 860 
 861 int32_t
 862 CollationDataBuilder::copyContractionsFromBaseCE32(UnicodeString &amp;context, UChar32 c, uint32_t ce32,
 863                                                    ConditionalCE32 *cond, UErrorCode &amp;errorCode) {
 864     if(U_FAILURE(errorCode)) { return 0; }
 865     const UChar *p = base-&gt;contexts + Collation::indexFromCE32(ce32);
 866     int32_t index;
 867     if((ce32 &amp; Collation::CONTRACT_SINGLE_CP_NO_MATCH) != 0) {
 868         // No match on the single code point.
 869         // We are underneath a prefix, and the default mapping is just
 870         // a fallback to the mappings for a shorter prefix.
 871         U_ASSERT(context.length() &gt; 1);
 872         index = -1;
 873     } else {
 874         ce32 = CollationData::readCE32(p);  // Default if no suffix match.
 875         U_ASSERT(!Collation::isContractionCE32(ce32));
 876         ce32 = copyFromBaseCE32(c, ce32, TRUE, errorCode);
</pre>
</td>
<td>
<hr />
<pre>
 835             ce32 = CollationData::readCE32(p);  // Default if no suffix match.
 836             return copyFromBaseCE32(c, ce32, FALSE, errorCode);
 837         }
 838         ConditionalCE32 head;
 839         UnicodeString context((UChar)0);
 840         copyContractionsFromBaseCE32(context, c, ce32, &amp;head, errorCode);
 841         ce32 = makeBuilderContextCE32(head.next);
 842         contextChars.add(c);
 843         break;
 844     }
 845     case Collation::HANGUL_TAG:
 846         errorCode = U_UNSUPPORTED_ERROR;  // We forbid tailoring of Hangul syllables.
 847         break;
 848     case Collation::OFFSET_TAG:
 849         ce32 = getCE32FromOffsetCE32(TRUE, c, ce32);
 850         break;
 851     case Collation::IMPLICIT_TAG:
 852         ce32 = encodeOneCE(Collation::unassignedCEFromCodePoint(c), errorCode);
 853         break;
 854     default:
<span class="line-modified"> 855         UPRV_UNREACHABLE;  // require ce32 == base-&gt;getFinalCE32(ce32)</span>

 856     }
 857     return ce32;
 858 }
 859 
 860 int32_t
 861 CollationDataBuilder::copyContractionsFromBaseCE32(UnicodeString &amp;context, UChar32 c, uint32_t ce32,
 862                                                    ConditionalCE32 *cond, UErrorCode &amp;errorCode) {
 863     if(U_FAILURE(errorCode)) { return 0; }
 864     const UChar *p = base-&gt;contexts + Collation::indexFromCE32(ce32);
 865     int32_t index;
 866     if((ce32 &amp; Collation::CONTRACT_SINGLE_CP_NO_MATCH) != 0) {
 867         // No match on the single code point.
 868         // We are underneath a prefix, and the default mapping is just
 869         // a fallback to the mappings for a shorter prefix.
 870         U_ASSERT(context.length() &gt; 1);
 871         index = -1;
 872     } else {
 873         ce32 = CollationData::readCE32(p);  // Default if no suffix match.
 874         U_ASSERT(!Collation::isContractionCE32(ce32));
 875         ce32 = copyFromBaseCE32(c, ce32, TRUE, errorCode);
</pre>
</td>
</tr>
</table>
<center><a href="collationbuilder.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="collationfcd.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>