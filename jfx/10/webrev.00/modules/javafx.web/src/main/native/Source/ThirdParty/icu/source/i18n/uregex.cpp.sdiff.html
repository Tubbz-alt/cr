<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/uregex.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="upluralrules.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="usearch.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/uregex.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 750 //------------------------------------------------------------------------------
 751 //
 752 //    uregex_start
 753 //
 754 //------------------------------------------------------------------------------
 755 U_CAPI int32_t U_EXPORT2
 756 uregex_start(URegularExpression *regexp2,
 757              int32_t             groupNum,
 758              UErrorCode          *status)  {
 759     return (int32_t)uregex_start64( regexp2, groupNum, status);
 760 }
 761 
 762 U_CAPI int64_t U_EXPORT2
 763 uregex_start64(URegularExpression *regexp2,
 764                int32_t             groupNum,
 765                UErrorCode          *status)  {
 766     RegularExpression *regexp = (RegularExpression*)regexp2;
 767     if (validateRE(regexp, TRUE, status) == FALSE) {
 768         return 0;
 769     }
<span class="line-modified"> 770     int32_t result = regexp-&gt;fMatcher-&gt;start(groupNum, *status);</span>
 771     return result;
 772 }
 773 
 774 //------------------------------------------------------------------------------
 775 //
 776 //    uregex_end
 777 //
 778 //------------------------------------------------------------------------------
 779 U_CAPI int32_t U_EXPORT2
 780 uregex_end(URegularExpression   *regexp2,
 781            int32_t               groupNum,
 782            UErrorCode           *status)  {
 783     return (int32_t)uregex_end64( regexp2, groupNum, status);
 784 }
 785 
 786 U_CAPI int64_t U_EXPORT2
 787 uregex_end64(URegularExpression   *regexp2,
 788              int32_t               groupNum,
 789              UErrorCode           *status)  {
 790     RegularExpression *regexp = (RegularExpression*)regexp2;
 791     if (validateRE(regexp, TRUE, status) == FALSE) {
 792         return 0;
 793     }
<span class="line-modified"> 794     int32_t result = regexp-&gt;fMatcher-&gt;end(groupNum, *status);</span>
 795     return result;
 796 }
 797 
 798 //------------------------------------------------------------------------------
 799 //
 800 //    uregex_reset
 801 //
 802 //------------------------------------------------------------------------------
 803 U_CAPI void U_EXPORT2
 804 uregex_reset(URegularExpression    *regexp2,
 805              int32_t               index,
 806              UErrorCode            *status)  {
 807     uregex_reset64( regexp2, (int64_t)index, status);
 808 }
 809 
 810 U_CAPI void U_EXPORT2
 811 uregex_reset64(URegularExpression    *regexp2,
 812                int64_t               index,
 813                UErrorCode            *status)  {
 814     RegularExpression *regexp = (RegularExpression*)regexp2;
</pre>
<hr />
<pre>
1637         *destCapacity &lt; 0)
1638     {
1639         *status = U_ILLEGAL_ARGUMENT_ERROR;
1640         return 0;
1641     }
1642 
1643     RegexMatcher *m = regexp-&gt;fMatcher;
1644 
1645     int32_t  destIdx     = 0;
1646     int32_t  destCap     = *destCapacity;
1647     UChar    *dest       = *destBuf;
1648 
1649     if (regexp-&gt;fText != NULL) {
1650         int32_t srcIdx;
1651         int64_t nativeIdx = (m-&gt;fMatch ? m-&gt;fMatchEnd : m-&gt;fLastMatchEnd);
1652         if (nativeIdx == -1) {
1653             srcIdx = 0;
1654         } else if (UTEXT_USES_U16(m-&gt;fInputText)) {
1655             srcIdx = (int32_t)nativeIdx;
1656         } else {
<span class="line-modified">1657             UErrorCode status = U_ZERO_ERROR;</span>
<span class="line-modified">1658             srcIdx = utext_extract(m-&gt;fInputText, 0, nativeIdx, NULL, 0, &amp;status);</span>
1659         }
1660 
1661         for (;;) {
1662             U_ASSERT(destIdx &gt;= 0);
1663 
1664             if (srcIdx == regexp-&gt;fTextLength) {
1665                 break;
1666             }
1667             UChar c = regexp-&gt;fText[srcIdx];
1668             if (c == 0 &amp;&amp; regexp-&gt;fTextLength == -1) {
1669                 regexp-&gt;fTextLength = srcIdx;
1670                 break;
1671             }
1672 
1673             if (destIdx &lt; destCap) {
1674                 dest[destIdx] = c;
1675             } else {
1676                 // We&#39;ve overflowed the dest buffer.
1677                 //  If the total input string length is known, we can
1678                 //    compute the total buffer size needed without scanning through the string.
</pre>
</td>
<td>
<hr />
<pre>
 750 //------------------------------------------------------------------------------
 751 //
 752 //    uregex_start
 753 //
 754 //------------------------------------------------------------------------------
 755 U_CAPI int32_t U_EXPORT2
 756 uregex_start(URegularExpression *regexp2,
 757              int32_t             groupNum,
 758              UErrorCode          *status)  {
 759     return (int32_t)uregex_start64( regexp2, groupNum, status);
 760 }
 761 
 762 U_CAPI int64_t U_EXPORT2
 763 uregex_start64(URegularExpression *regexp2,
 764                int32_t             groupNum,
 765                UErrorCode          *status)  {
 766     RegularExpression *regexp = (RegularExpression*)regexp2;
 767     if (validateRE(regexp, TRUE, status) == FALSE) {
 768         return 0;
 769     }
<span class="line-modified"> 770     int64_t result = regexp-&gt;fMatcher-&gt;start64(groupNum, *status);</span>
 771     return result;
 772 }
 773 
 774 //------------------------------------------------------------------------------
 775 //
 776 //    uregex_end
 777 //
 778 //------------------------------------------------------------------------------
 779 U_CAPI int32_t U_EXPORT2
 780 uregex_end(URegularExpression   *regexp2,
 781            int32_t               groupNum,
 782            UErrorCode           *status)  {
 783     return (int32_t)uregex_end64( regexp2, groupNum, status);
 784 }
 785 
 786 U_CAPI int64_t U_EXPORT2
 787 uregex_end64(URegularExpression   *regexp2,
 788              int32_t               groupNum,
 789              UErrorCode           *status)  {
 790     RegularExpression *regexp = (RegularExpression*)regexp2;
 791     if (validateRE(regexp, TRUE, status) == FALSE) {
 792         return 0;
 793     }
<span class="line-modified"> 794     int64_t result = regexp-&gt;fMatcher-&gt;end64(groupNum, *status);</span>
 795     return result;
 796 }
 797 
 798 //------------------------------------------------------------------------------
 799 //
 800 //    uregex_reset
 801 //
 802 //------------------------------------------------------------------------------
 803 U_CAPI void U_EXPORT2
 804 uregex_reset(URegularExpression    *regexp2,
 805              int32_t               index,
 806              UErrorCode            *status)  {
 807     uregex_reset64( regexp2, (int64_t)index, status);
 808 }
 809 
 810 U_CAPI void U_EXPORT2
 811 uregex_reset64(URegularExpression    *regexp2,
 812                int64_t               index,
 813                UErrorCode            *status)  {
 814     RegularExpression *regexp = (RegularExpression*)regexp2;
</pre>
<hr />
<pre>
1637         *destCapacity &lt; 0)
1638     {
1639         *status = U_ILLEGAL_ARGUMENT_ERROR;
1640         return 0;
1641     }
1642 
1643     RegexMatcher *m = regexp-&gt;fMatcher;
1644 
1645     int32_t  destIdx     = 0;
1646     int32_t  destCap     = *destCapacity;
1647     UChar    *dest       = *destBuf;
1648 
1649     if (regexp-&gt;fText != NULL) {
1650         int32_t srcIdx;
1651         int64_t nativeIdx = (m-&gt;fMatch ? m-&gt;fMatchEnd : m-&gt;fLastMatchEnd);
1652         if (nativeIdx == -1) {
1653             srcIdx = 0;
1654         } else if (UTEXT_USES_U16(m-&gt;fInputText)) {
1655             srcIdx = (int32_t)nativeIdx;
1656         } else {
<span class="line-modified">1657             UErrorCode newStatus = U_ZERO_ERROR;</span>
<span class="line-modified">1658             srcIdx = utext_extract(m-&gt;fInputText, 0, nativeIdx, NULL, 0, &amp;newStatus);</span>
1659         }
1660 
1661         for (;;) {
1662             U_ASSERT(destIdx &gt;= 0);
1663 
1664             if (srcIdx == regexp-&gt;fTextLength) {
1665                 break;
1666             }
1667             UChar c = regexp-&gt;fText[srcIdx];
1668             if (c == 0 &amp;&amp; regexp-&gt;fTextLength == -1) {
1669                 regexp-&gt;fTextLength = srcIdx;
1670                 break;
1671             }
1672 
1673             if (destIdx &lt; destCap) {
1674                 dest[destIdx] = c;
1675             } else {
1676                 // We&#39;ve overflowed the dest buffer.
1677                 //  If the total input string length is known, we can
1678                 //    compute the total buffer size needed without scanning through the string.
</pre>
</td>
</tr>
</table>
<center><a href="upluralrules.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="usearch.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>