<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/uobject.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="unistr.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="urename.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/uobject.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  3 /*
  4 ******************************************************************************
  5 *
  6 *   Copyright (C) 2002-2012, International Business Machines
  7 *   Corporation and others.  All Rights Reserved.
  8 *
  9 ******************************************************************************
 10 *   file name:  uobject.h
 11 *   encoding:   UTF-8
 12 *   tab size:   8 (not used)
 13 *   indentation:4
 14 *
 15 *   created on: 2002jun26
 16 *   created by: Markus W. Scherer
 17 */
 18 
 19 #ifndef __UOBJECT_H__
 20 #define __UOBJECT_H__
 21 
 22 #include &quot;unicode/utypes.h&quot;

 23 
 24 /**
 25  * \file
 26  * \brief C++ API: Common ICU base class UObject.
 27  */
 28 
 29 /**
<span class="line-removed"> 30  * @{</span>
 31  * \def U_NO_THROW
<span class="line-modified"> 32  *         Define this to define the throw() specification so</span>


 33  *                 certain functions do not throw any exceptions
 34  *
 35  *         UMemory operator new methods should have the throw() specification
 36  *         appended to them, so that the compiler adds the additional NULL check
 37  *         before calling constructors. Without, if &lt;code&gt;operator new&lt;/code&gt; returns NULL the
 38  *         constructor is still called, and if the constructor references member
 39  *         data, (which it typically does), the result is a segmentation violation.
 40  *
<span class="line-modified"> 41  * @stable ICU 4.2</span>
 42  */
 43 #ifndef U_NO_THROW
 44 #define U_NO_THROW throw()
 45 #endif
 46 
<span class="line-removed"> 47 /** @} */</span>
<span class="line-removed"> 48 </span>
 49 /*===========================================================================*/
 50 /* UClassID-based RTTI */
 51 /*===========================================================================*/
 52 
 53 /**
 54  * UClassID is used to identify classes without using the compiler&#39;s RTTI.
 55  * This was used before C++ compilers consistently supported RTTI.
 56  * ICU 4.6 requires compiler RTTI to be turned on.
 57  *
 58  * Each class hierarchy which needs
 59  * to implement polymorphic clone() or operator==() defines two methods,
 60  * described in detail below.  UClassID values can be compared using
 61  * operator==(). Nothing else should be done with them.
 62  *
 63  * \par
 64  * In class hierarchies that implement &quot;poor man&#39;s RTTI&quot;,
 65  * each concrete subclass implements getDynamicClassID() in the same way:
 66  *
 67  * \code
 68  *      class Derived {
</pre>
<hr />
<pre>
111  */
112 class U_COMMON_API UMemory {
113 public:
114 
115 /* test versions for debugging shaper heap memory problems */
116 #ifdef SHAPER_MEMORY_DEBUG
117     static void * NewArray(int size, int count);
118     static void * GrowArray(void * array, int newSize );
119     static void   FreeArray(void * array );
120 #endif
121 
122 #if U_OVERRIDE_CXX_ALLOCATION
123     /**
124      * Override for ICU4C C++ memory management.
125      * simple, non-class types are allocated using the macros in common/cmemory.h
126      * (uprv_malloc(), uprv_free(), uprv_realloc());
127      * they or something else could be used here to implement C++ new/delete
128      * for ICU4C C++ classes
129      * @stable ICU 2.4
130      */
<span class="line-modified">131     static void * U_EXPORT2 operator new(size_t size) U_NO_THROW;</span>
132 
133     /**
134      * Override for ICU4C C++ memory management.
135      * See new().
136      * @stable ICU 2.4
137      */
<span class="line-modified">138     static void * U_EXPORT2 operator new[](size_t size) U_NO_THROW;</span>
139 
140     /**
141      * Override for ICU4C C++ memory management.
142      * simple, non-class types are allocated using the macros in common/cmemory.h
143      * (uprv_malloc(), uprv_free(), uprv_realloc());
144      * they or something else could be used here to implement C++ new/delete
145      * for ICU4C C++ classes
146      * @stable ICU 2.4
147      */
<span class="line-modified">148     static void U_EXPORT2 operator delete(void *p) U_NO_THROW;</span>
149 
150     /**
151      * Override for ICU4C C++ memory management.
152      * See delete().
153      * @stable ICU 2.4
154      */
<span class="line-modified">155     static void U_EXPORT2 operator delete[](void *p) U_NO_THROW;</span>
156 
157 #if U_HAVE_PLACEMENT_NEW
158     /**
159      * Override for ICU4C C++ memory management for STL.
160      * See new().
161      * @stable ICU 2.6
162      */
<span class="line-modified">163     static inline void * U_EXPORT2 operator new(size_t, void *ptr) U_NO_THROW { return ptr; }</span>
164 
165     /**
166      * Override for ICU4C C++ memory management for STL.
167      * See delete().
168      * @stable ICU 2.6
169      */
<span class="line-modified">170     static inline void U_EXPORT2 operator delete(void *, void *) U_NO_THROW {}</span>
171 #endif /* U_HAVE_PLACEMENT_NEW */
172 #if U_HAVE_DEBUG_LOCATION_NEW
173     /**
174       * This method overrides the MFC debug version of the operator new
175       *
176       * @param size   The requested memory size
177       * @param file   The file where the allocation was requested
178       * @param line   The line where the allocation was requested
179       */
<span class="line-modified">180     static void * U_EXPORT2 operator new(size_t size, const char* file, int line) U_NO_THROW;</span>
181     /**
182       * This method provides a matching delete for the MFC debug new
183       *
184       * @param p      The pointer to the allocated memory
185       * @param file   The file where the allocation was requested
186       * @param line   The line where the allocation was requested
187       */
<span class="line-modified">188     static void U_EXPORT2 operator delete(void* p, const char* file, int line) U_NO_THROW;</span>
189 #endif /* U_HAVE_DEBUG_LOCATION_NEW */
190 #endif /* U_OVERRIDE_CXX_ALLOCATION */
191 
192     /*
193      * Assignment operator not declared. The compiler will provide one
194      * which does nothing since this class does not contain any data members.
195      * API/code coverage may show the assignment operator as present and
196      * untested - ignore.
197      * Subclasses need this assignment operator if they use compiler-provided
198      * assignment operators of their own. An alternative to not declaring one
199      * here would be to declare and empty-implement a protected or public one.
200     UMemory &amp;UMemory::operator=(const UMemory &amp;);
201      */
202 };
203 
204 /**
205  * UObject is the common ICU &quot;boilerplate&quot; class.
206  * UObject inherits UMemory (starting with ICU 2.4),
207  * and all other public ICU C++ classes
208  * are derived from UObject (starting with ICU 2.2).
</pre>
</td>
<td>
<hr />
<pre>
  3 /*
  4 ******************************************************************************
  5 *
  6 *   Copyright (C) 2002-2012, International Business Machines
  7 *   Corporation and others.  All Rights Reserved.
  8 *
  9 ******************************************************************************
 10 *   file name:  uobject.h
 11 *   encoding:   UTF-8
 12 *   tab size:   8 (not used)
 13 *   indentation:4
 14 *
 15 *   created on: 2002jun26
 16 *   created by: Markus W. Scherer
 17 */
 18 
 19 #ifndef __UOBJECT_H__
 20 #define __UOBJECT_H__
 21 
 22 #include &quot;unicode/utypes.h&quot;
<span class="line-added"> 23 #include &quot;unicode/platform.h&quot;</span>
 24 
 25 /**
 26  * \file
 27  * \brief C++ API: Common ICU base class UObject.
 28  */
 29 
 30 /**

 31  * \def U_NO_THROW
<span class="line-modified"> 32  *         Since ICU 64, use U_NOEXCEPT instead.</span>
<span class="line-added"> 33  *</span>
<span class="line-added"> 34  *         Previously, define this to define the throw() specification so</span>
 35  *                 certain functions do not throw any exceptions
 36  *
 37  *         UMemory operator new methods should have the throw() specification
 38  *         appended to them, so that the compiler adds the additional NULL check
 39  *         before calling constructors. Without, if &lt;code&gt;operator new&lt;/code&gt; returns NULL the
 40  *         constructor is still called, and if the constructor references member
 41  *         data, (which it typically does), the result is a segmentation violation.
 42  *
<span class="line-modified"> 43  * @stable ICU 4.2. Since ICU 64, Use U_NOEXCEPT instead. See ICU-20422.</span>
 44  */
 45 #ifndef U_NO_THROW
 46 #define U_NO_THROW throw()
 47 #endif
 48 


 49 /*===========================================================================*/
 50 /* UClassID-based RTTI */
 51 /*===========================================================================*/
 52 
 53 /**
 54  * UClassID is used to identify classes without using the compiler&#39;s RTTI.
 55  * This was used before C++ compilers consistently supported RTTI.
 56  * ICU 4.6 requires compiler RTTI to be turned on.
 57  *
 58  * Each class hierarchy which needs
 59  * to implement polymorphic clone() or operator==() defines two methods,
 60  * described in detail below.  UClassID values can be compared using
 61  * operator==(). Nothing else should be done with them.
 62  *
 63  * \par
 64  * In class hierarchies that implement &quot;poor man&#39;s RTTI&quot;,
 65  * each concrete subclass implements getDynamicClassID() in the same way:
 66  *
 67  * \code
 68  *      class Derived {
</pre>
<hr />
<pre>
111  */
112 class U_COMMON_API UMemory {
113 public:
114 
115 /* test versions for debugging shaper heap memory problems */
116 #ifdef SHAPER_MEMORY_DEBUG
117     static void * NewArray(int size, int count);
118     static void * GrowArray(void * array, int newSize );
119     static void   FreeArray(void * array );
120 #endif
121 
122 #if U_OVERRIDE_CXX_ALLOCATION
123     /**
124      * Override for ICU4C C++ memory management.
125      * simple, non-class types are allocated using the macros in common/cmemory.h
126      * (uprv_malloc(), uprv_free(), uprv_realloc());
127      * they or something else could be used here to implement C++ new/delete
128      * for ICU4C C++ classes
129      * @stable ICU 2.4
130      */
<span class="line-modified">131     static void * U_EXPORT2 operator new(size_t size) U_NOEXCEPT;</span>
132 
133     /**
134      * Override for ICU4C C++ memory management.
135      * See new().
136      * @stable ICU 2.4
137      */
<span class="line-modified">138     static void * U_EXPORT2 operator new[](size_t size) U_NOEXCEPT;</span>
139 
140     /**
141      * Override for ICU4C C++ memory management.
142      * simple, non-class types are allocated using the macros in common/cmemory.h
143      * (uprv_malloc(), uprv_free(), uprv_realloc());
144      * they or something else could be used here to implement C++ new/delete
145      * for ICU4C C++ classes
146      * @stable ICU 2.4
147      */
<span class="line-modified">148     static void U_EXPORT2 operator delete(void *p) U_NOEXCEPT;</span>
149 
150     /**
151      * Override for ICU4C C++ memory management.
152      * See delete().
153      * @stable ICU 2.4
154      */
<span class="line-modified">155     static void U_EXPORT2 operator delete[](void *p) U_NOEXCEPT;</span>
156 
157 #if U_HAVE_PLACEMENT_NEW
158     /**
159      * Override for ICU4C C++ memory management for STL.
160      * See new().
161      * @stable ICU 2.6
162      */
<span class="line-modified">163     static inline void * U_EXPORT2 operator new(size_t, void *ptr) U_NOEXCEPT { return ptr; }</span>
164 
165     /**
166      * Override for ICU4C C++ memory management for STL.
167      * See delete().
168      * @stable ICU 2.6
169      */
<span class="line-modified">170     static inline void U_EXPORT2 operator delete(void *, void *) U_NOEXCEPT {}</span>
171 #endif /* U_HAVE_PLACEMENT_NEW */
172 #if U_HAVE_DEBUG_LOCATION_NEW
173     /**
174       * This method overrides the MFC debug version of the operator new
175       *
176       * @param size   The requested memory size
177       * @param file   The file where the allocation was requested
178       * @param line   The line where the allocation was requested
179       */
<span class="line-modified">180     static void * U_EXPORT2 operator new(size_t size, const char* file, int line) U_NOEXCEPT;</span>
181     /**
182       * This method provides a matching delete for the MFC debug new
183       *
184       * @param p      The pointer to the allocated memory
185       * @param file   The file where the allocation was requested
186       * @param line   The line where the allocation was requested
187       */
<span class="line-modified">188     static void U_EXPORT2 operator delete(void* p, const char* file, int line) U_NOEXCEPT;</span>
189 #endif /* U_HAVE_DEBUG_LOCATION_NEW */
190 #endif /* U_OVERRIDE_CXX_ALLOCATION */
191 
192     /*
193      * Assignment operator not declared. The compiler will provide one
194      * which does nothing since this class does not contain any data members.
195      * API/code coverage may show the assignment operator as present and
196      * untested - ignore.
197      * Subclasses need this assignment operator if they use compiler-provided
198      * assignment operators of their own. An alternative to not declaring one
199      * here would be to declare and empty-implement a protected or public one.
200     UMemory &amp;UMemory::operator=(const UMemory &amp;);
201      */
202 };
203 
204 /**
205  * UObject is the common ICU &quot;boilerplate&quot; class.
206  * UObject inherits UMemory (starting with ICU 2.4),
207  * and all other public ICU C++ classes
208  * are derived from UObject (starting with ICU 2.2).
</pre>
</td>
</tr>
</table>
<center><a href="unistr.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="urename.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>