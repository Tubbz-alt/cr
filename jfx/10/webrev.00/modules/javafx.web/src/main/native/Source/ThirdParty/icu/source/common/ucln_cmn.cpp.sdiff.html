<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/ucln_cmn.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="uchar_props_data.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ucln_cmn.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/ucln_cmn.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 23 #include &quot;ucln_cmn.h&quot;
 24 #include &quot;utracimp.h&quot;
 25 #include &quot;umutex.h&quot;
 26 
 27 /**  Auto-client for UCLN_COMMON **/
 28 #define UCLN_TYPE_IS_COMMON
 29 #include &quot;ucln_imp.h&quot;
 30 
 31 static cleanupFunc *gCommonCleanupFunctions[UCLN_COMMON_COUNT];
 32 static cleanupFunc *gLibCleanupFunctions[UCLN_COMMON];
 33 
 34 
 35 /************************************************
 36  The cleanup order is important in this function.
 37  Please be sure that you have read ucln.h
 38  ************************************************/
 39 U_CAPI void U_EXPORT2
 40 u_cleanup(void)
 41 {
 42     UTRACE_ENTRY_OC(UTRACE_U_CLEANUP);
<span class="line-modified"> 43     umtx_lock(NULL);     /* Force a memory barrier, so that we are sure to see   */</span>
<span class="line-modified"> 44     umtx_unlock(NULL);   /*   all state left around by any other threads.        */</span>
 45 
 46     ucln_lib_cleanup();
 47 
 48     cmemory_cleanup();       /* undo any heap functions set by u_setMemoryFunctions(). */
 49     UTRACE_EXIT();           /* Must be before utrace_cleanup(), which turns off tracing. */
 50 /*#if U_ENABLE_TRACING*/
 51     utrace_cleanup();
 52 /*#endif*/
 53 }
 54 
 55 U_CAPI void U_EXPORT2 ucln_cleanupOne(ECleanupLibraryType libType)
 56 {
 57     if (gLibCleanupFunctions[libType])
 58     {
 59         gLibCleanupFunctions[libType]();
 60         gLibCleanupFunctions[libType] = NULL;
 61     }
 62 }
 63 
 64 U_CFUNC void
</pre>
</td>
<td>
<hr />
<pre>
 23 #include &quot;ucln_cmn.h&quot;
 24 #include &quot;utracimp.h&quot;
 25 #include &quot;umutex.h&quot;
 26 
 27 /**  Auto-client for UCLN_COMMON **/
 28 #define UCLN_TYPE_IS_COMMON
 29 #include &quot;ucln_imp.h&quot;
 30 
 31 static cleanupFunc *gCommonCleanupFunctions[UCLN_COMMON_COUNT];
 32 static cleanupFunc *gLibCleanupFunctions[UCLN_COMMON];
 33 
 34 
 35 /************************************************
 36  The cleanup order is important in this function.
 37  Please be sure that you have read ucln.h
 38  ************************************************/
 39 U_CAPI void U_EXPORT2
 40 u_cleanup(void)
 41 {
 42     UTRACE_ENTRY_OC(UTRACE_U_CLEANUP);
<span class="line-modified"> 43     icu::umtx_lock(NULL);     /* Force a memory barrier, so that we are sure to see   */</span>
<span class="line-modified"> 44     icu::umtx_unlock(NULL);   /*   all state left around by any other threads.        */</span>
 45 
 46     ucln_lib_cleanup();
 47 
 48     cmemory_cleanup();       /* undo any heap functions set by u_setMemoryFunctions(). */
 49     UTRACE_EXIT();           /* Must be before utrace_cleanup(), which turns off tracing. */
 50 /*#if U_ENABLE_TRACING*/
 51     utrace_cleanup();
 52 /*#endif*/
 53 }
 54 
 55 U_CAPI void U_EXPORT2 ucln_cleanupOne(ECleanupLibraryType libType)
 56 {
 57     if (gLibCleanupFunctions[libType])
 58     {
 59         gLibCleanupFunctions[libType]();
 60         gLibCleanupFunctions[libType] = NULL;
 61     }
 62 }
 63 
 64 U_CFUNC void
</pre>
</td>
</tr>
</table>
<center><a href="uchar_props_data.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ucln_cmn.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>