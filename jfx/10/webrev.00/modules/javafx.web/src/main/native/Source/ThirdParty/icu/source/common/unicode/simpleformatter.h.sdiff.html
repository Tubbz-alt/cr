<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/simpleformatter.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="rbbi.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="stringoptions.h.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/simpleformatter.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
248      *                values[i] replaced pattern argument {i}.
249      *                Can be shorter or longer than values. Can be NULL if offsetsLength==0.
250      *                If there is no {i} in the pattern, then offsets[i] is set to -1.
251      * @param offsetsLength The length of the offsets array.
252      * @param errorCode ICU error code in/out parameter.
253      *                  Must fulfill U_SUCCESS before the function call.
254      * @return result
255      * @stable ICU 57
256      */
257     UnicodeString &amp;formatAndReplace(
258             const UnicodeString *const *values, int32_t valuesLength,
259             UnicodeString &amp;result,
260             int32_t *offsets, int32_t offsetsLength, UErrorCode &amp;errorCode) const;
261 
262     /**
263      * Returns the pattern text with none of the arguments.
264      * Like formatting with all-empty string values.
265      * @stable ICU 57
266      */
267     UnicodeString getTextWithNoArguments() const {
<span class="line-modified">268         return getTextWithNoArguments(compiledPattern.getBuffer(), compiledPattern.length());</span>




269     }
270 

























271 private:
272     /**
273      * Binary representation of the compiled pattern.
274      * Index 0: One more than the highest argument number.
275      * Followed by zero or more arguments or literal-text segments.
276      *
277      * An argument is stored as its number, less than ARG_NUM_LIMIT.
278      * A literal-text segment is stored as its length (at least 1) offset by ARG_NUM_LIMIT,
279      * followed by that many chars.
280      */
281     UnicodeString compiledPattern;
282 
283     static inline int32_t getArgumentLimit(const char16_t *compiledPattern,
284                                               int32_t compiledPatternLength) {
285         return compiledPatternLength == 0 ? 0 : compiledPattern[0];
286     }
287 
<span class="line-modified">288     static UnicodeString getTextWithNoArguments(const char16_t *compiledPattern, int32_t compiledPatternLength);</span>




289 
290     static UnicodeString &amp;format(
291             const char16_t *compiledPattern, int32_t compiledPatternLength,
292             const UnicodeString *const *values,
293             UnicodeString &amp;result, const UnicodeString *resultCopy, UBool forbidResultAsValue,
294             int32_t *offsets, int32_t offsetsLength,
295             UErrorCode &amp;errorCode);
296 
297     // Give access to internals to SimpleModifier for number formatting
298     friend class number::impl::SimpleModifier;
299 };
300 
301 U_NAMESPACE_END
302 
303 #endif  // __SIMPLEFORMATTER_H__
</pre>
</td>
<td>
<hr />
<pre>
248      *                values[i] replaced pattern argument {i}.
249      *                Can be shorter or longer than values. Can be NULL if offsetsLength==0.
250      *                If there is no {i} in the pattern, then offsets[i] is set to -1.
251      * @param offsetsLength The length of the offsets array.
252      * @param errorCode ICU error code in/out parameter.
253      *                  Must fulfill U_SUCCESS before the function call.
254      * @return result
255      * @stable ICU 57
256      */
257     UnicodeString &amp;formatAndReplace(
258             const UnicodeString *const *values, int32_t valuesLength,
259             UnicodeString &amp;result,
260             int32_t *offsets, int32_t offsetsLength, UErrorCode &amp;errorCode) const;
261 
262     /**
263      * Returns the pattern text with none of the arguments.
264      * Like formatting with all-empty string values.
265      * @stable ICU 57
266      */
267     UnicodeString getTextWithNoArguments() const {
<span class="line-modified">268         return getTextWithNoArguments(</span>
<span class="line-added">269             compiledPattern.getBuffer(),</span>
<span class="line-added">270             compiledPattern.length(),</span>
<span class="line-added">271             nullptr,</span>
<span class="line-added">272             0);</span>
273     }
274 
<span class="line-added">275 #ifndef U_HIDE_INTERNAL_API</span>
<span class="line-added">276     /**</span>
<span class="line-added">277      * Returns the pattern text with none of the arguments.</span>
<span class="line-added">278      * Like formatting with all-empty string values.</span>
<span class="line-added">279      *</span>
<span class="line-added">280      * TODO(ICU-20406): Replace this with an Iterator interface.</span>
<span class="line-added">281      *</span>
<span class="line-added">282      * @param offsets offsets[i] receives the offset of where {i} was located</span>
<span class="line-added">283      *                before it was replaced by an empty string.</span>
<span class="line-added">284      *                For example, &quot;a{0}b{1}&quot; produces offset 1 for i=0 and 2 for i=1.</span>
<span class="line-added">285      *                Can be nullptr if offsetsLength==0.</span>
<span class="line-added">286      *                If there is no {i} in the pattern, then offsets[i] is set to -1.</span>
<span class="line-added">287      * @param offsetsLength The length of the offsets array.</span>
<span class="line-added">288      *</span>
<span class="line-added">289      * @internal</span>
<span class="line-added">290      */</span>
<span class="line-added">291     UnicodeString getTextWithNoArguments(int32_t *offsets, int32_t offsetsLength) const {</span>
<span class="line-added">292         return getTextWithNoArguments(</span>
<span class="line-added">293             compiledPattern.getBuffer(),</span>
<span class="line-added">294             compiledPattern.length(),</span>
<span class="line-added">295             offsets,</span>
<span class="line-added">296             offsetsLength);</span>
<span class="line-added">297     }</span>
<span class="line-added">298 #endif // U_HIDE_INTERNAL_API</span>
<span class="line-added">299 </span>
300 private:
301     /**
302      * Binary representation of the compiled pattern.
303      * Index 0: One more than the highest argument number.
304      * Followed by zero or more arguments or literal-text segments.
305      *
306      * An argument is stored as its number, less than ARG_NUM_LIMIT.
307      * A literal-text segment is stored as its length (at least 1) offset by ARG_NUM_LIMIT,
308      * followed by that many chars.
309      */
310     UnicodeString compiledPattern;
311 
312     static inline int32_t getArgumentLimit(const char16_t *compiledPattern,
313                                               int32_t compiledPatternLength) {
314         return compiledPatternLength == 0 ? 0 : compiledPattern[0];
315     }
316 
<span class="line-modified">317     static UnicodeString getTextWithNoArguments(</span>
<span class="line-added">318         const char16_t *compiledPattern,</span>
<span class="line-added">319         int32_t compiledPatternLength,</span>
<span class="line-added">320         int32_t *offsets,</span>
<span class="line-added">321         int32_t offsetsLength);</span>
322 
323     static UnicodeString &amp;format(
324             const char16_t *compiledPattern, int32_t compiledPatternLength,
325             const UnicodeString *const *values,
326             UnicodeString &amp;result, const UnicodeString *resultCopy, UBool forbidResultAsValue,
327             int32_t *offsets, int32_t offsetsLength,
328             UErrorCode &amp;errorCode);
329 
330     // Give access to internals to SimpleModifier for number formatting
331     friend class number::impl::SimpleModifier;
332 };
333 
334 U_NAMESPACE_END
335 
336 #endif  // __SIMPLEFORMATTER_H__
</pre>
</td>
</tr>
</table>
<center><a href="rbbi.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="stringoptions.h.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>