<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/number_padding.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="number_multiplier.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="number_patternmodifier.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/i18n/number_padding.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
45     if (targetWidth &gt;= 0) {
46         return {cp, targetWidth, position};
47     } else {
48         return {U_NUMBER_ARG_OUTOFBOUNDS_ERROR};
49     }
50 }
51 
52 Padder Padder::forProperties(const DecimalFormatProperties&amp; properties) {
53     UChar32 padCp;
54     if (properties.padString.length() &gt; 0) {
55         padCp = properties.padString.char32At(0);
56     } else {
57         padCp = kFallbackPaddingString[0];
58     }
59     return {padCp, properties.formatWidth, properties.padPosition.getOrDefault(UNUM_PAD_BEFORE_PREFIX)};
60 }
61 
62 int32_t Padder::padAndApply(const Modifier &amp;mod1, const Modifier &amp;mod2,
63                             NumberStringBuilder &amp;string, int32_t leftIndex, int32_t rightIndex,
64                             UErrorCode &amp;status) const {
<span class="line-modified">65     int32_t modLength = mod1.getCodePointCount(status) + mod2.getCodePointCount(status);</span>
66     int32_t requiredPadding = fWidth - modLength - string.codePointCount();
67     U_ASSERT(leftIndex == 0 &amp;&amp;
68              rightIndex == string.length()); // fix the previous line to remove this assertion
69 
70     int length = 0;
71     if (requiredPadding &lt;= 0) {
72         // Padding is not required.
73         length += mod1.apply(string, leftIndex, rightIndex, status);
74         length += mod2.apply(string, leftIndex, rightIndex + length, status);
75         return length;
76     }
77 
78     PadPosition position = fUnion.padding.fPosition;
79     UChar32 paddingCp = fUnion.padding.fCp;
80     if (position == UNUM_PAD_AFTER_PREFIX) {
81         length += addPaddingHelper(paddingCp, requiredPadding, string, leftIndex, status);
82     } else if (position == UNUM_PAD_BEFORE_SUFFIX) {
83         length += addPaddingHelper(paddingCp, requiredPadding, string, rightIndex + length, status);
84     }
85     length += mod1.apply(string, leftIndex, rightIndex + length, status);
</pre>
</td>
<td>
<hr />
<pre>
45     if (targetWidth &gt;= 0) {
46         return {cp, targetWidth, position};
47     } else {
48         return {U_NUMBER_ARG_OUTOFBOUNDS_ERROR};
49     }
50 }
51 
52 Padder Padder::forProperties(const DecimalFormatProperties&amp; properties) {
53     UChar32 padCp;
54     if (properties.padString.length() &gt; 0) {
55         padCp = properties.padString.char32At(0);
56     } else {
57         padCp = kFallbackPaddingString[0];
58     }
59     return {padCp, properties.formatWidth, properties.padPosition.getOrDefault(UNUM_PAD_BEFORE_PREFIX)};
60 }
61 
62 int32_t Padder::padAndApply(const Modifier &amp;mod1, const Modifier &amp;mod2,
63                             NumberStringBuilder &amp;string, int32_t leftIndex, int32_t rightIndex,
64                             UErrorCode &amp;status) const {
<span class="line-modified">65     int32_t modLength = mod1.getCodePointCount() + mod2.getCodePointCount();</span>
66     int32_t requiredPadding = fWidth - modLength - string.codePointCount();
67     U_ASSERT(leftIndex == 0 &amp;&amp;
68              rightIndex == string.length()); // fix the previous line to remove this assertion
69 
70     int length = 0;
71     if (requiredPadding &lt;= 0) {
72         // Padding is not required.
73         length += mod1.apply(string, leftIndex, rightIndex, status);
74         length += mod2.apply(string, leftIndex, rightIndex + length, status);
75         return length;
76     }
77 
78     PadPosition position = fUnion.padding.fPosition;
79     UChar32 paddingCp = fUnion.padding.fCp;
80     if (position == UNUM_PAD_AFTER_PREFIX) {
81         length += addPaddingHelper(paddingCp, requiredPadding, string, leftIndex, status);
82     } else if (position == UNUM_PAD_BEFORE_SUFFIX) {
83         length += addPaddingHelper(paddingCp, requiredPadding, string, rightIndex + length, status);
84     }
85     length += mod1.apply(string, leftIndex, rightIndex + length, status);
</pre>
</td>
</tr>
</table>
<center><a href="number_multiplier.h.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="number_patternmodifier.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>