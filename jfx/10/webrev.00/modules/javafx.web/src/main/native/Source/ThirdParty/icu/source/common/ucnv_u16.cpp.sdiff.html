<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/ucnv_u16.cpp</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="ucnv_ct.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ucnv_u32.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/ucnv_u16.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  54     UConverter *cnv;
  55     const UChar *source;
  56     char *target;
  57     int32_t *offsets;
  58 
  59     uint32_t targetCapacity, length, sourceIndex;
  60     UChar c, trail;
  61     char overflow[4];
  62 
  63     source=pArgs-&gt;source;
  64     length=(int32_t)(pArgs-&gt;sourceLimit-source);
  65     if(length&lt;=0) {
  66         /* no input, nothing to do */
  67         return;
  68     }
  69 
  70     cnv=pArgs-&gt;converter;
  71 
  72     /* write the BOM if necessary */
  73     if(cnv-&gt;fromUnicodeStatus==UCNV_NEED_TO_WRITE_BOM) {
<span class="line-modified">  74         static const char bom[]={ (char)0xfe, (char)0xff };</span>
  75         ucnv_fromUWriteBytes(cnv,
  76                              bom, 2,
  77                              &amp;pArgs-&gt;target, pArgs-&gt;targetLimit,
  78                              &amp;pArgs-&gt;offsets, -1,
  79                              pErrorCode);
  80         cnv-&gt;fromUnicodeStatus=0;
  81     }
  82 
  83     target=pArgs-&gt;target;
  84     if(target &gt;= pArgs-&gt;targetLimit) {
  85         *pErrorCode=U_BUFFER_OVERFLOW_ERROR;
  86         return;
  87     }
  88 
  89     targetCapacity=(uint32_t)(pArgs-&gt;targetLimit-target);
  90     offsets=pArgs-&gt;offsets;
  91     sourceIndex=0;
  92 
  93     /* c!=0 indicates in several places outside the main loops that a surrogate was found */
  94 
</pre>
<hr />
<pre>
 655     UConverter *cnv;
 656     const UChar *source;
 657     char *target;
 658     int32_t *offsets;
 659 
 660     uint32_t targetCapacity, length, sourceIndex;
 661     UChar c, trail;
 662     char overflow[4];
 663 
 664     source=pArgs-&gt;source;
 665     length=(int32_t)(pArgs-&gt;sourceLimit-source);
 666     if(length&lt;=0) {
 667         /* no input, nothing to do */
 668         return;
 669     }
 670 
 671     cnv=pArgs-&gt;converter;
 672 
 673     /* write the BOM if necessary */
 674     if(cnv-&gt;fromUnicodeStatus==UCNV_NEED_TO_WRITE_BOM) {
<span class="line-modified"> 675         static const char bom[]={ (char)0xff, (char)0xfe };</span>
 676         ucnv_fromUWriteBytes(cnv,
 677                              bom, 2,
 678                              &amp;pArgs-&gt;target, pArgs-&gt;targetLimit,
 679                              &amp;pArgs-&gt;offsets, -1,
 680                              pErrorCode);
 681         cnv-&gt;fromUnicodeStatus=0;
 682     }
 683 
 684     target=pArgs-&gt;target;
 685     if(target &gt;= pArgs-&gt;targetLimit) {
 686         *pErrorCode=U_BUFFER_OVERFLOW_ERROR;
 687         return;
 688     }
 689 
 690     targetCapacity=(uint32_t)(pArgs-&gt;targetLimit-pArgs-&gt;target);
 691     offsets=pArgs-&gt;offsets;
 692     sourceIndex=0;
 693 
 694     /* c!=0 indicates in several places outside the main loops that a surrogate was found */
 695 
</pre>
</td>
<td>
<hr />
<pre>
  54     UConverter *cnv;
  55     const UChar *source;
  56     char *target;
  57     int32_t *offsets;
  58 
  59     uint32_t targetCapacity, length, sourceIndex;
  60     UChar c, trail;
  61     char overflow[4];
  62 
  63     source=pArgs-&gt;source;
  64     length=(int32_t)(pArgs-&gt;sourceLimit-source);
  65     if(length&lt;=0) {
  66         /* no input, nothing to do */
  67         return;
  68     }
  69 
  70     cnv=pArgs-&gt;converter;
  71 
  72     /* write the BOM if necessary */
  73     if(cnv-&gt;fromUnicodeStatus==UCNV_NEED_TO_WRITE_BOM) {
<span class="line-modified">  74         static const char bom[]={ (char)0xfeu, (char)0xffu };</span>
  75         ucnv_fromUWriteBytes(cnv,
  76                              bom, 2,
  77                              &amp;pArgs-&gt;target, pArgs-&gt;targetLimit,
  78                              &amp;pArgs-&gt;offsets, -1,
  79                              pErrorCode);
  80         cnv-&gt;fromUnicodeStatus=0;
  81     }
  82 
  83     target=pArgs-&gt;target;
  84     if(target &gt;= pArgs-&gt;targetLimit) {
  85         *pErrorCode=U_BUFFER_OVERFLOW_ERROR;
  86         return;
  87     }
  88 
  89     targetCapacity=(uint32_t)(pArgs-&gt;targetLimit-target);
  90     offsets=pArgs-&gt;offsets;
  91     sourceIndex=0;
  92 
  93     /* c!=0 indicates in several places outside the main loops that a surrogate was found */
  94 
</pre>
<hr />
<pre>
 655     UConverter *cnv;
 656     const UChar *source;
 657     char *target;
 658     int32_t *offsets;
 659 
 660     uint32_t targetCapacity, length, sourceIndex;
 661     UChar c, trail;
 662     char overflow[4];
 663 
 664     source=pArgs-&gt;source;
 665     length=(int32_t)(pArgs-&gt;sourceLimit-source);
 666     if(length&lt;=0) {
 667         /* no input, nothing to do */
 668         return;
 669     }
 670 
 671     cnv=pArgs-&gt;converter;
 672 
 673     /* write the BOM if necessary */
 674     if(cnv-&gt;fromUnicodeStatus==UCNV_NEED_TO_WRITE_BOM) {
<span class="line-modified"> 675         static const char bom[]={ (char)0xffu, (char)0xfeu };</span>
 676         ucnv_fromUWriteBytes(cnv,
 677                              bom, 2,
 678                              &amp;pArgs-&gt;target, pArgs-&gt;targetLimit,
 679                              &amp;pArgs-&gt;offsets, -1,
 680                              pErrorCode);
 681         cnv-&gt;fromUnicodeStatus=0;
 682     }
 683 
 684     target=pArgs-&gt;target;
 685     if(target &gt;= pArgs-&gt;targetLimit) {
 686         *pErrorCode=U_BUFFER_OVERFLOW_ERROR;
 687         return;
 688     }
 689 
 690     targetCapacity=(uint32_t)(pArgs-&gt;targetLimit-pArgs-&gt;target);
 691     offsets=pArgs-&gt;offsets;
 692     sourceIndex=0;
 693 
 694     /* c!=0 indicates in several places outside the main loops that a surrogate was found */
 695 
</pre>
</td>
</tr>
</table>
<center><a href="ucnv_ct.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ucnv_u32.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>