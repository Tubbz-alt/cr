<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/uniset.h</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="umachine.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="unistr.h.udiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/icu/source/common/unicode/uniset.h</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -11,10 +11,11 @@</span>
  */
  
  #ifndef UNICODESET_H
  #define UNICODESET_H
  
<span class="udiff-line-added">+ #include &quot;unicode/ucpmap.h&quot;</span>
  #include &quot;unicode/unifilt.h&quot;
  #include &quot;unicode/unistr.h&quot;
  #include &quot;unicode/uset.h&quot;
  
  /**
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -23,12 +24,10 @@</span>
   */
  
  U_NAMESPACE_BEGIN
  
  // Forward Declarations.
<span class="udiff-line-removed">- void U_CALLCONV UnicodeSet_initInclusion(int32_t src, UErrorCode &amp;status); /**&lt; @internal */</span>
<span class="udiff-line-removed">- </span>
  class BMPSet;
  class ParsePosition;
  class RBBIRuleScanner;
  class SymbolTable;
  class UnicodeSetStringSpan;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -274,37 +273,50 @@</span>
   *
   * @author Alan Liu
   * @stable ICU 2.0
   */
  class U_COMMON_API UnicodeSet U_FINAL : public UnicodeFilter {
<span class="udiff-line-added">+ private:</span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Enough for sets with few ranges.</span>
<span class="udiff-line-added">+      * For example, White_Space has 10 ranges, list length 21.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     static constexpr int32_t INITIAL_CAPACITY = 25;</span>
<span class="udiff-line-added">+     // fFlags constant</span>
<span class="udiff-line-added">+     static constexpr uint8_t kIsBogus = 1;  // This set is bogus (i.e. not valid)</span>
  
<span class="udiff-line-modified-removed">-     int32_t len; // length of list used; 0 &lt;= len &lt;= capacity</span>
<span class="udiff-line-modified-removed">-     int32_t capacity; // capacity of list</span>
<span class="udiff-line-modified-removed">-     UChar32* list; // MUST be terminated with HIGH</span>
<span class="udiff-line-modified-removed">-     BMPSet *bmpSet; // The set is frozen iff either bmpSet or stringSpan is not NULL.</span>
<span class="udiff-line-modified-removed">-     UChar32* buffer; // internal buffer, may be NULL</span>
<span class="udiff-line-modified-removed">-     int32_t bufferCapacity; // capacity of buffer</span>
<span class="udiff-line-modified-removed">-     int32_t patLen;</span>
<span class="udiff-line-modified-added">+     UChar32* list = stackList; // MUST be terminated with HIGH</span>
<span class="udiff-line-modified-added">+     int32_t capacity = INITIAL_CAPACITY; // capacity of list</span>
<span class="udiff-line-modified-added">+     int32_t len = 1; // length of list used; 1 &lt;= len &lt;= capacity</span>
<span class="udiff-line-modified-added">+     uint8_t fFlags = 0;         // Bit flag (see constants above)</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     BMPSet *bmpSet = nullptr; // The set is frozen iff either bmpSet or stringSpan is not NULL.</span>
<span class="udiff-line-modified-added">+     UChar32* buffer = nullptr; // internal buffer, may be NULL</span>
<span class="udiff-line-added">+     int32_t bufferCapacity = 0; // capacity of buffer</span>
  
      /**
       * The pattern representation of this set.  This may not be the
       * most economical pattern.  It is the pattern supplied to
       * applyPattern(), with variables substituted and whitespace
       * removed.  For sets constructed without applyPattern(), or
       * modified using the non-pattern API, this string will be empty,
       * indicating that toPattern() must generate a pattern
       * representation from the inversion list.
       */
<span class="udiff-line-modified-removed">-     char16_t *pat;</span>
<span class="udiff-line-modified-removed">-     UVector* strings; // maintained in sorted order</span>
<span class="udiff-line-modified-removed">-     UnicodeSetStringSpan *stringSpan;</span>
<span class="udiff-line-modified-added">+     char16_t *pat = nullptr;</span>
<span class="udiff-line-modified-added">+     int32_t patLen = 0;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-added">+     UVector* strings = nullptr; // maintained in sorted order</span>
<span class="udiff-line-added">+     UnicodeSetStringSpan *stringSpan = nullptr;</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     /**</span>
<span class="udiff-line-added">+      * Initial list array.</span>
<span class="udiff-line-added">+      * Avoids some heap allocations, and list is never nullptr.</span>
<span class="udiff-line-added">+      * Increases the object size a bit.</span>
<span class="udiff-line-added">+      */</span>
<span class="udiff-line-added">+     UChar32 stackList[INITIAL_CAPACITY];</span>
  
<span class="udiff-line-removed">- private:</span>
<span class="udiff-line-removed">-     enum { // constants</span>
<span class="udiff-line-removed">-         kIsBogus = 1       // This set is bogus (i.e. not valid)</span>
<span class="udiff-line-removed">-     };</span>
<span class="udiff-line-removed">-     uint8_t fFlags;         // Bit flag (see constants above)</span>
  public:
      /**
       * Determine if this object contains a valid set.
       * A bogus set has no value. It is different from an empty set.
       * It can be used to indicate that no set value is available.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -476,11 +488,11 @@</span>
      /**
       * Compares the specified object with this set for equality.  Returns
       * &lt;tt&gt;true&lt;/tt&gt; if the specified set is not equal to this set.
       * @stable ICU 2.0
       */
<span class="udiff-line-modified-removed">-     UBool operator!=(const UnicodeSet&amp; o) const;</span>
<span class="udiff-line-modified-added">+     inline UBool operator!=(const UnicodeSet&amp; o) const;</span>
  
      /**
       * Returns a copy of this object.  All UnicodeFunctor objects have
       * to support cloning in order to allow classes using
       * UnicodeFunctors, such as Transliterator, to implement cloning.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -582,13 +594,12 @@</span>
      //----------------------------------------------------------------
      // Public API
      //----------------------------------------------------------------
  
      /**
<span class="udiff-line-modified-removed">-      * Make this object represent the range &lt;code&gt;start - end&lt;/code&gt;.</span>
<span class="udiff-line-modified-removed">-      * If &lt;code&gt;end &gt; start&lt;/code&gt; then this object is set to an</span>
<span class="udiff-line-removed">-      * an empty range.</span>
<span class="udiff-line-modified-added">+      * Make this object represent the range `start - end`.</span>
<span class="udiff-line-modified-added">+      * If `end &gt; start` then this object is set to an empty range.</span>
       * A frozen set will not be modified.
       *
       * @param start first character in the set, inclusive
       * @param end last character in the set, inclusive
       * @stable ICU 2.4
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1479,12 +1490,10 @@</span>
  
      // Private API for the USet API
  
      friend class USetAccess;
  
<span class="udiff-line-removed">-     int32_t getStringCount() const;</span>
<span class="udiff-line-removed">- </span>
      const UnicodeString* getString(int32_t index) const;
  
      //----------------------------------------------------------------
      // RuleBasedTransliterator support
      //----------------------------------------------------------------
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1504,10 +1513,11 @@</span>
      //----------------------------------------------------------------
      // Implementation: Clone as thawed (see ICU4J Freezable)
      //----------------------------------------------------------------
  
      UnicodeSet(const UnicodeSet&amp; o, UBool /* asThawed */);
<span class="udiff-line-added">+     UnicodeSet&amp; copyFrom(const UnicodeSet&amp; o, UBool asThawed);</span>
  
      //----------------------------------------------------------------
      // Implementation: Pattern parsing
      //----------------------------------------------------------------
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1526,17 +1536,22 @@</span>
  
      //----------------------------------------------------------------
      // Implementation: Utility methods
      //----------------------------------------------------------------
  
<span class="udiff-line-modified-removed">-     void ensureCapacity(int32_t newLen, UErrorCode&amp; ec);</span>
<span class="udiff-line-modified-added">+     static int32_t nextCapacity(int32_t minCapacity);</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     bool ensureCapacity(int32_t newLen);</span>
  
<span class="udiff-line-modified-removed">-     void ensureBufferCapacity(int32_t newLen, UErrorCode&amp; ec);</span>
<span class="udiff-line-modified-added">+     bool ensureBufferCapacity(int32_t newLen);</span>
  
      void swapBuffers(void);
  
      UBool allocateStrings(UErrorCode &amp;status);
<span class="udiff-line-added">+     UBool hasStrings() const;</span>
<span class="udiff-line-added">+     int32_t stringsSize() const;</span>
<span class="udiff-line-added">+     UBool stringsContains(const UnicodeString &amp;s) const;</span>
  
      UnicodeString&amp; _toPattern(UnicodeString&amp; result,
                                UBool escapeUnprintable) const;
  
      UnicodeString&amp; _generatePattern(UnicodeString&amp; result,
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1612,11 +1627,10 @@</span>
  
      void applyPropertyPattern(RuleCharacterIterator&amp; chars,
                                UnicodeString&amp; rebuiltPat,
                                UErrorCode&amp; ec);
  
<span class="udiff-line-removed">-     friend void U_CALLCONV UnicodeSet_initInclusion(int32_t src, UErrorCode &amp;status);</span>
      static const UnicodeSet* getInclusions(int32_t src, UErrorCode &amp;status);
  
      /**
       * A filter that returns TRUE if the given code point should be
       * included in the UnicodeSet being constructed.
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1632,17 +1646,26 @@</span>
       * getInclusions().
       * src is a UPropertySource value.
       */
      void applyFilter(Filter filter,
                       void* context,
<span class="udiff-line-modified-removed">-                      int32_t src,</span>
<span class="udiff-line-modified-added">+                      const UnicodeSet* inclusions,</span>
                       UErrorCode &amp;status);
  
<span class="udiff-line-added">+ #ifndef U_HIDE_DRAFT_API   // Skipped: ucpmap.h is draft only.</span>
<span class="udiff-line-added">+     void applyIntPropertyValue(const UCPMap *map,</span>
<span class="udiff-line-added">+                                UCPMapValueFilter *filter, const void *context,</span>
<span class="udiff-line-added">+                                UErrorCode &amp;errorCode);</span>
<span class="udiff-line-added">+ #endif  /* U_HIDE_DRAFT_API */</span>
<span class="udiff-line-added">+ </span>
      /**
       * Set the new pattern to cache.
       */
<span class="udiff-line-modified-removed">-     void setPattern(const UnicodeString&amp; newPat);</span>
<span class="udiff-line-modified-added">+     void setPattern(const UnicodeString&amp; newPat) {</span>
<span class="udiff-line-added">+         setPattern(newPat.getBuffer(), newPat.length());</span>
<span class="udiff-line-added">+     }</span>
<span class="udiff-line-added">+     void setPattern(const char16_t *newPat, int32_t newPatLen);</span>
      /**
       * Release existing cached pattern.
       */
      void releasePattern();
  
</pre>
<center><a href="umachine.h.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="unistr.h.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>