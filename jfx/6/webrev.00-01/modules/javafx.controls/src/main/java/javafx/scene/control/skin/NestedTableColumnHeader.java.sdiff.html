<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/NestedTableColumnHeader.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TableColumnHeader.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/NestedTableColumnHeader.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
148     private final WeakListChangeListener weakColumnsListener =
149             new WeakListChangeListener(columnsListener);
150 
151     private static final EventHandler&lt;MouseEvent&gt; rectMousePressed = me -&gt; {
152         Rectangle rect = (Rectangle) me.getSource();
153         TableColumnBase column = (TableColumnBase) rect.getProperties().get(TABLE_COLUMN_KEY);
154         NestedTableColumnHeader header = (NestedTableColumnHeader) rect.getProperties().get(TABLE_COLUMN_HEADER_KEY);
155 
156         if (! header.isColumnResizingEnabled()) return;
157 
158         // column reordering takes precedence over column resizing, but sometimes the mouse dragged events
159         // can be received by both nodes, leading to less than ideal UX, hence the check here.
160         if (header.getTableHeaderRow().columnDragLock) return;
161 
162         if (me.isConsumed()) return;
163         me.consume();
164 
165         if (me.getClickCount() == 2 &amp;&amp; me.isPrimaryButtonDown()) {
166             // the user wants to resize the column such that its
167             // width is equal to the widest element in the column
<span class="line-modified">168             header.resizeColumnToFitContent(column, -1);</span>




169         } else {
170             // rather than refer to the rect variable, we just grab
171             // it from the source to prevent a small memory leak.
172             Rectangle innerRect = (Rectangle) me.getSource();
173             double startX = header.getTableHeaderRow().sceneToLocal(innerRect.localToScene(innerRect.getBoundsInLocal())).getMinX() + 2;
174             header.dragAnchorX = me.getSceneX();
175             header.columnResizingStarted(startX);
176         }
177     };
178 
179     private static final EventHandler&lt;MouseEvent&gt; rectMouseDragged = me -&gt; {
180         Rectangle rect = (Rectangle) me.getSource();
181         TableColumnBase column = (TableColumnBase) rect.getProperties().get(TABLE_COLUMN_KEY);
182         NestedTableColumnHeader header = (NestedTableColumnHeader) rect.getProperties().get(TABLE_COLUMN_HEADER_KEY);
183 
184         if (! header.isColumnResizingEnabled()) return;
185 
186         // column reordering takes precedence over column resizing, but sometimes the mouse dragged events
187         // can be received by both nodes, leading to less than ideal UX, hence the check here.
188         if (header.getTableHeaderRow().columnDragLock) return;
</pre>
</td>
<td>
<hr />
<pre>
148     private final WeakListChangeListener weakColumnsListener =
149             new WeakListChangeListener(columnsListener);
150 
151     private static final EventHandler&lt;MouseEvent&gt; rectMousePressed = me -&gt; {
152         Rectangle rect = (Rectangle) me.getSource();
153         TableColumnBase column = (TableColumnBase) rect.getProperties().get(TABLE_COLUMN_KEY);
154         NestedTableColumnHeader header = (NestedTableColumnHeader) rect.getProperties().get(TABLE_COLUMN_HEADER_KEY);
155 
156         if (! header.isColumnResizingEnabled()) return;
157 
158         // column reordering takes precedence over column resizing, but sometimes the mouse dragged events
159         // can be received by both nodes, leading to less than ideal UX, hence the check here.
160         if (header.getTableHeaderRow().columnDragLock) return;
161 
162         if (me.isConsumed()) return;
163         me.consume();
164 
165         if (me.getClickCount() == 2 &amp;&amp; me.isPrimaryButtonDown()) {
166             // the user wants to resize the column such that its
167             // width is equal to the widest element in the column
<span class="line-modified">168             TableHeaderRow tableHeader = header.getTableHeaderRow();</span>
<span class="line-added">169             TableColumnHeader columnHeader = tableHeader.getColumnHeaderFor(column);</span>
<span class="line-added">170             if(columnHeader != null){</span>
<span class="line-added">171                 columnHeader.resizeColumnToFitContent(-1);</span>
<span class="line-added">172             }</span>
173         } else {
174             // rather than refer to the rect variable, we just grab
175             // it from the source to prevent a small memory leak.
176             Rectangle innerRect = (Rectangle) me.getSource();
177             double startX = header.getTableHeaderRow().sceneToLocal(innerRect.localToScene(innerRect.getBoundsInLocal())).getMinX() + 2;
178             header.dragAnchorX = me.getSceneX();
179             header.columnResizingStarted(startX);
180         }
181     };
182 
183     private static final EventHandler&lt;MouseEvent&gt; rectMouseDragged = me -&gt; {
184         Rectangle rect = (Rectangle) me.getSource();
185         TableColumnBase column = (TableColumnBase) rect.getProperties().get(TABLE_COLUMN_KEY);
186         NestedTableColumnHeader header = (NestedTableColumnHeader) rect.getProperties().get(TABLE_COLUMN_HEADER_KEY);
187 
188         if (! header.isColumnResizingEnabled()) return;
189 
190         // column reordering takes precedence over column resizing, but sometimes the mouse dragged events
191         // can be received by both nodes, leading to less than ideal UX, hence the check here.
192         if (header.getTableHeaderRow().columnDragLock) return;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="TableColumnHeader.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>