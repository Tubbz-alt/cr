<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/TableColumnHeader.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="NestedTableColumnHeader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/TableColumnHeader.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 578         label.setVisible(getTableColumn().isVisible());
 579 
 580         // ---- container for the sort arrow (which is not supported on embedded
 581         // platforms)
 582         if (isSortingEnabled()) {
 583             // put together the grid
 584             updateSortGrid();
 585         }
 586     }
 587 
 588     private void doColumnAutoSize(int cellsToMeasure) {
 589         double prefWidth = getTableColumn().getPrefWidth();
 590 
 591         // if the prefWidth has been set, we do _not_ autosize columns
 592         if (prefWidth == DEFAULT_COLUMN_WIDTH) {
 593             resizeColumnToFitContent(cellsToMeasure);
 594         }
 595     }
 596 
 597     /**
<span class="line-modified"> 598      * Resizes this {@code TableColumnHeader}&#39;s column based on content of header and content of cells. This</span>
<span class="line-modified"> 599      * implementation measures the preferred width of the header, the preferred width of the first {@code maxRow} cells</span>
<span class="line-modified"> 600      * and sizes the column to the maximum width of all measured values. Subclass can either call this method or</span>
<span class="line-modified"> 601      * override it (no need to call {@code super()}) to provide their custom implementation (exclude headers, exclude</span>
<span class="line-modified"> 602      * null content, use min).</span>

 603      *
 604      * @param maxRows the number of rows considered when resizing. If -1 is given, all rows are considered.
 605      * @since 14
 606      */
 607     protected void resizeColumnToFitContent(int maxRows) {
 608         TableColumnBase&lt;?, ?&gt; tc = getTableColumn();
 609         if (!tc.isResizable()) return;
 610 
 611         Object control = this.getTableSkin().getSkinnable();
 612         if (control instanceof TableView) {
<span class="line-modified"> 613             resizeColumnToFitContent((TableView)control, (TableColumn)tc, this.getTableSkin(), maxRows);</span>
 614         } else if (control instanceof TreeTableView) {
<span class="line-modified"> 615             resizeColumnToFitContent((TreeTableView)control, (TreeTableColumn)tc, this.getTableSkin(), maxRows);</span>
 616         }
 617     }
 618 
 619     private &lt;T,S&gt; void resizeColumnToFitContent(TableView&lt;T&gt; tv, TableColumn&lt;T, S&gt; tc, TableViewSkinBase tableSkin, int maxRows) {
 620         List&lt;?&gt; items = tv.getItems();
 621         if (items == null || items.isEmpty()) return;
 622 
 623         Callback/*&lt;TableColumn&lt;T, ?&gt;, TableCell&lt;T,?&gt;&gt;*/ cellFactory = tc.getCellFactory();
 624         if (cellFactory == null) return;
 625 
 626         TableCell&lt;T,?&gt; cell = (TableCell&lt;T, ?&gt;) cellFactory.call(tc);
 627         if (cell == null) return;
 628 
 629         // set this property to tell the TableCell we want to know its actual
 630         // preferred width, not the width of the associated TableColumnBase
 631         cell.getProperties().put(Properties.DEFER_TO_PARENT_PREF_WIDTH, Boolean.TRUE);
 632 
 633         // determine cell padding
 634         double padding = 10;
 635         Node n = cell.getSkin() == null ? null : cell.getSkin().getNode();
</pre>
</td>
<td>
<hr />
<pre>
 578         label.setVisible(getTableColumn().isVisible());
 579 
 580         // ---- container for the sort arrow (which is not supported on embedded
 581         // platforms)
 582         if (isSortingEnabled()) {
 583             // put together the grid
 584             updateSortGrid();
 585         }
 586     }
 587 
 588     private void doColumnAutoSize(int cellsToMeasure) {
 589         double prefWidth = getTableColumn().getPrefWidth();
 590 
 591         // if the prefWidth has been set, we do _not_ autosize columns
 592         if (prefWidth == DEFAULT_COLUMN_WIDTH) {
 593             resizeColumnToFitContent(cellsToMeasure);
 594         }
 595     }
 596 
 597     /**
<span class="line-modified"> 598      * Resizes this {@code TableColumnHeader}&#39;s column to fit the width of its content. The resulting column width is</span>
<span class="line-modified"> 599      * the maximum of the preferred width of the header cell and the preferred width of the first {@code maxRow} cells.</span>
<span class="line-modified"> 600      * &lt;p&gt;</span>
<span class="line-modified"> 601      * Subclasses can either use this method or override it (without the need to call {@code super()}) to provide their</span>
<span class="line-modified"> 602      * custom implementation (such as ones that exclude the header, exclude {@code null} content, compute the minimum</span>
<span class="line-added"> 603      * width etc.).</span>
 604      *
 605      * @param maxRows the number of rows considered when resizing. If -1 is given, all rows are considered.
 606      * @since 14
 607      */
 608     protected void resizeColumnToFitContent(int maxRows) {
 609         TableColumnBase&lt;?, ?&gt; tc = getTableColumn();
 610         if (!tc.isResizable()) return;
 611 
 612         Object control = this.getTableSkin().getSkinnable();
 613         if (control instanceof TableView) {
<span class="line-modified"> 614             resizeColumnToFitContent((TableView) control, (TableColumn) tc, this.getTableSkin(), maxRows);</span>
 615         } else if (control instanceof TreeTableView) {
<span class="line-modified"> 616             resizeColumnToFitContent((TreeTableView) control, (TreeTableColumn) tc, this.getTableSkin(), maxRows);</span>
 617         }
 618     }
 619 
 620     private &lt;T,S&gt; void resizeColumnToFitContent(TableView&lt;T&gt; tv, TableColumn&lt;T, S&gt; tc, TableViewSkinBase tableSkin, int maxRows) {
 621         List&lt;?&gt; items = tv.getItems();
 622         if (items == null || items.isEmpty()) return;
 623 
 624         Callback/*&lt;TableColumn&lt;T, ?&gt;, TableCell&lt;T,?&gt;&gt;*/ cellFactory = tc.getCellFactory();
 625         if (cellFactory == null) return;
 626 
 627         TableCell&lt;T,?&gt; cell = (TableCell&lt;T, ?&gt;) cellFactory.call(tc);
 628         if (cell == null) return;
 629 
 630         // set this property to tell the TableCell we want to know its actual
 631         // preferred width, not the width of the associated TableColumnBase
 632         cell.getProperties().put(Properties.DEFER_TO_PARENT_PREF_WIDTH, Boolean.TRUE);
 633 
 634         // determine cell padding
 635         double padding = 10;
 636         Node n = cell.getSkin() == null ? null : cell.getSkin().getNode();
</pre>
</td>
</tr>
</table>
<center><a href="NestedTableColumnHeader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>