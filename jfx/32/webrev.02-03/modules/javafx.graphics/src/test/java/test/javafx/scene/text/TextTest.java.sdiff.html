<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/test/java/test/javafx/scene/text/TextTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../com/sun/javafx/pgstub/StubTextLayout.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/test/java/test/javafx/scene/text/TextTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
231         String s = new Text().toString();
232         assertNotNull(s);
233         assertFalse(s.isEmpty());
234     }
235 
236     // Test for JDK-8130738
237     @Test public void testTabSize() {
238         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
239         HBox root = new HBox();
240         Scene scene = new Scene(root);
241         Stage stage = new Stage();
242         stage.setScene(scene);
243         stage.setWidth(300);
244         stage.setHeight(200);
245 
246         try {
247             Text text = new Text(&quot;\tHello&quot;);
248             root.getChildren().addAll(text);
249             stage.show();
250             tk.firePulse();
<span class="line-modified">251             assertEquals(text.getTabSize(),8);</span>
252             // initial width with default 8-space tab
253             double widthT8 = text.getBoundsInLocal().getWidth();
254             text.setTabSize(1);
255             tk.firePulse();
256             // width with tab at 1 spaces
257             double widthT1 = text.getBoundsInLocal().getWidth();
258             // approximate width of a single space
259             double widthSpace = (widthT8 - widthT1) / 7;
260             assertTrue(widthSpace &gt; 0);
261             text.setTabSize(4);
262             tk.firePulse();
263             // width with tab at 4 spaces
264             double widthT4 = text.getBoundsInLocal().getWidth();
265             double expected = widthT8 - 4 * widthSpace;
266             // should be approximately 4 space-widths shorter
267             assertEquals(expected, widthT4, 0.5);
















268         } finally {
269             stage.hide();
270         }
271   }
272 }
</pre>
</td>
<td>
<hr />
<pre>
231         String s = new Text().toString();
232         assertNotNull(s);
233         assertFalse(s.isEmpty());
234     }
235 
236     // Test for JDK-8130738
237     @Test public void testTabSize() {
238         Toolkit tk = (StubToolkit)Toolkit.getToolkit();
239         HBox root = new HBox();
240         Scene scene = new Scene(root);
241         Stage stage = new Stage();
242         stage.setScene(scene);
243         stage.setWidth(300);
244         stage.setHeight(200);
245 
246         try {
247             Text text = new Text(&quot;\tHello&quot;);
248             root.getChildren().addAll(text);
249             stage.show();
250             tk.firePulse();
<span class="line-modified">251             assertEquals(8, text.getTabSize());</span>
252             // initial width with default 8-space tab
253             double widthT8 = text.getBoundsInLocal().getWidth();
254             text.setTabSize(1);
255             tk.firePulse();
256             // width with tab at 1 spaces
257             double widthT1 = text.getBoundsInLocal().getWidth();
258             // approximate width of a single space
259             double widthSpace = (widthT8 - widthT1) / 7;
260             assertTrue(widthSpace &gt; 0);
261             text.setTabSize(4);
262             tk.firePulse();
263             // width with tab at 4 spaces
264             double widthT4 = text.getBoundsInLocal().getWidth();
265             double expected = widthT8 - 4 * widthSpace;
266             // should be approximately 4 space-widths shorter
267             assertEquals(expected, widthT4, 0.5);
<span class="line-added">268 </span>
<span class="line-added">269             text.tabSizeProperty().set(5);</span>
<span class="line-added">270             assertEquals(5, text.tabSizeProperty().get());</span>
<span class="line-added">271             tk.firePulse();</span>
<span class="line-added">272             double widthT5 = text.getBoundsInLocal().getWidth();</span>
<span class="line-added">273             expected = widthT8 - 3 * widthSpace;</span>
<span class="line-added">274             assertEquals(expected, widthT5, 0.5);</span>
<span class="line-added">275 </span>
<span class="line-added">276             // Test clamping</span>
<span class="line-added">277             text.tabSizeProperty().set(0);</span>
<span class="line-added">278             assertEquals(0, text.tabSizeProperty().get());</span>
<span class="line-added">279             assertEquals(0, text.getTabSize());</span>
<span class="line-added">280             tk.firePulse();</span>
<span class="line-added">281             double widthT0Clamp = text.getBoundsInLocal().getWidth();</span>
<span class="line-added">282             // values &lt; 1 are treated as 1</span>
<span class="line-added">283             assertEquals(widthT1, widthT0Clamp, 0.5);</span>
284         } finally {
285             stage.hide();
286         }
287   }
288 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../com/sun/javafx/pgstub/StubTextLayout.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>