<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/java/javafx/scene/text/Text.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../com/sun/javafx/text/PrismTextLayout.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TextFlow.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/java/javafx/scene/text/Text.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1254      */
1255     private com.sun.javafx.geom.Shape doConfigShape() {
1256         if (ShapeHelper.getMode(this) == NGShape.Mode.EMPTY || getTextInternal().length() == 0) {
1257             return new Path2D();
1258         }
1259         com.sun.javafx.geom.Shape shape = getShape();
1260         float x, y;
1261         if (isSpan()) {
1262             BaseBounds bounds = getSpanBounds();
1263             x = -bounds.getMinX();
1264             y = -bounds.getMinY();
1265         } else {
1266             x = (float)getX();
1267             y = getYAdjustment(getVisualBounds()) + (float)getY();
1268         }
1269         return TransformedShape.translatedShape(shape, x, y);
1270     }
1271 
1272     /**
1273      * The size of a tab stop in spaces.
<span class="line-modified">1274      *</span>
<span class="line-removed">1275      * @return the {@code tabSize} property</span>
1276      *
1277      * @defaultValue {@code 8}
1278      *
1279      * @since 14
1280      */
1281     public final IntegerProperty tabSizeProperty() {
1282         return getTextAttribute().tabSizeProperty();
1283     }
1284 
<span class="line-removed">1285     /**</span>
<span class="line-removed">1286      * Gets the size of a tab stop in spaces.</span>
<span class="line-removed">1287      * @return the size of a tab in spaces</span>
<span class="line-removed">1288      * @since 14</span>
<span class="line-removed">1289      */</span>
1290     public final int getTabSize() {
1291         if (attributes == null || attributes.tabSize == null) {
1292             return TextLayout.DEFAULT_TAB_SIZE;
1293         }
1294         return getTextAttribute().getTabSize();
1295     }
1296 
<span class="line-removed">1297     /**</span>
<span class="line-removed">1298      * Sets the size of a tab stop.</span>
<span class="line-removed">1299      * @param spaces the size of a tab in spaces. Defaults to 8.</span>
<span class="line-removed">1300      * Minimum is 1, lower values will be clamped to 1.</span>
<span class="line-removed">1301      * @since 14</span>
<span class="line-removed">1302      */</span>
1303     public final void setTabSize(int spaces) {
1304         tabSizeProperty().set(spaces);
1305     }
1306 
1307 
1308    /***************************************************************************
1309     *                                                                         *
1310     *                            Stylesheet Handling                          *
1311     *                                                                         *
1312     **************************************************************************/
1313 
1314     /*
1315      * Super-lazy instantiation pattern from Bill Pugh.
1316      */
1317     private static class StyleableProperties {
1318 
1319         private static final CssMetaData&lt;Text,Font&gt; FONT =
1320             new FontCssMetaData&lt;Text&gt;(&quot;-fx-font&quot;, Font.getDefault()) {
1321 
1322             @Override
</pre>
<hr />
<pre>
1875                 caretBias =
1876                         new SimpleBooleanProperty(Text.this, &quot;caretBias&quot;, DEFAULT_CARET_BIAS);
1877             }
1878             return caretBias;
1879         }
1880 
1881         private IntegerProperty tabSize;
1882 
1883         final int getTabSize() {
1884             return tabSize == null ? TextLayout.DEFAULT_TAB_SIZE : tabSize.get();
1885         }
1886 
1887         final IntegerProperty tabSizeProperty() {
1888             if (tabSize == null) {
1889                 tabSize = new StyleableIntegerProperty(TextLayout.DEFAULT_TAB_SIZE) {
1890                     @Override public Object getBean() { return Text.this; }
1891                     @Override public String getName() { return &quot;tabSize&quot;; }
1892                     @Override public CssMetaData getCssMetaData() {
1893                         return StyleableProperties.TAB_SIZE;
1894                     }
<span class="line-removed">1895                     @Override public void set(int v) { super.set((v &lt; 1) ? 1 : v); }</span>
1896                     @Override protected void invalidated() {
1897                         TextLayout layout = getTextLayout();
1898                         if (layout.setTabSize(get())) {
1899                             needsTextLayout();
1900                         }
1901                         NodeHelper.markDirty(Text.this, DirtyBits.TEXT_ATTRS);
1902                         if (getBoundsType() == TextBoundsType.VISUAL) {
1903                             NodeHelper.geomChanged(Text.this);
1904                         }
1905                     }
1906                 };
1907             }
1908             return tabSize;
1909         }
1910     }
1911 
1912     /**
1913      * Returns a string representation of this {@code Text} object.
1914      * @return a string representation of this {@code Text} object.
1915      */
</pre>
<hr />
<pre>
1922             sb.append(&quot;id=&quot;).append(id).append(&quot;, &quot;);
1923         }
1924 
1925         sb.append(&quot;text=\&quot;&quot;).append(getText()).append(&quot;\&quot;&quot;);
1926         sb.append(&quot;, x=&quot;).append(getX());
1927         sb.append(&quot;, y=&quot;).append(getY());
1928         sb.append(&quot;, alignment=&quot;).append(getTextAlignment());
1929         sb.append(&quot;, origin=&quot;).append(getTextOrigin());
1930         sb.append(&quot;, boundsType=&quot;).append(getBoundsType());
1931 
1932         double spacing = getLineSpacing();
1933         if (spacing != DEFAULT_LINE_SPACING) {
1934             sb.append(&quot;, lineSpacing=&quot;).append(spacing);
1935         }
1936 
1937         double wrap = getWrappingWidth();
1938         if (wrap != 0) {
1939             sb.append(&quot;, wrappingWidth=&quot;).append(wrap);
1940         }
1941 





1942         sb.append(&quot;, font=&quot;).append(getFont());
1943         sb.append(&quot;, fontSmoothingType=&quot;).append(getFontSmoothingType());
1944 
1945         if (isStrikethrough()) {
1946             sb.append(&quot;, strikethrough&quot;);
1947         }
1948         if (isUnderline()) {
1949             sb.append(&quot;, underline&quot;);
1950         }
1951 
1952         sb.append(&quot;, fill=&quot;).append(getFill());
1953 
1954         Paint stroke = getStroke();
1955         if (stroke != null) {
1956             sb.append(&quot;, stroke=&quot;).append(stroke);
1957             sb.append(&quot;, strokeWidth=&quot;).append(getStrokeWidth());
1958         }
1959 
1960         return sb.append(&quot;]&quot;).toString();
1961     }
</pre>
</td>
<td>
<hr />
<pre>
1254      */
1255     private com.sun.javafx.geom.Shape doConfigShape() {
1256         if (ShapeHelper.getMode(this) == NGShape.Mode.EMPTY || getTextInternal().length() == 0) {
1257             return new Path2D();
1258         }
1259         com.sun.javafx.geom.Shape shape = getShape();
1260         float x, y;
1261         if (isSpan()) {
1262             BaseBounds bounds = getSpanBounds();
1263             x = -bounds.getMinX();
1264             y = -bounds.getMinY();
1265         } else {
1266             x = (float)getX();
1267             y = getYAdjustment(getVisualBounds()) + (float)getY();
1268         }
1269         return TransformedShape.translatedShape(shape, x, y);
1270     }
1271 
1272     /**
1273      * The size of a tab stop in spaces.
<span class="line-modified">1274      * Values less than 1 are treated as 1.</span>

1275      *
1276      * @defaultValue {@code 8}
1277      *
1278      * @since 14
1279      */
1280     public final IntegerProperty tabSizeProperty() {
1281         return getTextAttribute().tabSizeProperty();
1282     }
1283 





1284     public final int getTabSize() {
1285         if (attributes == null || attributes.tabSize == null) {
1286             return TextLayout.DEFAULT_TAB_SIZE;
1287         }
1288         return getTextAttribute().getTabSize();
1289     }
1290 






1291     public final void setTabSize(int spaces) {
1292         tabSizeProperty().set(spaces);
1293     }
1294 
1295 
1296    /***************************************************************************
1297     *                                                                         *
1298     *                            Stylesheet Handling                          *
1299     *                                                                         *
1300     **************************************************************************/
1301 
1302     /*
1303      * Super-lazy instantiation pattern from Bill Pugh.
1304      */
1305     private static class StyleableProperties {
1306 
1307         private static final CssMetaData&lt;Text,Font&gt; FONT =
1308             new FontCssMetaData&lt;Text&gt;(&quot;-fx-font&quot;, Font.getDefault()) {
1309 
1310             @Override
</pre>
<hr />
<pre>
1863                 caretBias =
1864                         new SimpleBooleanProperty(Text.this, &quot;caretBias&quot;, DEFAULT_CARET_BIAS);
1865             }
1866             return caretBias;
1867         }
1868 
1869         private IntegerProperty tabSize;
1870 
1871         final int getTabSize() {
1872             return tabSize == null ? TextLayout.DEFAULT_TAB_SIZE : tabSize.get();
1873         }
1874 
1875         final IntegerProperty tabSizeProperty() {
1876             if (tabSize == null) {
1877                 tabSize = new StyleableIntegerProperty(TextLayout.DEFAULT_TAB_SIZE) {
1878                     @Override public Object getBean() { return Text.this; }
1879                     @Override public String getName() { return &quot;tabSize&quot;; }
1880                     @Override public CssMetaData getCssMetaData() {
1881                         return StyleableProperties.TAB_SIZE;
1882                     }

1883                     @Override protected void invalidated() {
1884                         TextLayout layout = getTextLayout();
1885                         if (layout.setTabSize(get())) {
1886                             needsTextLayout();
1887                         }
1888                         NodeHelper.markDirty(Text.this, DirtyBits.TEXT_ATTRS);
1889                         if (getBoundsType() == TextBoundsType.VISUAL) {
1890                             NodeHelper.geomChanged(Text.this);
1891                         }
1892                     }
1893                 };
1894             }
1895             return tabSize;
1896         }
1897     }
1898 
1899     /**
1900      * Returns a string representation of this {@code Text} object.
1901      * @return a string representation of this {@code Text} object.
1902      */
</pre>
<hr />
<pre>
1909             sb.append(&quot;id=&quot;).append(id).append(&quot;, &quot;);
1910         }
1911 
1912         sb.append(&quot;text=\&quot;&quot;).append(getText()).append(&quot;\&quot;&quot;);
1913         sb.append(&quot;, x=&quot;).append(getX());
1914         sb.append(&quot;, y=&quot;).append(getY());
1915         sb.append(&quot;, alignment=&quot;).append(getTextAlignment());
1916         sb.append(&quot;, origin=&quot;).append(getTextOrigin());
1917         sb.append(&quot;, boundsType=&quot;).append(getBoundsType());
1918 
1919         double spacing = getLineSpacing();
1920         if (spacing != DEFAULT_LINE_SPACING) {
1921             sb.append(&quot;, lineSpacing=&quot;).append(spacing);
1922         }
1923 
1924         double wrap = getWrappingWidth();
1925         if (wrap != 0) {
1926             sb.append(&quot;, wrappingWidth=&quot;).append(wrap);
1927         }
1928 
<span class="line-added">1929         int tab = getTabSize();</span>
<span class="line-added">1930         if (tab != TextLayout.DEFAULT_TAB_SIZE) {</span>
<span class="line-added">1931             sb.append(&quot;, tabSize=&quot;).append(tab);</span>
<span class="line-added">1932         }</span>
<span class="line-added">1933 </span>
1934         sb.append(&quot;, font=&quot;).append(getFont());
1935         sb.append(&quot;, fontSmoothingType=&quot;).append(getFontSmoothingType());
1936 
1937         if (isStrikethrough()) {
1938             sb.append(&quot;, strikethrough&quot;);
1939         }
1940         if (isUnderline()) {
1941             sb.append(&quot;, underline&quot;);
1942         }
1943 
1944         sb.append(&quot;, fill=&quot;).append(getFill());
1945 
1946         Paint stroke = getStroke();
1947         if (stroke != null) {
1948             sb.append(&quot;, stroke=&quot;).append(stroke);
1949             sb.append(&quot;, strokeWidth=&quot;).append(getStrokeWidth());
1950         }
1951 
1952         return sb.append(&quot;]&quot;).toString();
1953     }
</pre>
</td>
</tr>
</table>
<center><a href="../../../com/sun/javafx/text/PrismTextLayout.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="TextFlow.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>