<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff tests/system/src/test/java/test/robot/javafx/scene/dialog/DialogWithOwnerSizingTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>tests/system/src/test/java/test/robot/javafx/scene/dialog/DialogWithOwnerSizingTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 29,11 ***</span>
  import javafx.application.Platform;
  import javafx.scene.Scene;
  import javafx.scene.control.Button;
  import javafx.scene.control.ButtonType;
  import javafx.scene.control.Dialog;
<span class="line-removed">- import javafx.scene.control.DialogEvent;</span>
  import javafx.scene.robot.Robot;
  import javafx.stage.Stage;
  import javafx.stage.StageStyle;
  import javafx.stage.WindowEvent;
  import javafx.scene.input.MouseButton;
<span class="line-new-header">--- 29,10 ---</span>
</pre>
<hr />
<pre>
<span class="line-old-header">*** 45,11 ***</span>
  import test.util.Util;
  
  import java.util.concurrent.CountDownLatch;
  import java.util.concurrent.TimeUnit;
  
<span class="line-modified">! //see JDK8193502</span>
  public class DialogWithOwnerSizingTest {
      static Robot robot;
      static Button button;
      static Stage stage;
      static Scene scene;
<span class="line-new-header">--- 44,11 ---</span>
  import test.util.Util;
  
  import java.util.concurrent.CountDownLatch;
  import java.util.concurrent.TimeUnit;
  
<span class="line-modified">! //see JDK-8193502</span>
  public class DialogWithOwnerSizingTest {
      static Robot robot;
      static Button button;
      static Stage stage;
      static Scene scene;
</pre>
<hr />
<pre>
<span class="line-old-header">*** 62,31 ***</span>
      @Test(timeout = 15000)
      public void dialogWithOwnerSizingTest() throws Exception {
          Thread.sleep(500);
          clickButton();
          Thread.sleep(500);
<span class="line-removed">-         Assert.assertEquals(dialog.getDialogPane().getWidth(), dialog2.getDialogPane().getWidth(), 0.0);</span>
<span class="line-removed">-         Assert.assertEquals(dialog.getDialogPane().getHeight(), dialog2.getDialogPane().getHeight(), 0.0);</span>
<span class="line-removed">-         hide();</span>
<span class="line-removed">-     }</span>
  
  
      private void clickButton() throws Exception {
          dialogShownLatch = new CountDownLatch(2);
          mouseClick(button.getLayoutX() + button.getWidth() / 2, button.getLayoutY() + button.getHeight() / 2);
  
<span class="line-removed">-         Thread.sleep(400);</span>
          waitForLatch(dialogShownLatch, 10, &quot;Failed to show Dialog&quot;);
      }
  
      private void hide() throws Exception {
          dialogHideLatch = new CountDownLatch(2);
          Platform.runLater(() -&gt; {
              dialog.close();
              dialog2.close();
          });
<span class="line-removed">-         Thread.sleep(600);</span>
          waitForLatch(dialogHideLatch, 10, &quot;Failed to hide Dialog&quot;);
      }
  
      @BeforeClass
      public static void initFX() throws Exception {
<span class="line-new-header">--- 61,32 ---</span>
      @Test(timeout = 15000)
      public void dialogWithOwnerSizingTest() throws Exception {
          Thread.sleep(500);
          clickButton();
          Thread.sleep(500);
  
<span class="line-added">+         try {</span>
<span class="line-added">+             Assert.assertEquals(dialog2.getDialogPane().getWidth(), dialog.getDialogPane().getWidth(), 2.0);</span>
<span class="line-added">+             Assert.assertEquals(dialog2.getDialogPane().getHeight(), dialog.getDialogPane().getHeight(), 2.0);</span>
<span class="line-added">+         } finally {</span>
<span class="line-added">+             hide();</span>
<span class="line-added">+         }</span>
<span class="line-added">+     }</span>
  
      private void clickButton() throws Exception {
          dialogShownLatch = new CountDownLatch(2);
          mouseClick(button.getLayoutX() + button.getWidth() / 2, button.getLayoutY() + button.getHeight() / 2);
  
          waitForLatch(dialogShownLatch, 10, &quot;Failed to show Dialog&quot;);
      }
  
      private void hide() throws Exception {
          dialogHideLatch = new CountDownLatch(2);
          Platform.runLater(() -&gt; {
              dialog.close();
              dialog2.close();
          });
          waitForLatch(dialogHideLatch, 10, &quot;Failed to hide Dialog&quot;);
      }
  
      @BeforeClass
      public static void initFX() throws Exception {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 113,10 ***</span>
<span class="line-new-header">--- 113,11 ---</span>
      public static class SizingTestApp extends Application {
          @Override
          public void start(Stage primaryStage) {
              robot = new Robot();
              stage = primaryStage;
<span class="line-added">+             stage.setAlwaysOnTop(true);</span>
  
              button = new Button(&quot;Open Dialogs&quot;);
  
              scene = new Scene(button, 200, 200);
              stage.setScene(scene);
</pre>
<center><a href="../../../../../../../../../../modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>