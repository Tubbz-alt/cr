<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/glass_window.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
1036                 set_bounds(0, 0, false, false,
1037                     requested_bounds.width, requested_bounds.height,
1038                     requested_bounds.client_width, requested_bounds.client_height
1039                 );
1040             }
1041         }
1042     } else {
1043         x = event-&gt;x;
1044         y = event-&gt;y;
1045         w = event-&gt;width;
1046         h = event-&gt;height;
1047     }
1048 
1049     if (size_assigned &amp;&amp; w &lt;= 1 &amp;&amp; h &lt;= 1 &amp;&amp; (geometry.final_width.value &gt; 1 ||
1050                                              geometry.final_height.value &gt; 1)) {
1051         // skip artifact
1052         return;
1053 
1054     }
1055 
<span class="line-modified">1056     //JDK-8232811: update the geometry only after window pops to avoid conflicting events while updating sizes</span>
1057     if (map_received) {
1058         geometry.final_width.value = w;
1059         geometry.final_width.type = BOUNDSTYPE_CONTENT;
1060         geometry.final_height.value = h;
1061         geometry.final_height.type = BOUNDSTYPE_CONTENT;
1062     }
1063 
1064     geometry_set_window_x(&amp;geometry, x);
1065     geometry_set_window_y(&amp;geometry, y);
1066 
1067     if (jview) {
1068         mainEnv-&gt;CallVoidMethod(jview, jViewNotifyResize,
1069                 event-&gt;width,
1070                 event-&gt;height);
1071         CHECK_JNI_EXCEPTION(mainEnv)
1072         mainEnv-&gt;CallVoidMethod(jview, jViewNotifyView,
1073                 com_sun_glass_events_ViewEvent_MOVE);
1074         CHECK_JNI_EXCEPTION(mainEnv)
1075 
1076         //JDK-8193502: Moved here from WindowContextBase::set_view because set_view is called
</pre>
</td>
<td>
<hr />
<pre>
1036                 set_bounds(0, 0, false, false,
1037                     requested_bounds.width, requested_bounds.height,
1038                     requested_bounds.client_width, requested_bounds.client_height
1039                 );
1040             }
1041         }
1042     } else {
1043         x = event-&gt;x;
1044         y = event-&gt;y;
1045         w = event-&gt;width;
1046         h = event-&gt;height;
1047     }
1048 
1049     if (size_assigned &amp;&amp; w &lt;= 1 &amp;&amp; h &lt;= 1 &amp;&amp; (geometry.final_width.value &gt; 1 ||
1050                                              geometry.final_height.value &gt; 1)) {
1051         // skip artifact
1052         return;
1053 
1054     }
1055 
<span class="line-modified">1056     // JDK-8232811: to avoid conflicting events, update the geometry only after window pops.</span>
1057     if (map_received) {
1058         geometry.final_width.value = w;
1059         geometry.final_width.type = BOUNDSTYPE_CONTENT;
1060         geometry.final_height.value = h;
1061         geometry.final_height.type = BOUNDSTYPE_CONTENT;
1062     }
1063 
1064     geometry_set_window_x(&amp;geometry, x);
1065     geometry_set_window_y(&amp;geometry, y);
1066 
1067     if (jview) {
1068         mainEnv-&gt;CallVoidMethod(jview, jViewNotifyResize,
1069                 event-&gt;width,
1070                 event-&gt;height);
1071         CHECK_JNI_EXCEPTION(mainEnv)
1072         mainEnv-&gt;CallVoidMethod(jview, jViewNotifyView,
1073                 com_sun_glass_events_ViewEvent_MOVE);
1074         CHECK_JNI_EXCEPTION(mainEnv)
1075 
1076         //JDK-8193502: Moved here from WindowContextBase::set_view because set_view is called
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>