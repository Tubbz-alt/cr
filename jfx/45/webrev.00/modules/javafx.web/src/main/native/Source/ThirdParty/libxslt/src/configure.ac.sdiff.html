<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.web/src/main/native/Source/ThirdParty/libxslt/src/configure.ac</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="config.h.in.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="libexslt.pc.in.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.web/src/main/native/Source/ThirdParty/libxslt/src/configure.ac</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 dnl Process this file with autoconf to produce a configuration script.
  2 AC_PREREQ(2.63)
  3 
  4 m4_define([MAJOR_VERSION], [1])
  5 m4_define([MINOR_VERSION], [1])
<span class="line-modified">  6 m4_define([MICRO_VERSION], [33])</span>
  7 
  8 AC_INIT([libxslt], [MAJOR_VERSION.MINOR_VERSION.MICRO_VERSION])
  9 AC_CONFIG_SRCDIR([libxslt/xslt.c])
 10 AC_CONFIG_HEADERS(config.h)
 11 AC_CANONICAL_HOST
 12 AC_USE_SYSTEM_EXTENSIONS
 13 
 14 dnl
 15 dnl libxslt is the main part of the package
 16 dnl libexslt is an extension
 17 dnl
 18 LIBXSLT_MAJOR_VERSION=MAJOR_VERSION
 19 LIBXSLT_MINOR_VERSION=MINOR_VERSION
 20 LIBXSLT_MICRO_VERSION=MICRO_VERSION
 21 LIBEXSLT_MAJOR_VERSION=0
 22 LIBEXSLT_MINOR_VERSION=8
 23 LIBEXSLT_MICRO_VERSION=20
 24 LIBXML_REQUIRED_VERSION=2.6.27
 25 
 26 
</pre>
<hr />
<pre>
151     AC_CHECK_LIB(pthread, pthread_join,[
152        AC_DEFINE([HAVE_LIBPTHREAD], [], [Define if pthread library is there (-lpthread)])
153        AC_DEFINE([HAVE_PTHREAD_H], [], [Define if &lt;pthread.h&gt; is there])
154        THREAD_LIBS=&quot;-lpthread&quot;]))
155   ;;
156 esac
157 
158 AC_SUBST(THREAD_LIBS)
159 
160 dnl
161 dnl Detect supported locale
162 dnl
163 
164 AC_CHECK_HEADERS([locale.h xlocale.h])
165 AC_CHECK_FUNCS([strxfrm_l])
166 
167 dnl
168 dnl Math detection
169 dnl
170 
<span class="line-modified">171 AC_CHECK_HEADERS(ieeefp.h nan.h math.h fp_class.h float.h ansidecl.h)</span>
172 AC_CHECK_HEADERS(sys/timeb.h time.h sys/stat.h sys/select.h stdarg.h)
173 AC_CHECK_HEADERS(errno.h)
174 AC_CHECK_FUNCS(stat _stat)
175 AC_CHECK_FUNC(pow, , AC_CHECK_LIB(m, pow,
176   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_POW],[], [Define if pow is there])]))
177 
178 AC_CHECK_FUNC(floor, , AC_CHECK_LIB(m, floor,
179   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_FLOOR],[], [Define if floor is there])]))
180 
181 AC_CHECK_FUNC(fabs, , AC_CHECK_LIB(m, fabs,
182   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_FABS],[], [Define if fabs is there])]))
183 
184 
185 AC_CHECK_FUNCS(gettimeofday)
186 AC_CHECK_FUNCS(localtime localtime_r time gmtime gmtime_r ftime)
187 
188 dnl Checking the standard string functions availability
189 AC_CHECK_FUNCS(printf sprintf fprintf snprintf vfprintf vsprintf vsnprintf sscanf,,
190                NEED_TRIO=1)
191 
</pre>
<hr />
<pre>
385     WITH_MEM_DEBUG=1
386 else    
387     WITH_MEM_DEBUG=0
388 fi
389 AC_SUBST(WITH_MEM_DEBUG)
390 
391 dnl 
392 dnl Is debugger support requested
393 dnl
394 AC_ARG_WITH(debugger, [  --with-debugger        Add the debugging support (on)])
395 if test &quot;$with_debugger&quot; = &quot;no&quot; ; then
396     echo Disabling debugger
397     WITH_DEBUGGER=0
398 else
399     echo Enabling debugger
400     WITH_DEBUGGER=1
401     AC_DEFINE([WITH_DEBUGGER],[], [Define if debugging support is enabled])
402 fi
403 AC_SUBST(WITH_DEBUGGER)
404 














405 dnl
406 dnl The following new parameters were added to offer
407 dnl the ability to specify the location of the libxml
408 dnl library during linking and compilation.
409 dnl
410 dnl original work - Mathieu Lacage 30/03/2000
411 dnl some tweaking - David HÃ¤rdeman 30/10/2001
412 dnl
413 
414 LIBXML_CONFIG_PREFIX=&quot;&quot;
415 LIBXML_SRC=&quot;&quot;
416 
417 AC_ARG_WITH(libxml-prefix,
418         [  --with-libxml-prefix=[PFX]		Specify location of libxml config],
419 	LIBXML_CONFIG_PREFIX=$withval
420 )
421         
422 AC_ARG_WITH(libxml-include-prefix,
423         [  --with-libxml-include-prefix=[PFX]	Specify location of libxml headers],
424         LIBXML_CFLAGS=&quot;-I$withval&quot;
</pre>
<hr />
<pre>
443 if test &quot;x$LIBXML_CONFIG_PREFIX&quot; != &quot;x&quot;
444 then
445 	AC_PATH_TOOL([XML_CONFIG], [xml2-config], [false], [${LIBXML_CONFIG_PREFIX}/bin])
446 else
447 	AC_PATH_TOOL([XML_CONFIG], [xml2-config], [false])
448 fi
449 
450 dnl
451 dnl imported from libxml2, c.f. #77827 
452 dnl
453 if test &quot;${GCC}&quot; != &quot;yes&quot; ; then
454     case &quot;${host}&quot; in
455           *-*-hpux* )
456 	       CFLAGS=&quot;${CFLAGS} -Wp,-H30000&quot;
457 	       ;;
458           *-dec-osf* )
459                CFLAGS=&quot;${CFLAGS} -ieee&quot;
460                ;;
461     esac
462 else
<span class="line-modified">463     CFLAGS=&quot;${CFLAGS} -Wall -Wformat=2 -Wmissing-format-attribute&quot;</span>
464     case &quot;${host}&quot; in
465           alpha*-*-linux* )
466 	       CFLAGS=&quot;${CFLAGS} -mieee&quot;
467 	       ;;
468 	  alpha*-*-osf* )
469 	       CFLAGS=&quot;${CFLAGS} -mieee&quot;
470 	       ;;
471     esac
472 fi
473 



















474 dnl
475 dnl Override other variables if LIBXML_SRC is set
476 dnl
477 
<span class="line-modified">478 if test &quot;x$LIBXML_SRC&quot; != &quot;x&quot;</span>
<span class="line-modified">479 then</span>
<span class="line-modified">480 	CWD=`pwd`</span>
<span class="line-modified">481 	if cd $LIBXML_SRC</span>
<span class="line-modified">482 	then</span>
<span class="line-modified">483 		LIBXML_SRC=`pwd`</span>
<span class="line-modified">484 		XML_CONFIG=&quot;${LIBXML_SRC}/xml2-config&quot;</span>
<span class="line-modified">485 		LIBXML_CFLAGS=&quot;-I${LIBXML_SRC}/include&quot;</span>
<span class="line-modified">486 		LIBXML_LIBS=&quot;-L${LIBXML_SRC} `$XML_CONFIG --libs`&quot;</span>
<span class="line-modified">487                 WITH_MODULES=&quot;`$XML_CONFIG --modules`&quot;</span>
<span class="line-modified">488 		cd $CWD</span>
<span class="line-modified">489 	else</span>
<span class="line-modified">490 		AC_MSG_ERROR([libxml source dir not found (${LIBXML_SRC}), typo?])</span>
<span class="line-modified">491 	fi</span>


492 fi
493 
494 dnl
495 dnl Try pkg-config first if nothing is set
496 dnl
497 
<span class="line-modified">498 if test &quot;x$LIBXML_CONFIG_PREFIX&quot; = &quot;x&quot; -a &quot;x$LIBXML_LIBS&quot; = &quot;x&quot;</span>
<span class="line-modified">499 then</span>
<span class="line-modified">500 	PKG_CHECK_MODULES([LIBXML], [libxml-2.0 &gt;= $LIBXML_REQUIRED_VERSION], [</span>
<span class="line-modified">501 		WITH_MODULES=&quot;`$PKG_CONFIG --variable=modules libxml-2.0`&quot;</span>
<span class="line-modified">502 	], [ ])</span>




503 fi
504 
505 dnl
506 dnl make sure xml2-config is executable,
507 dnl test version and init our variables
508 dnl
509 
510 if test &quot;x$LIBXML_LIBS&quot; = &quot;x&quot; &amp;&amp; ${XML_CONFIG} --libs print &gt; /dev/null 2&gt;&amp;1
511 then
<span class="line-modified">512         AC_MSG_CHECKING(for libxml libraries &gt;= $LIBXML_REQUIRED_VERSION)</span>
<span class="line-modified">513 	XMLVERS=`$XML_CONFIG --version`</span>
<span class="line-modified">514 	if test VERSION_TO_NUMBER(echo $XMLVERS) -ge VERSION_TO_NUMBER(echo $LIBXML_REQUIRED_VERSION)</span>
<span class="line-modified">515 	then</span>
<span class="line-modified">516 		AC_MSG_RESULT($XMLVERS found)</span>
<span class="line-modified">517 	else</span>
<span class="line-modified">518 		AC_MSG_ERROR(Version $XMLVERS found. You need at least libxml2 $LIBXML_REQUIRED_VERSION for this version of libxslt)</span>
<span class="line-modified">519 	fi</span>
<span class="line-modified">520 	LIBXML_LIBS=&quot;`$XML_CONFIG --libs`&quot;</span>




521 	LIBXML_CFLAGS=&quot;`$XML_CONFIG --cflags`&quot;
522         WITH_MODULES=&quot;`$XML_CONFIG --modules`&quot;
523 fi
524 
525 if test &quot;x$LIBXML_LIBS&quot; = &quot;x&quot;
526 then
527 	AC_MSG_ERROR([Could not find libxml2 anywhere, check ftp://xmlsoft.org/.])
528 fi
529 
530 
531 AC_SUBST(CFLAGS)
532 AC_SUBST(CPPFLAGS)
533 AC_SUBST(LDFLAGS)
534 
535 AC_ARG_WITH(plugins,
536 [  --with-plugins          Add plugin extension support (on)])
537 if test &quot;$with_plugins&quot; = &quot;&quot;
538 then
539     with_plugins=yes
540 fi
541 
542 AC_MSG_CHECKING([whether shared libraries will be built (required for plugins)])
<span class="line-modified">543 if test &quot;$enable_shared&quot; = &quot;no&quot; -a &quot;$with_plugins&quot; = &quot;yes&quot;; then</span>
544 	 AC_MSG_RESULT(no)
545 	 AC_MSG_WARN([Disabling plugin support.])
546 	 AC_MSG_WARN([Plugins require that shared libraries be built.])
547 	 with_plugins=no
548 else
549 	 AC_MSG_RESULT(yes)
550 fi
551 
552 if test &quot;$with_plugins&quot; = &quot;yes&quot; ; then
553   AC_MSG_CHECKING([libxml2 module support])
554   if test &quot;${WITH_MODULES}&quot; = &quot;1&quot;; then
555     AC_MSG_RESULT(yes)
556   else
557     AC_MSG_RESULT(no)
558     WITH_MODULES=&quot;0&quot;
559   fi
560 else
561   WITH_MODULES=&quot;0&quot;
562 fi
563 
564 AC_SUBST(WITH_MODULES)
565 AM_CONDITIONAL(WITH_MODULES, test &quot;$WITH_MODULES&quot; = &quot;1&quot;)
566 
567 dnl
568 dnl setup default module path
569 dnl
570 expanded_libdir=$(
571     test &quot;x$prefix&quot; = xNONE &amp;&amp; prefix=&quot;$ac_default_prefix&quot;
572     test &quot;x$exec_prefix&quot; = xNONE &amp;&amp; exec_prefix=&quot;$prefix&quot;
573     while test &quot;$libdir_old&quot; != &quot;$libdir&quot;; do
574       libdir_old=&quot;$libdir&quot;
575       eval libdir=&quot;$libdir&quot;
576     done
577     echo &quot;$libdir&quot;
578 )
579 LIBXSLT_DEFAULT_PLUGINS_PATH=&quot;$expanded_libdir/libxslt-plugins&quot;
580 AC_SUBST(LIBXSLT_DEFAULT_PLUGINS_PATH)
581 
<span class="line-removed">582 WIN32_EXTRA_LIBADD=</span>
<span class="line-removed">583 WIN32_EXTRA_LDFLAGS=</span>
584 case &quot;$host&quot; in
<span class="line-modified">585  *-*-cygwin*)</span>
<span class="line-modified">586  WIN32_EXTRA_LDFLAGS=&quot;-no-undefined&quot;</span>
<span class="line-removed">587  ;;</span>
<span class="line-removed">588  *-*-mingw*)</span>
<span class="line-removed">589  WIN32_EXTRA_LIBADD=&quot;-lwsock32&quot;</span>
<span class="line-removed">590  WIN32_EXTRA_LDFLAGS=&quot;-no-undefined&quot;</span>
<span class="line-removed">591  AC_DEFINE([_WINSOCKAPI_],1,[Using the Win32 Socket implementation])</span>
<span class="line-removed">592  AC_DEFINE([snprintf],[_snprintf],[Win32 Std C name mangling work-around])</span>
<span class="line-removed">593  AC_DEFINE([vsnprintf],[_vsnprintf],[Win32 Std C name mangling work-around])</span>
594  ;;
595 esac
<span class="line-removed">596 AC_SUBST(WIN32_EXTRA_LIBADD)</span>
<span class="line-removed">597 AC_SUBST(WIN32_EXTRA_LDFLAGS)</span>
598 
599 
600 AC_SUBST(XSLTPROCDV)
601 AC_SUBST(PYTHONSODV)
602 AC_SUBST(XML_CONFIG)
603 AC_SUBST(LIBXML_LIBS)
604 AC_SUBST(LIBXML_CFLAGS)
605 AC_SUBST(PYTHON)
606 AC_SUBST(PYTHON_VERSION)
607 AC_SUBST(PYTHON_INCLUDES)
608 AC_SUBST(PYTHON_SITE_PACKAGES)
609 
610 XSLT_LIBDIR=&#39;-L${libdir}&#39;
611 XSLT_INCLUDEDIR=&#39;-I${includedir}&#39;
<span class="line-modified">612 XSLT_LIBS=&quot;-lxslt $LIBXML_LIBS $M_LIBS&quot;</span>

613 AC_SUBST(XSLT_LIBDIR)
614 AC_SUBST(XSLT_INCLUDEDIR)
615 AC_SUBST(XSLT_LIBS)

616 
617 EXSLT_LIBDIR=&#39;-L${libdir}&#39;
618 EXSLT_INCLUDEDIR=&#39;-I${includedir}&#39;
<span class="line-modified">619 EXSLT_LIBS=&quot;-lexslt $XSLT_LIBS $LIBGCRYPT_LIBS&quot;</span>

620 AC_SUBST(EXSLT_LIBDIR)
621 AC_SUBST(EXSLT_INCLUDEDIR)
622 AC_SUBST(EXSLT_LIBS)

623 
624 AC_SUBST(EXTRA_LIBS)
625 
626 AC_SUBST(M_LIBS)
627 
628 dnl for the spec file
629 RELDATE=`date +&#39;%a %b %e %Y&#39;`
630 AC_SUBST(RELDATE)
631 
632 rm -f COPYING.LIB COPYING 2&gt;/dev/null &amp;&amp; $LN_S $srcdir/Copyright COPYING
633 
634 
635 AC_CONFIG_FILES([
636 Makefile
637 libxslt.pc
638 libexslt.pc
639 libxslt/Makefile
640 libxslt/xsltconfig.h
641 libxslt/xsltwin32config.h
642 libexslt/Makefile
</pre>
<hr />
<pre>
655 tests/namespaces/Makefile
656 tests/keys/Makefile
657 tests/numbers/Makefile
658 tests/documents/Makefile
659 tests/xmlspec/Makefile
660 tests/multiple/Makefile
661 tests/xinclude/Makefile
662 tests/XSLTMark/Makefile
663 tests/docbook/Makefile
664 tests/exslt/Makefile
665 tests/exslt/common/Makefile
666 tests/exslt/functions/Makefile
667 tests/exslt/math/Makefile
668 tests/exslt/saxon/Makefile
669 tests/exslt/sets/Makefile
670 tests/exslt/strings/Makefile
671 tests/exslt/date/Makefile
672 tests/exslt/dynamic/Makefile
673 tests/exslt/crypto/Makefile
674 tests/plugins/Makefile

675 doc/Makefile
676 xslt-config
677 libxslt.spec
678 ])


679 
680 AC_OUTPUT
</pre>
</td>
<td>
<hr />
<pre>
  1 dnl Process this file with autoconf to produce a configuration script.
  2 AC_PREREQ(2.63)
  3 
  4 m4_define([MAJOR_VERSION], [1])
  5 m4_define([MINOR_VERSION], [1])
<span class="line-modified">  6 m4_define([MICRO_VERSION], [34])</span>
  7 
  8 AC_INIT([libxslt], [MAJOR_VERSION.MINOR_VERSION.MICRO_VERSION])
  9 AC_CONFIG_SRCDIR([libxslt/xslt.c])
 10 AC_CONFIG_HEADERS(config.h)
 11 AC_CANONICAL_HOST
 12 AC_USE_SYSTEM_EXTENSIONS
 13 
 14 dnl
 15 dnl libxslt is the main part of the package
 16 dnl libexslt is an extension
 17 dnl
 18 LIBXSLT_MAJOR_VERSION=MAJOR_VERSION
 19 LIBXSLT_MINOR_VERSION=MINOR_VERSION
 20 LIBXSLT_MICRO_VERSION=MICRO_VERSION
 21 LIBEXSLT_MAJOR_VERSION=0
 22 LIBEXSLT_MINOR_VERSION=8
 23 LIBEXSLT_MICRO_VERSION=20
 24 LIBXML_REQUIRED_VERSION=2.6.27
 25 
 26 
</pre>
<hr />
<pre>
151     AC_CHECK_LIB(pthread, pthread_join,[
152        AC_DEFINE([HAVE_LIBPTHREAD], [], [Define if pthread library is there (-lpthread)])
153        AC_DEFINE([HAVE_PTHREAD_H], [], [Define if &lt;pthread.h&gt; is there])
154        THREAD_LIBS=&quot;-lpthread&quot;]))
155   ;;
156 esac
157 
158 AC_SUBST(THREAD_LIBS)
159 
160 dnl
161 dnl Detect supported locale
162 dnl
163 
164 AC_CHECK_HEADERS([locale.h xlocale.h])
165 AC_CHECK_FUNCS([strxfrm_l])
166 
167 dnl
168 dnl Math detection
169 dnl
170 
<span class="line-modified">171 AC_CHECK_HEADERS(ieeefp.h nan.h math.h fp_class.h float.h)</span>
172 AC_CHECK_HEADERS(sys/timeb.h time.h sys/stat.h sys/select.h stdarg.h)
173 AC_CHECK_HEADERS(errno.h)
174 AC_CHECK_FUNCS(stat _stat)
175 AC_CHECK_FUNC(pow, , AC_CHECK_LIB(m, pow,
176   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_POW],[], [Define if pow is there])]))
177 
178 AC_CHECK_FUNC(floor, , AC_CHECK_LIB(m, floor,
179   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_FLOOR],[], [Define if floor is there])]))
180 
181 AC_CHECK_FUNC(fabs, , AC_CHECK_LIB(m, fabs,
182   [M_LIBS=&quot;-lm&quot;; AC_DEFINE([HAVE_FABS],[], [Define if fabs is there])]))
183 
184 
185 AC_CHECK_FUNCS(gettimeofday)
186 AC_CHECK_FUNCS(localtime localtime_r time gmtime gmtime_r ftime)
187 
188 dnl Checking the standard string functions availability
189 AC_CHECK_FUNCS(printf sprintf fprintf snprintf vfprintf vsprintf vsnprintf sscanf,,
190                NEED_TRIO=1)
191 
</pre>
<hr />
<pre>
385     WITH_MEM_DEBUG=1
386 else    
387     WITH_MEM_DEBUG=0
388 fi
389 AC_SUBST(WITH_MEM_DEBUG)
390 
391 dnl 
392 dnl Is debugger support requested
393 dnl
394 AC_ARG_WITH(debugger, [  --with-debugger        Add the debugging support (on)])
395 if test &quot;$with_debugger&quot; = &quot;no&quot; ; then
396     echo Disabling debugger
397     WITH_DEBUGGER=0
398 else
399     echo Enabling debugger
400     WITH_DEBUGGER=1
401     AC_DEFINE([WITH_DEBUGGER],[], [Define if debugging support is enabled])
402 fi
403 AC_SUBST(WITH_DEBUGGER)
404 
<span class="line-added">405 dnl</span>
<span class="line-added">406 dnl Is profiler support requested</span>
<span class="line-added">407 dnl</span>
<span class="line-added">408 AC_ARG_WITH(profiler, [  --with-profiler        Add the profiling support (on)])</span>
<span class="line-added">409 if test &quot;$with_profiler&quot; = &quot;no&quot; ; then</span>
<span class="line-added">410     echo Disabling profiler</span>
<span class="line-added">411     WITH_PROFILER=0</span>
<span class="line-added">412 else</span>
<span class="line-added">413     echo Enabling profiler</span>
<span class="line-added">414     WITH_PROFILER=1</span>
<span class="line-added">415     AC_DEFINE([WITH_PROFILER],[], [Define if profiling support is enabled])</span>
<span class="line-added">416 fi</span>
<span class="line-added">417 AC_SUBST(WITH_PROFILER)</span>
<span class="line-added">418 </span>
419 dnl
420 dnl The following new parameters were added to offer
421 dnl the ability to specify the location of the libxml
422 dnl library during linking and compilation.
423 dnl
424 dnl original work - Mathieu Lacage 30/03/2000
425 dnl some tweaking - David HÃ¤rdeman 30/10/2001
426 dnl
427 
428 LIBXML_CONFIG_PREFIX=&quot;&quot;
429 LIBXML_SRC=&quot;&quot;
430 
431 AC_ARG_WITH(libxml-prefix,
432         [  --with-libxml-prefix=[PFX]		Specify location of libxml config],
433 	LIBXML_CONFIG_PREFIX=$withval
434 )
435         
436 AC_ARG_WITH(libxml-include-prefix,
437         [  --with-libxml-include-prefix=[PFX]	Specify location of libxml headers],
438         LIBXML_CFLAGS=&quot;-I$withval&quot;
</pre>
<hr />
<pre>
457 if test &quot;x$LIBXML_CONFIG_PREFIX&quot; != &quot;x&quot;
458 then
459 	AC_PATH_TOOL([XML_CONFIG], [xml2-config], [false], [${LIBXML_CONFIG_PREFIX}/bin])
460 else
461 	AC_PATH_TOOL([XML_CONFIG], [xml2-config], [false])
462 fi
463 
464 dnl
465 dnl imported from libxml2, c.f. #77827 
466 dnl
467 if test &quot;${GCC}&quot; != &quot;yes&quot; ; then
468     case &quot;${host}&quot; in
469           *-*-hpux* )
470 	       CFLAGS=&quot;${CFLAGS} -Wp,-H30000&quot;
471 	       ;;
472           *-dec-osf* )
473                CFLAGS=&quot;${CFLAGS} -ieee&quot;
474                ;;
475     esac
476 else
<span class="line-modified">477     CFLAGS=&quot;${CFLAGS} -Wall -Wextra -Wformat=2 -Wmissing-format-attribute&quot;</span>
478     case &quot;${host}&quot; in
479           alpha*-*-linux* )
480 	       CFLAGS=&quot;${CFLAGS} -mieee&quot;
481 	       ;;
482 	  alpha*-*-osf* )
483 	       CFLAGS=&quot;${CFLAGS} -mieee&quot;
484 	       ;;
485     esac
486 fi
487 
<span class="line-added">488 dnl</span>
<span class="line-added">489 dnl Check which type of library to build. Default to building shared and static.</span>
<span class="line-added">490 dnl</span>
<span class="line-added">491 </span>
<span class="line-added">492 build_shared_libs=&quot;yes&quot;</span>
<span class="line-added">493 build_static_libs=&quot;yes&quot;</span>
<span class="line-added">494 </span>
<span class="line-added">495 if test &quot;$enable_shared&quot; = &quot;no&quot;; then</span>
<span class="line-added">496     build_shared_libs=&quot;no&quot;</span>
<span class="line-added">497 fi</span>
<span class="line-added">498 </span>
<span class="line-added">499 if test &quot;$enable_static&quot; = &quot;no&quot;; then</span>
<span class="line-added">500     build_static_libs=&quot;no&quot;</span>
<span class="line-added">501 fi</span>
<span class="line-added">502 </span>
<span class="line-added">503 if test &quot;$build_shared_libs&quot; = &quot;no&quot; -a &quot;$build_static_libs&quot; = &quot;no&quot;; then</span>
<span class="line-added">504     build_static_libs=&quot;yes&quot;</span>
<span class="line-added">505 fi</span>
<span class="line-added">506 </span>
507 dnl
508 dnl Override other variables if LIBXML_SRC is set
509 dnl
510 
<span class="line-modified">511 if test &quot;x$LIBXML_SRC&quot; != &quot;x&quot;; then</span>
<span class="line-modified">512     CWD=`pwd`</span>
<span class="line-modified">513     if cd $LIBXML_SRC; then</span>
<span class="line-modified">514         LIBXML_SRC=`pwd`</span>
<span class="line-modified">515         XML_CONFIG=&quot;${LIBXML_SRC}/xml2-config&quot;</span>
<span class="line-modified">516         LIBXML_CFLAGS=&quot;-I${LIBXML_SRC}/include&quot;</span>
<span class="line-modified">517         if test &quot;$build_static_libs&quot; = &quot;no&quot;; then</span>
<span class="line-modified">518             LIBXML_LIBS=&quot;-L${LIBXML_SRC} `$XML_CONFIG --libs --dynamic`&quot;</span>
<span class="line-modified">519         else</span>
<span class="line-modified">520             LIBXML_LIBS=&quot;-L${LIBXML_SRC} `$XML_CONFIG --libs`&quot;</span>
<span class="line-modified">521         fi</span>
<span class="line-modified">522         WITH_MODULES=&quot;`$XML_CONFIG --modules`&quot;</span>
<span class="line-modified">523         cd $CWD</span>
<span class="line-modified">524     else</span>
<span class="line-added">525         AC_MSG_ERROR([libxml source dir not found (${LIBXML_SRC}), typo?])</span>
<span class="line-added">526     fi</span>
527 fi
528 
529 dnl
530 dnl Try pkg-config first if nothing is set
531 dnl
532 
<span class="line-modified">533 if test &quot;x$LIBXML_CONFIG_PREFIX&quot; = &quot;x&quot; -a &quot;x$LIBXML_LIBS&quot; = &quot;x&quot;; then</span>
<span class="line-modified">534     if test &quot;$build_static_libs&quot; = &quot;no&quot;; then</span>
<span class="line-modified">535         PKG_CHECK_MODULES([LIBXML], [libxml-2.0 &gt;= $LIBXML_REQUIRED_VERSION], [</span>
<span class="line-modified">536             WITH_MODULES=&quot;`$PKG_CONFIG --variable=modules libxml-2.0`&quot;</span>
<span class="line-modified">537         ], [ ])</span>
<span class="line-added">538     else</span>
<span class="line-added">539         PKG_CHECK_MODULES_STATIC([LIBXML], [libxml-2.0 &gt;= $LIBXML_REQUIRED_VERSION],</span>
<span class="line-added">540         [ ], [ ])</span>
<span class="line-added">541     fi</span>
542 fi
543 
544 dnl
545 dnl make sure xml2-config is executable,
546 dnl test version and init our variables
547 dnl
548 
549 if test &quot;x$LIBXML_LIBS&quot; = &quot;x&quot; &amp;&amp; ${XML_CONFIG} --libs print &gt; /dev/null 2&gt;&amp;1
550 then
<span class="line-modified">551     AC_MSG_CHECKING(for libxml libraries &gt;= $LIBXML_REQUIRED_VERSION)</span>
<span class="line-modified">552     XMLVERS=`$XML_CONFIG --version`</span>
<span class="line-modified">553     if test VERSION_TO_NUMBER(echo $XMLVERS) -ge VERSION_TO_NUMBER(echo $LIBXML_REQUIRED_VERSION); then</span>
<span class="line-modified">554         AC_MSG_RESULT($XMLVERS found)</span>
<span class="line-modified">555     else</span>
<span class="line-modified">556         AC_MSG_ERROR(Version $XMLVERS found. You need at least libxml2 $LIBXML_REQUIRED_VERSION for this version of libxslt)</span>
<span class="line-modified">557     fi</span>
<span class="line-modified">558 </span>
<span class="line-modified">559     if test &quot;$build_static_libs&quot; = &quot;no&quot;; then</span>
<span class="line-added">560         LIBXML_LIBS=&quot;`$XML_CONFIG --libs --dynamic`&quot;</span>
<span class="line-added">561     else</span>
<span class="line-added">562         LIBXML_LIBS=&quot;`$XML_CONFIG --libs`&quot;</span>
<span class="line-added">563     fi</span>
564 	LIBXML_CFLAGS=&quot;`$XML_CONFIG --cflags`&quot;
565         WITH_MODULES=&quot;`$XML_CONFIG --modules`&quot;
566 fi
567 
568 if test &quot;x$LIBXML_LIBS&quot; = &quot;x&quot;
569 then
570 	AC_MSG_ERROR([Could not find libxml2 anywhere, check ftp://xmlsoft.org/.])
571 fi
572 
573 
574 AC_SUBST(CFLAGS)
575 AC_SUBST(CPPFLAGS)
576 AC_SUBST(LDFLAGS)
577 
578 AC_ARG_WITH(plugins,
579 [  --with-plugins          Add plugin extension support (on)])
580 if test &quot;$with_plugins&quot; = &quot;&quot;
581 then
582     with_plugins=yes
583 fi
584 
585 AC_MSG_CHECKING([whether shared libraries will be built (required for plugins)])
<span class="line-modified">586 if test &quot;$build_shared_libs&quot; = &quot;no&quot; -a &quot;$with_plugins&quot; = &quot;yes&quot;; then</span>
587 	 AC_MSG_RESULT(no)
588 	 AC_MSG_WARN([Disabling plugin support.])
589 	 AC_MSG_WARN([Plugins require that shared libraries be built.])
590 	 with_plugins=no
591 else
592 	 AC_MSG_RESULT(yes)
593 fi
594 
595 if test &quot;$with_plugins&quot; = &quot;yes&quot; ; then
596   AC_MSG_CHECKING([libxml2 module support])
597   if test &quot;${WITH_MODULES}&quot; = &quot;1&quot;; then
598     AC_MSG_RESULT(yes)
599   else
600     AC_MSG_RESULT(no)
601     WITH_MODULES=&quot;0&quot;
602   fi
603 else
604   WITH_MODULES=&quot;0&quot;
605 fi
606 
607 AC_SUBST(WITH_MODULES)
608 AM_CONDITIONAL(WITH_MODULES, test &quot;$WITH_MODULES&quot; = &quot;1&quot;)
609 
610 dnl
611 dnl setup default module path
612 dnl
613 expanded_libdir=$(
614     test &quot;x$prefix&quot; = xNONE &amp;&amp; prefix=&quot;$ac_default_prefix&quot;
615     test &quot;x$exec_prefix&quot; = xNONE &amp;&amp; exec_prefix=&quot;$prefix&quot;
616     while test &quot;$libdir_old&quot; != &quot;$libdir&quot;; do
617       libdir_old=&quot;$libdir&quot;
618       eval libdir=&quot;$libdir&quot;
619     done
620     echo &quot;$libdir&quot;
621 )
622 LIBXSLT_DEFAULT_PLUGINS_PATH=&quot;$expanded_libdir/libxslt-plugins&quot;
623 AC_SUBST(LIBXSLT_DEFAULT_PLUGINS_PATH)
624 


625 case &quot;$host&quot; in
<span class="line-modified">626  *-*-cygwin*|*-*-mingw*)</span>
<span class="line-modified">627  LDFLAGS=&quot;$LDFLAGS -no-undefined&quot;</span>







628  ;;
629 esac


630 
631 
632 AC_SUBST(XSLTPROCDV)
633 AC_SUBST(PYTHONSODV)
634 AC_SUBST(XML_CONFIG)
635 AC_SUBST(LIBXML_LIBS)
636 AC_SUBST(LIBXML_CFLAGS)
637 AC_SUBST(PYTHON)
638 AC_SUBST(PYTHON_VERSION)
639 AC_SUBST(PYTHON_INCLUDES)
640 AC_SUBST(PYTHON_SITE_PACKAGES)
641 
642 XSLT_LIBDIR=&#39;-L${libdir}&#39;
643 XSLT_INCLUDEDIR=&#39;-I${includedir}&#39;
<span class="line-modified">644 XSLT_LIBS=&quot;-lxslt $LIBXML_LIBS&quot;</span>
<span class="line-added">645 XSLT_PRIVATE_LIBS=&quot;$M_LIBS&quot;</span>
646 AC_SUBST(XSLT_LIBDIR)
647 AC_SUBST(XSLT_INCLUDEDIR)
648 AC_SUBST(XSLT_LIBS)
<span class="line-added">649 AC_SUBST(XSLT_PRIVATE_LIBS)</span>
650 
651 EXSLT_LIBDIR=&#39;-L${libdir}&#39;
652 EXSLT_INCLUDEDIR=&#39;-I${includedir}&#39;
<span class="line-modified">653 EXSLT_LIBS=&quot;-lexslt $XSLT_LIBS&quot;</span>
<span class="line-added">654 EXSLT_PRIVATE_LIBS=&quot;$XSLT_PRIVATE_LIBS $LIBGCRYPT_LIBS&quot;</span>
655 AC_SUBST(EXSLT_LIBDIR)
656 AC_SUBST(EXSLT_INCLUDEDIR)
657 AC_SUBST(EXSLT_LIBS)
<span class="line-added">658 AC_SUBST(EXSLT_PRIVATE_LIBS)</span>
659 
660 AC_SUBST(EXTRA_LIBS)
661 
662 AC_SUBST(M_LIBS)
663 
664 dnl for the spec file
665 RELDATE=`date +&#39;%a %b %e %Y&#39;`
666 AC_SUBST(RELDATE)
667 
668 rm -f COPYING.LIB COPYING 2&gt;/dev/null &amp;&amp; $LN_S $srcdir/Copyright COPYING
669 
670 
671 AC_CONFIG_FILES([
672 Makefile
673 libxslt.pc
674 libexslt.pc
675 libxslt/Makefile
676 libxslt/xsltconfig.h
677 libxslt/xsltwin32config.h
678 libexslt/Makefile
</pre>
<hr />
<pre>
691 tests/namespaces/Makefile
692 tests/keys/Makefile
693 tests/numbers/Makefile
694 tests/documents/Makefile
695 tests/xmlspec/Makefile
696 tests/multiple/Makefile
697 tests/xinclude/Makefile
698 tests/XSLTMark/Makefile
699 tests/docbook/Makefile
700 tests/exslt/Makefile
701 tests/exslt/common/Makefile
702 tests/exslt/functions/Makefile
703 tests/exslt/math/Makefile
704 tests/exslt/saxon/Makefile
705 tests/exslt/sets/Makefile
706 tests/exslt/strings/Makefile
707 tests/exslt/date/Makefile
708 tests/exslt/dynamic/Makefile
709 tests/exslt/crypto/Makefile
710 tests/plugins/Makefile
<span class="line-added">711 tests/fuzz/Makefile</span>
712 doc/Makefile
713 xslt-config
714 libxslt.spec
715 ])
<span class="line-added">716 AC_CONFIG_LINKS([tests/fuzz/xpath.xml:tests/fuzz/xpath.xml])</span>
<span class="line-added">717 AC_CONFIG_LINKS([tests/fuzz/xslt.xml:tests/fuzz/xslt.xml])</span>
718 
719 AC_OUTPUT
</pre>
</td>
</tr>
</table>
<center><a href="config.h.in.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="libexslt.pc.in.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>