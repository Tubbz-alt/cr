<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.graphics/src/main/native-glass/gtk/GlassWindow.cpp</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center><a href="GlassView.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_dnd.cpp.sdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/native-glass/gtk/GlassWindow.cpp</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2017, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 88             parent,
 89             screen,
 90             glass_mask_to_window_frame_type(mask),
 91             glass_mask_to_window_type(mask),
 92             glass_mask_to_wm_function(mask)
 93             );
 94 
 95     return PTR_TO_JLONG(ctx);
 96 }
 97 
 98 /*
 99  * Class:     com_sun_glass_ui_gtk_GtkWindow
100  * Method:    _createChildWindow
101  * Signature: (J)J
102  */
103 JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1createChildWindow
104   (JNIEnv * env, jobject obj , jlong owner)
105 {
106     (void)env;
107 
<span class="line-modified">108     GdkWindow *parent_window = NULL;</span>
<span class="line-removed">109     GtkWidget *parent_widget = NULL;</span>
<span class="line-removed">110     WindowContextPlug *parent_ctx = NULL;</span>
<span class="line-removed">111     WindowContext *ctx = NULL;</span>
<span class="line-removed">112 </span>
<span class="line-removed">113     parent_window = gdk_x11_window_lookup_for_display(</span>
<span class="line-removed">114                         gdk_display_get_default(),</span>
<span class="line-removed">115                         (Window)PTR_TO_JLONG(owner));</span>
<span class="line-removed">116 </span>
<span class="line-removed">117     if (parent_window != NULL) {</span>
<span class="line-removed">118         parent_ctx = (WindowContextPlug *)g_object_get_data(G_OBJECT(parent_window), GDK_WINDOW_DATA_CONTEXT);</span>
<span class="line-removed">119         // HACK: do not use get_gtk_window()</span>
<span class="line-removed">120         // the method is intended to return GtkWindow that can be used for FileChooser</span>
<span class="line-removed">121         // (OK, that&#39;s also a hack, but still...)</span>
<span class="line-removed">122         if (parent_ctx != NULL) {</span>
<span class="line-removed">123             parent_widget = GTK_WIDGET(parent_ctx-&gt;get_gtk_window());</span>
<span class="line-removed">124         }</span>
<span class="line-removed">125     }</span>
<span class="line-removed">126 </span>
<span class="line-removed">127     if (parent_widget == NULL) {</span>
<span class="line-removed">128         // If &#39;owner&#39; is a bad handle, then the child window is created unparented</span>
<span class="line-removed">129         ctx = new WindowContextPlug(obj, JLONG_TO_PTR(owner));</span>
<span class="line-removed">130     } else {</span>
<span class="line-removed">131         ctx = new WindowContextChild(obj,</span>
<span class="line-removed">132                         JLONG_TO_PTR(owner),</span>
<span class="line-removed">133                         parent_ctx-&gt;gtk_container,</span>
<span class="line-removed">134                         parent_ctx);</span>
<span class="line-removed">135     }</span>
<span class="line-removed">136 </span>
<span class="line-removed">137     return PTR_TO_JLONG(ctx);</span>
138 }
139 
140 /*
141  * Class:     com_sun_glass_ui_gtk_GtkWindow
142  * Method:    _close
143  * Signature: (J)Z
144  */
145 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1close
146   (JNIEnv * env, jobject obj, jlong ptr)
147 {
148     (void)env;
149     (void)obj;
150 
151     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
152     destroy_and_delete_ctx(ctx);
153     return JNI_TRUE; // return value not used
154 }
155 /*
156  * Class:     com_sun_glass_ui_gtk_GtkWindow
157  * Method:    _setView
</pre>
<hr />
<pre>
573  * Signature: (J)Z
574  */
575 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_gtk_GtkWindow_isVisible
576     (JNIEnv * env, jobject obj, jlong ptr)
577 {
578     (void)env;
579     (void)obj;
580 
581     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
582     return ctx-&gt;is_visible() ? JNI_TRUE : JNI_FALSE;
583 }
584 JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1getNativeWindowImpl
585     (JNIEnv * env, jobject obj, jlong ptr)
586 {
587     (void)env;
588     (void)obj;
589 
590     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
591     return GDK_WINDOW_XID(ctx-&gt;get_gdk_window());
592 }
<span class="line-removed">593 /*</span>
<span class="line-removed">594  * Class:     com_sun_glass_ui_gtk_GtkWindow</span>
<span class="line-removed">595  * Method:    getFrameExtents</span>
<span class="line-removed">596  * Signature: (J[I)V</span>
<span class="line-removed">597  */</span>
<span class="line-removed">598 JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkWindow_getFrameExtents</span>
<span class="line-removed">599     (JNIEnv * env, jobject obj, jlong ptr, jintArray extarr)</span>
<span class="line-removed">600 {</span>
<span class="line-removed">601     (void)obj;</span>
<span class="line-removed">602 </span>
<span class="line-removed">603     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);</span>
<span class="line-removed">604     WindowFrameExtents extents = ctx-&gt;get_frame_extents();</span>
<span class="line-removed">605 </span>
<span class="line-removed">606     env-&gt;SetIntArrayRegion(extarr, 0, 1, &amp;extents.left);</span>
<span class="line-removed">607     env-&gt;SetIntArrayRegion(extarr, 1, 1, &amp;extents.right);</span>
<span class="line-removed">608     env-&gt;SetIntArrayRegion(extarr, 2, 1, &amp;extents.top);</span>
<span class="line-removed">609     env-&gt;SetIntArrayRegion(extarr, 3, 1, &amp;extents.bottom);</span>
<span class="line-removed">610 }</span>
611 
612 /*
613  * Class:     com_sun_glass_ui_gtk_GtkWindow
614  * Method:    _setGravity
615  * Signature: (JFF)V
616  */
617 JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1setGravity
618     (JNIEnv * env, jobject obj, jlong ptr, jfloat xGravity, jfloat yGravity)
619 {
620     (void)env;
621     (void)obj;
622 
623     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
624     ctx-&gt;set_gravity(xGravity, yGravity);
625 
626 }
627 
628 
629 /*
630  * Class:     com_sun_glass_ui_gtk_GtkWindow
</pre>
</td>
<td>
<hr />
<pre>
  1 /*
<span class="line-modified">  2  * Copyright (c) 2011, 2020, Oracle and/or its affiliates. All rights reserved.</span>
  3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
  4  *
  5  * This code is free software; you can redistribute it and/or modify it
  6  * under the terms of the GNU General Public License version 2 only, as
  7  * published by the Free Software Foundation.  Oracle designates this
  8  * particular file as subject to the &quot;Classpath&quot; exception as provided
  9  * by Oracle in the LICENSE file that accompanied this code.
 10  *
 11  * This code is distributed in the hope that it will be useful, but WITHOUT
 12  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 13  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
 14  * version 2 for more details (a copy is included in the LICENSE file that
 15  * accompanied this code).
 16  *
 17  * You should have received a copy of the GNU General Public License version
 18  * 2 along with this work; if not, write to the Free Software Foundation,
 19  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
 20  *
 21  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
 22  * or visit www.oracle.com if you need additional information or have any
</pre>
<hr />
<pre>
 88             parent,
 89             screen,
 90             glass_mask_to_window_frame_type(mask),
 91             glass_mask_to_window_type(mask),
 92             glass_mask_to_wm_function(mask)
 93             );
 94 
 95     return PTR_TO_JLONG(ctx);
 96 }
 97 
 98 /*
 99  * Class:     com_sun_glass_ui_gtk_GtkWindow
100  * Method:    _createChildWindow
101  * Signature: (J)J
102  */
103 JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1createChildWindow
104   (JNIEnv * env, jobject obj , jlong owner)
105 {
106     (void)env;
107 
<span class="line-modified">108     return 0;</span>





























109 }
110 
111 /*
112  * Class:     com_sun_glass_ui_gtk_GtkWindow
113  * Method:    _close
114  * Signature: (J)Z
115  */
116 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1close
117   (JNIEnv * env, jobject obj, jlong ptr)
118 {
119     (void)env;
120     (void)obj;
121 
122     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
123     destroy_and_delete_ctx(ctx);
124     return JNI_TRUE; // return value not used
125 }
126 /*
127  * Class:     com_sun_glass_ui_gtk_GtkWindow
128  * Method:    _setView
</pre>
<hr />
<pre>
544  * Signature: (J)Z
545  */
546 JNIEXPORT jboolean JNICALL Java_com_sun_glass_ui_gtk_GtkWindow_isVisible
547     (JNIEnv * env, jobject obj, jlong ptr)
548 {
549     (void)env;
550     (void)obj;
551 
552     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
553     return ctx-&gt;is_visible() ? JNI_TRUE : JNI_FALSE;
554 }
555 JNIEXPORT jlong JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1getNativeWindowImpl
556     (JNIEnv * env, jobject obj, jlong ptr)
557 {
558     (void)env;
559     (void)obj;
560 
561     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
562     return GDK_WINDOW_XID(ctx-&gt;get_gdk_window());
563 }


















564 
565 /*
566  * Class:     com_sun_glass_ui_gtk_GtkWindow
567  * Method:    _setGravity
568  * Signature: (JFF)V
569  */
570 JNIEXPORT void JNICALL Java_com_sun_glass_ui_gtk_GtkWindow__1setGravity
571     (JNIEnv * env, jobject obj, jlong ptr, jfloat xGravity, jfloat yGravity)
572 {
573     (void)env;
574     (void)obj;
575 
576     WindowContext* ctx = JLONG_TO_WINDOW_CTX(ptr);
577     ctx-&gt;set_gravity(xGravity, yGravity);
578 
579 }
580 
581 
582 /*
583  * Class:     com_sun_glass_ui_gtk_GtkWindow
</pre>
</td>
</tr>
</table>
<center><a href="GlassView.cpp.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../index.html" target="_top">index</a> <a href="glass_dnd.cpp.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>