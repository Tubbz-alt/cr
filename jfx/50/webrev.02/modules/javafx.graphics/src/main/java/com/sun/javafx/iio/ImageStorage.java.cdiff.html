<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff modules/javafx.graphics/src/main/java/com/sun/javafx/iio/ImageStorage.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ios/IosImageLoader.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>modules/javafx.graphics/src/main/java/com/sun/javafx/iio/ImageStorage.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 1,7 ***</span>
  /*
<span class="line-modified">!  * Copyright (c) 2009, 2017, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
<span class="line-new-header">--- 1,7 ---</span>
  /*
<span class="line-modified">!  * Copyright (c) 2009, 2019, Oracle and/or its affiliates. All rights reserved.</span>
   * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   *
   * This code is free software; you can redistribute it and/or modify it
   * under the terms of the GNU General Public License version 2 only, as
   * published by the Free Software Foundation.  Oracle designates this
</pre>
<hr />
<pre>
<span class="line-old-header">*** 255,29 ***</span>
       */
      public static ImageFrame[] loadAll(InputStream input, ImageLoadListener listener,
              double width, double height, boolean preserveAspectRatio,
              float pixelScale, boolean smooth) throws ImageStorageException {
          ImageLoader loader = null;
          try {
              if (isIOS) {
                  // no extension/signature recognition done here,
                  // we always want the iOS native loader
                  loader = IosImageLoaderFactory.getInstance().createImageLoader(input);
              } else {
                  loader = getLoaderBySignature(input, listener);
              }
          } catch (IOException e) {
              throw new ImageStorageException(e.getMessage(), e);
          }
<span class="line-removed">- </span>
<span class="line-removed">-         ImageFrame[] images = null;</span>
<span class="line-removed">-         if (loader != null) {</span>
<span class="line-removed">-             images = loadAll(loader, width, height, preserveAspectRatio, pixelScale, smooth);</span>
<span class="line-removed">-         } else {</span>
<span class="line-removed">-             throw new ImageStorageException(&quot;No loader for image data&quot;);</span>
<span class="line-removed">-         }</span>
<span class="line-removed">- </span>
          return images;
      }
  
      /**
       * Load all images present in the specified input. For more details refer to
<span class="line-new-header">--- 255,34 ---</span>
       */
      public static ImageFrame[] loadAll(InputStream input, ImageLoadListener listener,
              double width, double height, boolean preserveAspectRatio,
              float pixelScale, boolean smooth) throws ImageStorageException {
          ImageLoader loader = null;
<span class="line-added">+         ImageFrame[] images = null;</span>
<span class="line-added">+ </span>
          try {
              if (isIOS) {
                  // no extension/signature recognition done here,
                  // we always want the iOS native loader
                  loader = IosImageLoaderFactory.getInstance().createImageLoader(input);
              } else {
                  loader = getLoaderBySignature(input, listener);
              }
<span class="line-added">+             if (loader != null) {</span>
<span class="line-added">+                 images = loadAll(loader, width, height, preserveAspectRatio, pixelScale, smooth);</span>
<span class="line-added">+             } else {</span>
<span class="line-added">+                 throw new ImageStorageException(&quot;No loader for image data&quot;);</span>
<span class="line-added">+             }</span>
<span class="line-added">+         } catch (ImageStorageException ise) {</span>
<span class="line-added">+             throw ise;</span>
          } catch (IOException e) {
              throw new ImageStorageException(e.getMessage(), e);
<span class="line-added">+         } finally {</span>
<span class="line-added">+             if (loader != null) {</span>
<span class="line-added">+                 loader.dispose();</span>
<span class="line-added">+             }</span>
          }
          return images;
      }
  
      /**
       * Load all images present in the specified input. For more details refer to
</pre>
<hr />
<pre>
<span class="line-old-header">*** 324,10 ***</span>
<span class="line-new-header">--- 329,13 ---</span>
                  images = loadAll(loader, width, height, preserveAspectRatio, imgPixelScale, smooth);
              } else {
                  throw new ImageStorageException(&quot;No loader for image data&quot;);
              }
          } finally {
<span class="line-added">+             if (loader != null) {</span>
<span class="line-added">+                 loader.dispose();</span>
<span class="line-added">+             }</span>
              try {
                  if (theStream != null) {
                      theStream.close();
                  }
              } catch (IOException e) {
</pre>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="ios/IosImageLoader.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>