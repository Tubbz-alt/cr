<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff modules/javafx.controls/src/main/java/javafx/scene/control/skin/ProgressIndicatorSkin.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>modules/javafx.controls/src/main/java/javafx/scene/control/skin/ProgressIndicatorSkin.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
481      * Support classes                                                         *
482      *                                                                         *
483      **************************************************************************/
484 
485     private final class DeterminateIndicator extends Region {
486         private double textGap = 2.0F;
487 
488         // only update progress text on whole percentages
489         private int intProgress;
490 
491         // only update pie arc to nearest degree
492         private int degProgress;
493         private Text text;
494         private StackPane indicator;
495         private StackPane progress;
496         private StackPane tick;
497         private Arc arcShape;
498         private Circle indicatorCircle;
499         private double doneTextWidth;
500         private double doneTextHeight;
<span class="line-removed">501         private Consumer&lt;ObservableValue&lt;?&gt;&gt; fontListener = null;</span>
502 
503         public DeterminateIndicator(ProgressIndicator control, ProgressIndicatorSkin s, Paint fillOverride) {
504 
505             getStyleClass().add(&quot;determinate-indicator&quot;);
506 
507             intProgress = (int) Math.round(control.getProgress() * 100.0) ;
508             degProgress = (int) (360 * control.getProgress());
509 
510             getChildren().clear();
511 
512             text = new Text((control.getProgress() &gt;= 1) ? (DONE) : (&quot;&quot; + intProgress + &quot;%&quot;));
513             text.setTextOrigin(VPos.TOP);
514             text.getStyleClass().setAll(&quot;text&quot;, &quot;percentage&quot;);
515 
<span class="line-modified">516             fontListener = o -&gt; {</span>
517                 doneTextWidth = Utils.computeTextWidth(text.getFont(), DONE, 0);
518                 doneTextHeight = Utils.computeTextHeight(text.getFont(), DONE, 0, TextBoundsType.LOGICAL_VERTICAL_CENTER);
<span class="line-modified">519             };</span>
<span class="line-removed">520             registerChangeListener(text.fontProperty(), (Consumer&lt;ObservableValue&lt;?&gt;&gt;) fontListener);</span>
521 
522             // The circular background for the progress pie piece
523             indicator = new StackPane();
524             indicator.setScaleShape(false);
525             indicator.setCenterShape(false);
526             indicator.getStyleClass().setAll(&quot;indicator&quot;);
527             indicatorCircle = new Circle();
528             indicator.setShape(indicatorCircle);
529 
530             // The shape for our progress pie piece
531             arcShape = new Arc();
532             arcShape.setType(ArcType.ROUND);
533             arcShape.setStartAngle(90.0F);
534 
535             // Our progress pie piece
536             progress = new StackPane();
537             progress.getStyleClass().setAll(&quot;progress&quot;);
538             progress.setScaleShape(false);
539             progress.setCenterShape(false);
540             progress.setShape(arcShape);
</pre>
</td>
<td>
<hr />
<pre>
481      * Support classes                                                         *
482      *                                                                         *
483      **************************************************************************/
484 
485     private final class DeterminateIndicator extends Region {
486         private double textGap = 2.0F;
487 
488         // only update progress text on whole percentages
489         private int intProgress;
490 
491         // only update pie arc to nearest degree
492         private int degProgress;
493         private Text text;
494         private StackPane indicator;
495         private StackPane progress;
496         private StackPane tick;
497         private Arc arcShape;
498         private Circle indicatorCircle;
499         private double doneTextWidth;
500         private double doneTextHeight;

501 
502         public DeterminateIndicator(ProgressIndicator control, ProgressIndicatorSkin s, Paint fillOverride) {
503 
504             getStyleClass().add(&quot;determinate-indicator&quot;);
505 
506             intProgress = (int) Math.round(control.getProgress() * 100.0) ;
507             degProgress = (int) (360 * control.getProgress());
508 
509             getChildren().clear();
510 
511             text = new Text((control.getProgress() &gt;= 1) ? (DONE) : (&quot;&quot; + intProgress + &quot;%&quot;));
512             text.setTextOrigin(VPos.TOP);
513             text.getStyleClass().setAll(&quot;text&quot;, &quot;percentage&quot;);
514 
<span class="line-modified">515             registerChangeListener(text.fontProperty(), o -&gt; {</span>
516                 doneTextWidth = Utils.computeTextWidth(text.getFont(), DONE, 0);
517                 doneTextHeight = Utils.computeTextHeight(text.getFont(), DONE, 0, TextBoundsType.LOGICAL_VERTICAL_CENTER);
<span class="line-modified">518             });</span>

519 
520             // The circular background for the progress pie piece
521             indicator = new StackPane();
522             indicator.setScaleShape(false);
523             indicator.setCenterShape(false);
524             indicator.getStyleClass().setAll(&quot;indicator&quot;);
525             indicatorCircle = new Circle();
526             indicator.setShape(indicatorCircle);
527 
528             // The shape for our progress pie piece
529             arcShape = new Arc();
530             arcShape.setType(ArcType.ROUND);
531             arcShape.setStartAngle(90.0F);
532 
533             // Our progress pie piece
534             progress = new StackPane();
535             progress.getStyleClass().setAll(&quot;progress&quot;);
536             progress.setScaleShape(false);
537             progress.setCenterShape(false);
538             progress.setShape(arcShape);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>