<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff application/org.openjdk.jmc.flightrecorder.ui/src/main/java/org/openjdk/jmc/flightrecorder/ui/pages/EventBrowserPage.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>application/org.openjdk.jmc.flightrecorder.ui/src/main/java/org/openjdk/jmc/flightrecorder/ui/pages/EventBrowserPage.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 174,10 ***</span>
<span class="line-new-header">--- 174,12 ---</span>
  		private final TypeFilterBuilder typeFilterTree;
  		private IItemCollection selectionItems;
  		private FlavorSelector flavorSelector;
  		private FilterComponent listFilter;
  		private Boolean showTypesWithoutEvents;
<span class="line-added">+ 		private Boolean showFilterAction;</span>
<span class="line-added">+ 		private Boolean showSearchAction;</span>
  
  		EventBrowserUI(Composite parent, FormToolkit toolkit, IState state, IPageContainer container) {
  			this.container = container;
  
  			Form form = DataPageToolkit.createForm(parent, toolkit, getName(), getIcon());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 330,21 ***</span>
  					newColumns.add(0, new ColumnSettings(combinedId, false, null, null));
  				}
  			});
  			listColumns.addAll(0, newColumns);
  
  			Control oldListControl = list.getManager().getViewer().getControl();
  			Composite parent = listFilter != null ? listFilter.getComponent().getParent() : oldListControl.getParent();
  			for (Control c : parent.getChildren()) {
  				c.dispose();
  			}
  			list = DataPageToolkit.createSimpleItemList(parent, itemListBuilder, container,
  					DataPageToolkit.createTableSettingsByOrderByAndColumnsWithDefaultOrdering(orderBy, listColumns),
  					Messages.EventBrowserPage_EVENT_BROWSER_SELECTION);
  			listFilter = FilterComponent.createFilterComponent(list, flagsFilter, filteredItems,
  					container.getSelectionStore()::getSelections, this::onFilterChange);
<span class="line-modified">! 			listFilter.loadState(getState().getChild(LIST_FILTER));</span>
  			onFilterChange(flagsFilter);
  
  			MCContextMenuManager mm = list.getMenuManager();
  			mm.add(listFilter.getShowFilterAction());
  			mm.add(listFilter.getShowSearchAction());
<span class="line-new-header">--- 332,26 ---</span>
  					newColumns.add(0, new ColumnSettings(combinedId, false, null, null));
  				}
  			});
  			listColumns.addAll(0, newColumns);
  
<span class="line-added">+ 			saveFilterActionStates();</span>
  			Control oldListControl = list.getManager().getViewer().getControl();
  			Composite parent = listFilter != null ? listFilter.getComponent().getParent() : oldListControl.getParent();
  			for (Control c : parent.getChildren()) {
  				c.dispose();
  			}
  			list = DataPageToolkit.createSimpleItemList(parent, itemListBuilder, container,
  					DataPageToolkit.createTableSettingsByOrderByAndColumnsWithDefaultOrdering(orderBy, listColumns),
  					Messages.EventBrowserPage_EVENT_BROWSER_SELECTION);
  			listFilter = FilterComponent.createFilterComponent(list, flagsFilter, filteredItems,
  					container.getSelectionStore()::getSelections, this::onFilterChange);
<span class="line-modified">! 			if (showFilterAction == null) {</span>
<span class="line-added">+ 				listFilter.loadState(getState().getChild(LIST_FILTER));</span>
<span class="line-added">+ 			} else {</span>
<span class="line-added">+ 				loadFilterActionStates();</span>
<span class="line-added">+ 			}</span>
  			onFilterChange(flagsFilter);
  
  			MCContextMenuManager mm = list.getMenuManager();
  			mm.add(listFilter.getShowFilterAction());
  			mm.add(listFilter.getShowSearchAction());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 370,10 ***</span>
<span class="line-new-header">--- 377,24 ---</span>
  			if (settings.getOrderBy() != null) {
  				listOrderBy = settings.getOrderBy();
  			}
  		}
  
<span class="line-added">+ 		private void saveFilterActionStates() {</span>
<span class="line-added">+ 			if (listFilter != null) {</span>
<span class="line-added">+ 				showFilterAction = listFilter.getShowFilterAction().isChecked();</span>
<span class="line-added">+ 				showSearchAction = listFilter.getShowSearchAction().isChecked();</span>
<span class="line-added">+ 			}</span>
<span class="line-added">+ 		}</span>
<span class="line-added">+ </span>
<span class="line-added">+ 		private void loadFilterActionStates() {</span>
<span class="line-added">+ 			listFilter.getShowFilterAction().setChecked(showFilterAction);</span>
<span class="line-added">+ 			listFilter.getShowSearchAction().setChecked(showSearchAction);</span>
<span class="line-added">+ 			listFilter.getShowFilterAction().run();</span>
<span class="line-added">+ 			listFilter.getShowSearchAction().run();</span>
<span class="line-added">+ 		}</span>
<span class="line-added">+ </span>
  		@Override
  		public void saveTo(IWritableState state) {
  			PersistableSashForm.saveState(treeSash, state.createChild(TREE_SASH));
  			mergeListSettings();
  			new TableSettings(listOrderBy, listColumns).saveState(state.createChild(ITEM_LIST));
</pre>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>