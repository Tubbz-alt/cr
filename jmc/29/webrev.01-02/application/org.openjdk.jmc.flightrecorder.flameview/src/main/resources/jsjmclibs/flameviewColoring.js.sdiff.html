<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.flightrecorder.flameview/src/main/resources/jsjmclibs/flameviewColoring.js</title>
    <link rel="stylesheet" href="../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>application/org.openjdk.jmc.flightrecorder.flameview/src/main/resources/jsjmclibs/flameviewColoring.js</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 1 String.prototype.hashCode = function () {
 2     var hash = 0;
 3     if (this.length === 0) return hash;
 4     for (var i = 0; i &lt; this.length; i++) {
 5         var char = this.charCodeAt(i);
 6         hash = ((hash &lt;&lt; 5) - hash) + char;
 7         hash = hash &amp; hash;
 8     }
 9     return hash;
10 };
11 
12 const rootPackageColor = &quot;darkred&quot;;
13 const invalidPackageColor = &quot;snow&quot;;
14 const packageJavaValueLMax = 80;
15 const packageJavaValueL = 65;
16 const packageJavaHslHSValues = [184, 10];
17 const packageSunValueLMax = 54;
18 const packageSunValueL = 31;
19 const packageSunHSValues = [211, 21];



20 const packageRestValueHMax = 360;
21 const packageRestValueH = 0;
22 const packageRestSLValues = [42, 53];
23 const packageConsideredDepth = 3;
24 const packageMarkerJava = &quot;java&quot;;
25 const packageMarkerSun = &quot;sun&quot;;

26 const packageMarkerRest = &quot;rest&quot;;
27 const packagesIdentifierMap = new Map().set(&quot;java.&quot;, packageMarkerJava).set(&quot;sun.&quot;, packageMarkerSun)
<span class="line-modified">28     .set(&quot;com.sun.&quot;, packageMarkerSun);</span>
29 const packageColorMap = new Map().set(&quot;&quot;, rootPackageColor);
30 
31 const colorByPackage = function (p) {
32     if (p === undefined) {
33         return invalidPackageColor;
34     } else {
<span class="line-modified">35         const packageNameStrip = stripPackageName(p);	</span>
36         const packageSelectedColor = packageColorMap.get(packageNameStrip);
37         if (packageSelectedColor === undefined) {
<span class="line-modified">38             const packageMarkerSelected = getPackageMarker(packageNameStrip);</span>
<span class="line-modified">39 </span>
<span class="line-removed">40 			const packageNameStripHash = packageNameStrip.hashCode();</span>
41             switch (packageMarkerSelected) {
42                 case packageMarkerJava:
43                     const packageJavaSelectedColor = createHslColorString(packageJavaHslHSValues[0], packageJavaHslHSValues[1], adjustHslPropertyByHash(packageNameStripHash, packageJavaValueL, packageJavaValueLMax));
44                     packageColorMap.set(packageNameStrip, packageJavaSelectedColor);
45                     break;




46                 case packageMarkerSun:
47                     const packageSunSelectedColor = createHslColorString(packageSunHSValues[0], packageSunHSValues[1], adjustHslPropertyByHash(packageNameStripHash, packageSunValueL, packageSunValueLMax));
48                     packageColorMap.set(packageNameStrip, packageSunSelectedColor);
49                     break;
50                 case packageMarkerRest:
51                     const packageRestSelectedColor = createHslColorString(adjustHslPropertyByHash(packageNameStripHash, packageRestValueH, packageRestValueHMax), packageRestSLValues[0], packageRestSLValues[1]);
52                     packageColorMap.set(packageNameStrip, packageRestSelectedColor);
53                     break;
54             }
55             return packageColorMap.get(packageNameStrip);
56         } else {
57             return packageSelectedColor;
58         }
59     }
60 };
61 
62 const getPackageMarker = function(p){
63     for(let k of packagesIdentifierMap.keys()){
64         if(p.startsWith(k)){
65             return packagesIdentifierMap.get(k);
</pre>
</td>
<td>
<hr />
<pre>
 1 String.prototype.hashCode = function () {
 2     var hash = 0;
 3     if (this.length === 0) return hash;
 4     for (var i = 0; i &lt; this.length; i++) {
 5         var char = this.charCodeAt(i);
 6         hash = ((hash &lt;&lt; 5) - hash) + char;
 7         hash = hash &amp; hash;
 8     }
 9     return hash;
10 };
11 
12 const rootPackageColor = &quot;darkred&quot;;
13 const invalidPackageColor = &quot;snow&quot;;
14 const packageJavaValueLMax = 80;
15 const packageJavaValueL = 65;
16 const packageJavaHslHSValues = [184, 10];
17 const packageSunValueLMax = 54;
18 const packageSunValueL = 31;
19 const packageSunHSValues = [211, 21];
<span class="line-added">20 const packageComSunValueLMax = 55;</span>
<span class="line-added">21 const packageComSunValueL = 45;</span>
<span class="line-added">22 const packageComSunHSValues = [204, 5];</span>
23 const packageRestValueHMax = 360;
24 const packageRestValueH = 0;
25 const packageRestSLValues = [42, 53];
26 const packageConsideredDepth = 3;
27 const packageMarkerJava = &quot;java&quot;;
28 const packageMarkerSun = &quot;sun&quot;;
<span class="line-added">29 const packageMarkerComSun = &quot;comSun&quot;;</span>
30 const packageMarkerRest = &quot;rest&quot;;
31 const packagesIdentifierMap = new Map().set(&quot;java.&quot;, packageMarkerJava).set(&quot;sun.&quot;, packageMarkerSun)
<span class="line-modified">32     .set(&quot;com.sun.&quot;, packageMarkerComSun);</span>
33 const packageColorMap = new Map().set(&quot;&quot;, rootPackageColor);
34 
35 const colorByPackage = function (p) {
36     if (p === undefined) {
37         return invalidPackageColor;
38     } else {
<span class="line-modified">39     	const packageNameStrip = stripPackageName(p);	</span>
40         const packageSelectedColor = packageColorMap.get(packageNameStrip);
41         if (packageSelectedColor === undefined) {
<span class="line-modified">42         	const packageMarkerSelected = getPackageMarker(packageNameStrip);</span>
<span class="line-modified">43         	const packageNameStripHash = packageNameStrip.hashCode();</span>

44             switch (packageMarkerSelected) {
45                 case packageMarkerJava:
46                     const packageJavaSelectedColor = createHslColorString(packageJavaHslHSValues[0], packageJavaHslHSValues[1], adjustHslPropertyByHash(packageNameStripHash, packageJavaValueL, packageJavaValueLMax));
47                     packageColorMap.set(packageNameStrip, packageJavaSelectedColor);
48                     break;
<span class="line-added">49                 case packageMarkerComSun:</span>
<span class="line-added">50                 	const packageComSunSelectedColor = createHslColorString(packageComSunHSValues[0], packageComSunHSValues[1], adjustHslPropertyByHash(packageNameStripHash, packageComSunValueL, packageComSunValueLMax));</span>
<span class="line-added">51                 	packageColorMap.set(packageNameStrip, packageComSunSelectedColor);</span>
<span class="line-added">52                 	break;</span>
53                 case packageMarkerSun:
54                     const packageSunSelectedColor = createHslColorString(packageSunHSValues[0], packageSunHSValues[1], adjustHslPropertyByHash(packageNameStripHash, packageSunValueL, packageSunValueLMax));
55                     packageColorMap.set(packageNameStrip, packageSunSelectedColor);
56                     break;
57                 case packageMarkerRest:
58                     const packageRestSelectedColor = createHslColorString(adjustHslPropertyByHash(packageNameStripHash, packageRestValueH, packageRestValueHMax), packageRestSLValues[0], packageRestSLValues[1]);
59                     packageColorMap.set(packageNameStrip, packageRestSelectedColor);
60                     break;
61             }
62             return packageColorMap.get(packageNameStrip);
63         } else {
64             return packageSelectedColor;
65         }
66     }
67 };
68 
69 const getPackageMarker = function(p){
70     for(let k of packagesIdentifierMap.keys()){
71         if(p.startsWith(k)){
72             return packagesIdentifierMap.get(k);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>