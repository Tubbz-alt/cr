<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff application/tests/org.openjdk.jmc.rjmx.test/src/test/java/org/openjdk/jmc/rjmx/test/subscription/MRIMetadataServiceTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="CompositeDataSubscriptionTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="internal/ConsoleAttributeInfoManagerTest.java.udiff.html" target="_top">next &gt;</a></center>    <h2>application/tests/org.openjdk.jmc.rjmx.test/src/test/java/org/openjdk/jmc/rjmx/test/subscription/MRIMetadataServiceTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -65,12 +65,12 @@</span>
  	@Test
  	public void testGetAttributeInfo() throws Exception {
  		@SuppressWarnings(&quot;nls&quot;)
  		IConnectionHandle handle = IServerHandle.create(LocalRJMXTestToolkit.createDefaultDescriptor()).connect(&quot;Test&quot;);
  		IMRIMetadataService service = LocalRJMXTestToolkit.getInfoService(handle);
<span class="udiff-line-modified-removed">- 		IMRIMetadata info = service.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;,</span>
<span class="udiff-line-modified-removed">- 				&quot;SystemCpuLoad&quot;));</span>
<span class="udiff-line-modified-added">+ 		IMRIMetadata info = service</span>
<span class="udiff-line-modified-added">+ 				.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;, &quot;SystemCpuLoad&quot;));</span>
  		assertNotNull(info);
  		assertNotNull(info.getMRI());
  		assertNotNull(info.getValueType());
  		assertNotNull(info.getDescription());
  		handle.close();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -78,12 +78,12 @@</span>
  
  	@Test
  	public void testGetMetadata() throws Exception {
  		IConnectionHandle handle = IServerHandle.create(LocalRJMXTestToolkit.createDefaultDescriptor()).connect(&quot;Test&quot;);
  		IMRIMetadataService service = LocalRJMXTestToolkit.getInfoService(handle);
<span class="udiff-line-modified-removed">- 		IMRIMetadata info = service.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;,</span>
<span class="udiff-line-modified-removed">- 				&quot;SystemCpuLoad&quot;));</span>
<span class="udiff-line-modified-added">+ 		IMRIMetadata info = service</span>
<span class="udiff-line-modified-added">+ 				.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;, &quot;SystemCpuLoad&quot;));</span>
  		assertNotNull(info);
  
  		String description = info.getDescription();
  		assertNotNull(description);
  		assertTrue(description.length() &gt; 12);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -123,14 +123,14 @@</span>
  		IMRIMetadataService service = LocalRJMXTestToolkit.getInfoService(handle);
  		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Memory&quot;, &quot;HeapMemoryUsage&quot;),
  				MemoryUsage.class);
  		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Memory&quot;, &quot;HeapMemoryUsage/committed&quot;),
  				Long.TYPE);
<span class="udiff-line-modified-removed">- 		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;JMImplementation:type=MBeanServerDelegate&quot;,</span>
<span class="udiff-line-modified-removed">- 				&quot;ImplementationVendor&quot;), String.class);</span>
<span class="udiff-line-modified-removed">- 		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Runtime&quot;, &quot;InputArguments&quot;),</span>
<span class="udiff-line-modified-removed">- 				List.class);</span>
<span class="udiff-line-modified-added">+ 		evaluateAttributeType(service,</span>
<span class="udiff-line-modified-added">+ 				new MRI(Type.ATTRIBUTE, &quot;JMImplementation:type=MBeanServerDelegate&quot;, &quot;ImplementationVendor&quot;),</span>
<span class="udiff-line-modified-added">+ 				String.class);</span>
<span class="udiff-line-modified-added">+ 		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Runtime&quot;, &quot;InputArguments&quot;), List.class);</span>
  		evaluateAttributeType(service, new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Runtime&quot;, &quot;SystemProperties&quot;),
  				Map.class);
  		handle.close();
  	}
  
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -160,12 +160,12 @@</span>
  
  	@Test
  	public void testSetMetadata() throws Exception {
  		IConnectionHandle handle = IServerHandle.create(LocalRJMXTestToolkit.createDefaultDescriptor()).connect(&quot;Test&quot;);
  		IMRIMetadataService service = LocalRJMXTestToolkit.getInfoService(handle);
<span class="udiff-line-modified-removed">- 		IMRIMetadata info = service.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;,</span>
<span class="udiff-line-modified-removed">- 				&quot;SystemCpuLoad&quot;));</span>
<span class="udiff-line-modified-added">+ 		IMRIMetadata info = service</span>
<span class="udiff-line-modified-added">+ 				.getMetadata(new MRI(Type.ATTRIBUTE, &quot;java.lang:type=OperatingSystem&quot;, &quot;SystemCpuLoad&quot;));</span>
  		assertNotNull(info);
  		service.setMetadata(info.getMRI(), &quot;testgegga&quot;, &quot;Oh, testgegga!&quot;);
  		String testGegga = (String) service.getMetadata(info.getMRI(), &quot;testgegga&quot;);
  		assertEquals(&quot;Oh, testgegga!&quot;, testGegga);
  		handle.close();
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -192,12 +192,11 @@</span>
  
  	@Test
  	public void testOverrideDefultMetadata() throws Exception {
  		IConnectionHandle handle = IServerHandle.create(LocalRJMXTestToolkit.createDefaultDescriptor()).connect(&quot;Test&quot;);
  		IMRIMetadataService service = LocalRJMXTestToolkit.getInfoService(handle);
<span class="udiff-line-modified-removed">- 		MRI mri = new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Memory&quot;,</span>
<span class="udiff-line-removed">- 				&quot;HeapMemoryUsage/committed&quot;);</span>
<span class="udiff-line-modified-added">+ 		MRI mri = new MRI(Type.ATTRIBUTE, &quot;java.lang:type=Memory&quot;, &quot;HeapMemoryUsage/committed&quot;);</span>
  		IMRIMetadata info = service.getMetadata(mri);
  		String description = info.getDescription();
  		String newDescription = &quot;[ja]&quot; + description;
  		service.setMetadata(mri, IMRIMetadataProvider.KEY_DESCRIPTION, newDescription);
  		assertEquals(&quot;Description not updated&quot;, newDescription, info.getDescription());
</pre>
<center><a href="CompositeDataSubscriptionTest.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="internal/ConsoleAttributeInfoManagerTest.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>