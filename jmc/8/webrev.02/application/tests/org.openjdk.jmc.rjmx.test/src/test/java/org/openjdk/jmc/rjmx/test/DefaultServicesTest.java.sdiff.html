<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/tests/org.openjdk.jmc.rjmx.test/src/test/java/org/openjdk/jmc/rjmx/test/DefaultServicesTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="BasicCommunicationTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="internal/RJMXConnectionTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>application/tests/org.openjdk.jmc.rjmx.test/src/test/java/org/openjdk/jmc/rjmx/test/DefaultServicesTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
63 			}
64 		}
65 		fail(&quot;Could not find java.lang.management among the domains!&quot;);
66 	}
67 
68 	@Test
69 	public void xtestMBeanHelperService() throws Exception {
70 		IConnectionHandle handle = getDefaultServer().connect(&quot;Test&quot;);
71 		IMBeanHelperService helper = handle.getServiceOrThrow(IMBeanHelperService.class);
72 
73 		// FIXME: JMC-4270 - Server time approximation is not reliable. Disabling until a solution is found.
74 //		long time = System.currentTimeMillis();
75 //
76 //		// The server time calculations should not be this much off.
77 //		long diff = time - helper.getApproximateServerTime(time);
78 //		assertLessThan(&quot;Server time approximation off by more than five seconds&quot;, 5000L, Math.abs(diff));
79 //		System.out.println(&quot;DefaultServicesTest.testMBeanHelperService(): Server time approximation difference = &quot;
80 //				+ Math.abs(diff) + &quot; ms&quot;);
81 
82 		// Should at least contain the java.lang mbeans. Just testing for the Threading one.
<span class="line-modified">83 		assertTrue(&quot;Could not find the Threading MBean!&quot;, helper.getMBeanNames().contains(</span>
<span class="line-modified">84 				new ObjectName(&quot;java.lang:type=Threading&quot;)));</span>
85 	}
86 }
</pre>
</td>
<td>
<hr />
<pre>
63 			}
64 		}
65 		fail(&quot;Could not find java.lang.management among the domains!&quot;);
66 	}
67 
68 	@Test
69 	public void xtestMBeanHelperService() throws Exception {
70 		IConnectionHandle handle = getDefaultServer().connect(&quot;Test&quot;);
71 		IMBeanHelperService helper = handle.getServiceOrThrow(IMBeanHelperService.class);
72 
73 		// FIXME: JMC-4270 - Server time approximation is not reliable. Disabling until a solution is found.
74 //		long time = System.currentTimeMillis();
75 //
76 //		// The server time calculations should not be this much off.
77 //		long diff = time - helper.getApproximateServerTime(time);
78 //		assertLessThan(&quot;Server time approximation off by more than five seconds&quot;, 5000L, Math.abs(diff));
79 //		System.out.println(&quot;DefaultServicesTest.testMBeanHelperService(): Server time approximation difference = &quot;
80 //				+ Math.abs(diff) + &quot; ms&quot;);
81 
82 		// Should at least contain the java.lang mbeans. Just testing for the Threading one.
<span class="line-modified">83 		assertTrue(&quot;Could not find the Threading MBean!&quot;,</span>
<span class="line-modified">84 				helper.getMBeanNames().contains(new ObjectName(&quot;java.lang:type=Threading&quot;)));</span>
85 	}
86 }
</pre>
</td>
</tr>
</table>
<center><a href="BasicCommunicationTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="internal/RJMXConnectionTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>