<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/uitests/org.openjdk.jmc.flightrecorder.uitest/src/test/java/org/openjdk/jmc/flightrecorder/uitest/StackTraceComponentTest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="OldRecordingsVerificationTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="TemplateManagerTest.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>application/uitests/org.openjdk.jmc.flightrecorder.uitest/src/test/java/org/openjdk/jmc/flightrecorder/uitest/StackTraceComponentTest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
269 		String text;
270 		String pattern;
271 		stackTrace.setViewAsTree(false);
272 		stackTrace.selectFirstFrame();
273 		stackTrace.setChooseFrameGroup(false);
274 
275 		// Make sure other settings that affect the text on the lines are as expected.
276 		stackTrace.setDistinguishFramesByOptimizationType(false);
277 		stackTrace.setDistinguishFramesByLevel(JfrStackTrace.LevelOption.METHOD);
278 
279 		// Trying to find a frame with a return type that is not void or of a primitive type. Will fail the test if not found
280 		int frame = 0;
281 		boolean found = false;
282 		while (!found &amp;&amp; frame &lt; stackTrace.getFrameCount()) {
283 			if (stackTrace.getFrame(frame).getText().substring(0, 1).matches(&quot;\\w?[A-Z]&quot;)) {
284 				found = true;
285 			} else {
286 				frame++;
287 			}
288 		}
<span class="line-modified">289 		</span>
290 		Assert.assertTrue(&quot;Could not find suitable frame to analyze. Recording not suitable for this test&quot;, found);
291 
292 		// All hidden
293 		stackTrace.setMethodFormatting(JfrStackTrace.FormatOption.HIDDEN, JfrStackTrace.FormatOption.HIDDEN,
294 				JfrStackTrace.FormatOption.HIDDEN);
295 		text = stackTrace.getFrame(frame).getText();
296 
297 		/*
298 		 * Pattern below: A method name followed by () or (...) The pattern for a class name could
299 		 * be written as \w if it wasn&#39;t for the fact that class names can contain $ and digits.
300 		 * Instead [\w\$\d] is used to match the characters of a class. The same pattern is used for
301 		 * method names too. I recommend e.g. http://www.regexplanet.com/advanced/java/index.html to
302 		 * try out regular expressions with
303 		 */
304 		pattern = &quot;[\\w\\$\\d]+\\((\\.\\.\\.)?\\)&quot;;
305 		verifyPattern(pattern, text);
306 
307 		// Adding class as return value
308 		stackTrace.setMethodFormatting(JfrStackTrace.FormatOption.CLASS_NAME, null, null);
309 		// Pattern below: Previous text, but with a Class name and space before it
</pre>
</td>
<td>
<hr />
<pre>
269 		String text;
270 		String pattern;
271 		stackTrace.setViewAsTree(false);
272 		stackTrace.selectFirstFrame();
273 		stackTrace.setChooseFrameGroup(false);
274 
275 		// Make sure other settings that affect the text on the lines are as expected.
276 		stackTrace.setDistinguishFramesByOptimizationType(false);
277 		stackTrace.setDistinguishFramesByLevel(JfrStackTrace.LevelOption.METHOD);
278 
279 		// Trying to find a frame with a return type that is not void or of a primitive type. Will fail the test if not found
280 		int frame = 0;
281 		boolean found = false;
282 		while (!found &amp;&amp; frame &lt; stackTrace.getFrameCount()) {
283 			if (stackTrace.getFrame(frame).getText().substring(0, 1).matches(&quot;\\w?[A-Z]&quot;)) {
284 				found = true;
285 			} else {
286 				frame++;
287 			}
288 		}
<span class="line-modified">289 </span>
290 		Assert.assertTrue(&quot;Could not find suitable frame to analyze. Recording not suitable for this test&quot;, found);
291 
292 		// All hidden
293 		stackTrace.setMethodFormatting(JfrStackTrace.FormatOption.HIDDEN, JfrStackTrace.FormatOption.HIDDEN,
294 				JfrStackTrace.FormatOption.HIDDEN);
295 		text = stackTrace.getFrame(frame).getText();
296 
297 		/*
298 		 * Pattern below: A method name followed by () or (...) The pattern for a class name could
299 		 * be written as \w if it wasn&#39;t for the fact that class names can contain $ and digits.
300 		 * Instead [\w\$\d] is used to match the characters of a class. The same pattern is used for
301 		 * method names too. I recommend e.g. http://www.regexplanet.com/advanced/java/index.html to
302 		 * try out regular expressions with
303 		 */
304 		pattern = &quot;[\\w\\$\\d]+\\((\\.\\.\\.)?\\)&quot;;
305 		verifyPattern(pattern, text);
306 
307 		// Adding class as return value
308 		stackTrace.setMethodFormatting(JfrStackTrace.FormatOption.CLASS_NAME, null, null);
309 		// Pattern below: Previous text, but with a Class name and space before it
</pre>
</td>
</tr>
</table>
<center><a href="OldRecordingsVerificationTest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="TemplateManagerTest.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>