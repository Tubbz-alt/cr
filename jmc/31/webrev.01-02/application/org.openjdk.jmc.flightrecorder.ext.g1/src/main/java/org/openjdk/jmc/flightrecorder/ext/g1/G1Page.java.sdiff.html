<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.flightrecorder.ext.g1/src/main/java/org/openjdk/jmc/flightrecorder/ext/g1/G1Page.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>application/org.openjdk.jmc.flightrecorder.ext.g1/src/main/java/org/openjdk/jmc/flightrecorder/ext/g1/G1Page.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
246 				heapVisualizer.addListener(SWT.Selection, e -&gt; {
247 					HeapRegionSelectionEvent event = (HeapRegionSelectionEvent) e;
248 					IItemCollection regionStates = event.regionIndexes.size() == 0
249 							? getDataSource().getItems().apply(G1Constants.ALL_REGION_EVENTS)
250 							: getDataSource().getItems()
251 									.apply(ItemFilters.memberOf(G1Constants.REGION_INDEX, event.regionIndexes));
252 					pageContainer.showSelection(regionStates);
253 					regionVisualizer.show(regionStates);
254 				});
255 
256 				gcTable = BY_ID.build(heapSash, JdkAttributes.GC_ID, getTableSettings(state.getChild(&quot;gcTable&quot;)));
257 				IItemCollection gcPauses = getDataSource().getItems().apply(JdkFilters.GARBAGE_COLLECTION);
258 				gcTable.show(gcPauses);
259 				regionVisualizer
260 						.showGC(getDataSource().getItems().apply(ItemFilters.hasAttribute(JdkAttributes.GC_ID)));
261 				if (heapDumps != null) {
262 					gcTable.getManager().getViewer().addSelectionChangedListener(e -&gt; {
263 						IAggregator&lt;IQuantity, ?&gt; min = Aggregators.min(JfrAttributes.START_TIME);
264 						IQuantity newTime = gcTable.getSelection().getItems().getAggregate(min);
265 						if (newTime == null) {
<span class="line-modified">266 							regionVisualizer.showGC(getDataSource().getItems().apply(ItemFilters.hasAttribute(JdkAttributes.GC_ID)));</span>

267 							time = getDataSource().getItems().apply(G1Constants.HEAP_REGION_DUMPS).getAggregate(min);
268 						} else {
269 							IAggregator&lt;Set&lt;IQuantity&gt;, ?&gt; distinct = Aggregators.distinct(JdkAttributes.GC_ID);
270 							Set&lt;IQuantity&gt; gcIds = gcTable.getSelection().getItems().getAggregate(distinct);
<span class="line-modified">271 							regionVisualizer.showGC(getDataSource().getItems().apply(ItemFilters.memberOf(JdkAttributes.GC_ID, gcIds)));</span>

272 							time = newTime;
273 						}
274 						heapVisualizer.show(seekTo(time));
275 						timeLabel.setText(time.displayUsing(IDisplayable.VERBOSE));
276 						regionVisualizer.setCurrentTime(time);
277 						heapVisualizer.redraw();
278 					});
279 				}
280 
281 				if (heapDumps != null) {
282 					heapVisualizer.show(heapDumps.get(0));
283 					regionVisualizer.show(getDataSource().getItems().apply(G1Constants.ALL_REGION_EVENTS));
284 				} else {
285 					heapVisualizer.show(null);
286 				}
287 				MCContextMenuManager mm = MCContextMenuManager.create(heapVisualizer);
288 				mm.add(ActionToolkit.radioAction(() -&gt; {
289 					heapVisualizer.setCurveType(CurveType.HILBERT);
290 					heapVisualizer.redraw();
291 				}, &quot;Hilbert&quot;, FlightRecorderUI.getDefault().getMCImageDescriptor(ImageConstants.PAGE_GC)));
</pre>
</td>
<td>
<hr />
<pre>
246 				heapVisualizer.addListener(SWT.Selection, e -&gt; {
247 					HeapRegionSelectionEvent event = (HeapRegionSelectionEvent) e;
248 					IItemCollection regionStates = event.regionIndexes.size() == 0
249 							? getDataSource().getItems().apply(G1Constants.ALL_REGION_EVENTS)
250 							: getDataSource().getItems()
251 									.apply(ItemFilters.memberOf(G1Constants.REGION_INDEX, event.regionIndexes));
252 					pageContainer.showSelection(regionStates);
253 					regionVisualizer.show(regionStates);
254 				});
255 
256 				gcTable = BY_ID.build(heapSash, JdkAttributes.GC_ID, getTableSettings(state.getChild(&quot;gcTable&quot;)));
257 				IItemCollection gcPauses = getDataSource().getItems().apply(JdkFilters.GARBAGE_COLLECTION);
258 				gcTable.show(gcPauses);
259 				regionVisualizer
260 						.showGC(getDataSource().getItems().apply(ItemFilters.hasAttribute(JdkAttributes.GC_ID)));
261 				if (heapDumps != null) {
262 					gcTable.getManager().getViewer().addSelectionChangedListener(e -&gt; {
263 						IAggregator&lt;IQuantity, ?&gt; min = Aggregators.min(JfrAttributes.START_TIME);
264 						IQuantity newTime = gcTable.getSelection().getItems().getAggregate(min);
265 						if (newTime == null) {
<span class="line-modified">266 							regionVisualizer.showGC(</span>
<span class="line-added">267 									getDataSource().getItems().apply(ItemFilters.hasAttribute(JdkAttributes.GC_ID)));</span>
268 							time = getDataSource().getItems().apply(G1Constants.HEAP_REGION_DUMPS).getAggregate(min);
269 						} else {
270 							IAggregator&lt;Set&lt;IQuantity&gt;, ?&gt; distinct = Aggregators.distinct(JdkAttributes.GC_ID);
271 							Set&lt;IQuantity&gt; gcIds = gcTable.getSelection().getItems().getAggregate(distinct);
<span class="line-modified">272 							regionVisualizer.showGC(</span>
<span class="line-added">273 									getDataSource().getItems().apply(ItemFilters.memberOf(JdkAttributes.GC_ID, gcIds)));</span>
274 							time = newTime;
275 						}
276 						heapVisualizer.show(seekTo(time));
277 						timeLabel.setText(time.displayUsing(IDisplayable.VERBOSE));
278 						regionVisualizer.setCurrentTime(time);
279 						heapVisualizer.redraw();
280 					});
281 				}
282 
283 				if (heapDumps != null) {
284 					heapVisualizer.show(heapDumps.get(0));
285 					regionVisualizer.show(getDataSource().getItems().apply(G1Constants.ALL_REGION_EVENTS));
286 				} else {
287 					heapVisualizer.show(null);
288 				}
289 				MCContextMenuManager mm = MCContextMenuManager.create(heapVisualizer);
290 				mm.add(ActionToolkit.radioAction(() -&gt; {
291 					heapVisualizer.setCurveType(CurveType.HILBERT);
292 					heapVisualizer.redraw();
293 				}, &quot;Hilbert&quot;, FlightRecorderUI.getDefault().getMCImageDescriptor(ImageConstants.PAGE_GC)));
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>