<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.console.ui.notification/src/main/java/org/openjdk/jmc/console/ui/notification/action/TriggerActionStartTimeBoundRecording.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../../org.openjdk.jmc.console.jconsole/src/main/java/org/openjdk/jmc/console/jconsole/JConsolePluginLoader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="WriteAndOpenRecordingJob.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>application/org.openjdk.jmc.console.ui.notification/src/main/java/org/openjdk/jmc/console/ui/notification/action/TriggerActionStartTimeBoundRecording.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
164 					WorkbenchToolkit.asyncOpenEditor(new MCPathEditorInput(writtenFile, false));
165 				} else {
166 					showAlert(writtenFile, m_event);
167 				}
168 				return StatusFactory.createOk(
169 						NLS.bind(Messages.WriteAndOpenRecordingJob_MESSAGE_SUCCESSFUL_DUMP, m_descriptor.getName()));
170 			} catch (FlightRecorderException e) {
171 				return StatusFactory.createErr(NLS.bind(Messages.TriggerActionStartTimeBoundRecording_SERVICE_ERROR_MSG,
172 						m_descriptor.getName()), e, false);
173 			} catch (IOException e) {
174 				return StatusFactory.createErr(
175 						NLS.bind(Messages.TriggerActionStartTimeBoundRecording_IO_ERROR_MSG, m_descriptor.getName()), e,
176 						false);
177 			}
178 		}
179 	}
180 
181 	private File dumpFile(
182 		IProgressMonitor monitor, IFlightRecorderService service, IRecordingDescriptor descriptor, MCFile path)
183 			throws IOException, FlightRecorderException {
<span class="line-modified">184 		InputStream stream = service.openStream(descriptor, false);</span>
<span class="line-removed">185 		try {</span>
186 			return IDESupportToolkit.writeToUniqueFile(path, stream, monitor);
<span class="line-removed">187 		} finally {</span>
<span class="line-removed">188 			IOToolkit.closeSilently(stream);</span>
189 		}
190 	}
191 
192 	private void showAlert(File file, TriggerEvent event) {
193 		AlertObject ao = new AlertObject(event.getCreationTime(),
194 				event.getSource().getServerDescriptor().getDisplayName(), event.getRule(),
195 				NotificationUIToolkit.prettyPrint(event,
196 						NLS.bind(Messages.TriggerActionStartTimeBoundRecording_MESSAGE_RECORDING_SUCCESSFUL_PATH,
197 								file.getPath())),
198 				null);
199 		AlertPlugin.getDefault().addAlertObject(ao);
200 	}
201 
202 	@Override
203 	public boolean supportsAction(IConnectionHandle handle) {
204 		return TriggerActionRecordingToolkit.supportsJfrAction(handle);
205 	}
206 
207 	@Override
208 	public boolean isActivatable(IConnectionHandle handle) {
</pre>
</td>
<td>
<hr />
<pre>
164 					WorkbenchToolkit.asyncOpenEditor(new MCPathEditorInput(writtenFile, false));
165 				} else {
166 					showAlert(writtenFile, m_event);
167 				}
168 				return StatusFactory.createOk(
169 						NLS.bind(Messages.WriteAndOpenRecordingJob_MESSAGE_SUCCESSFUL_DUMP, m_descriptor.getName()));
170 			} catch (FlightRecorderException e) {
171 				return StatusFactory.createErr(NLS.bind(Messages.TriggerActionStartTimeBoundRecording_SERVICE_ERROR_MSG,
172 						m_descriptor.getName()), e, false);
173 			} catch (IOException e) {
174 				return StatusFactory.createErr(
175 						NLS.bind(Messages.TriggerActionStartTimeBoundRecording_IO_ERROR_MSG, m_descriptor.getName()), e,
176 						false);
177 			}
178 		}
179 	}
180 
181 	private File dumpFile(
182 		IProgressMonitor monitor, IFlightRecorderService service, IRecordingDescriptor descriptor, MCFile path)
183 			throws IOException, FlightRecorderException {
<span class="line-modified">184 		try (InputStream stream = service.openStream(descriptor, false)) {</span>

185 			return IDESupportToolkit.writeToUniqueFile(path, stream, monitor);


186 		}
187 	}
188 
189 	private void showAlert(File file, TriggerEvent event) {
190 		AlertObject ao = new AlertObject(event.getCreationTime(),
191 				event.getSource().getServerDescriptor().getDisplayName(), event.getRule(),
192 				NotificationUIToolkit.prettyPrint(event,
193 						NLS.bind(Messages.TriggerActionStartTimeBoundRecording_MESSAGE_RECORDING_SUCCESSFUL_PATH,
194 								file.getPath())),
195 				null);
196 		AlertPlugin.getDefault().addAlertObject(ao);
197 	}
198 
199 	@Override
200 	public boolean supportsAction(IConnectionHandle handle) {
201 		return TriggerActionRecordingToolkit.supportsJfrAction(handle);
202 	}
203 
204 	@Override
205 	public boolean isActivatable(IConnectionHandle handle) {
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../../../org.openjdk.jmc.console.jconsole/src/main/java/org/openjdk/jmc/console/jconsole/JConsolePluginLoader.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../index.html" target="_top">index</a> <a href="WriteAndOpenRecordingJob.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>