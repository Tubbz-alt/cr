<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff application/org.openjdk.jmc.flightrecorder.controlpanel.ui.configuration/src/main/java/org/openjdk/jmc/flightrecorder/controlpanel/ui/configuration/model/xml/XMLModel.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../../../../org.openjdk.jmc.console.ui.notification/src/main/java/org/openjdk/jmc/console/ui/notification/tab/TriggerToolkit.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../../../../org.openjdk.jmc.flightrecorder.controlpanel.ui/src/main/java/org/openjdk/jmc/flightrecorder/controlpanel/ui/actions/DumpAnyRecordingAction.java.udiff.html" target="_top">next &gt;</a></center>    <h2>application/org.openjdk.jmc.flightrecorder.controlpanel.ui.configuration/src/main/java/org/openjdk/jmc/flightrecorder/controlpanel/ui/configuration/model/xml/XMLModel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -257,13 +257,14 @@</span>
  	 */
  	public void saveToFile(File file) throws IOException {
  		// NOTE: The pretty printer writes that the encoding is UTF-8, so we must make sure it is.
  		// Ensure charset exists before opening file for writing.
  		Charset charset = Charset.forName(&quot;UTF-8&quot;); //$NON-NLS-1$
<span class="udiff-line-modified-removed">- 		Writer osw = new OutputStreamWriter(new FileOutputStream(file), charset);</span>
<span class="udiff-line-modified-removed">- 		if (writeTo(osw)) {</span>
<span class="udiff-line-modified-removed">- 			setDirty(false);</span>
<span class="udiff-line-modified-added">+ 		try (Writer osw = new OutputStreamWriter(new FileOutputStream(file), charset)) {</span>
<span class="udiff-line-modified-added">+ 			if (writeTo(osw)) {</span>
<span class="udiff-line-modified-added">+ 				setDirty(false);</span>
<span class="udiff-line-added">+ 			}</span>
  		}
  	}
  
  	/**
  	 * Writes the model to the given {@link Writer}. Does not change dirtyness, as returned by
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -273,19 +274,16 @@</span>
  	 * @param oneLineElements
  	 *            XML tags to output on a single line
  	 * @return true iff the model was successfully written to the {@link Writer}.
  	 */
  	public boolean writeTo(Writer writer) {
<span class="udiff-line-modified-removed">- 		PrintWriter pw = new PrintWriter(writer);</span>
<span class="udiff-line-removed">- 		try {</span>
<span class="udiff-line-modified-added">+ 		try (PrintWriter pw = new PrintWriter(writer)) {</span>
  			PrettyPrinter pp = new PrettyPrinter(pw, m_validator.getElementsTooKeepOnOneLine());
  			pp.print(this);
  			pw.flush();
  			// PrintWriter never throws any exceptions, so this is how we find out if something went wrong.
  			return !pw.checkError();
<span class="udiff-line-removed">- 		} finally {</span>
<span class="udiff-line-removed">- 			IOToolkit.closeSilently(pw);</span>
  		}
  	}
  
  	public XMLTagInstance getRoot() {
  		return m_root;
</pre>
<center><a href="../../../../../../../../../../../../../org.openjdk.jmc.console.ui.notification/src/main/java/org/openjdk/jmc/console/ui/notification/tab/TriggerToolkit.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../../../../org.openjdk.jmc.flightrecorder.controlpanel.ui/src/main/java/org/openjdk/jmc/flightrecorder/controlpanel/ui/actions/DumpAnyRecordingAction.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>