<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff application/uitests/org.openjdk.jmc.flightrecorder.uitest/src/test/java/org/openjdk/jmc/flightrecorder/uitest/MetadataTestBase.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="JfrMetadataToolkit.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../../core/org.openjdk.jmc.agent/src/main/java/org/openjdk/jmc/agent/Agent.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>application/uitests/org.openjdk.jmc.flightrecorder.uitest/src/test/java/org/openjdk/jmc/flightrecorder/uitest/MetadataTestBase.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 166,12 ***</span>
  		wizardShell.startAndWaitForRecordingEditor();
  	}
  
  	protected void copyFile(File sourceFile, File destFile) {
  		prepareFile(destFile);
<span class="line-modified">! 		try (FileChannel source = new FileInputStream(sourceFile).getChannel();</span>
<span class="line-modified">! 				FileChannel destination = new FileOutputStream(destFile).getChannel()) {</span>
  			destination.transferFrom(source, 0, source.size());
  		} catch (IOException e) {
  			e.printStackTrace();
  			fail(&quot;Error copying file \&quot;&quot; + sourceFile.getAbsolutePath() + &quot;\&quot; to \&quot;&quot; + destFile.getAbsolutePath()
  					+ &quot;\&quot;. Error:\n&quot; + e.getMessage());
<span class="line-new-header">--- 166,14 ---</span>
  		wizardShell.startAndWaitForRecordingEditor();
  	}
  
  	protected void copyFile(File sourceFile, File destFile) {
  		prepareFile(destFile);
<span class="line-modified">! 		try (FileInputStream sourceFis = new FileInputStream(sourceFile);</span>
<span class="line-modified">! 				FileOutputStream destinationFos = new FileOutputStream(destFile);</span>
<span class="line-added">+ 				FileChannel source = sourceFis.getChannel();</span>
<span class="line-added">+ 				FileChannel destination = destinationFos.getChannel()) {</span>
  			destination.transferFrom(source, 0, source.size());
  		} catch (IOException e) {
  			e.printStackTrace();
  			fail(&quot;Error copying file \&quot;&quot; + sourceFile.getAbsolutePath() + &quot;\&quot; to \&quot;&quot; + destFile.getAbsolutePath()
  					+ &quot;\&quot;. Error:\n&quot; + e.getMessage());
</pre>
<center><a href="JfrMetadataToolkit.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../../core/org.openjdk.jmc.agent/src/main/java/org/openjdk/jmc/agent/Agent.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>