<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff application/org.openjdk.jmc.flightrecorder.flameview/src/main/java/org/openjdk/jmc/flightrecorder/flameview/views/FlameGraphView.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>application/org.openjdk.jmc.flightrecorder.flameview/src/main/java/org/openjdk/jmc/flightrecorder/flameview/views/FlameGraphView.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 39 import java.util.concurrent.CancellationException;
 40 import java.util.concurrent.CompletableFuture;
 41 import java.util.concurrent.ExecutorService;
 42 import java.util.concurrent.Executors;
 43 import java.util.logging.Level;
 44 import java.util.stream.Collectors;
 45 import java.util.stream.Stream;
 46 
 47 import org.eclipse.jface.action.Action;
 48 import org.eclipse.jface.action.IAction;
 49 import org.eclipse.jface.action.IMenuManager;
 50 import org.eclipse.jface.action.IToolBarManager;
 51 import org.eclipse.jface.action.Separator;
 52 import org.eclipse.jface.viewers.ISelection;
 53 import org.eclipse.jface.viewers.IStructuredSelection;
 54 import org.eclipse.swt.SWT;
 55 import org.eclipse.swt.browser.Browser;
 56 import org.eclipse.swt.browser.ProgressAdapter;
 57 import org.eclipse.swt.browser.ProgressEvent;
 58 import org.eclipse.swt.custom.SashForm;


 59 import org.eclipse.swt.widgets.Composite;
 60 import org.eclipse.ui.IMemento;
 61 import org.eclipse.ui.ISelectionListener;
 62 import org.eclipse.ui.IViewSite;
 63 import org.eclipse.ui.IWorkbenchPart;
 64 import org.eclipse.ui.PartInitException;
 65 import org.eclipse.ui.part.ViewPart;
 66 import org.openjdk.jmc.common.item.IItemCollection;
 67 import org.openjdk.jmc.common.util.StringToolkit;
 68 import org.openjdk.jmc.flightrecorder.flameview.tree.TraceNode;
 69 import org.openjdk.jmc.flightrecorder.flameview.tree.TraceTreeUtils;
 70 import org.openjdk.jmc.flightrecorder.stacktrace.FrameSeparator;
 71 import org.openjdk.jmc.flightrecorder.stacktrace.FrameSeparator.FrameCategorization;
 72 import org.openjdk.jmc.flightrecorder.ui.FlightRecorderUI;
 73 import org.openjdk.jmc.flightrecorder.ui.messages.internal.Messages;
 74 import org.openjdk.jmc.ui.CoreImages;
 75 import org.openjdk.jmc.ui.common.util.AdapterUtil;
 76 import org.openjdk.jmc.ui.handlers.MCContextMenuManager;
 77 import org.openjdk.jmc.ui.misc.DisplayToolkit;
 78 
</pre>
<hr />
<pre>
145 		IMenuManager siteMenu = site.getActionBars().getMenuManager();
146 		siteMenu.add(new Separator(MCContextMenuManager.GROUP_TOP));
147 		siteMenu.add(new Separator(MCContextMenuManager.GROUP_VIEWER_SETUP));
148 		// addOptions(siteMenu);
149 		IToolBarManager toolBar = site.getActionBars().getToolBarManager();
150 		Stream.of(groupByActions).forEach(toolBar::add);
151 		getSite().getPage().addSelectionListener(this);
152 	}
153 
154 	@Override
155 	public void dispose() {
156 		getSite().getPage().removeSelectionListener(this);
157 		super.dispose();
158 	}
159 
160 	@Override
161 	public void createPartControl(Composite parent) {
162 		container = new SashForm(parent, SWT.HORIZONTAL);
163 		browser = new Browser(container, SWT.NONE);
164 		container.setMaximizedControl(browser);






165 	}
166 
167 	@Override
168 	public void setFocus() {
169 		browser.setFocus();
170 	}
171 
172 	@Override
173 	public void saveState(IMemento memento) {
174 	}
175 
176 	@Override
177 	public void selectionChanged(IWorkbenchPart part, ISelection selection) {
178 		if (selection instanceof IStructuredSelection) {
179 			Object first = ((IStructuredSelection) selection).getFirstElement();
180 			setItems(AdapterUtil.getAdapter(first, IItemCollection.class));
181 		}
182 	}
183 
184 	private void setItems(IItemCollection items) {
</pre>
</td>
<td>
<hr />
<pre>
 39 import java.util.concurrent.CancellationException;
 40 import java.util.concurrent.CompletableFuture;
 41 import java.util.concurrent.ExecutorService;
 42 import java.util.concurrent.Executors;
 43 import java.util.logging.Level;
 44 import java.util.stream.Collectors;
 45 import java.util.stream.Stream;
 46 
 47 import org.eclipse.jface.action.Action;
 48 import org.eclipse.jface.action.IAction;
 49 import org.eclipse.jface.action.IMenuManager;
 50 import org.eclipse.jface.action.IToolBarManager;
 51 import org.eclipse.jface.action.Separator;
 52 import org.eclipse.jface.viewers.ISelection;
 53 import org.eclipse.jface.viewers.IStructuredSelection;
 54 import org.eclipse.swt.SWT;
 55 import org.eclipse.swt.browser.Browser;
 56 import org.eclipse.swt.browser.ProgressAdapter;
 57 import org.eclipse.swt.browser.ProgressEvent;
 58 import org.eclipse.swt.custom.SashForm;
<span class="line-added"> 59 import org.eclipse.swt.events.MenuDetectEvent;</span>
<span class="line-added"> 60 import org.eclipse.swt.events.MenuDetectListener;</span>
 61 import org.eclipse.swt.widgets.Composite;
 62 import org.eclipse.ui.IMemento;
 63 import org.eclipse.ui.ISelectionListener;
 64 import org.eclipse.ui.IViewSite;
 65 import org.eclipse.ui.IWorkbenchPart;
 66 import org.eclipse.ui.PartInitException;
 67 import org.eclipse.ui.part.ViewPart;
 68 import org.openjdk.jmc.common.item.IItemCollection;
 69 import org.openjdk.jmc.common.util.StringToolkit;
 70 import org.openjdk.jmc.flightrecorder.flameview.tree.TraceNode;
 71 import org.openjdk.jmc.flightrecorder.flameview.tree.TraceTreeUtils;
 72 import org.openjdk.jmc.flightrecorder.stacktrace.FrameSeparator;
 73 import org.openjdk.jmc.flightrecorder.stacktrace.FrameSeparator.FrameCategorization;
 74 import org.openjdk.jmc.flightrecorder.ui.FlightRecorderUI;
 75 import org.openjdk.jmc.flightrecorder.ui.messages.internal.Messages;
 76 import org.openjdk.jmc.ui.CoreImages;
 77 import org.openjdk.jmc.ui.common.util.AdapterUtil;
 78 import org.openjdk.jmc.ui.handlers.MCContextMenuManager;
 79 import org.openjdk.jmc.ui.misc.DisplayToolkit;
 80 
</pre>
<hr />
<pre>
147 		IMenuManager siteMenu = site.getActionBars().getMenuManager();
148 		siteMenu.add(new Separator(MCContextMenuManager.GROUP_TOP));
149 		siteMenu.add(new Separator(MCContextMenuManager.GROUP_VIEWER_SETUP));
150 		// addOptions(siteMenu);
151 		IToolBarManager toolBar = site.getActionBars().getToolBarManager();
152 		Stream.of(groupByActions).forEach(toolBar::add);
153 		getSite().getPage().addSelectionListener(this);
154 	}
155 
156 	@Override
157 	public void dispose() {
158 		getSite().getPage().removeSelectionListener(this);
159 		super.dispose();
160 	}
161 
162 	@Override
163 	public void createPartControl(Composite parent) {
164 		container = new SashForm(parent, SWT.HORIZONTAL);
165 		browser = new Browser(container, SWT.NONE);
166 		container.setMaximizedControl(browser);
<span class="line-added">167 		browser.addMenuDetectListener(new MenuDetectListener() {</span>
<span class="line-added">168 			@Override</span>
<span class="line-added">169 			public void menuDetected(MenuDetectEvent e) {</span>
<span class="line-added">170 				e.doit = false;</span>
<span class="line-added">171 			}</span>
<span class="line-added">172 		});</span>
173 	}
174 
175 	@Override
176 	public void setFocus() {
177 		browser.setFocus();
178 	}
179 
180 	@Override
181 	public void saveState(IMemento memento) {
182 	}
183 
184 	@Override
185 	public void selectionChanged(IWorkbenchPart part, ISelection selection) {
186 		if (selection instanceof IStructuredSelection) {
187 			Object first = ((IStructuredSelection) selection).getFirstElement();
188 			setItems(AdapterUtil.getAdapter(first, IItemCollection.class));
189 		}
190 	}
191 
192 	private void setItems(IItemCollection items) {
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>