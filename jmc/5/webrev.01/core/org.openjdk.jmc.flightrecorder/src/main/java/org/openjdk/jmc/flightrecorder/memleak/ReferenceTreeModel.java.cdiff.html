<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/memleak/ReferenceTreeModel.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../jdk/messages/internal/Messages.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ReferenceTreeObject.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/memleak/ReferenceTreeModel.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 256,22 ***</span>
  		return objects;
  	}
  
  	/**
  	 * A helper method to calculate number of Referenced Object within specified period.
  	 * @param timerange
  	 *            a range of time that specifies which root objects to retrieve
  	 * @param referenceTreeObject
  	 *            leak candidate
<span class="line-modified">! 	 * @return number of leaked object during the specified timerange for a given</span>
<span class="line-removed">- 	 * 			  leak candidate</span>
  	 */
  	public int getLeakCountInRange(IRange&lt;IQuantity&gt; timerange, ReferenceTreeObject referenceTreeObject) {
  		int referencecount = 0;
  		for (ReferenceTreeObject rtObject : leakObjects) {
<span class="line-modified">! 			if (rtObject.getRootObject().equals(referenceTreeObject.getRootObject()) &amp;&amp;</span>
<span class="line-modified">! 					timerange.getStart().compareTo(rtObject.getTimestamp()) &lt;= 0 &amp;&amp; timerange.getEnd().compareTo(rtObject.getTimestamp()) &gt;= 0) {</span>
  				++referencecount;
  			}
  		}
  		return referencecount;
  	}
<span class="line-new-header">--- 256,23 ---</span>
  		return objects;
  	}
  
  	/**
  	 * A helper method to calculate number of Referenced Object within specified period.
<span class="line-added">+ 	 * </span>
  	 * @param timerange
  	 *            a range of time that specifies which root objects to retrieve
  	 * @param referenceTreeObject
  	 *            leak candidate
<span class="line-modified">! 	 * @return number of leaked object during the specified timerange for a given leak candidate</span>
  	 */
  	public int getLeakCountInRange(IRange&lt;IQuantity&gt; timerange, ReferenceTreeObject referenceTreeObject) {
  		int referencecount = 0;
  		for (ReferenceTreeObject rtObject : leakObjects) {
<span class="line-modified">! 			if (rtObject.getRootObject().equals(referenceTreeObject.getRootObject())</span>
<span class="line-modified">! 					&amp;&amp; timerange.getStart().compareTo(rtObject.getTimestamp()) &lt;= 0</span>
<span class="line-added">+ 					&amp;&amp; timerange.getEnd().compareTo(rtObject.getTimestamp()) &gt;= 0) {</span>
  				++referencecount;
  			}
  		}
  		return referencecount;
  	}
</pre>
<hr />
<pre>
<span class="line-old-header">*** 354,12 ***</span>
  
  					// Update Root Object with oldObjectSample ref
  					ReferenceTreeObject parent = node.getParent();
  					if (parent == null) {
  						node.updateOldObjectSamples(map.get(objectAccessor.getMember(item).getAddress()));
<span class="line-modified">! 					}</span>
<span class="line-removed">- 					else {</span>
  						while (parent.getParent() != null) {
  							parent = parent.getParent();
  						}
  						parent.updateOldObjectSamples(map.get(objectAccessor.getMember(item).getAddress()));
  					}
<span class="line-new-header">--- 355,11 ---</span>
  
  					// Update Root Object with oldObjectSample ref
  					ReferenceTreeObject parent = node.getParent();
  					if (parent == null) {
  						node.updateOldObjectSamples(map.get(objectAccessor.getMember(item).getAddress()));
<span class="line-modified">! 					} else {</span>
  						while (parent.getParent() != null) {
  							parent = parent.getParent();
  						}
  						parent.updateOldObjectSamples(map.get(objectAccessor.getMember(item).getAddress()));
  					}
</pre>
<center><a href="../jdk/messages/internal/Messages.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="ReferenceTreeObject.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>