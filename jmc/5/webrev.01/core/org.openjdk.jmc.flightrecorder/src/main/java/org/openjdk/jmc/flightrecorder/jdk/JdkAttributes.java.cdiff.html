<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/jdk/JdkAttributes.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../JfrAttributes.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="JdkFilters.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>core/org.openjdk.jmc.flightrecorder/src/main/java/org/openjdk/jmc/flightrecorder/jdk/JdkAttributes.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 368,30 ***</span>
  					return jvmTotal != null &amp;&amp; machineTotal != null ? machineTotal.subtract(jvmTotal) : null;
  				}
  			};
  		}
  	});
<span class="line-modified">! 	public static final IAttribute&lt;IQuantity&gt; OTHER_CPU_RATIO = Attribute.canonicalize(new Attribute&lt;IQuantity&gt;(&quot;otherCpuRatio&quot;, //$NON-NLS-1$</span>
<span class="line-modified">! 			Messages.getString(Messages.ATTR_OTHER_CPU_RATIO), Messages.getString(Messages.ATTR_OTHER_CPU_RATIO_DESC), PERCENTAGE) {</span>
<span class="line-modified">! 		@Override</span>
<span class="line-modified">! 		public &lt;U&gt; IMemberAccessor&lt;IQuantity, U&gt; customAccessor(IType&lt;U&gt; type) {</span>
<span class="line-removed">- 			final IMemberAccessor&lt;IQuantity, U&gt; otherCpuAccessor = OTHER_CPU.getAccessor(type);</span>
<span class="line-removed">- 			// Avoid possible future circularity by asking the type directly.</span>
<span class="line-removed">- 			final IMemberAccessor&lt;IQuantity, U&gt; machineTotalAccessor = type.getAccessor(MACHINE_TOTAL.getKey());</span>
<span class="line-removed">- 			if ((otherCpuAccessor == null) || (machineTotalAccessor == null)) {</span>
<span class="line-removed">- 				return null;</span>
<span class="line-removed">- 			}</span>
<span class="line-removed">- 			return new IMemberAccessor&lt;IQuantity, U&gt;() {</span>
  				@Override
<span class="line-modified">! 				public IQuantity getMember(U i) {</span>
<span class="line-modified">! 					IQuantity machineTotal = machineTotalAccessor.getMember(i);</span>
<span class="line-modified">! 					IQuantity otherCpu = otherCpuAccessor.getMember(i);</span>
<span class="line-modified">! 					return otherCpu != null &amp;&amp; machineTotal != null ? otherCpu.multiply(machineTotal.doubleValue()) : null;</span>
  				}
<span class="line-modified">! 			};</span>
<span class="line-removed">- 		}</span>
<span class="line-removed">- 	});</span>
  
  	public static final IAttribute&lt;IQuantity&gt; RECORDING_ID = attr(&quot;id&quot;, Messages.getString(Messages.ATTR_RECORDING_ID), //$NON-NLS-1$
  			NUMBER);
  	public static final IAttribute&lt;String&gt; RECORDING_NAME = attr(&quot;name&quot;, //$NON-NLS-1$
  			Messages.getString(Messages.ATTR_RECORDING_NAME), PLAIN_TEXT);
<span class="line-new-header">--- 368,33 ---</span>
  					return jvmTotal != null &amp;&amp; machineTotal != null ? machineTotal.subtract(jvmTotal) : null;
  				}
  			};
  		}
  	});
<span class="line-modified">! 	public static final IAttribute&lt;IQuantity&gt; OTHER_CPU_RATIO = Attribute</span>
<span class="line-modified">! 			.canonicalize(new Attribute&lt;IQuantity&gt;(&quot;otherCpuRatio&quot;, //$NON-NLS-1$</span>
<span class="line-modified">! 					Messages.getString(Messages.ATTR_OTHER_CPU_RATIO),</span>
<span class="line-modified">! 					Messages.getString(Messages.ATTR_OTHER_CPU_RATIO_DESC), PERCENTAGE) {</span>
  				@Override
<span class="line-modified">! 				public &lt;U&gt; IMemberAccessor&lt;IQuantity, U&gt; customAccessor(IType&lt;U&gt; type) {</span>
<span class="line-modified">! 					final IMemberAccessor&lt;IQuantity, U&gt; otherCpuAccessor = OTHER_CPU.getAccessor(type);</span>
<span class="line-modified">! 					// Avoid possible future circularity by asking the type directly.</span>
<span class="line-modified">! 					final IMemberAccessor&lt;IQuantity, U&gt; machineTotalAccessor = type.getAccessor(MACHINE_TOTAL.getKey());</span>
<span class="line-added">+ 					if ((otherCpuAccessor == null) || (machineTotalAccessor == null)) {</span>
<span class="line-added">+ 						return null;</span>
<span class="line-added">+ 					}</span>
<span class="line-added">+ 					return new IMemberAccessor&lt;IQuantity, U&gt;() {</span>
<span class="line-added">+ 						@Override</span>
<span class="line-added">+ 						public IQuantity getMember(U i) {</span>
<span class="line-added">+ 							IQuantity machineTotal = machineTotalAccessor.getMember(i);</span>
<span class="line-added">+ 							IQuantity otherCpu = otherCpuAccessor.getMember(i);</span>
<span class="line-added">+ 							return otherCpu != null &amp;&amp; machineTotal != null</span>
<span class="line-added">+ 									? otherCpu.multiply(machineTotal.doubleValue()) : null;</span>
<span class="line-added">+ 						}</span>
<span class="line-added">+ 					};</span>
  				}
<span class="line-modified">! 			});</span>
  
  	public static final IAttribute&lt;IQuantity&gt; RECORDING_ID = attr(&quot;id&quot;, Messages.getString(Messages.ATTR_RECORDING_ID), //$NON-NLS-1$
  			NUMBER);
  	public static final IAttribute&lt;String&gt; RECORDING_NAME = attr(&quot;name&quot;, //$NON-NLS-1$
  			Messages.getString(Messages.ATTR_RECORDING_NAME), PLAIN_TEXT);
</pre>
<center><a href="../JfrAttributes.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="JdkFilters.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>