<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff core/tests/org.openjdk.jmc.flightrecorder.rules.jdk.test/src/test/java/org/openjdk/jmc/flightrecorder/test/rules/dataproviders/TestJvmInternalsDataProvider.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../pom.xml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../jdk/TestRulesWithJfr.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>core/tests/org.openjdk.jmc.flightrecorder.rules.jdk.test/src/test/java/org/openjdk/jmc/flightrecorder/test/rules/dataproviders/TestJvmInternalsDataProvider.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 1 package org.openjdk.jmc.flightrecorder.test.rules.dataproviders;
 2 
 3 import static org.junit.Assert.assertEquals;
 4 
 5 import java.util.ArrayList;
 6 import java.util.Collection;
 7 
 8 import org.junit.Test;
 9 import org.openjdk.jmc.flightrecorder.rules.jdk.dataproviders.JvmInternalsDataProvider;
10 
11 public class TestJvmInternalsDataProvider {
12 
13 	@Test
14 	public void testJavaAgentDuplicateFlags() {
<span class="line-modified">15 		assertEquals(&quot;same jar, no option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">16 				&quot;-javaagent:myjar.jar -javaagent:myjar.jar&quot;).toArray().length);</span>
<span class="line-modified">17 		assertEquals(&quot;different jar, no option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">18 				&quot;-javaagent:myjar.jar -javaagent:anotherjar.jar&quot;).toArray().length);</span>
<span class="line-modified">19 </span>
<span class="line-modified">20 		assertEquals(&quot;same jar, same option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">21 				&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">22 		assertEquals(&quot;different jar, same option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">23 				&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">24 </span>
<span class="line-modified">25 		assertEquals(&quot;same jar, different option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">26 				&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=anotheroption&quot;).toArray().length);</span>
<span class="line-modified">27 		assertEquals(&quot;different jar, different option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">28 				&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=anotheroption&quot;).toArray().length);</span>


29 	}
30 
31 	@Test
32 	@SuppressWarnings(&quot;unchecked&quot;)
33 	public void testJavaAgentPathIsParsedCorrectly() {
<span class="line-modified">34 		String arguments = &quot;-javagent:c:/path/to/archive/myjar.jar &quot;</span>
<span class="line-removed">35 				+ &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;</span>
36 		String expectedResult = &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;
37 
38 		Collection&lt;ArrayList&lt;String&gt;&gt; result = JvmInternalsDataProvider.checkDuplicates(arguments);
39 		String actualResult = ((ArrayList&lt;String&gt;) result.toArray()[0]).get(0);
40 		assertEquals(expectedResult, actualResult);
41 	}
42 }
</pre>
</td>
<td>
<hr />
<pre>
 1 package org.openjdk.jmc.flightrecorder.test.rules.dataproviders;
 2 
 3 import static org.junit.Assert.assertEquals;
 4 
 5 import java.util.ArrayList;
 6 import java.util.Collection;
 7 
 8 import org.junit.Test;
 9 import org.openjdk.jmc.flightrecorder.rules.jdk.dataproviders.JvmInternalsDataProvider;
10 
11 public class TestJvmInternalsDataProvider {
12 
13 	@Test
14 	public void testJavaAgentDuplicateFlags() {
<span class="line-modified">15 		assertEquals(&quot;same jar, no option&quot;, 1,</span>
<span class="line-modified">16 				JvmInternalsDataProvider.checkDuplicates(&quot;-javaagent:myjar.jar -javaagent:myjar.jar&quot;).toArray().length);</span>
<span class="line-modified">17 		assertEquals(&quot;different jar, no option&quot;, 0, JvmInternalsDataProvider</span>
<span class="line-modified">18 				.checkDuplicates(&quot;-javaagent:myjar.jar -javaagent:anotherjar.jar&quot;).toArray().length);</span>
<span class="line-modified">19 </span>
<span class="line-modified">20 		assertEquals(&quot;same jar, same option&quot;, 1, JvmInternalsDataProvider</span>
<span class="line-modified">21 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">22 		assertEquals(&quot;different jar, same option&quot;, 0, JvmInternalsDataProvider</span>
<span class="line-modified">23 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">24 </span>
<span class="line-modified">25 		assertEquals(&quot;same jar, different option&quot;, 1, JvmInternalsDataProvider</span>
<span class="line-modified">26 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=anotheroption&quot;).toArray().length);</span>
<span class="line-modified">27 		assertEquals(&quot;different jar, different option&quot;, 0,</span>
<span class="line-modified">28 				JvmInternalsDataProvider</span>
<span class="line-added">29 						.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=anotheroption&quot;)</span>
<span class="line-added">30 						.toArray().length);</span>
31 	}
32 
33 	@Test
34 	@SuppressWarnings(&quot;unchecked&quot;)
35 	public void testJavaAgentPathIsParsedCorrectly() {
<span class="line-modified">36 		String arguments = &quot;-javagent:c:/path/to/archive/myjar.jar &quot; + &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;</span>

37 		String expectedResult = &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;
38 
39 		Collection&lt;ArrayList&lt;String&gt;&gt; result = JvmInternalsDataProvider.checkDuplicates(arguments);
40 		String actualResult = ((ArrayList&lt;String&gt;) result.toArray()[0]).get(0);
41 		assertEquals(expectedResult, actualResult);
42 	}
43 }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../../pom.xml.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../jdk/TestRulesWithJfr.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>