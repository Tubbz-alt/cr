<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff core/tests/org.openjdk.jmc.flightrecorder.rules.jdk.test/src/test/java/org/openjdk/jmc/flightrecorder/test/rules/dataproviders/TestJvmInternalsDataProvider.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../../pom.xml.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../jdk/TestRulesWithJfr.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>core/tests/org.openjdk.jmc.flightrecorder.rules.jdk.test/src/test/java/org/openjdk/jmc/flightrecorder/test/rules/dataproviders/TestJvmInternalsDataProvider.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 10,31 ***</span>
  
  public class TestJvmInternalsDataProvider {
  
  	@Test
  	public void testJavaAgentDuplicateFlags() {
<span class="line-modified">! 		assertEquals(&quot;same jar, no option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar -javaagent:myjar.jar&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, no option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar -javaagent:anotherjar.jar&quot;).toArray().length);</span>
<span class="line-modified">! </span>
<span class="line-modified">! 		assertEquals(&quot;same jar, same option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, same option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">! </span>
<span class="line-modified">! 		assertEquals(&quot;same jar, different option&quot;, 1, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=anotheroption&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, different option&quot;, 0, JvmInternalsDataProvider.checkDuplicates(</span>
<span class="line-modified">! 				&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=anotheroption&quot;).toArray().length);</span>
  	}
  
  	@Test
  	@SuppressWarnings(&quot;unchecked&quot;)
  	public void testJavaAgentPathIsParsedCorrectly() {
<span class="line-modified">! 		String arguments = &quot;-javagent:c:/path/to/archive/myjar.jar &quot;</span>
<span class="line-removed">- 				+ &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;</span>
  		String expectedResult = &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;
  
  		Collection&lt;ArrayList&lt;String&gt;&gt; result = JvmInternalsDataProvider.checkDuplicates(arguments);
  		String actualResult = ((ArrayList&lt;String&gt;) result.toArray()[0]).get(0);
  		assertEquals(expectedResult, actualResult);
<span class="line-new-header">--- 10,32 ---</span>
  
  public class TestJvmInternalsDataProvider {
  
  	@Test
  	public void testJavaAgentDuplicateFlags() {
<span class="line-modified">! 		assertEquals(&quot;same jar, no option&quot;, 1,</span>
<span class="line-modified">! 				JvmInternalsDataProvider.checkDuplicates(&quot;-javaagent:myjar.jar -javaagent:myjar.jar&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, no option&quot;, 0, JvmInternalsDataProvider</span>
<span class="line-modified">! 				.checkDuplicates(&quot;-javaagent:myjar.jar -javaagent:anotherjar.jar&quot;).toArray().length);</span>
<span class="line-modified">! </span>
<span class="line-modified">! 		assertEquals(&quot;same jar, same option&quot;, 1, JvmInternalsDataProvider</span>
<span class="line-modified">! 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, same option&quot;, 0, JvmInternalsDataProvider</span>
<span class="line-modified">! 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=option&quot;).toArray().length);</span>
<span class="line-modified">! </span>
<span class="line-modified">! 		assertEquals(&quot;same jar, different option&quot;, 1, JvmInternalsDataProvider</span>
<span class="line-modified">! 				.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:myjar.jar=anotheroption&quot;).toArray().length);</span>
<span class="line-modified">! 		assertEquals(&quot;different jar, different option&quot;, 0,</span>
<span class="line-modified">! 				JvmInternalsDataProvider</span>
<span class="line-added">+ 						.checkDuplicates(&quot;-javaagent:myjar.jar=option -javaagent:anotherjar.jar=anotheroption&quot;)</span>
<span class="line-added">+ 						.toArray().length);</span>
  	}
  
  	@Test
  	@SuppressWarnings(&quot;unchecked&quot;)
  	public void testJavaAgentPathIsParsedCorrectly() {
<span class="line-modified">! 		String arguments = &quot;-javagent:c:/path/to/archive/myjar.jar &quot; + &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;</span>
  		String expectedResult = &quot;-javagent:c:/path/to/archive/myjar.jar&quot;;
  
  		Collection&lt;ArrayList&lt;String&gt;&gt; result = JvmInternalsDataProvider.checkDuplicates(arguments);
  		String actualResult = ((ArrayList&lt;String&gt;) result.toArray()[0]).get(0);
  		assertEquals(expectedResult, actualResult);
</pre>
<center><a href="../../../../../../../../../../pom.xml.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../../../../index.html" target="_top">index</a> <a href="../jdk/TestRulesWithJfr.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>