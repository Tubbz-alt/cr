<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../notify/src/main/java/org/openjdk/skara/bots/notify/MailingListUpdater.java.udiff.html" target="_top">next &gt;</a></center>    <h2>bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -434,11 +434,11 @@</span>
              assertTrue(commentReply.body().contains(&quot;Avoid combining\n\n&quot;), commentReply.body());
  
              var reviewReply = conversations.get(0).replies(mail).get(1);
              assertEquals(2, reviewReply.body().split(&quot;^On.*wrote:&quot;).length);
              assertEquals(2, reviewReply.body().split(&quot;&gt; This is now ready&quot;).length, reviewReply.body());
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: RFR: This is a pull request&quot;, reviewReply.subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;RFR: This is a pull request&quot;, reviewReply.subject());</span>
              assertTrue(reviewReply.body().contains(&quot;Review comment\n\n&quot;), reviewReply.body());
              assertTrue(reviewReply.body().contains(&quot;Another review comment&quot;), reviewReply.body());
  
              // Now reply to the first (collapsed) comment
              pr.addReviewCommentReply(first, &quot;I agree&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -547,11 +547,11 @@</span>
  
              // There should be four separate threads
              var thread1 = conversations.get(0).replies(mail).get(0);
              assertEquals(2, thread1.body().split(&quot;^On.*wrote:&quot;).length);
              assertEquals(2, thread1.body().split(&quot;&gt; This is now ready&quot;).length, thread1.body());
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: RFR: This is a pull request&quot;, thread1.subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;RFR: This is a pull request&quot;, thread1.subject());</span>
              assertTrue(thread1.body().contains(&quot;Review comment\n\n&quot;), thread1.body());
              assertFalse(thread1.body().contains(&quot;Another review comment&quot;), thread1.body());
              var thread1reply1 = conversations.get(0).replies(thread1).get(0);
              assertTrue(thread1reply1.body().contains(&quot;I agree&quot;));
              assertEquals(noreplyAddress(archive), thread1reply1.author().address());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -562,23 +562,23 @@</span>
              assertEquals(&quot;Generated Reviewer 1&quot;, thread1reply2.author().fullName().orElseThrow());
  
              var thread2 = conversations.get(0).replies(mail).get(1);
              assertEquals(2, thread2.body().split(&quot;^On.*wrote:&quot;).length);
              assertEquals(2, thread2.body().split(&quot;&gt; This is now ready&quot;).length, thread2.body());
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: RFR: This is a pull request&quot;, thread2.subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;RFR: This is a pull request&quot;, thread2.subject());</span>
              assertFalse(thread2.body().contains(&quot;Review comment\n\n&quot;), thread2.body());
              assertTrue(thread2.body().contains(&quot;Another review comment&quot;), thread2.body());
              var thread2reply1 = conversations.get(0).replies(thread2).get(0);
              assertTrue(thread2reply1.body().contains(&quot;Sounds good&quot;));
              var thread2reply2 = conversations.get(0).replies(thread2reply1).get(0);
              assertTrue(thread2reply2.body().contains(&quot;Thanks&quot;));
  
              var replies = conversations.get(0).replies(mail);
              var thread3 = replies.get(2);
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: RFR: This is a pull request&quot;, thread3.subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;RFR: This is a pull request&quot;, thread3.subject());</span>
              var thread4 = replies.get(3);
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: RFR: This is a pull request&quot;, thread4.subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;RFR: This is a pull request&quot;, thread4.subject());</span>
              assertTrue(thread4.body().contains(&quot;Looks fine&quot;));
              assertTrue(thread4.body().contains(&quot;The final review comment&quot;));
              assertTrue(thread4.body().contains(&quot;Marked as reviewed by integrationreviewer1 (Reviewer)&quot;));
          }
      }
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -967,13 +967,13 @@</span>
              }
              var updatedConversations = mailmanList.conversations(Duration.ofDays(1));
              assertEquals(1, updatedConversations.size());
              var conversation = updatedConversations.get(0);
              assertEquals(6, conversation.allMessages().size());
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: [Rev 01] RFR: This is a pull request&quot;, conversation.allMessages().get(1).subject());</span>
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: [Rev 01] RFR: This is a pull request&quot;, conversation.allMessages().get(2).subject(), conversation.allMessages().get(2).toString());</span>
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: [Rev 04] RFR: This is a pull request&quot;, conversation.allMessages().get(5).subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;[Rev 01] RFR: This is a pull request&quot;, conversation.allMessages().get(1).subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;[Rev 01] RFR: This is a pull request&quot;, conversation.allMessages().get(2).subject(), conversation.allMessages().get(2).toString());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;[Rev 04] RFR: This is a pull request&quot;, conversation.allMessages().get(5).subject());</span>
          }
      }
  
      @Test
      void rebased(TestInfo testInfo) throws IOException {
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1065,11 +1065,11 @@</span>
              for (var newMail : conversations.get(0).allMessages()) {
                  assertEquals(noreplyAddress(archive), newMail.author().address());
                  assertEquals(listAddress, newMail.sender());
                  assertFalse(newMail.hasHeader(&quot;PR-Head-Hash&quot;));
              }
<span class="udiff-line-modified-removed">-             assertEquals(&quot;Re: [Rev 01] RFR: This is a pull request&quot;, conversations.get(0).allMessages().get(1).subject());</span>
<span class="udiff-line-modified-added">+             assertEquals(&quot;[Rev 01] RFR: This is a pull request&quot;, conversations.get(0).allMessages().get(1).subject());</span>
          }
      }
  
      @Test
      void incrementalAfterRebase(TestInfo testInfo) throws IOException {
</pre>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../notify/src/main/java/org/openjdk/skara/bots/notify/MailingListUpdater.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>