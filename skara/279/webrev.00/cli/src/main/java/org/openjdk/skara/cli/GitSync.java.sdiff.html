<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitSync.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitSync.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
143         } else {
144             var lines = repo.config(&quot;sync.to&quot;);
145             if (lines.size() == 1) {
146                 if (!remotes.contains(lines.get(0))) {
147                     die(&quot;The given remote to push to, &quot; + lines.get(0) + &quot;, does not exist&quot;);
148                 } else {
149                     origin = lines.get(0);
150                 }
151             } else {
152                 origin = &quot;origin&quot;;
153             }
154         }
155         var originPushPath = Remote.toURI(repo.pushPath(origin));
156 
157         var branches = new HashSet&lt;String&gt;();
158         if (arguments.contains(&quot;branches&quot;)) {
159             var requested = arguments.get(&quot;branches&quot;).asString().split(&quot;,&quot;);
160             for (var branch : requested) {
161                 branches.add(branch.trim());
162             }








163         }
164 
165         for (var branch : repo.remoteBranches(upstream)) {
166             var name = branch.name();
167             if (!branches.isEmpty() &amp;&amp; !branches.contains(name)) {
<span class="line-modified">168                 System.out.println(&quot;Skipping branch &quot; + name);</span>


169                 continue;
170             }
171             System.out.print(&quot;Syncing &quot; + upstream + &quot;/&quot; + name + &quot; to &quot; + origin + &quot;/&quot; + name + &quot;... &quot;);
172             System.out.flush();
173             var fetchHead = repo.fetch(upstreamPullPath, branch.hash().hex());
174             repo.push(fetchHead, originPushPath, name);
175             System.out.println(&quot;done&quot;);
176         }
177 
178         var shouldPull = arguments.contains(&quot;pull&quot;);
179         if (!shouldPull) {
180             var lines = repo.config(&quot;sync.pull&quot;);
181             shouldPull = lines.size() == 1 &amp;&amp; lines.get(0).toLowerCase().equals(&quot;always&quot;);
182         }
183         if (shouldPull) {
184             int err = pull();
185             if (err != 0) {
186                 System.exit(err);
187             }
188         }
</pre>
</td>
<td>
<hr />
<pre>
143         } else {
144             var lines = repo.config(&quot;sync.to&quot;);
145             if (lines.size() == 1) {
146                 if (!remotes.contains(lines.get(0))) {
147                     die(&quot;The given remote to push to, &quot; + lines.get(0) + &quot;, does not exist&quot;);
148                 } else {
149                     origin = lines.get(0);
150                 }
151             } else {
152                 origin = &quot;origin&quot;;
153             }
154         }
155         var originPushPath = Remote.toURI(repo.pushPath(origin));
156 
157         var branches = new HashSet&lt;String&gt;();
158         if (arguments.contains(&quot;branches&quot;)) {
159             var requested = arguments.get(&quot;branches&quot;).asString().split(&quot;,&quot;);
160             for (var branch : requested) {
161                 branches.add(branch.trim());
162             }
<span class="line-added">163         } else {</span>
<span class="line-added">164             var lines = repo.config(&quot;sync.branches&quot;);</span>
<span class="line-added">165             if (lines.size() == 1) {</span>
<span class="line-added">166                 var requested = lines.get(0).split(&quot;,&quot;);</span>
<span class="line-added">167                 for (var branch : requested) {</span>
<span class="line-added">168                     branches.add(branch.trim());</span>
<span class="line-added">169                 }</span>
<span class="line-added">170             }</span>
171         }
172 
173         for (var branch : repo.remoteBranches(upstream)) {
174             var name = branch.name();
175             if (!branches.isEmpty() &amp;&amp; !branches.contains(name)) {
<span class="line-modified">176                 if (arguments.contains(&quot;verbose&quot;) || arguments.contains(&quot;debug&quot;)) {</span>
<span class="line-added">177                     System.out.println(&quot;Skipping branch &quot; + name);</span>
<span class="line-added">178                 }</span>
179                 continue;
180             }
181             System.out.print(&quot;Syncing &quot; + upstream + &quot;/&quot; + name + &quot; to &quot; + origin + &quot;/&quot; + name + &quot;... &quot;);
182             System.out.flush();
183             var fetchHead = repo.fetch(upstreamPullPath, branch.hash().hex());
184             repo.push(fetchHead, originPushPath, name);
185             System.out.println(&quot;done&quot;);
186         }
187 
188         var shouldPull = arguments.contains(&quot;pull&quot;);
189         if (!shouldPull) {
190             var lines = repo.config(&quot;sync.pull&quot;);
191             shouldPull = lines.size() == 1 &amp;&amp; lines.get(0).toLowerCase().equals(&quot;always&quot;);
192         }
193         if (shouldPull) {
194             int err = pull();
195             if (err != 0) {
196                 System.exit(err);
197             }
198         }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>