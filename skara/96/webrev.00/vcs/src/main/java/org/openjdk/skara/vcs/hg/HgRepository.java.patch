diff a/vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java b/vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java
--- a/vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java
+++ b/vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java
@@ -995,6 +995,18 @@
         }
         try (var p = capture(cmd)) {
             await(p);
         }
     }
+
+    @Override
+    public boolean contains(Branch b, Hash h) throws IOException {
+        try (var p = capture("hg", "log", "--template", "{branch}", "-r", h.hex())) {
+            var res = await(p);
+            if (res.stdout().size() != 1) {
+                throw new IOException("Unexpected output: " + String.join("\n", res.stdout()));
+            }
+            var line = res.stdout().get(0);
+            return line.equals(b.name());
+        }
+    }
 }
