<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff test/src/main/java/org/openjdk/skara/test/HostCredentials.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../issuetracker/src/test/java/org/openjdk/skara/issuetracker/IssueTrackerTests.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="IssueData.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>test/src/main/java/org/openjdk/skara/test/HostCredentials.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 142,18 ***</span>
          }
      }
  
      private static class JiraCredentials implements Credentials {
          private final JSONObject config;
  
          JiraCredentials(JSONObject config) {
              this.config = config;
          }
  
          @Override
          public Forge createRepositoryHost(int userIndex) {
<span class="line-modified">!             throw new RuntimeException(&quot;not supported&quot;);</span>
          }
  
          @Override
          public IssueTracker createIssueHost(int userIndex) {
              var hostUri = URIBuilder.base(config.get(&quot;host&quot;).asString()).build();
<span class="line-new-header">--- 142,20 ---</span>
          }
      }
  
      private static class JiraCredentials implements Credentials {
          private final JSONObject config;
<span class="line-added">+         private final TestCredentials repoCredentials;</span>
  
          JiraCredentials(JSONObject config) {
              this.config = config;
<span class="line-added">+             this.repoCredentials = new TestCredentials();</span>
          }
  
          @Override
          public Forge createRepositoryHost(int userIndex) {
<span class="line-modified">!             return repoCredentials.createRepositoryHost(userIndex);</span>
          }
  
          @Override
          public IssueTracker createIssueHost(int userIndex) {
              var hostUri = URIBuilder.base(config.get(&quot;host&quot;).asString()).build();
</pre>
<hr />
<pre>
<span class="line-old-header">*** 163,11 ***</span>
              return IssueTracker.from(&quot;jira&quot;, hostUri, pat, config);
          }
  
          @Override
          public HostedRepository getHostedRepository(Forge host) {
<span class="line-modified">!             return host.repository(config.get(&quot;project&quot;).asString()).orElseThrow();</span>
          }
  
          @Override
          public IssueProject getIssueProject(IssueTracker host) {
              return host.project(config.get(&quot;project&quot;).asString());
<span class="line-new-header">--- 165,11 ---</span>
              return IssueTracker.from(&quot;jira&quot;, hostUri, pat, config);
          }
  
          @Override
          public HostedRepository getHostedRepository(Forge host) {
<span class="line-modified">!             return repoCredentials.getHostedRepository(host);</span>
          }
  
          @Override
          public IssueProject getIssueProject(IssueTracker host) {
              return host.project(config.get(&quot;project&quot;).asString());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 361,11 ***</span>
      public PullRequest createPullRequest(HostedRepository hostedRepository, String targetRef, String sourceRef, String title) {
          return createPullRequest(hostedRepository, targetRef, sourceRef, title, false);
      }
  
      public Issue createIssue(IssueProject issueProject, String title) {
<span class="line-modified">!         var issue = issueProject.createIssue(title, List.of());</span>
          issuesToBeClosed.add(issue);
          return issue;
      }
  
      public CensusBuilder getCensusBuilder() {
<span class="line-new-header">--- 363,11 ---</span>
      public PullRequest createPullRequest(HostedRepository hostedRepository, String targetRef, String sourceRef, String title) {
          return createPullRequest(hostedRepository, targetRef, sourceRef, title, false);
      }
  
      public Issue createIssue(IssueProject issueProject, String title) {
<span class="line-modified">!         var issue = issueProject.createIssue(title, List.of(), Map.of());</span>
          issuesToBeClosed.add(issue);
          return issue;
      }
  
      public CensusBuilder getCensusBuilder() {
</pre>
<center><a href="../../../../../../../../issuetracker/src/test/java/org/openjdk/skara/issuetracker/IssueTrackerTests.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> <a href="IssueData.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>