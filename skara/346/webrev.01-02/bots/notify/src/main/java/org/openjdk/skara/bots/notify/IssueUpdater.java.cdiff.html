<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff bots/notify/src/main/java/org/openjdk/skara/bots/notify/IssueUpdater.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>bots/notify/src/main/java/org/openjdk/skara/bots/notify/IssueUpdater.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 108,11 ***</span>
                                .collect(Collectors.toList());
          return nonScratch.size() == 1 &amp;&amp; nonScratch.get(0).equals(fixVersion);
      }
  
      /**
<span class="line-modified">!      * Return True if the issue&#39;s fixVersionList is a match for fixVersion, using &quot;-pool&quot; or &quot;-open&quot;.</span>
       *
       * If fixVersion has a major release of &lt;N&gt;, it matches the fixVersionList has an
       * &lt;N&gt;-pool or &lt;N&gt;-open entry and all other entries are scratch values.
       */
      private boolean matchPoolVersion(Issue issue, String fixVersion) {
<span class="line-new-header">--- 108,11 ---</span>
                                .collect(Collectors.toList());
          return nonScratch.size() == 1 &amp;&amp; nonScratch.get(0).equals(fixVersion);
      }
  
      /**
<span class="line-modified">!      * Return true if the issue&#39;s fixVersionList is a match for fixVersion, using &quot;-pool&quot; or &quot;-open&quot;.</span>
       *
       * If fixVersion has a major release of &lt;N&gt;, it matches the fixVersionList has an
       * &lt;N&gt;-pool or &lt;N&gt;-open entry and all other entries are scratch values.
       */
      private boolean matchPoolVersion(Issue issue, String fixVersion) {
</pre>
<hr />
<pre>
<span class="line-old-header">*** 128,11 ***</span>
                                .collect(Collectors.toList());
          return nonScratch.size() == 1 &amp;&amp; (nonScratch.get(0).equals(poolVersion) || nonScratch.get(0).equals(openVersion));
      }
  
      /**
<span class="line-modified">!      * Return True if fixVersionList is empty or contains only scratch values.</span>
       */
      private boolean matchScratchVersion(Issue issue) {
          var nonScratch = issue.fixVersions().stream()
                                .filter(this::isNonScratchVersion)
                                .collect(Collectors.toList());
<span class="line-new-header">--- 128,11 ---</span>
                                .collect(Collectors.toList());
          return nonScratch.size() == 1 &amp;&amp; (nonScratch.get(0).equals(poolVersion) || nonScratch.get(0).equals(openVersion));
      }
  
      /**
<span class="line-modified">!      * Return true if fixVersionList is empty or contains only scratch values.</span>
       */
      private boolean matchScratchVersion(Issue issue) {
          var nonScratch = issue.fixVersions().stream()
                                .filter(this::isNonScratchVersion)
                                .collect(Collectors.toList());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 152,16 ***</span>
          primary.addLink(backportLink);;
          return backport;
      }
  
      /**
<span class="line-modified">!      * Return issue or one of its backports that applies to fixver.</span>
       *
       * If the main issue       has the correct fixVersion, use it.
       * If an existing Backport has the correct fixVersion, use it.
<span class="line-modified">!      * If the main issue       has a matching &lt;N&gt;-pool fixVersion, use it.</span>
<span class="line-modified">!      * If an existing Backport has a matching &lt;N&gt;-pool fixVersion, use it.</span>
       * If the main issue       has a &quot;scratch&quot; fixVersion, use it.
       * If an existing Backport has a &quot;scratch&quot; fixVersion, use it.
       *
       * Otherwise, create a new Backport.
       *
<span class="line-new-header">--- 152,16 ---</span>
          primary.addLink(backportLink);;
          return backport;
      }
  
      /**
<span class="line-modified">!      * Return issue or one of its backports that applies to fixVersion.</span>
       *
       * If the main issue       has the correct fixVersion, use it.
       * If an existing Backport has the correct fixVersion, use it.
<span class="line-modified">!      * If the main issue       has a matching &lt;N&gt;-pool/open fixVersion, use it.</span>
<span class="line-modified">!      * If an existing Backport has a matching &lt;N&gt;-pool/open fixVersion, use it.</span>
       * If the main issue       has a &quot;scratch&quot; fixVersion, use it.
       * If an existing Backport has a &quot;scratch&quot; fixVersion, use it.
       *
       * Otherwise, create a new Backport.
       *
</pre>
<hr />
<pre>
<span class="line-old-header">*** 262,10 ***</span>
<span class="line-new-header">--- 262,11 ---</span>
                      issue.addLink(linkBuilder.build());
                  }
  
                  if (setFixVersion) {
                      if (requestedVersion != null) {
<span class="line-added">+                         // Remove any previously set versions (can only be scratch versions)</span>
                          for (var oldVersion : issue.fixVersions()) {
                              issue.removeFixVersion(oldVersion);
                          }
                          issue.addFixVersion(requestedVersion);
                      }
</pre>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>