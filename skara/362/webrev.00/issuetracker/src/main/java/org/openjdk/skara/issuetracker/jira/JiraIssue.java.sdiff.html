<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff issuetracker/src/main/java/org/openjdk/skara/issuetracker/jira/JiraIssue.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../../cli/src/main/java/org/openjdk/skara/cli/GitInfo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>issuetracker/src/main/java/org/openjdk/skara/issuetracker/jira/JiraIssue.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
353             var issueLinks = json.get(&quot;fields&quot;).get(&quot;issuelinks&quot;).stream()
354                                  .map(JSONValue::asObject)
355                                  .map(o -&gt; Link.create(o.contains(&quot;inwardIssue&quot;) ? jiraProject.issue(o.get(&quot;inwardIssue&quot;).get(&quot;key&quot;).asString()).orElseThrow() :
356                                                                jiraProject.issue(o.get(&quot;outwardIssue&quot;).get(&quot;key&quot;).asString()).orElseThrow(),
357                                                        o.contains(&quot;inwardIssue&quot;) ? o.get(&quot;type&quot;).get(&quot;inward&quot;).asString() :
358                                                                o.get(&quot;type&quot;).get(&quot;outward&quot;).asString())
359                                                .build());
360 
361             links = Stream.concat(issueLinks, links);
362         }
363         return links.collect(Collectors.toList());
364     }
365 
366     private void addWebLink(Link link) {
367         if (!secure) {
368             log.warning(&quot;Ignoring attempt to add link on issue with wrong security level&quot;);
369             return;
370         }
371 
372         var query = JSON.object().put(&quot;globalId&quot;, &quot;skaralink=&quot; + link.uri().orElseThrow().toString());
<span class="line-modified">373         var object = JSON.object().put(&quot;url&quot;, link.uri().toString()).put(&quot;title&quot;, link.title().orElseThrow());</span>
374         var status = JSON.object().put(&quot;resolved&quot;, link.resolved());
375         var icon = JSON.object();
376         var statusIcon = JSON.object();
377 
378         query.put(&quot;object&quot;, object);
379         object.put(&quot;icon&quot;, icon);
380         object.put(&quot;status&quot;, status);
381         status.put(&quot;icon&quot;, statusIcon);
382 
383         link.relationship().ifPresent(relationship -&gt; query.put(&quot;relationship&quot;, relationship));
384         link.summary().ifPresent(summary -&gt; object.put(&quot;summary&quot;, summary));
385         link.iconUrl().ifPresent(iconUrl -&gt; icon.put(&quot;url16x16&quot;, iconUrl.toString()));
386         link.iconTitle().ifPresent(iconTitle -&gt; icon.put(&quot;title&quot;, iconTitle));
387         link.statusIconUrl().ifPresent(statusIconUrl -&gt; statusIcon.put(&quot;url16x16&quot;, statusIconUrl.toString()));
388         link.statusIconTitle().ifPresent(statusIconTitle -&gt; statusIcon.put(&quot;title&quot;, statusIconTitle));
389 
390         request.post(&quot;/remotelink&quot;)
391                .body(query)
392                .execute();
393     }
</pre>
</td>
<td>
<hr />
<pre>
353             var issueLinks = json.get(&quot;fields&quot;).get(&quot;issuelinks&quot;).stream()
354                                  .map(JSONValue::asObject)
355                                  .map(o -&gt; Link.create(o.contains(&quot;inwardIssue&quot;) ? jiraProject.issue(o.get(&quot;inwardIssue&quot;).get(&quot;key&quot;).asString()).orElseThrow() :
356                                                                jiraProject.issue(o.get(&quot;outwardIssue&quot;).get(&quot;key&quot;).asString()).orElseThrow(),
357                                                        o.contains(&quot;inwardIssue&quot;) ? o.get(&quot;type&quot;).get(&quot;inward&quot;).asString() :
358                                                                o.get(&quot;type&quot;).get(&quot;outward&quot;).asString())
359                                                .build());
360 
361             links = Stream.concat(issueLinks, links);
362         }
363         return links.collect(Collectors.toList());
364     }
365 
366     private void addWebLink(Link link) {
367         if (!secure) {
368             log.warning(&quot;Ignoring attempt to add link on issue with wrong security level&quot;);
369             return;
370         }
371 
372         var query = JSON.object().put(&quot;globalId&quot;, &quot;skaralink=&quot; + link.uri().orElseThrow().toString());
<span class="line-modified">373         var object = JSON.object().put(&quot;url&quot;, link.uri().orElseThrow().toString()).put(&quot;title&quot;, link.title().orElseThrow());</span>
374         var status = JSON.object().put(&quot;resolved&quot;, link.resolved());
375         var icon = JSON.object();
376         var statusIcon = JSON.object();
377 
378         query.put(&quot;object&quot;, object);
379         object.put(&quot;icon&quot;, icon);
380         object.put(&quot;status&quot;, status);
381         status.put(&quot;icon&quot;, statusIcon);
382 
383         link.relationship().ifPresent(relationship -&gt; query.put(&quot;relationship&quot;, relationship));
384         link.summary().ifPresent(summary -&gt; object.put(&quot;summary&quot;, summary));
385         link.iconUrl().ifPresent(iconUrl -&gt; icon.put(&quot;url16x16&quot;, iconUrl.toString()));
386         link.iconTitle().ifPresent(iconTitle -&gt; icon.put(&quot;title&quot;, iconTitle));
387         link.statusIconUrl().ifPresent(statusIconUrl -&gt; statusIcon.put(&quot;url16x16&quot;, statusIconUrl.toString()));
388         link.statusIconTitle().ifPresent(statusIconTitle -&gt; statusIcon.put(&quot;title&quot;, statusIconTitle));
389 
390         request.post(&quot;/remotelink&quot;)
391                .body(query)
392                .execute();
393     }
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../../cli/src/main/java/org/openjdk/skara/cli/GitInfo.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>