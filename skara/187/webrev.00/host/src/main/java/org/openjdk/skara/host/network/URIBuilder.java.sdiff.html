<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff host/src/main/java/org/openjdk/skara/host/network/URIBuilder.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../gitlab/GitLabMergeRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/host/network/URIBuilderTests.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>host/src/main/java/org/openjdk/skara/host/network/URIBuilder.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 38     URIBuilderException(Throwable cause) {
 39         addSuppressed(cause);
 40     }
 41 }
 42 
 43 public class URIBuilder {
 44 
 45     private static class URIParts {
 46         String scheme;
 47         String host;
 48         String path;
 49         String userInfo;
 50         int port;
 51         String query;
 52         String fragment;
 53 
 54         URIParts(URI uri) {
 55             var uriString = uri.toString();
 56             scheme = uri.getScheme();
 57             host = uri.getHost();
<span class="line-modified"> 58             var pathStart = uriString.indexOf(host) + host.length();</span>
 59             if (uri.getPort() != -1) {
 60                 pathStart += Integer.toString(uri.getPort()).length() + 1;
 61             }
 62             var pathEnd = uriString.indexOf(&quot;?&quot;, pathStart);
 63             if (pathEnd == -1) {
 64                 pathEnd = uriString.indexOf(&quot;#&quot;, pathStart);
 65             }
 66             if (pathEnd != -1) {
 67                 path = uriString.substring(pathStart, pathEnd);
 68             } else {
 69                 path = uriString.substring(pathStart);
 70             }
 71             userInfo = uri.getUserInfo();
 72             port = uri.getPort();
 73             query = uri.getQuery();
 74             fragment = uri.getFragment();
 75         }
 76 
 77         URI assemble() throws URISyntaxException {
 78             // Cannot use the standard URI constructor, as parts of the path may
</pre>
</td>
<td>
<hr />
<pre>
 38     URIBuilderException(Throwable cause) {
 39         addSuppressed(cause);
 40     }
 41 }
 42 
 43 public class URIBuilder {
 44 
 45     private static class URIParts {
 46         String scheme;
 47         String host;
 48         String path;
 49         String userInfo;
 50         int port;
 51         String query;
 52         String fragment;
 53 
 54         URIParts(URI uri) {
 55             var uriString = uri.toString();
 56             scheme = uri.getScheme();
 57             host = uri.getHost();
<span class="line-modified"> 58             var pathStart = host != null ? uriString.indexOf(host) + host.length() : scheme.length() + 3;</span>
 59             if (uri.getPort() != -1) {
 60                 pathStart += Integer.toString(uri.getPort()).length() + 1;
 61             }
 62             var pathEnd = uriString.indexOf(&quot;?&quot;, pathStart);
 63             if (pathEnd == -1) {
 64                 pathEnd = uriString.indexOf(&quot;#&quot;, pathStart);
 65             }
 66             if (pathEnd != -1) {
 67                 path = uriString.substring(pathStart, pathEnd);
 68             } else {
 69                 path = uriString.substring(pathStart);
 70             }
 71             userInfo = uri.getUserInfo();
 72             port = uri.getPort();
 73             query = uri.getQuery();
 74             fragment = uri.getFragment();
 75         }
 76 
 77         URI assemble() throws URISyntaxException {
 78             // Cannot use the standard URI constructor, as parts of the path may
</pre>
</td>
</tr>
</table>
<center><a href="../gitlab/GitLabMergeRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/host/network/URIBuilderTests.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>