<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff vcs/src/main/java/org/openjdk/skara/vcs/openjdk/convert/GitToHgConverter.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../hg/HgRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../test/java/org/openjdk/skara/vcs/openjdk/converter/GitToHgConverterTests.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>vcs/src/main/java/org/openjdk/skara/vcs/openjdk/convert/GitToHgConverter.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
157                     }
158                     hgRepo.apply(updateTags(parent0Diff, gitRepo, gitToHg), true);
159                 }
160             } else {
161                 throw new IllegalStateException(&quot;More than two parents is not supported&quot;);
162             }
163 
164             var author = commit.author();
165             var committer = commit.committer();
166             if (committer.email() == null) {
167                 throw new IllegalStateException(&quot;Commit &quot; + commit.hash().hex() + &quot; contains committer without email&quot;);
168             }
169             var message = CommitMessageParsers.v1.parse(commit.message());
170             var hgMessage = convertMessage(message, author, committer);
171             log.finest(&quot;Message: &quot; + hgMessage);
172             var hgAuthor = username(committer);
173             log.finer(&quot;Author: &quot; + hgAuthor);
174             var hgHash = hgRepo.commit(hgMessage,
175                                        username(committer),
176                                        null,
<span class="line-modified">177                                        commit.timestamp());</span>
178             log.finer(&quot;Hg hash: &quot; + hgHash.hex());
179             gitToHg.put(commit.hash(), hgHash);
180             hgToGit.put(hgHash, commit.hash());
181             hgHashes.add(hgHash);
182         }
183 
184         return hgHashes;
185     }
186 
187     private List&lt;Mark&gt; createMarks(List&lt;Hash&gt; hgHashes, Map&lt;Hash, Hash&gt; gitToHg, Map&lt;Hash, Hash&gt; hgToGit) {
188         return createMarks(List.of(), hgHashes, gitToHg, hgToGit);
189     }
190 
191     private List&lt;Mark&gt; createMarks(List&lt;Mark&gt; old, List&lt;Hash&gt; hgHashes, Map&lt;Hash, Hash&gt; gitToHg, Map&lt;Hash, Hash&gt; hgToGit) {
192         var marks = new ArrayList&lt;Mark&gt;(old);
193         for (var i = 0; i &lt; hgHashes.size(); i++) {
194             var hgHash = hgHashes.get(i);
195             var gitHash = hgToGit.get(hgHash);
196             if (gitHash == null) {
197                 throw new IllegalStateException(&quot;No git hash for hg hash &quot; + hgHash.hex());
</pre>
</td>
<td>
<hr />
<pre>
157                     }
158                     hgRepo.apply(updateTags(parent0Diff, gitRepo, gitToHg), true);
159                 }
160             } else {
161                 throw new IllegalStateException(&quot;More than two parents is not supported&quot;);
162             }
163 
164             var author = commit.author();
165             var committer = commit.committer();
166             if (committer.email() == null) {
167                 throw new IllegalStateException(&quot;Commit &quot; + commit.hash().hex() + &quot; contains committer without email&quot;);
168             }
169             var message = CommitMessageParsers.v1.parse(commit.message());
170             var hgMessage = convertMessage(message, author, committer);
171             log.finest(&quot;Message: &quot; + hgMessage);
172             var hgAuthor = username(committer);
173             log.finer(&quot;Author: &quot; + hgAuthor);
174             var hgHash = hgRepo.commit(hgMessage,
175                                        username(committer),
176                                        null,
<span class="line-modified">177                                        commit.date());</span>
178             log.finer(&quot;Hg hash: &quot; + hgHash.hex());
179             gitToHg.put(commit.hash(), hgHash);
180             hgToGit.put(hgHash, commit.hash());
181             hgHashes.add(hgHash);
182         }
183 
184         return hgHashes;
185     }
186 
187     private List&lt;Mark&gt; createMarks(List&lt;Hash&gt; hgHashes, Map&lt;Hash, Hash&gt; gitToHg, Map&lt;Hash, Hash&gt; hgToGit) {
188         return createMarks(List.of(), hgHashes, gitToHg, hgToGit);
189     }
190 
191     private List&lt;Mark&gt; createMarks(List&lt;Mark&gt; old, List&lt;Hash&gt; hgHashes, Map&lt;Hash, Hash&gt; gitToHg, Map&lt;Hash, Hash&gt; hgToGit) {
192         var marks = new ArrayList&lt;Mark&gt;(old);
193         for (var i = 0; i &lt; hgHashes.size(); i++) {
194             var hgHash = hgHashes.get(i);
195             var gitHash = hgToGit.get(hgHash);
196             if (gitHash == null) {
197                 throw new IllegalStateException(&quot;No git hash for hg hash &quot; + hgHash.hex());
</pre>
</td>
</tr>
</table>
<center><a href="../../hg/HgRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../test/java/org/openjdk/skara/vcs/openjdk/converter/GitToHgConverterTests.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>