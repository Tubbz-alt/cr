<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../git/GitRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
650         try (var p = capture(&quot;hg&quot;, &quot;--config&quot;, &quot;extensions.ls-tree=&quot; + ext, &quot;ls-tree&quot;, hash.hex())) {
651             var res = await(p);
652             var entries = new ArrayList&lt;FileEntry&gt;();
653             for (var line : res.stdout()) {
654                 var parts = line.split(&quot;\t&quot;);
655                 var metadata = parts[0].split(&quot; &quot;);
656                 var path = Path.of(parts[1]);
657                 if (include.isEmpty() || include.contains(path)) {
658                     var entry = new FileEntry(hash,
659                                               FileType.fromOctal(metadata[0]),
660                                               new Hash(metadata[2]),
661                                               path);
662                     entries.add(entry);
663                 }
664             }
665             return entries;
666         }
667     }
668 
669     @Override
<span class="line-modified">670     public boolean dump(FileEntry entry, Path to) throws IOException {</span>
671         var output = to.toAbsolutePath();
672         try (var p = capture(&quot;hg&quot;, &quot;cat&quot;, &quot;--output=&quot; + output.toString(),
673                                           &quot;--rev=&quot; + entry.commit(),
674                                           entry.path().toString())) {
<span class="line-modified">675             var res = await(p);</span>
<span class="line-removed">676             return Files.exists(output);</span>
677         }
678     }
679 
680     @Override
681     public void revert(Hash parent) throws IOException {
682         try (var p = capture(&quot;hg&quot;, &quot;revert&quot;, &quot;--no-backup&quot;, &quot;--all&quot;, &quot;--rev&quot;, parent.hex())) {
683             await(p);
684         }
685     }
686 
687     @Override
688     public Diff diff(Hash from) throws IOException {
689         return diff(from, null);
690     }
691 
692     @Override
693     public Diff diff(Hash from, Hash to) throws IOException {
694         var ext = Files.createTempFile(&quot;ext&quot;, &quot;.py&quot;);
695         copyResource(EXT_PY, ext);
696 
</pre>
</td>
<td>
<hr />
<pre>
650         try (var p = capture(&quot;hg&quot;, &quot;--config&quot;, &quot;extensions.ls-tree=&quot; + ext, &quot;ls-tree&quot;, hash.hex())) {
651             var res = await(p);
652             var entries = new ArrayList&lt;FileEntry&gt;();
653             for (var line : res.stdout()) {
654                 var parts = line.split(&quot;\t&quot;);
655                 var metadata = parts[0].split(&quot; &quot;);
656                 var path = Path.of(parts[1]);
657                 if (include.isEmpty() || include.contains(path)) {
658                     var entry = new FileEntry(hash,
659                                               FileType.fromOctal(metadata[0]),
660                                               new Hash(metadata[2]),
661                                               path);
662                     entries.add(entry);
663                 }
664             }
665             return entries;
666         }
667     }
668 
669     @Override
<span class="line-modified">670     public void dump(FileEntry entry, Path to) throws IOException {</span>
671         var output = to.toAbsolutePath();
672         try (var p = capture(&quot;hg&quot;, &quot;cat&quot;, &quot;--output=&quot; + output.toString(),
673                                           &quot;--rev=&quot; + entry.commit(),
674                                           entry.path().toString())) {
<span class="line-modified">675             await(p);</span>

676         }
677     }
678 
679     @Override
680     public void revert(Hash parent) throws IOException {
681         try (var p = capture(&quot;hg&quot;, &quot;revert&quot;, &quot;--no-backup&quot;, &quot;--all&quot;, &quot;--rev&quot;, parent.hex())) {
682             await(p);
683         }
684     }
685 
686     @Override
687     public Diff diff(Hash from) throws IOException {
688         return diff(from, null);
689     }
690 
691     @Override
692     public Diff diff(Hash from, Hash to) throws IOException {
693         var ext = Files.createTempFile(&quot;ext&quot;, &quot;.py&quot;);
694         copyResource(EXT_PY, ext);
695 
</pre>
</td>
</tr>
</table>
<center><a href="../git/GitRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>