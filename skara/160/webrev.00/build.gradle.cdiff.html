<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff build.gradle</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center>&lt; prev <a href="index.html" target="_top">index</a> <a href="buildSrc/images/src/main/java/org/openjdk/skara/gradle/images/DownloadJDKTask.java.cdiff.html" target="_top">next &gt;</a></center>    <h2>build.gradle</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 89,33 ***</span>
              throw new GradleException(&quot;To publish artifacts, set the maven repository password -PmavenRepositoryPassword=&lt;password&gt;&quot;)
          }
      }
  }
  
<span class="line-modified">! task jar {</span>
<span class="line-modified">!     subprojects.findAll() { it.name != &#39;bots&#39; }.each { dependsOn &quot;${it.path}:jar&quot; }</span>
  }
  
<span class="line-modified">! task test {</span>
<span class="line-modified">!     subprojects.findAll() { it.name != &#39;bots&#39; }.each { dependsOn &quot;${it.path}:test&quot; }</span>
  }
  
  reproduce {
      dockerfile = &#39;test.dockerfile&#39;
  }
  
<span class="line-removed">- task deleteBuildDir(type: Delete) {</span>
<span class="line-removed">-     delete project.buildDir</span>
<span class="line-removed">- }</span>
<span class="line-removed">- </span>
  task local(type: Copy) {
      def os = System.getProperty(&#39;os.name&#39;).toLowerCase()
      def osName = os.startsWith(&#39;win&#39;) ? &#39;Windows&#39; :
          os.startsWith(&#39;mac&#39;) ? &#39;Macos&#39; : &#39;Linux&#39;
  
      dependsOn &#39;:cli:image&#39; + osName
<span class="line-removed">-     dependsOn deleteBuildDir</span>
      from zipTree(file(project.rootDir.toString() +
                        &#39;/cli/build/distributions/cli&#39; +
                        &#39;-&#39; + project.version + &#39;-&#39; +
  		      osName.toLowerCase() + &#39;.zip&#39;))
      into project.buildDir
<span class="line-new-header">--- 89,31 ---</span>
              throw new GradleException(&quot;To publish artifacts, set the maven repository password -PmavenRepositoryPassword=&lt;password&gt;&quot;)
          }
      }
  }
  
<span class="line-modified">! task test {</span>
<span class="line-modified">!     subprojects.findAll() { !it.getTasksByName(&#39;test&#39;, false).isEmpty() }.each { dependsOn &quot;${it.path}:test&quot; }</span>
  }
  
<span class="line-modified">! task clean {</span>
<span class="line-modified">!     subprojects.findAll() { !it.getTasksByName(&#39;clean&#39;, false).isEmpty() }.each { dependsOn &quot;${it.path}:clean&quot; }</span>
  }
  
  reproduce {
      dockerfile = &#39;test.dockerfile&#39;
  }
  
  task local(type: Copy) {
<span class="line-added">+     doFirst {</span>
<span class="line-added">+         delete project.buildDir</span>
<span class="line-added">+     }</span>
      def os = System.getProperty(&#39;os.name&#39;).toLowerCase()
      def osName = os.startsWith(&#39;win&#39;) ? &#39;Windows&#39; :
          os.startsWith(&#39;mac&#39;) ? &#39;Macos&#39; : &#39;Linux&#39;
  
      dependsOn &#39;:cli:image&#39; + osName
      from zipTree(file(project.rootDir.toString() +
                        &#39;/cli/build/distributions/cli&#39; +
                        &#39;-&#39; + project.version + &#39;-&#39; +
  		      osName.toLowerCase() + &#39;.zip&#39;))
      into project.buildDir
</pre>
<center>&lt; prev <a href="index.html" target="_top">index</a> <a href="buildSrc/images/src/main/java/org/openjdk/skara/gradle/images/DownloadJDKTask.java.cdiff.html" target="_top">next &gt;</a></center>  </body>
</html>