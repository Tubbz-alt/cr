<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../github/GitHubPullRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../issuetracker/src/main/java/org/openjdk/skara/issuetracker/Issue.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 21  * questions.
 22  */
 23 package org.openjdk.skara.forge.gitlab;
 24 
 25 import org.openjdk.skara.forge.*;
 26 import org.openjdk.skara.host.HostUser;
 27 import org.openjdk.skara.issuetracker.*;
 28 import org.openjdk.skara.json.*;
 29 import org.openjdk.skara.network.*;
 30 import org.openjdk.skara.vcs.Hash;
 31 
 32 import java.net.URI;
 33 import java.nio.charset.StandardCharsets;
 34 import java.time.ZonedDateTime;
 35 import java.util.*;
 36 import java.util.logging.Logger;
 37 import java.util.regex.Pattern;
 38 import java.util.stream.*;
 39 
 40 public class GitLabMergeRequest implements PullRequest {
<span class="line-removed"> 41 </span>
 42     private final JSONValue json;
 43     private final RestRequest request;
 44     private final Logger log = Logger.getLogger(&quot;org.openjdk.skara.host&quot;);;
 45     private final GitLabRepository repository;
 46 
 47     GitLabMergeRequest(GitLabRepository repository, JSONValue jsonValue, RestRequest request) {
 48         this.repository = repository;
 49         this.json = jsonValue;
 50         this.request = request.restrict(&quot;merge_requests/&quot; + json.get(&quot;iid&quot;).toString() + &quot;/&quot;);
 51     }
 52 
 53     @Override
 54     public HostedRepository repository() {
 55         return repository;
 56     }
 57 
 58     @Override
 59     public IssueProject project() {
 60         return null;
 61     }
</pre>
<hr />
<pre>
609             return List.of(user);
610         }
611         return Collections.emptyList();
612     }
613 
614     @Override
615     public void setAssignees(List&lt;HostUser&gt; assignees) {
616         var id = assignees.size() == 0 ? 0 : Integer.valueOf(assignees.get(0).id());
617         var param = JSON.object().put(&quot;assignee_id&quot;, id);
618         request.put().body(param).execute();
619         if (assignees.size() &gt; 1) {
620             var rest = assignees.subList(1, assignees.size());
621             var usernames = rest.stream()
622                                 .map(HostUser::userName)
623                                 .map(username -&gt; &quot;@&quot; + username)
624                                 .collect(Collectors.joining(&quot; &quot;));
625             var comment = usernames + &quot; can you have a look at this merge request?&quot;;
626             addComment(comment);
627         }
628     }















629 }
</pre>
</td>
<td>
<hr />
<pre>
 21  * questions.
 22  */
 23 package org.openjdk.skara.forge.gitlab;
 24 
 25 import org.openjdk.skara.forge.*;
 26 import org.openjdk.skara.host.HostUser;
 27 import org.openjdk.skara.issuetracker.*;
 28 import org.openjdk.skara.json.*;
 29 import org.openjdk.skara.network.*;
 30 import org.openjdk.skara.vcs.Hash;
 31 
 32 import java.net.URI;
 33 import java.nio.charset.StandardCharsets;
 34 import java.time.ZonedDateTime;
 35 import java.util.*;
 36 import java.util.logging.Logger;
 37 import java.util.regex.Pattern;
 38 import java.util.stream.*;
 39 
 40 public class GitLabMergeRequest implements PullRequest {

 41     private final JSONValue json;
 42     private final RestRequest request;
 43     private final Logger log = Logger.getLogger(&quot;org.openjdk.skara.host&quot;);;
 44     private final GitLabRepository repository;
 45 
 46     GitLabMergeRequest(GitLabRepository repository, JSONValue jsonValue, RestRequest request) {
 47         this.repository = repository;
 48         this.json = jsonValue;
 49         this.request = request.restrict(&quot;merge_requests/&quot; + json.get(&quot;iid&quot;).toString() + &quot;/&quot;);
 50     }
 51 
 52     @Override
 53     public HostedRepository repository() {
 54         return repository;
 55     }
 56 
 57     @Override
 58     public IssueProject project() {
 59         return null;
 60     }
</pre>
<hr />
<pre>
608             return List.of(user);
609         }
610         return Collections.emptyList();
611     }
612 
613     @Override
614     public void setAssignees(List&lt;HostUser&gt; assignees) {
615         var id = assignees.size() == 0 ? 0 : Integer.valueOf(assignees.get(0).id());
616         var param = JSON.object().put(&quot;assignee_id&quot;, id);
617         request.put().body(param).execute();
618         if (assignees.size() &gt; 1) {
619             var rest = assignees.subList(1, assignees.size());
620             var usernames = rest.stream()
621                                 .map(HostUser::userName)
622                                 .map(username -&gt; &quot;@&quot; + username)
623                                 .collect(Collectors.joining(&quot; &quot;));
624             var comment = usernames + &quot; can you have a look at this merge request?&quot;;
625             addComment(comment);
626         }
627     }
<span class="line-added">628 </span>
<span class="line-added">629     @Override</span>
<span class="line-added">630     public List&lt;Link&gt; links() {</span>
<span class="line-added">631         throw new RuntimeException(&quot;not implemented yet&quot;);</span>
<span class="line-added">632     }</span>
<span class="line-added">633 </span>
<span class="line-added">634     @Override</span>
<span class="line-added">635     public void addLink(Link link) {</span>
<span class="line-added">636         throw new RuntimeException(&quot;not implemented yet&quot;);</span>
<span class="line-added">637     }</span>
<span class="line-added">638 </span>
<span class="line-added">639     @Override</span>
<span class="line-added">640     public void removeLink(URI uri) {</span>
<span class="line-added">641         throw new RuntimeException(&quot;not implemented yet&quot;);</span>
<span class="line-added">642     }</span>
643 }
</pre>
</td>
</tr>
</table>
<center><a href="../github/GitHubPullRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../issuetracker/src/main/java/org/openjdk/skara/issuetracker/Issue.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>