<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff gradlew</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center><a href="deps.env.udiff.html" target="_top">&lt; prev</a> <a href="index.html" target="_top">index</a> <a href="gradlew.bat.udiff.html" target="_top">next &gt;</a></center>    <h2>gradlew</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -79,72 +79,75 @@</span>
      mkdir -p &quot;${DIRECTORY}&quot;
      unzip &quot;${FILENAME}&quot; -d &quot;${DIRECTORY}&quot; &gt; /dev/null
  }
  
  DIR=$(dirname $0)
<span class="udiff-line-added">+ ARCH=$(uname -m)</span>
  OS=$(uname)
  
  . $(dirname &quot;${0}&quot;)/deps.env
<span class="udiff-line-modified-removed">- case &quot;${OS}&quot; in</span>
<span class="udiff-line-modified-removed">-     Linux )</span>
<span class="udiff-line-modified-removed">-         JDK_URL=&quot;${JDK_LINUX_URL}&quot;</span>
<span class="udiff-line-modified-removed">-         JDK_SHA256=&quot;${JDK_LINUX_SHA256}&quot;</span>
<span class="udiff-line-modified-removed">-         ;;</span>
<span class="udiff-line-modified-removed">-     Darwin )</span>
<span class="udiff-line-modified-removed">-         JDK_URL=&quot;${JDK_MACOS_URL}&quot;</span>
<span class="udiff-line-modified-removed">-         JDK_SHA256=&quot;${JDK_MACOS_SHA256}&quot;</span>
<span class="udiff-line-modified-removed">-         ;;</span>
<span class="udiff-line-modified-removed">-     CYGWIN_NT* )</span>
<span class="udiff-line-modified-removed">-         JDK_URL=&quot;${JDK_WINDOWS_URL}&quot;</span>
<span class="udiff-line-modified-removed">-         JDK_SHA256=&quot;${JDK_WINDOWS_SHA256}&quot;</span>
<span class="udiff-line-modified-removed">-         ;;</span>
<span class="udiff-line-modified-removed">-     *)</span>
<span class="udiff-line-modified-removed">-         echo &quot;error: unknown operating system ${OS}&quot;</span>
<span class="udiff-line-removed">-         exit 1</span>
<span class="udiff-line-removed">-         ;;</span>
<span class="udiff-line-removed">- esac</span>
<span class="udiff-line-removed">- </span>
<span class="udiff-line-removed">- JDK_FILENAME=&quot;${DIR}/.jdk/$(basename ${JDK_URL})&quot;</span>
<span class="udiff-line-removed">- if [ &quot;${OS}&quot; = &quot;Linux&quot; -o &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-removed">-     JDK_DIR=&quot;${DIR}/.jdk/$(basename -s &#39;.tar.gz&#39; ${JDK_URL})&quot;</span>
<span class="udiff-line-removed">- else</span>
<span class="udiff-line-removed">-     JDK_DIR=&quot;${DIR}/.jdk/$(basename -s &#39;.zip&#39; ${JDK_URL})&quot;</span>
<span class="udiff-line-modified-added">+ if [ &quot;${ARCH}&quot; = &quot;x86_64&quot; ]; then</span>
<span class="udiff-line-modified-added">+     case &quot;${OS}&quot; in</span>
<span class="udiff-line-modified-added">+         Linux )</span>
<span class="udiff-line-modified-added">+             JDK_URL=&quot;${JDK_LINUX_X64_URL}&quot;</span>
<span class="udiff-line-modified-added">+             JDK_SHA256=&quot;${JDK_LINUX_X64_SHA256}&quot;</span>
<span class="udiff-line-modified-added">+             ;;</span>
<span class="udiff-line-modified-added">+         Darwin )</span>
<span class="udiff-line-modified-added">+             JDK_URL=&quot;${JDK_MACOS_X64_URL}&quot;</span>
<span class="udiff-line-modified-added">+             JDK_SHA256=&quot;${JDK_MACOS_X64_SHA256}&quot;</span>
<span class="udiff-line-modified-added">+             ;;</span>
<span class="udiff-line-modified-added">+         CYGWIN_NT* )</span>
<span class="udiff-line-modified-added">+             JDK_URL=&quot;${JDK_WINDOWS_X64_URL}&quot;</span>
<span class="udiff-line-modified-added">+             JDK_SHA256=&quot;${JDK_WINDOWS_X64_SHA256}&quot;</span>
<span class="udiff-line-modified-added">+             ;;</span>
<span class="udiff-line-modified-added">+     esac</span>
  fi
  
<span class="udiff-line-modified-removed">- if [ ! -d &quot;${JDK_DIR}&quot; ]; then</span>
<span class="udiff-line-modified-removed">-     mkdir -p ${DIR}/.jdk</span>
<span class="udiff-line-modified-removed">-     if [ ! -f &quot;${JDK_FILENAME}&quot; ]; then</span>
<span class="udiff-line-modified-removed">-         if [ -f &quot;${JDK_URL}&quot; ]; then</span>
<span class="udiff-line-modified-removed">-             echo &quot;Copying JDK...&quot;</span>
<span class="udiff-line-modified-removed">-             cp &quot;${JDK_URL}&quot; &quot;${JDK_FILENAME}&quot;</span>
<span class="udiff-line-modified-added">+ if [ ! -z &quot;${JDK_URL}&quot; ]; then</span>
<span class="udiff-line-modified-added">+     JDK_FILENAME=&quot;${DIR}/.jdk/$(basename ${JDK_URL})&quot;</span>
<span class="udiff-line-modified-added">+     if [ &quot;${OS}&quot; = &quot;Linux&quot; -o &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-modified-added">+         JDK_DIR=&quot;${DIR}/.jdk/$(basename -s &#39;.tar.gz&#39; ${JDK_URL})&quot;</span>
<span class="udiff-line-modified-added">+     else</span>
<span class="udiff-line-modified-added">+         JDK_DIR=&quot;${DIR}/.jdk/$(basename -s &#39;.zip&#39; ${JDK_URL})&quot;</span>
<span class="udiff-line-added">+     fi</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+     if [ ! -d &quot;${JDK_DIR}&quot; ]; then</span>
<span class="udiff-line-added">+         mkdir -p ${DIR}/.jdk</span>
<span class="udiff-line-added">+         if [ ! -f &quot;${JDK_FILENAME}&quot; ]; then</span>
<span class="udiff-line-added">+             if [ -f &quot;${JDK_URL}&quot; ]; then</span>
<span class="udiff-line-added">+                 echo &quot;Copying JDK...&quot;</span>
<span class="udiff-line-added">+                 cp &quot;${JDK_URL}&quot; &quot;${JDK_FILENAME}&quot;</span>
<span class="udiff-line-added">+             else</span>
<span class="udiff-line-added">+                 echo &quot;Downloading JDK...&quot;</span>
<span class="udiff-line-added">+                 download ${JDK_URL} &quot;${JDK_FILENAME}&quot;</span>
<span class="udiff-line-added">+                 checksum &quot;${JDK_FILENAME}&quot; ${JDK_SHA256}</span>
<span class="udiff-line-added">+             fi</span>
<span class="udiff-line-added">+         fi</span>
<span class="udiff-line-added">+         echo &quot;Extracting JDK...&quot;</span>
<span class="udiff-line-added">+         if [ &quot;${OS}&quot; = &quot;Linux&quot; -o &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-added">+             extract_tar &quot;${JDK_FILENAME}&quot; &quot;${JDK_DIR}&quot;</span>
          else
<span class="udiff-line-modified-removed">-             echo &quot;Downloading JDK...&quot;</span>
<span class="udiff-line-removed">-             download ${JDK_URL} &quot;${JDK_FILENAME}&quot;</span>
<span class="udiff-line-removed">-             checksum &quot;${JDK_FILENAME}&quot; ${JDK_SHA256}</span>
<span class="udiff-line-modified-added">+             extract_zip &quot;${JDK_FILENAME}&quot; &quot;${JDK_DIR}&quot;</span>
          fi
      fi
<span class="udiff-line-modified-removed">-     echo &quot;Extracting JDK...&quot;</span>
<span class="udiff-line-modified-removed">-     if [ &quot;${OS}&quot; = &quot;Linux&quot; -o &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-modified-removed">-         extract_tar &quot;${JDK_FILENAME}&quot; &quot;${JDK_DIR}&quot;</span>
<span class="udiff-line-modified-added">+ </span>
<span class="udiff-line-modified-added">+     if [ &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-modified-added">+         EXECUTABLE_FILTER=&#39;-perm +111&#39;</span>
<span class="udiff-line-added">+         LAUNCHER=&#39;java&#39;</span>
<span class="udiff-line-added">+     elif [ &quot;${OS}&quot; = &quot;Linux&quot; ]; then</span>
<span class="udiff-line-added">+         EXECUTABLE_FILTER=&#39;-executable&#39;</span>
<span class="udiff-line-added">+         LAUNCHER=&#39;java&#39;</span>
      else
<span class="udiff-line-modified-removed">-         extract_zip &quot;${JDK_FILENAME}&quot; &quot;${JDK_DIR}&quot;</span>
<span class="udiff-line-modified-added">+         LAUNCHER=&#39;java.exe&#39;</span>
      fi
<span class="udiff-line-removed">- fi</span>
  
<span class="udiff-line-modified-removed">- if [ &quot;${OS}&quot; = &quot;Darwin&quot; ]; then</span>
<span class="udiff-line-modified-removed">-     EXECUTABLE_FILTER=&#39;-perm +111&#39;</span>
<span class="udiff-line-removed">-     LAUNCHER=&#39;java&#39;</span>
<span class="udiff-line-removed">- elif [ &quot;${OS}&quot; = &quot;Linux&quot; ]; then</span>
<span class="udiff-line-removed">-     EXECUTABLE_FILTER=&#39;-executable&#39;</span>
<span class="udiff-line-removed">-     LAUNCHER=&#39;java&#39;</span>
<span class="udiff-line-modified-added">+     JAVA_LAUNCHER=$(find &quot;${JDK_DIR}&quot; -type f ${EXECUTABLE_FILTER} | grep &quot;.*/bin/${LAUNCHER}$&quot;)</span>
<span class="udiff-line-modified-added">+     export JAVA_HOME=&quot;$(dirname $(dirname ${JAVA_LAUNCHER}))&quot;</span>
  else
<span class="udiff-line-modified-removed">-     LAUNCHER=&#39;java.exe&#39;</span>
<span class="udiff-line-modified-added">+     JAVA_LAUNCHER=&quot;java&quot;</span>
  fi
  
<span class="udiff-line-removed">- JAVA_LAUNCHER=$(find &quot;${JDK_DIR}&quot; -type f ${EXECUTABLE_FILTER} | grep &quot;.*/bin/${LAUNCHER}$&quot;)</span>
<span class="udiff-line-removed">- export JAVA_HOME=&quot;$(dirname $(dirname ${JAVA_LAUNCHER}))&quot;</span>
<span class="udiff-line-removed">- </span>
  GRADLE_FILENAME=&quot;${DIR}/.gradle/$(basename ${GRADLE_URL})&quot;
  GRADLE_DIR=&quot;${DIR}/.gradle/$(basename -s &#39;.zip&#39; ${GRADLE_URL})&quot;
  
  if [ ! -d &quot;${GRADLE_DIR}&quot; ]; then
      mkdir -p &quot;${DIR}/.gradle&quot;
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -153,11 +156,15 @@</span>
          download ${GRADLE_URL} &quot;${GRADLE_FILENAME}&quot;
      fi
      checksum ${GRADLE_FILENAME} ${GRADLE_SHA256}
      echo &quot;Extracting Gradle...&quot;
      if [ &quot;${OS}&quot; = &quot;Linux&quot; -o &quot;${OS}&quot; = &quot;Darwin&quot; ]; then
<span class="udiff-line-modified-removed">-         &quot;${JAVA_LAUNCHER}&quot; &quot;${DIR}&quot;/Unzip.java &quot;${GRADLE_FILENAME}&quot; &quot;${GRADLE_DIR}&quot;</span>
<span class="udiff-line-modified-added">+         if exists unzip; then</span>
<span class="udiff-line-added">+             extract_zip &quot;${GRADLE_FILENAME}&quot; &quot;${GRADLE_DIR}&quot;</span>
<span class="udiff-line-added">+         else</span>
<span class="udiff-line-added">+             &quot;${JAVA_LAUNCHER}&quot; &quot;${DIR}&quot;/Unzip.java &quot;${GRADLE_FILENAME}&quot; &quot;${GRADLE_DIR}&quot;</span>
<span class="udiff-line-added">+         fi</span>
      else
          extract_zip &quot;${GRADLE_FILENAME}&quot; &quot;${GRADLE_DIR}&quot;
      fi
  fi
  
</pre>
<center><a href="deps.env.udiff.html" target="_top">&lt; prev</a> <a href="index.html" target="_top">index</a> <a href="gradlew.bat.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>