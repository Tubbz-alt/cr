diff a/vcs/src/main/resources/ext.py b/vcs/src/main/resources/ext.py
--- a/vcs/src/main/resources/ext.py
+++ b/vcs/src/main/resources/ext.py
@@ -271,5 +271,19 @@
         revs = "0:tip"
 
     for r in revrange(repo, [revs]):
         ctx = repo[r]
         __dump_metadata(ctx)
+
+@command('ls-tree', [],  'hg ls-tree')
+def ls_tree(ui, repo, rev, **opts):
+    nullHash = '0' * 40
+    ctx = revsingle(repo, rev)
+    for filename in ctx.manifest():
+        fctx = ctx.filectx(filename)
+        if 'x' in fctx.flags():
+            write('100755 blob ')
+        else:
+            write('100644 blob ')
+        write(nullHash)
+        write('\t')
+        writeln(filename)
