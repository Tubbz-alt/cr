<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../github/GitHubPullRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../issuetracker/src/main/java/org/openjdk/skara/issuetracker/Issue.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>forge/src/main/java/org/openjdk/skara/forge/gitlab/GitLabMergeRequest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
533     public URI changeUrl() {
534         return URIBuilder.base(webUrl()).appendPath(&quot;/diffs&quot;).build();
535     }
536 
537     @Override
538     public URI changeUrl(Hash base) {
539         return URIBuilder.base(webUrl()).appendPath(&quot;/diffs&quot;)
540                          .setQuery(Map.of(&quot;start_sha&quot;, base.hex()))
541                          .build();
542     }
543 
544     @Override
545     public boolean isDraft() {
546         return json.get(&quot;work_in_progress&quot;).asBoolean();
547     }
548 
549 
550     @Override
551     public void setState(State state) {
552         request.put(&quot;&quot;)
<span class="line-modified">553                .body(&quot;state_event&quot;, state == State.CLOSED ? &quot;close&quot; : &quot;reopen&quot;)</span>
554                .execute();
555     }
556 
557     @Override
558     public void addLabel(String label) {
559         // GitLab does not allow adding/removing single labels, only setting the full list
560         // We retrieve the list again here to try to minimize the race condition window
561         var currentJson = request.get(&quot;&quot;).execute().asObject();
562         var labels = Stream.concat(currentJson.get(&quot;labels&quot;).stream()
563                 .map(JSONValue::asString),
564                 List.of(label).stream())
565                 .collect(Collectors.toSet());
566         request.put(&quot;&quot;)
567                .body(&quot;labels&quot;, String.join(&quot;,&quot;, labels))
568                .execute();
569     }
570 
571     @Override
572     public void removeLabel(String label) {
573         var currentJson = request.get(&quot;&quot;).execute().asObject();
</pre>
</td>
<td>
<hr />
<pre>
533     public URI changeUrl() {
534         return URIBuilder.base(webUrl()).appendPath(&quot;/diffs&quot;).build();
535     }
536 
537     @Override
538     public URI changeUrl(Hash base) {
539         return URIBuilder.base(webUrl()).appendPath(&quot;/diffs&quot;)
540                          .setQuery(Map.of(&quot;start_sha&quot;, base.hex()))
541                          .build();
542     }
543 
544     @Override
545     public boolean isDraft() {
546         return json.get(&quot;work_in_progress&quot;).asBoolean();
547     }
548 
549 
550     @Override
551     public void setState(State state) {
552         request.put(&quot;&quot;)
<span class="line-modified">553                .body(&quot;state_event&quot;, state != State.OPEN ? &quot;close&quot; : &quot;reopen&quot;)</span>
554                .execute();
555     }
556 
557     @Override
558     public void addLabel(String label) {
559         // GitLab does not allow adding/removing single labels, only setting the full list
560         // We retrieve the list again here to try to minimize the race condition window
561         var currentJson = request.get(&quot;&quot;).execute().asObject();
562         var labels = Stream.concat(currentJson.get(&quot;labels&quot;).stream()
563                 .map(JSONValue::asString),
564                 List.of(label).stream())
565                 .collect(Collectors.toSet());
566         request.put(&quot;&quot;)
567                .body(&quot;labels&quot;, String.join(&quot;,&quot;, labels))
568                .execute();
569     }
570 
571     @Override
572     public void removeLabel(String label) {
573         var currentJson = request.get(&quot;&quot;).execute().asObject();
</pre>
</td>
</tr>
</table>
<center><a href="../github/GitHubPullRequest.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../issuetracker/src/main/java/org/openjdk/skara/issuetracker/Issue.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>