<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitFork.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitFork.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
213             }
214         } else {
215             var cwd = Path.of(&quot;&quot;).toAbsolutePath();
216             var repo = Repository.get(cwd).orElseGet(die(&quot;error: no git repository found at &quot; + cwd));
217             uri = URI.create(repo.pullPath(&quot;origin&quot;));
218         }
219 
220         if (uri == null) {
221             exit(&quot;error: not a valid URI: &quot; + uri);
222         }
223 
224         var webURI = Remote.toWebURI(uri.toString());
225         var token = isMercurial ? System.getenv(&quot;HG_TOKEN&quot;) : System.getenv(&quot;GIT_TOKEN&quot;);
226         var username = arguments.get(&quot;username&quot;).orString(() -&gt; gitConfig(&quot;fork.username&quot;));
227         var credentials = GitCredentials.fill(webURI.getHost(), webURI.getPath(), username, token, webURI.getScheme());
228 
229         if (credentials.password() == null) {
230             exit(&quot;error: no personal access token found, use git-credentials or the environment variable GIT_TOKEN&quot;);
231         }
232         if (credentials.username() == null) {
<span class="line-modified">233             exit(&quot;error: no username for found, use git-credentials or the flag --username&quot;);</span>
234         }
235 
236         var host = Forge.from(webURI, new Credential(credentials.username(), credentials.password()));
237         if (host.isEmpty()) {
238             exit(&quot;error: could not connect to host &quot; + webURI.getHost());
239         }
240 
241         var hostedRepo = host.get().repository(webURI.getPath().substring(1)).orElseThrow(() -&gt;
242             new IOException(&quot;Could not find repository at &quot; + webURI.toString())
243         );
244 
245         var fork = hostedRepo.fork();
246         if (token == null) {
247             GitCredentials.approve(credentials);
248         }
249 
250         var forkWebUrl = fork.webUrl();
251         if (isMercurial) {
252             forkWebUrl = URI.create(&quot;git+&quot; + forkWebUrl.toString());
253         }
</pre>
</td>
<td>
<hr />
<pre>
213             }
214         } else {
215             var cwd = Path.of(&quot;&quot;).toAbsolutePath();
216             var repo = Repository.get(cwd).orElseGet(die(&quot;error: no git repository found at &quot; + cwd));
217             uri = URI.create(repo.pullPath(&quot;origin&quot;));
218         }
219 
220         if (uri == null) {
221             exit(&quot;error: not a valid URI: &quot; + uri);
222         }
223 
224         var webURI = Remote.toWebURI(uri.toString());
225         var token = isMercurial ? System.getenv(&quot;HG_TOKEN&quot;) : System.getenv(&quot;GIT_TOKEN&quot;);
226         var username = arguments.get(&quot;username&quot;).orString(() -&gt; gitConfig(&quot;fork.username&quot;));
227         var credentials = GitCredentials.fill(webURI.getHost(), webURI.getPath(), username, token, webURI.getScheme());
228 
229         if (credentials.password() == null) {
230             exit(&quot;error: no personal access token found, use git-credentials or the environment variable GIT_TOKEN&quot;);
231         }
232         if (credentials.username() == null) {
<span class="line-modified">233             exit(&quot;error: no username for &quot; + webURI.getHost() + &quot; found, use git-credentials or the flag --username&quot;);</span>
234         }
235 
236         var host = Forge.from(webURI, new Credential(credentials.username(), credentials.password()));
237         if (host.isEmpty()) {
238             exit(&quot;error: could not connect to host &quot; + webURI.getHost());
239         }
240 
241         var hostedRepo = host.get().repository(webURI.getPath().substring(1)).orElseThrow(() -&gt;
242             new IOException(&quot;Could not find repository at &quot; + webURI.toString())
243         );
244 
245         var fork = hostedRepo.fork();
246         if (token == null) {
247             GitCredentials.approve(credentials);
248         }
249 
250         var forkWebUrl = fork.webUrl();
251         if (isMercurial) {
252             forkWebUrl = URI.create(&quot;git+&quot; + forkWebUrl.toString());
253         }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>