<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff forge/src/main/java/org/openjdk/skara/forge/GitHubPullRequest.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../../bots/pr/src/test/java/org/openjdk/skara/bots/pr/CheckTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>forge/src/main/java/org/openjdk/skara/forge/GitHubPullRequest.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
330     public void createCheck(Check check) {
331         // update and create are currenly identical operations, both do an HTTP
332         // POST to the /repos/:owner/:repo/check-runs endpoint. There is an additional
333         // endpoint explicitly for updating check-runs, but that is not currently used.
334         updateCheck(check);
335     }
336 
337     @Override
338     public void updateCheck(Check check) {
339         var completedQuery = JSON.object();
340         completedQuery.put(&quot;name&quot;, check.name());
341         completedQuery.put(&quot;head_branch&quot;, json.get(&quot;head&quot;).get(&quot;ref&quot;));
342         completedQuery.put(&quot;head_sha&quot;, check.hash().hex());
343 
344         if (check.title().isPresent() &amp;&amp; check.summary().isPresent()) {
345             var outputQuery = JSON.object();
346             outputQuery.put(&quot;title&quot;, check.title().get());
347             outputQuery.put(&quot;summary&quot;, check.summary().get());
348 
349             var annotations = JSON.array();
<span class="line-modified">350             for (var annotation : check.annotations()) {</span>
351                 var annotationQuery = JSON.object();
352                 annotationQuery.put(&quot;path&quot;, annotation.path());
353                 annotationQuery.put(&quot;start_line&quot;, annotation.startLine());
354                 annotationQuery.put(&quot;end_line&quot;, annotation.endLine());
355                 annotation.startColumn().ifPresent(startColumn -&gt; annotationQuery.put(&quot;start_column&quot;, startColumn));
356                 annotation.endColumn().ifPresent(endColumn -&gt; annotationQuery.put(&quot;end_column&quot;, endColumn));
357                 switch (annotation.level()) {
358                     case NOTICE:
359                         annotationQuery.put(&quot;annotation_level&quot;, &quot;notice&quot;);
360                         break;
361                     case WARNING:
362                         annotationQuery.put(&quot;annotation_level&quot;, &quot;warning&quot;);
363                         break;
364                     case FAILURE:
365                         annotationQuery.put(&quot;annotation_level&quot;, &quot;failure&quot;);
366                         break;
367                 }
368 
369                 annotationQuery.put(&quot;message&quot;, annotation.message());
370                 annotation.title().ifPresent(title -&gt; annotationQuery.put(&quot;title&quot;, title));
</pre>
</td>
<td>
<hr />
<pre>
330     public void createCheck(Check check) {
331         // update and create are currenly identical operations, both do an HTTP
332         // POST to the /repos/:owner/:repo/check-runs endpoint. There is an additional
333         // endpoint explicitly for updating check-runs, but that is not currently used.
334         updateCheck(check);
335     }
336 
337     @Override
338     public void updateCheck(Check check) {
339         var completedQuery = JSON.object();
340         completedQuery.put(&quot;name&quot;, check.name());
341         completedQuery.put(&quot;head_branch&quot;, json.get(&quot;head&quot;).get(&quot;ref&quot;));
342         completedQuery.put(&quot;head_sha&quot;, check.hash().hex());
343 
344         if (check.title().isPresent() &amp;&amp; check.summary().isPresent()) {
345             var outputQuery = JSON.object();
346             outputQuery.put(&quot;title&quot;, check.title().get());
347             outputQuery.put(&quot;summary&quot;, check.summary().get());
348 
349             var annotations = JSON.array();
<span class="line-modified">350             for (var annotation : check.annotations().subList(0, Math.min(check.annotations().size(), 50))) {</span>
351                 var annotationQuery = JSON.object();
352                 annotationQuery.put(&quot;path&quot;, annotation.path());
353                 annotationQuery.put(&quot;start_line&quot;, annotation.startLine());
354                 annotationQuery.put(&quot;end_line&quot;, annotation.endLine());
355                 annotation.startColumn().ifPresent(startColumn -&gt; annotationQuery.put(&quot;start_column&quot;, startColumn));
356                 annotation.endColumn().ifPresent(endColumn -&gt; annotationQuery.put(&quot;end_column&quot;, endColumn));
357                 switch (annotation.level()) {
358                     case NOTICE:
359                         annotationQuery.put(&quot;annotation_level&quot;, &quot;notice&quot;);
360                         break;
361                     case WARNING:
362                         annotationQuery.put(&quot;annotation_level&quot;, &quot;warning&quot;);
363                         break;
364                     case FAILURE:
365                         annotationQuery.put(&quot;annotation_level&quot;, &quot;failure&quot;);
366                         break;
367                 }
368 
369                 annotationQuery.put(&quot;message&quot;, annotation.message());
370                 annotation.title().ifPresent(title -&gt; annotationQuery.put(&quot;title&quot;, title));
</pre>
</td>
</tr>
</table>
<center><a href="../../../../../../../../bots/pr/src/test/java/org/openjdk/skara/bots/pr/CheckTests.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>