<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots/pr/src/main/java/org/openjdk/skara/bots/pr/CheckRun.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/CheckTests.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>bots/pr/src/main/java/org/openjdk/skara/bots/pr/CheckRun.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
177             for (var annotation : visitor.getAnnotations()) {
178                 checkBuilder.annotation(annotation);
179             }
180             checkBuilder.complete(false);
181         }
182     }
183 
184     private void updateReadyForReview(PullRequestCheckIssueVisitor visitor, List&lt;String&gt; additionalErrors) {
185         // If there are no issues at all, the PR is already reviewed
186         if (visitor.getMessages().isEmpty() &amp;&amp; additionalErrors.isEmpty()) {
187             pr.removeLabel(&quot;rfr&quot;);
188             return;
189         }
190 
191         // Additional errors are not allowed
192         if (!additionalErrors.isEmpty()) {
193             newLabels.remove(&quot;rfr&quot;);
194             return;
195         }
196 






197         // Check if the visitor found any issues that should be resolved before reviewing
198         if (visitor.isReadyForReview()) {
199             newLabels.add(&quot;rfr&quot;);
200         } else {
201             newLabels.remove(&quot;rfr&quot;);
202         }
203     }
204 
205     private String getRole(String username) {
206         var project = censusInstance.project();
207         var version = censusInstance.census().version().format();
208         if (project.isReviewer(username, version)) {
209             return &quot;**Reviewer**&quot;;
210         } else if (project.isCommitter(username, version)) {
211             return &quot;Committer&quot;;
212         } else if (project.isAuthor(username, version)) {
213             return &quot;Author&quot;;
214         } else {
215             return &quot;no project role&quot;;
216         }
</pre>
</td>
<td>
<hr />
<pre>
177             for (var annotation : visitor.getAnnotations()) {
178                 checkBuilder.annotation(annotation);
179             }
180             checkBuilder.complete(false);
181         }
182     }
183 
184     private void updateReadyForReview(PullRequestCheckIssueVisitor visitor, List&lt;String&gt; additionalErrors) {
185         // If there are no issues at all, the PR is already reviewed
186         if (visitor.getMessages().isEmpty() &amp;&amp; additionalErrors.isEmpty()) {
187             pr.removeLabel(&quot;rfr&quot;);
188             return;
189         }
190 
191         // Additional errors are not allowed
192         if (!additionalErrors.isEmpty()) {
193             newLabels.remove(&quot;rfr&quot;);
194             return;
195         }
196 
<span class="line-added">197         // Draft requests are not for review</span>
<span class="line-added">198         if (pr.isDraft()) {</span>
<span class="line-added">199             newLabels.remove(&quot;rfr&quot;);</span>
<span class="line-added">200             return;</span>
<span class="line-added">201         }</span>
<span class="line-added">202 </span>
203         // Check if the visitor found any issues that should be resolved before reviewing
204         if (visitor.isReadyForReview()) {
205             newLabels.add(&quot;rfr&quot;);
206         } else {
207             newLabels.remove(&quot;rfr&quot;);
208         }
209     }
210 
211     private String getRole(String username) {
212         var project = censusInstance.project();
213         var version = censusInstance.census().version().format();
214         if (project.isReviewer(username, version)) {
215             return &quot;**Reviewer**&quot;;
216         } else if (project.isCommitter(username, version)) {
217             return &quot;Committer&quot;;
218         } else if (project.isAuthor(username, version)) {
219             return &quot;Author&quot;;
220         } else {
221             return &quot;no project role&quot;;
222         }
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/bots/pr/CheckTests.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>