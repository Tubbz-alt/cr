<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/vcs/RepositoryTests.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
516 
517     @Override
518     public Hash commit(String message,
519                        String authorName,
520                        String authorEmail,
521                        ZonedDateTime authorDate,
522                        String committerName,
523                        String committerEmail,
524                        ZonedDateTime committerDate) throws IOException {
525         if (!Objects.equals(authorName, committerName) ||
526             !Objects.equals(authorEmail, committerEmail) ||
527             !Objects.equals(authorDate, committerDate)) {
528             throw new IllegalArgumentException(&quot;hg does not support different author and committer data&quot;);
529         }
530 
531         return commit(message, authorName, authorEmail, authorDate);
532     }
533 
534     @Override
535     public Hash amend(String message, String authorName, String authorEmail) throws IOException {
<span class="line-modified">536         throw new RuntimeException(&quot;Not implemented yet&quot;);</span>




537     }
538 
539     @Override
540     public Hash amend(String message, String authorName, String authorEmail, String committerName, String committerEmail) throws IOException {
<span class="line-modified">541         throw new RuntimeException(&quot;Not implemented yet&quot;);</span>





542     }
543 
544     @Override
545     public Tag tag(Hash hash, String name, String message, String authorName, String authorEmail) throws IOException {
546         var user = authorName + &quot; &lt;&quot; + authorEmail + &quot;&gt;&quot;;
547         try (var p = capture(&quot;hg&quot;, &quot;tag&quot;,
548                              &quot;--message&quot;, message,
549                              &quot;--user&quot;, user,
550                              &quot;--rev&quot;, hash.hex(),
551                              name)) {
552             await(p);
553         }
554 
555         return new Tag(name);
556     }
557 
558     @Override
559     public Branch branch(Hash hash, String name) throws IOException {
560         // Model a lightweight branch with a bookmark. Not ideal but the
561         // closest to git branches.
</pre>
</td>
<td>
<hr />
<pre>
516 
517     @Override
518     public Hash commit(String message,
519                        String authorName,
520                        String authorEmail,
521                        ZonedDateTime authorDate,
522                        String committerName,
523                        String committerEmail,
524                        ZonedDateTime committerDate) throws IOException {
525         if (!Objects.equals(authorName, committerName) ||
526             !Objects.equals(authorEmail, committerEmail) ||
527             !Objects.equals(authorDate, committerDate)) {
528             throw new IllegalArgumentException(&quot;hg does not support different author and committer data&quot;);
529         }
530 
531         return commit(message, authorName, authorEmail, authorDate);
532     }
533 
534     @Override
535     public Hash amend(String message, String authorName, String authorEmail) throws IOException {
<span class="line-modified">536         var user = authorEmail == null ? authorName : authorName + &quot; &lt;&quot; + authorEmail + &quot;&gt;&quot;;</span>
<span class="line-added">537         try (var p = capture(&quot;hg&quot;, &quot;commit&quot;, &quot;--amend&quot;, &quot;--message=&quot; + message, &quot;--user=&quot; + user)) {</span>
<span class="line-added">538             await(p);</span>
<span class="line-added">539         }</span>
<span class="line-added">540         return resolve(&quot;tip&quot;).orElseThrow(() -&gt; new IOException(&quot;Could not resolve &#39;tip&#39;&quot;));</span>
541     }
542 
543     @Override
544     public Hash amend(String message, String authorName, String authorEmail, String committerName, String committerEmail) throws IOException {
<span class="line-modified">545         if (!Objects.equals(authorName, committerName) ||</span>
<span class="line-added">546             !Objects.equals(authorEmail, committerEmail)) {</span>
<span class="line-added">547             throw new IllegalArgumentException(&quot;hg does not support different author and committer data&quot;);</span>
<span class="line-added">548         }</span>
<span class="line-added">549 </span>
<span class="line-added">550         return amend(message, authorName, authorEmail);</span>
551     }
552 
553     @Override
554     public Tag tag(Hash hash, String name, String message, String authorName, String authorEmail) throws IOException {
555         var user = authorName + &quot; &lt;&quot; + authorEmail + &quot;&gt;&quot;;
556         try (var p = capture(&quot;hg&quot;, &quot;tag&quot;,
557                              &quot;--message&quot;, message,
558                              &quot;--user&quot;, user,
559                              &quot;--rev&quot;, hash.hex(),
560                              name)) {
561             await(p);
562         }
563 
564         return new Tag(name);
565     }
566 
567     @Override
568     public Branch branch(Hash hash, String name) throws IOException {
569         // Model a lightweight branch with a bookmark. Not ideal but the
570         // closest to git branches.
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../test/java/org/openjdk/skara/vcs/RepositoryTests.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>