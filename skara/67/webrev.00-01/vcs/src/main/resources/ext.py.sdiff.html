<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff vcs/src/main/resources/ext.py</title>
    <link rel="stylesheet" href="../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>vcs/src/main/resources/ext.py</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 43         return 0
 44     ratio = s.ratio()
 45     if ratio &lt; threshold:
 46         return 0
 47     return ratio
 48 
 49 def encode(s):
 50     return s.decode(&#39;utf-8&#39;).encode(&#39;utf-8&#39;)
 51 
 52 def write(s):
 53     sys.stdout.write(encode(s))
 54 
 55 def writeln(s):
 56     write(s)
 57     sys.stdout.write(encode(&#39;\n&#39;))
 58 
 59 def _match_exact(root, cwd, files, badfn=None):
 60     &quot;&quot;&quot;
 61     Wrapper for mercurial.match.exact that ignores some arguments based on the used version
 62     &quot;&quot;&quot;
<span class="line-modified"> 63     if mercurial.util.versiontuple() &lt; 5:</span>
<span class="line-removed"> 64         return mercurial.match.exact(root, cwd, files, badfn)</span>
<span class="line-removed"> 65     else:</span>
 66         return mercurial.match.exact(files, badfn)


 67 
 68 def _diff_git_raw(repo, ctx1, ctx2, modified, added, removed):
 69     nullHash = &#39;0&#39; * 40
 70     removed_copy = set(removed)
 71 
 72     for path in added:
 73         fctx = ctx2.filectx(path)
 74         if fctx.renamed():
 75             parent = fctx.p1()
 76             old_path, _ = fctx.renamed()
 77             if old_path in removed:
 78                 removed_copy.discard(old_path)
 79 
 80     for path in sorted(modified | added | removed_copy):
 81         if path in modified:
 82             fctx = ctx2.filectx(path)
 83             writeln(&#39;:{} {} {} {} M\t{}&#39;.format(mode(ctx1.filectx(path)), mode(fctx), nullHash, nullHash, fctx.path()))
 84         elif path in added:
 85             fctx = ctx2.filectx(path)
 86             if not fctx.renamed():
</pre>
</td>
<td>
<hr />
<pre>
 43         return 0
 44     ratio = s.ratio()
 45     if ratio &lt; threshold:
 46         return 0
 47     return ratio
 48 
 49 def encode(s):
 50     return s.decode(&#39;utf-8&#39;).encode(&#39;utf-8&#39;)
 51 
 52 def write(s):
 53     sys.stdout.write(encode(s))
 54 
 55 def writeln(s):
 56     write(s)
 57     sys.stdout.write(encode(&#39;\n&#39;))
 58 
 59 def _match_exact(root, cwd, files, badfn=None):
 60     &quot;&quot;&quot;
 61     Wrapper for mercurial.match.exact that ignores some arguments based on the used version
 62     &quot;&quot;&quot;
<span class="line-modified"> 63     if mercurial.util.version().startswith(&quot;5&quot;):</span>


 64         return mercurial.match.exact(files, badfn)
<span class="line-added"> 65     else:</span>
<span class="line-added"> 66         return mercurial.match.exact(root, cwd, files, badfn)</span>
 67 
 68 def _diff_git_raw(repo, ctx1, ctx2, modified, added, removed):
 69     nullHash = &#39;0&#39; * 40
 70     removed_copy = set(removed)
 71 
 72     for path in added:
 73         fctx = ctx2.filectx(path)
 74         if fctx.renamed():
 75             parent = fctx.p1()
 76             old_path, _ = fctx.renamed()
 77             if old_path in removed:
 78                 removed_copy.discard(old_path)
 79 
 80     for path in sorted(modified | added | removed_copy):
 81         if path in modified:
 82             fctx = ctx2.filectx(path)
 83             writeln(&#39;:{} {} {} {} M\t{}&#39;.format(mode(ctx1.filectx(path)), mode(fctx), nullHash, nullHash, fctx.path()))
 84         elif path in added:
 85             fctx = ctx2.filectx(path)
 86             if not fctx.renamed():
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>