<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitPr.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GitPublish.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitPr.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
624                     System.err.println(&quot;&quot;);
625                     System.err.println(&quot;    git commit -am &#39;Forgot to add some changes&#39;&quot;);
626                     System.err.println(&quot;&quot;);
627                     System.err.println(&quot;If these changes are *not* meant to be part of the pull request, run:&quot;);
628                     System.err.println(&quot;&quot;);
629                     System.err.println(&quot;    git stash&quot;);
630                     System.err.println(&quot;&quot;);
631                     System.err.println(&quot;(You can later restore the changes by running: git stash pop)&quot;);
632                     System.exit(1);
633                 }
634             }
635 
636             var upstream = repo.upstreamFor(currentBranch);
637             if (upstream.isEmpty()) {
638                 var shouldPublish = arguments.contains(&quot;publish&quot;);
639                 if (!shouldPublish) {
640                     var lines = repo.config(&quot;pr.publish&quot;);
641                     shouldPublish = lines.size() == 1 &amp;&amp; lines.get(0).toLowerCase().equals(&quot;true&quot;);
642                 }
643                 if (shouldPublish) {
<span class="line-modified">644                     GitPublish.main(new String[] { remote });</span>

645                 } else {
646                     System.err.println(&quot;error: there is no remote branch for the local branch &#39;&quot; + currentBranch.name() + &quot;&#39;&quot;);
647                     System.err.println(&quot;&quot;);
648                     System.err.println(&quot;A remote branch must be present at &quot; + remotePullPath + &quot; to create a pull request&quot;);
649                     System.err.println(&quot;To create a remote branch and push the commits for your local branch, run:&quot;);
650                     System.err.println(&quot;&quot;);
651                     System.err.println(&quot;    git publish&quot;);
652                     System.err.println(&quot;&quot;);
653                     System.err.println(&quot;If you created the remote branch from another client, you must update this repository.&quot;);
654                     System.err.println(&quot;To update remote information for this repository, run:&quot;);
655                     System.err.println(&quot;&quot;);
656                     System.err.println(&quot;    git fetch &quot; + remote);
657                     System.err.println(&quot;    git branch --set-upstream &quot; + currentBranch + &quot; &quot; + remote + &quot;/&quot; + currentBranch);
658                     System.err.println(&quot;&quot;);
659                     System.exit(1);
660                 }
661             }
662 
663             var upstreamRefName = upstream.get().substring(remote.length() + 1);
664             repo.fetch(uri, upstreamRefName);
</pre>
</td>
<td>
<hr />
<pre>
624                     System.err.println(&quot;&quot;);
625                     System.err.println(&quot;    git commit -am &#39;Forgot to add some changes&#39;&quot;);
626                     System.err.println(&quot;&quot;);
627                     System.err.println(&quot;If these changes are *not* meant to be part of the pull request, run:&quot;);
628                     System.err.println(&quot;&quot;);
629                     System.err.println(&quot;    git stash&quot;);
630                     System.err.println(&quot;&quot;);
631                     System.err.println(&quot;(You can later restore the changes by running: git stash pop)&quot;);
632                     System.exit(1);
633                 }
634             }
635 
636             var upstream = repo.upstreamFor(currentBranch);
637             if (upstream.isEmpty()) {
638                 var shouldPublish = arguments.contains(&quot;publish&quot;);
639                 if (!shouldPublish) {
640                     var lines = repo.config(&quot;pr.publish&quot;);
641                     shouldPublish = lines.size() == 1 &amp;&amp; lines.get(0).toLowerCase().equals(&quot;true&quot;);
642                 }
643                 if (shouldPublish) {
<span class="line-modified">644                     GitPublish.main(new String[] { &quot;--quiet&quot;, remote });</span>
<span class="line-added">645                     upstream = repo.upstreamFor(currentBranch);</span>
646                 } else {
647                     System.err.println(&quot;error: there is no remote branch for the local branch &#39;&quot; + currentBranch.name() + &quot;&#39;&quot;);
648                     System.err.println(&quot;&quot;);
649                     System.err.println(&quot;A remote branch must be present at &quot; + remotePullPath + &quot; to create a pull request&quot;);
650                     System.err.println(&quot;To create a remote branch and push the commits for your local branch, run:&quot;);
651                     System.err.println(&quot;&quot;);
652                     System.err.println(&quot;    git publish&quot;);
653                     System.err.println(&quot;&quot;);
654                     System.err.println(&quot;If you created the remote branch from another client, you must update this repository.&quot;);
655                     System.err.println(&quot;To update remote information for this repository, run:&quot;);
656                     System.err.println(&quot;&quot;);
657                     System.err.println(&quot;    git fetch &quot; + remote);
658                     System.err.println(&quot;    git branch --set-upstream &quot; + currentBranch + &quot; &quot; + remote + &quot;/&quot; + currentBranch);
659                     System.err.println(&quot;&quot;);
660                     System.exit(1);
661                 }
662             }
663 
664             var upstreamRefName = upstream.get().substring(remote.length() + 1);
665             repo.fetch(uri, upstreamRefName);
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> <a href="GitPublish.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>