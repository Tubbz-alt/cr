<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff gradlew.bat</title>
    <link rel="stylesheet" href="style.css" />
  </head>
<body>
<center><a href="gradlew.udiff.html" target="_top">&lt; prev</a> <a href="index.html" target="_top">index</a> next &gt;</center>    <h2>gradlew.bat</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -18,43 +18,49 @@</span>
  rem
  rem Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  rem or visit www.oracle.com if you need additional information or have any
  rem questions.
  
<span class="udiff-line-modified-removed">- if exist %~dp0\.jdk\openjdk-12_windows-x64_bin goto gradle</span>
<span class="udiff-line-modified-added">+ for /f &quot;tokens=1,2 delims==&quot; %%A in (deps.env) do (set %%A=%%~B)</span>
<span class="udiff-line-added">+ for /f %%i in (&quot;%JDK_WINDOWS_URL%&quot;) do set JDK_WINDOWS_DIR=%%~ni</span>
<span class="udiff-line-added">+ for /f %%i in (&quot;%GRADLE_URL%&quot;) do set GRADLE_DIR=%%~ni</span>
<span class="udiff-line-added">+ </span>
<span class="udiff-line-added">+ if exist %~dp0\.jdk\%JDK_WINDOWS_DIR% goto gradle</span>
  
  echo Downloading JDK...
<span class="udiff-line-modified-removed">- mkdir %~dp0\.jdk</span>
<span class="udiff-line-modified-removed">- curl -O https://download.java.net/java/GA/jdk12/GPL/openjdk-12_windows-x64_bin.zip -o openjdk-12_windows-x64_bin.zip</span>
<span class="udiff-line-modified-removed">- move openjdk-12_windows-x64_bin.zip %~dp0\.jdk\</span>
<span class="udiff-line-modified-removed">- for /f &quot;tokens=*&quot; %%i in (&#39;@certutil -hashfile %~dp0/.jdk/openjdk-12_windows-x64_bin.zip sha256 ^| find /v &quot;hash of file&quot; ^| find /v &quot;CertUtil&quot;&#39;) do set SHA256JDK=%%i</span>
<span class="udiff-line-modified-removed">- if &quot;%SHA256JDK%&quot; == &quot;35a8d018f420fb05fe7c2aa9933122896ca50bd23dbd373e90d8e2f3897c4e92&quot; (goto extractJdk)</span>
<span class="udiff-line-modified-added">+ mkdir %~dp0\.jdk\temp</span>
<span class="udiff-line-modified-added">+ curl -L %JDK_WINDOWS_URL% -o %JDK_WINDOWS_DIR%.zip</span>
<span class="udiff-line-modified-added">+ move %JDK_WINDOWS_DIR%.zip %~dp0\.jdk\</span>
<span class="udiff-line-modified-added">+ for /f &quot;tokens=*&quot; %%i in (&#39;@certutil -hashfile %~dp0/.jdk/%JDK_WINDOWS_DIR%.zip sha256 ^| find /v &quot;hash of file&quot; ^| find /v &quot;CertUtil&quot;&#39;) do set SHA256JDK=%%i</span>
<span class="udiff-line-modified-added">+ if &quot;%SHA256JDK%&quot; == &quot;%JDK_WINDOWS_SHA256%&quot; (goto extractJdk)</span>
  echo Invalid SHA256 for JDK detected (%SHA256JDK%)
  goto done
  
  :extractJdk
  echo Extracting JDK...
<span class="udiff-line-modified-removed">- tar -xf %~dp0/.jdk/openjdk-12_windows-x64_bin.zip -C %~dp0/.jdk</span>
<span class="udiff-line-modified-removed">- ren %~dp0\.jdk\jdk-12 openjdk-12_windows-x64_bin</span>
<span class="udiff-line-modified-added">+ tar -xf %~dp0/.jdk/%JDK_WINDOWS_DIR%.zip -C %~dp0/.jdk/temp</span>
<span class="udiff-line-modified-added">+ for /d %%i in (%~dp0\.jdk\temp\*) do move %%i %~dp0\.jdk\%JDK_WINDOWS_DIR%</span>
<span class="udiff-line-added">+ rmdir %~dp0\.jdk\temp</span>
  
  :gradle
<span class="udiff-line-modified-removed">- if exist %~dp0\.gradle\gradle-5.2.1-bin goto run</span>
<span class="udiff-line-modified-added">+ if exist %~dp0\.gradle\%GRADLE_DIR% goto run</span>
  
  echo Downloading Gradle...
<span class="udiff-line-modified-removed">- mkdir %~dp0\.gradle</span>
<span class="udiff-line-modified-removed">- curl -OL https://services.gradle.org/distributions/gradle-5.2.1-bin.zip -o gradle-5.2.1-bin.zip</span>
<span class="udiff-line-modified-removed">- move gradle-5.2.1-bin.zip %~dp0\.gradle\</span>
<span class="udiff-line-modified-removed">- for /f &quot;tokens=*&quot; %%i in (&#39;@certutil -hashfile %~dp0/.gradle/gradle-5.2.1-bin.zip sha256 ^| find /v &quot;hash of file&quot; ^| find /v &quot;CertUtil&quot;&#39;) do set SHA256GRADLE=%%i</span>
<span class="udiff-line-modified-removed">- if &quot;%SHA256GRADLE%&quot; == &quot;748c33ff8d216736723be4037085b8dc342c6a0f309081acf682c9803e407357&quot; (goto extractGradle)</span>
<span class="udiff-line-modified-added">+ mkdir %~dp0\.gradle\temp</span>
<span class="udiff-line-modified-added">+ curl -L %GRADLE_URL% -o %GRADLE_DIR%.zip</span>
<span class="udiff-line-modified-added">+ move %GRADLE_DIR%.zip %~dp0\.gradle\</span>
<span class="udiff-line-modified-added">+ for /f &quot;tokens=*&quot; %%i in (&#39;@certutil -hashfile %~dp0/.gradle/%GRADLE_DIR%.zip sha256 ^| find /v &quot;hash of file&quot; ^| find /v &quot;CertUtil&quot;&#39;) do set SHA256GRADLE=%%i</span>
<span class="udiff-line-modified-added">+ if &quot;%SHA256GRADLE%&quot; == &quot;%GRADLE_SHA256%&quot; (goto extractGradle)</span>
  echo Invalid SHA256 for Gradle detected (%SHA256GRADLE%)
  goto done
  
  :extractGradle
  echo Extracting Gradle...
<span class="udiff-line-modified-removed">- tar -xf %~dp0/.gradle/gradle-5.2.1-bin.zip -C %~dp0/.gradle</span>
<span class="udiff-line-modified-removed">- ren %~dp0\.gradle\gradle-5.2.1 gradle-5.2.1-bin</span>
<span class="udiff-line-modified-added">+ tar -xf %~dp0/.gradle/%GRADLE_DIR%.zip -C %~dp0/.gradle/temp</span>
<span class="udiff-line-modified-added">+ for /d %%i in (%~dp0\.gradle\temp\*) do move %%i %~dp0\.gradle\%GRADLE_DIR%</span>
<span class="udiff-line-added">+ rmdir %~dp0\.gradle\temp</span>
  
  :run
<span class="udiff-line-modified-removed">- set JAVA_HOME=%~dp0/.jdk/openjdk-12_windows-x64_bin</span>
<span class="udiff-line-modified-removed">- %~dp0\.gradle\gradle-5.2.1-bin\bin\gradle %*</span>
<span class="udiff-line-modified-added">+ set JAVA_HOME=%~dp0/.jdk/%JDK_WINDOWS_DIR%</span>
<span class="udiff-line-modified-added">+ %~dp0\.gradle\%GRADLE_DIR%\bin\gradle %*</span>
  
  :done
</pre>
<center><a href="gradlew.udiff.html" target="_top">&lt; prev</a> <a href="index.html" target="_top">index</a> next &gt;</center>  </body>
</html>