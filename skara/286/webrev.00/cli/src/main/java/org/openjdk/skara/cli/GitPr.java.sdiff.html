<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitPr.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitPr.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
525                     return null;
526             });
527             if (currentBranch.equals(repo.defaultBranch())) {
528                 System.err.println(&quot;error: you should not create pull requests from the &#39;master&#39; branch&quot;);
529                 System.err.println(&quot;&quot;);
530                 System.err.println(&quot;To create a local branch for your changes and restore the &#39;master&#39; branch, run:&quot;);
531                 System.err.println(&quot;&quot;);
532                 System.err.println(&quot;    git checkout -b NAME-FOR-YOUR-LOCAL-BRANCH&quot;);
533                 System.err.println(&quot;    git branch --force master origin/master&quot;);
534                 System.err.println(&quot;&quot;);
535                 System.exit(1);
536             }
537 
538             var upstream = repo.upstreamFor(currentBranch);
539             if (upstream.isEmpty()) {
540                 System.err.println(&quot;error: there is no remote branch for the local branch &#39;&quot; + currentBranch.name() + &quot;&#39;&quot;);
541                 System.err.println(&quot;&quot;);
542                 System.err.println(&quot;A remote branch must be present at &quot; + remotePullPath + &quot; to create a pull request&quot;);
543                 System.err.println(&quot;To create a remote branch and push the commits for your local branch, run:&quot;);
544                 System.err.println(&quot;&quot;);
<span class="line-modified">545                 System.err.println(&quot;    git push --set-upstream &quot; + remote + &quot; &quot; + currentBranch.name());</span>
546                 System.err.println(&quot;&quot;);
547                 System.err.println(&quot;If you created the remote branch from another client, you must update this repository.&quot;);
548                 System.err.println(&quot;To update remote information for this repository, run:&quot;);
549                 System.err.println(&quot;&quot;);
550                 System.err.println(&quot;    git fetch &quot; + remote);
551                 System.err.println(&quot;    git branch --set-upstream &quot; + currentBranch + &quot; &quot; + remote + &quot;/&quot; + currentBranch);
552                 System.err.println(&quot;&quot;);
553                 System.exit(1);
554             }
555 
556             var upstreamRefName = upstream.get().substring(remote.length() + 1);
557             repo.fetch(uri, upstreamRefName);
558             var branchCommits = repo.commits(upstream.get() + &quot;..&quot; + currentBranch.name()).asList();
559             if (!branchCommits.isEmpty()) {
560                 System.err.println(&quot;error: there are local commits on branch &#39;&quot; + currentBranch.name() + &quot;&#39; not present in the remote repository &quot; + remotePullPath);
561                 System.err.println(&quot;&quot;);
562                 System.err.println(&quot;All commits must be present in the remote repository to be part of the pull request&quot;);
563                 System.err.println(&quot;The following commits are not present in the remote repository:&quot;);
564                 System.err.println(&quot;&quot;);
565                 for (var commit : branchCommits) {
</pre>
</td>
<td>
<hr />
<pre>
525                     return null;
526             });
527             if (currentBranch.equals(repo.defaultBranch())) {
528                 System.err.println(&quot;error: you should not create pull requests from the &#39;master&#39; branch&quot;);
529                 System.err.println(&quot;&quot;);
530                 System.err.println(&quot;To create a local branch for your changes and restore the &#39;master&#39; branch, run:&quot;);
531                 System.err.println(&quot;&quot;);
532                 System.err.println(&quot;    git checkout -b NAME-FOR-YOUR-LOCAL-BRANCH&quot;);
533                 System.err.println(&quot;    git branch --force master origin/master&quot;);
534                 System.err.println(&quot;&quot;);
535                 System.exit(1);
536             }
537 
538             var upstream = repo.upstreamFor(currentBranch);
539             if (upstream.isEmpty()) {
540                 System.err.println(&quot;error: there is no remote branch for the local branch &#39;&quot; + currentBranch.name() + &quot;&#39;&quot;);
541                 System.err.println(&quot;&quot;);
542                 System.err.println(&quot;A remote branch must be present at &quot; + remotePullPath + &quot; to create a pull request&quot;);
543                 System.err.println(&quot;To create a remote branch and push the commits for your local branch, run:&quot;);
544                 System.err.println(&quot;&quot;);
<span class="line-modified">545                 System.err.println(&quot;    git publish&quot;);</span>
546                 System.err.println(&quot;&quot;);
547                 System.err.println(&quot;If you created the remote branch from another client, you must update this repository.&quot;);
548                 System.err.println(&quot;To update remote information for this repository, run:&quot;);
549                 System.err.println(&quot;&quot;);
550                 System.err.println(&quot;    git fetch &quot; + remote);
551                 System.err.println(&quot;    git branch --set-upstream &quot; + currentBranch + &quot; &quot; + remote + &quot;/&quot; + currentBranch);
552                 System.err.println(&quot;&quot;);
553                 System.exit(1);
554             }
555 
556             var upstreamRefName = upstream.get().substring(remote.length() + 1);
557             repo.fetch(uri, upstreamRefName);
558             var branchCommits = repo.commits(upstream.get() + &quot;..&quot; + currentBranch.name()).asList();
559             if (!branchCommits.isEmpty()) {
560                 System.err.println(&quot;error: there are local commits on branch &#39;&quot; + currentBranch.name() + &quot;&#39; not present in the remote repository &quot; + remotePullPath);
561                 System.err.println(&quot;&quot;);
562                 System.err.println(&quot;All commits must be present in the remote repository to be part of the pull request&quot;);
563                 System.err.println(&quot;The following commits are not present in the remote repository:&quot;);
564                 System.err.println(&quot;&quot;);
565                 for (var commit : branchCommits) {
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>