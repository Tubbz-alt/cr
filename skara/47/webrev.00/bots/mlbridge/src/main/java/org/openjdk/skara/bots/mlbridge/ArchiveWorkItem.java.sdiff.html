<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff bots/mlbridge/src/main/java/org/openjdk/skara/bots/mlbridge/ArchiveWorkItem.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../vcs/src/main/java/org/openjdk/skara/vcs/Repository.java.sdiff.html" target="_top">next &gt;</a></center>    <h2>bots/mlbridge/src/main/java/org/openjdk/skara/bots/mlbridge/ArchiveWorkItem.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
 56         return &quot;ArchiveWorkItem@&quot; + bot.codeRepo().getName() + &quot;#&quot; + pr.getId();
 57     }
 58 
 59     @Override
 60     public boolean concurrentWith(WorkItem other) {
 61         if (!(other instanceof ArchiveWorkItem)) {
 62             return true;
 63         }
 64         ArchiveWorkItem otherItem = (ArchiveWorkItem)other;
 65         if (!pr.getId().equals(otherItem.pr.getId())) {
 66             return true;
 67         }
 68         if (!bot.codeRepo().getName().equals(otherItem.bot.codeRepo().getName())) {
 69             return true;
 70         }
 71         return false;
 72     }
 73 
 74     private void pushMbox(Repository localRepo, String message) {
 75         try {
<span class="line-modified"> 76             localRepo.addremove(localRepo.root().resolve(&quot;.&quot;));</span>
 77             var hash = localRepo.commit(message, bot.emailAddress().fullName().orElseThrow(), bot.emailAddress().address());
 78             localRepo.push(hash, bot.archiveRepo().getUrl(), &quot;master&quot;);
 79         } catch (IOException e) {
 80             throw new UncheckedIOException(e);
 81         }
 82     }
 83 
 84     private static final Pattern replyToPattern = Pattern.compile(&quot;^\\s*@([-A-Za-z0-9]+)&quot;);
 85 
 86     private Optional&lt;Comment&gt; getParentPost(Comment post, List&lt;Comment&gt; all) {
 87         var matcher = replyToPattern.matcher(post.body());
 88         if (matcher.find()) {
 89             var replyToName = matcher.group(1);
 90             var replyToNamePattern = Pattern.compile(&quot;^&quot; + replyToName + &quot;$&quot;);
 91 
 92             var postIterator = all.listIterator();
 93             while (postIterator.hasNext()) {
 94                 var cur = postIterator.next();
 95                 if (cur == post) {
 96                     break;
</pre>
</td>
<td>
<hr />
<pre>
 56         return &quot;ArchiveWorkItem@&quot; + bot.codeRepo().getName() + &quot;#&quot; + pr.getId();
 57     }
 58 
 59     @Override
 60     public boolean concurrentWith(WorkItem other) {
 61         if (!(other instanceof ArchiveWorkItem)) {
 62             return true;
 63         }
 64         ArchiveWorkItem otherItem = (ArchiveWorkItem)other;
 65         if (!pr.getId().equals(otherItem.pr.getId())) {
 66             return true;
 67         }
 68         if (!bot.codeRepo().getName().equals(otherItem.bot.codeRepo().getName())) {
 69             return true;
 70         }
 71         return false;
 72     }
 73 
 74     private void pushMbox(Repository localRepo, String message) {
 75         try {
<span class="line-modified"> 76             localRepo.add(localRepo.root().resolve(&quot;.&quot;));</span>
 77             var hash = localRepo.commit(message, bot.emailAddress().fullName().orElseThrow(), bot.emailAddress().address());
 78             localRepo.push(hash, bot.archiveRepo().getUrl(), &quot;master&quot;);
 79         } catch (IOException e) {
 80             throw new UncheckedIOException(e);
 81         }
 82     }
 83 
 84     private static final Pattern replyToPattern = Pattern.compile(&quot;^\\s*@([-A-Za-z0-9]+)&quot;);
 85 
 86     private Optional&lt;Comment&gt; getParentPost(Comment post, List&lt;Comment&gt; all) {
 87         var matcher = replyToPattern.matcher(post.body());
 88         if (matcher.find()) {
 89             var replyToName = matcher.group(1);
 90             var replyToNamePattern = Pattern.compile(&quot;^&quot; + replyToName + &quot;$&quot;);
 91 
 92             var postIterator = all.listIterator();
 93             while (postIterator.hasNext()) {
 94                 var cur = postIterator.next();
 95                 if (cur == post) {
 96                     break;
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="../../../../../../../../../../vcs/src/main/java/org/openjdk/skara/vcs/Repository.java.sdiff.html" target="_top">next &gt;</a></center>  </body>
</html>