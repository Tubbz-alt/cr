<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../git/GitRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>vcs/src/main/java/org/openjdk/skara/vcs/hg/HgRepository.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
840             await(p);
841         }
842         //Files.delete(patchFile);
843     }
844 
845     @Override
846     public void copy(Path from, Path to) throws IOException {
847         try (var p = capture(&quot;hg&quot;, &quot;copy&quot;, from.toString(), to.toString())) {
848             await(p);
849         }
850     }
851 
852     @Override
853     public void move(Path from, Path to) throws IOException {
854         try (var p = capture(&quot;hg&quot;, &quot;move&quot;, from.toString(), to.toString())) {
855             await(p);
856         }
857     }
858 
859     @Override
<span class="line-modified">860     public void remove(Path... paths) throws IOException {</span>
861         var cmd = new ArrayList&lt;&gt;(List.of(&quot;hg&quot;, &quot;rm&quot;));
862         for (var p : paths) {
863             cmd.add(p.toString());
864         }
865         try (var p = capture(cmd)) {
866             await(p);
867         }
868     }
869 
870     @Override
<span class="line-modified">871     public void add(Path... paths) throws IOException {</span>
872         var cmd = new ArrayList&lt;&gt;(List.of(&quot;hg&quot;, &quot;add&quot;));
873         for (var p : paths) {
874             cmd.add(p.toString());
875         }
876         try (var p = capture(cmd)) {
877             await(p);
878         }
879     }
880 







881     @Override
882     public Optional&lt;String&gt; upstreamFor(Branch b) throws IOException {
883         // Mercurial doesn&#39;t have the concept of remotes like git,
884         // a local branch must have the same name (if present) on the remote
885         return Optional.of(b.name());
886     }
887 
888     public static Repository clone(URI from, Path to, boolean isBare) throws IOException {
889         var cmd = new ArrayList&lt;String&gt;();
890         cmd.addAll(List.of(&quot;hg&quot;, &quot;clone&quot;));
891         if (isBare) {
892             cmd.add(&quot;--noupdate&quot;);
893         }
894         cmd.addAll(List.of(from.toString(), to.toString()));
895 
896         try (var p = capture(Path.of(&quot;&quot;).toAbsolutePath(), cmd)) {
897             await(p);
898         }
899         return new HgRepository(to);
900     }
</pre>
</td>
<td>
<hr />
<pre>
840             await(p);
841         }
842         //Files.delete(patchFile);
843     }
844 
845     @Override
846     public void copy(Path from, Path to) throws IOException {
847         try (var p = capture(&quot;hg&quot;, &quot;copy&quot;, from.toString(), to.toString())) {
848             await(p);
849         }
850     }
851 
852     @Override
853     public void move(Path from, Path to) throws IOException {
854         try (var p = capture(&quot;hg&quot;, &quot;move&quot;, from.toString(), to.toString())) {
855             await(p);
856         }
857     }
858 
859     @Override
<span class="line-modified">860     public void remove(List&lt;Path&gt; paths) throws IOException {</span>
861         var cmd = new ArrayList&lt;&gt;(List.of(&quot;hg&quot;, &quot;rm&quot;));
862         for (var p : paths) {
863             cmd.add(p.toString());
864         }
865         try (var p = capture(cmd)) {
866             await(p);
867         }
868     }
869 
870     @Override
<span class="line-modified">871     public void add(List&lt;Path&gt; paths) throws IOException {</span>
872         var cmd = new ArrayList&lt;&gt;(List.of(&quot;hg&quot;, &quot;add&quot;));
873         for (var p : paths) {
874             cmd.add(p.toString());
875         }
876         try (var p = capture(cmd)) {
877             await(p);
878         }
879     }
880 
<span class="line-added">881     @Override</span>
<span class="line-added">882     public void addremove() throws IOException {</span>
<span class="line-added">883         try (var p = capture(&quot;hg&quot;, &quot;addremove&quot;)) {</span>
<span class="line-added">884             await(p);</span>
<span class="line-added">885         }</span>
<span class="line-added">886     }</span>
<span class="line-added">887 </span>
888     @Override
889     public Optional&lt;String&gt; upstreamFor(Branch b) throws IOException {
890         // Mercurial doesn&#39;t have the concept of remotes like git,
891         // a local branch must have the same name (if present) on the remote
892         return Optional.of(b.name());
893     }
894 
895     public static Repository clone(URI from, Path to, boolean isBare) throws IOException {
896         var cmd = new ArrayList&lt;String&gt;();
897         cmd.addAll(List.of(&quot;hg&quot;, &quot;clone&quot;));
898         if (isBare) {
899             cmd.add(&quot;--noupdate&quot;);
900         }
901         cmd.addAll(List.of(from.toString(), to.toString()));
902 
903         try (var p = capture(Path.of(&quot;&quot;).toAbsolutePath(), cmd)) {
904             await(p);
905         }
906         return new HgRepository(to);
907     }
</pre>
</td>
</tr>
</table>
<center><a href="../git/GitRepository.java.sdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>