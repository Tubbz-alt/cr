<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sdiff cli/src/main/java/org/openjdk/skara/cli/GitPr.java</title>
    <link rel="stylesheet" href="../../../../../../../../style.css" />
  </head>
<body>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>cli/src/main/java/org/openjdk/skara/cli/GitPr.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<table>
<tr valign="top">
<td>
<hr />
<pre>
154         pb.inheritIO();
155         await(pb.start());
156     }
157 
158     private static URI toURI(String remotePath) throws IOException {
159         if (remotePath.startsWith(&quot;http&quot;)) {
160             return URI.create(remotePath);
161         } else if (remotePath.startsWith(&quot;ssh://&quot;)) {
162             var sshURI = URI.create(remotePath);
163             return URI.create(&quot;https://&quot; + sshURI.getHost() + sshURI.getPath());
164         } else {
165             var indexOfColon = remotePath.indexOf(&#39;:&#39;);
166             var indexOfSlash = remotePath.indexOf(&#39;/&#39;);
167             if (indexOfColon != -1) {
168                 if (indexOfSlash == -1 || indexOfColon &lt; indexOfSlash) {
169                     var path = remotePath.contains(&quot;@&quot;) ? remotePath.split(&quot;@&quot;)[1] : remotePath;
170                     var name = path.split(&quot;:&quot;)[0];
171 
172                     // Could be a Host in the ~/.ssh/config file
173                     var sshConfig = Path.of(System.getProperty(&quot;user.home&quot;), &quot;.ssh&quot;, &quot;config&quot;);
<span class="line-modified">174                     for (var host : SSHConfig.parse(sshConfig).hosts()) {</span>
<span class="line-modified">175                         if (host.name().equals(name)) {</span>
<span class="line-modified">176                             var hostName = host.hostName();</span>
<span class="line-modified">177                             if (hostName != null) {</span>
<span class="line-modified">178                                 return URI.create(&quot;https://&quot; + hostName + &quot;/&quot; + path.split(&quot;:&quot;)[1]);</span>


179                             }
180                         }
181                     }
182 
183                     // Otherwise is must be a domain
184                     return URI.create(&quot;https://&quot; + path.replace(&quot;:&quot;, &quot;/&quot;));
185                 }
186             }
187         }
188 
189         exit(&quot;error: cannot find remote repository for &quot; + remotePath);
190         return null; // will never reach here
191     }
192 
193     private static int longest(List&lt;String&gt; strings) {
194         return strings.stream().mapToInt(String::length).max().orElse(0);
195     }
196 
197     public static void main(String[] args) throws IOException {
198         var flags = List.of(
</pre>
</td>
<td>
<hr />
<pre>
154         pb.inheritIO();
155         await(pb.start());
156     }
157 
158     private static URI toURI(String remotePath) throws IOException {
159         if (remotePath.startsWith(&quot;http&quot;)) {
160             return URI.create(remotePath);
161         } else if (remotePath.startsWith(&quot;ssh://&quot;)) {
162             var sshURI = URI.create(remotePath);
163             return URI.create(&quot;https://&quot; + sshURI.getHost() + sshURI.getPath());
164         } else {
165             var indexOfColon = remotePath.indexOf(&#39;:&#39;);
166             var indexOfSlash = remotePath.indexOf(&#39;/&#39;);
167             if (indexOfColon != -1) {
168                 if (indexOfSlash == -1 || indexOfColon &lt; indexOfSlash) {
169                     var path = remotePath.contains(&quot;@&quot;) ? remotePath.split(&quot;@&quot;)[1] : remotePath;
170                     var name = path.split(&quot;:&quot;)[0];
171 
172                     // Could be a Host in the ~/.ssh/config file
173                     var sshConfig = Path.of(System.getProperty(&quot;user.home&quot;), &quot;.ssh&quot;, &quot;config&quot;);
<span class="line-modified">174                     if (Files.exists(sshConfig)) {</span>
<span class="line-modified">175                         for (var host : SSHConfig.parse(sshConfig).hosts()) {</span>
<span class="line-modified">176                             if (host.name().equals(name)) {</span>
<span class="line-modified">177                                 var hostName = host.hostName();</span>
<span class="line-modified">178                                 if (hostName != null) {</span>
<span class="line-added">179                                     return URI.create(&quot;https://&quot; + hostName + &quot;/&quot; + path.split(&quot;:&quot;)[1]);</span>
<span class="line-added">180                                 }</span>
181                             }
182                         }
183                     }
184 
185                     // Otherwise is must be a domain
186                     return URI.create(&quot;https://&quot; + path.replace(&quot;:&quot;, &quot;/&quot;));
187                 }
188             }
189         }
190 
191         exit(&quot;error: cannot find remote repository for &quot; + remotePath);
192         return null; // will never reach here
193     }
194 
195     private static int longest(List&lt;String&gt; strings) {
196         return strings.stream().mapToInt(String::length).max().orElse(0);
197     }
198 
199     public static void main(String[] args) throws IOException {
200         var flags = List.of(
</pre>
</td>
</tr>
</table>
<center>&lt; prev <a href="../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>