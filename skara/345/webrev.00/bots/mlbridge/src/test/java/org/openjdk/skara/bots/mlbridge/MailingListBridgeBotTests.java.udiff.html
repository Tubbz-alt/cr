<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Udiff bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="MailingListArchiveReaderBotTests.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WebrevStorageTests.java.udiff.html" target="_top">next &gt;</a></center>    <h2>bots/mlbridge/src/test/java/org/openjdk/skara/bots/mlbridge/MailingListBridgeBotTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-new-header">@@ -102,11 +102,12 @@</span>
      void simpleArchive(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
               var webrevFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var ignored = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -116,11 +117,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;, listAddress,
                                                   Set.of(ignored.forge().currentUser().userName()),
                                                   Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(&quot;rfr&quot;), Map.of(ignored.forge().currentUser().userName(),
                                                                         Pattern.compile(&quot;ready&quot;)),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(&quot;Extra1&quot;, &quot;val1&quot;, &quot;Extra2&quot;, &quot;val2&quot;),
                                                   Duration.ZERO);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -178,11 +179,11 @@</span>
              assertTrue(archiveContains(archiveFolder.path(), &quot;This is a pull request&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;This should now be ready&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;Patch:&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;Changes:&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;Webrev:&quot;));
<span class="udiff-line-modified-removed">-             assertTrue(archiveContains(archiveFolder.path(), &quot;http://www.test.test/&quot;));</span>
<span class="udiff-line-modified-added">+             assertTrue(archiveContains(archiveFolder.path(), webrevServer.uri().toString()));</span>
              assertTrue(archiveContains(archiveFolder.path(), &quot;webrev.00&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;Issue:&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;http://issues.test/browse/TSTPRJ-1234&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;Fetch:&quot;));
              assertTrue(archiveContains(archiveFolder.path(), &quot;^ - &quot; + editHash.abbreviate() + &quot;: Change msg&quot;));
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -260,11 +261,12 @@</span>
      @Test
      void reviewComment(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var ignored = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -274,11 +276,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;, listAddress,
                                                   Set.of(ignored.forge().currentUser().userName()),
                                                   Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -350,11 +352,12 @@</span>
      @Test
      void combineComments(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -363,11 +366,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(),
                                                   listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -437,11 +440,12 @@</span>
      @Test
      void commentThreading(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var reviewer = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -452,11 +456,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(),
                                                   listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -561,11 +565,12 @@</span>
      @Test
      void commentThreadingSeparated(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var reviewer = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -575,11 +580,11 @@</span>
              var mlBot = new MailingListBridgeBot(from, author, archive, &quot;master&quot;, censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(),
                                                   listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -618,11 +623,12 @@</span>
      @Test
      void reviewContext(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -631,11 +637,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(),
                                                   listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -670,11 +676,12 @@</span>
      @Test
      void multipleReviewContexts(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -683,11 +690,11 @@</span>
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(),
                                                   listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -741,11 +748,12 @@</span>
      @Test
      void filterComments(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -753,11 +761,11 @@</span>
              var mlBot = new MailingListBridgeBot(from, author, archive, &quot;master&quot;,
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -800,11 +808,12 @@</span>
      @Test
      void incrementalChanges(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var commenter = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -813,11 +822,11 @@</span>
              var mlBot = new MailingListBridgeBot(from, author, archive, &quot;master&quot;,
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -923,11 +932,12 @@</span>
      @Test
      void rebased(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -935,11 +945,11 @@</span>
              var mlBot = new MailingListBridgeBot(sender, author, archive, &quot;master&quot;,
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1013,11 +1023,12 @@</span>
      @Test
      void incrementalAfterRebase(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
                                             .addAuthor(author.forge().currentUser().id());
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1025,11 +1036,11 @@</span>
              var mlBot = new MailingListBridgeBot(sender, author, archive, &quot;archive&quot;,
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1096,11 +1107,12 @@</span>
      void skipAddingExistingWebrev(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
               var webrevFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var ignored = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1111,11 +1123,11 @@</span>
                                                   listAddress,
                                                   Set.of(ignored.forge().currentUser().userName()),
                                                   Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1171,11 +1183,12 @@</span>
      @Test
      void notifyReviewVerdicts(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var reviewer = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var from = EmailAddress.from(&quot;test&quot;, &quot;test@test.mail&quot;);
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1185,11 +1198,11 @@</span>
              var mlBot = new MailingListBridgeBot(from, author, archive, &quot;master&quot;,
                                                   censusBuilder.build(), &quot;master&quot;,
                                                   listAddress, Set.of(), Set.of(),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1255,11 +1268,12 @@</span>
      @Test
      void ignoreComments(TestInfo testInfo) throws IOException {
          try (var credentials = new HostCredentials(testInfo);
               var tempFolder = new TemporaryDirectory();
               var archiveFolder = new TemporaryDirectory();
<span class="udiff-line-modified-removed">-              var listServer = new TestMailmanServer()) {</span>
<span class="udiff-line-modified-added">+              var listServer = new TestMailmanServer();</span>
<span class="udiff-line-added">+              var webrevServer = new TestWebrevServer()) {</span>
              var author = credentials.getHostedRepository();
              var ignored = credentials.getHostedRepository();
              var archive = credentials.getHostedRepository();
              var listAddress = EmailAddress.parse(listServer.createList(&quot;test&quot;));
              var censusBuilder = credentials.getCensusBuilder()
</pre>
<hr />
<pre>
<span class="line-new-header">@@ -1270,11 +1284,11 @@</span>
                                                   listAddress,
                                                   Set.of(ignored.forge().currentUser().userName()),
                                                   Set.of(Pattern.compile(&quot;ignore this comment&quot;, Pattern.MULTILINE | Pattern.DOTALL)),
                                                   listServer.getArchive(), listServer.getSMTP(),
                                                   archive, &quot;webrev&quot;, Path.of(&quot;test&quot;),
<span class="udiff-line-modified-removed">-                                                  URIBuilder.base(&quot;http://www.test.test/&quot;).build(),</span>
<span class="udiff-line-modified-added">+                                                  webrevServer.uri(),</span>
                                                   Set.of(), Map.of(),
                                                   URIBuilder.base(&quot;http://issues.test/browse/&quot;).build(),
                                                   Map.of(), Duration.ZERO);
  
              // Populate the projects repository
</pre>
<center><a href="MailingListArchiveReaderBotTests.java.udiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../../index.html" target="_top">index</a> <a href="WebrevStorageTests.java.udiff.html" target="_top">next &gt;</a></center>  </body>
</html>