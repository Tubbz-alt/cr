<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Cdiff vcs/src/test/java/org/openjdk/skara/vcs/openjdk/CommitMessageParsersTests.java</title>
    <link rel="stylesheet" href="../../../../../../../../../style.css" />
  </head>
<body>
<center><a href="../../../../../../../main/java/org/openjdk/skara/vcs/openjdk/CommitMessageSyntax.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>    <h2>vcs/src/test/java/org/openjdk/skara/vcs/openjdk/CommitMessageParsersTests.java</h2>
     <a class="print" href="javascript:print()">Print this page</a>
<hr />
<pre>
<span class="line-old-header">*** 30,16 ***</span>
  import org.openjdk.skara.vcs.Author;
  
  public class CommitMessageParsersTests {
      @Test
      void parseVersion0Commit() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Contributed-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
<span class="line-new-header">--- 30,16 ---</span>
  import org.openjdk.skara.vcs.Author;
  
  public class CommitMessageParsersTests {
      @Test
      void parseVersion0Commit() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Contributed-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 45,17 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion0CommitWithExtraNewline() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;Summary: summary&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;&quot;, &quot;Summary: summary&quot;, &quot;Reviewed-by: foo&quot;), message.additional());
      }
<span class="line-new-header">--- 45,17 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion0CommitWithExtraNewline() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;Summary: summary&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;&quot;, &quot;Summary: summary&quot;, &quot;Reviewed-by: foo&quot;), message.additional());
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 60,17 ***</span>
          assertEquals(List.of(&quot;&quot;, &quot;Summary: summary&quot;, &quot;Reviewed-by: foo&quot;), message.additional());
      }
  
      @Test
      void parseVersion0CommitWithSummary() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;Summary: This is a summary&quot;,
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Contributed-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;), message.summaries());
          assertEquals(List.of(), message.additional());
<span class="line-new-header">--- 60,17 ---</span>
          assertEquals(List.of(&quot;&quot;, &quot;Summary: summary&quot;, &quot;Reviewed-by: foo&quot;), message.additional());
      }
  
      @Test
      void parseVersion0CommitWithSummary() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;Summary: This is a summary&quot;,
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Contributed-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;);
          var message = CommitMessageParsers.v0.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;), message.summaries());
          assertEquals(List.of(), message.additional());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 77,17 ***</span>
      }
  
  
      @Test
      void parseVersion1Commit() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
<span class="line-new-header">--- 77,17 ---</span>
      }
  
  
      @Test
      void parseVersion1Commit() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 93,11 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithSummary() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
<span class="line-new-header">--- 93,11 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithSummary() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 101,11 ***</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;), message.summaries());
          assertEquals(List.of(), message.additional());
<span class="line-new-header">--- 101,11 ---</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;), message.summaries());
          assertEquals(List.of(), message.additional());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 111,11 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithMultiPargraphSummary() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;,
                             &quot;&quot;,
<span class="line-new-header">--- 111,11 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithMultiPargraphSummary() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;,
                             &quot;&quot;,
</pre>
<hr />
<pre>
<span class="line-old-header">*** 121,11 ***</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;,&quot;&quot;,&quot;This is another summary paragraph&quot;),
                       message.summaries());
<span class="line-new-header">--- 121,11 ---</span>
                             &quot;&quot;,
                             &quot;Co-authored-by: Bar O&#39;Baz &lt;bar.obaz@localhost.com&gt;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(new Author(&quot;Bar O&#39;Baz&quot;, &quot;bar.obaz@localhost.com&quot;)),
                       message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;,&quot;&quot;,&quot;This is another summary paragraph&quot;),
                       message.summaries());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 132,11 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithoutTrailers() {
<span class="line-modified">!         var text = List.of(&quot;01234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;);
          var message = CommitMessageParsers.v1.parse(text);
<span class="line-new-header">--- 132,11 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithoutTrailers() {
<span class="line-modified">!         var text = List.of(&quot;1234567: A bug&quot;,</span>
                             &quot;&quot;,
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;);
          var message = CommitMessageParsers.v1.parse(text);
</pre>
<hr />
<pre>
<span class="line-old-header">*** 139,11 ***</span>
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;,&quot;&quot;,&quot;This is another summary paragraph&quot;),
                       message.summaries());
          assertEquals(List.of(), message.additional());
<span class="line-new-header">--- 139,11 ---</span>
                             &quot;This is a summary&quot;,
                             &quot;&quot;,
                             &quot;This is another summary paragraph&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;A bug&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(&quot;This is a summary&quot;,&quot;&quot;,&quot;This is another summary paragraph&quot;),
                       message.summaries());
          assertEquals(List.of(), message.additional());
</pre>
<hr />
<pre>
<span class="line-old-header">*** 180,17 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithIssueAndReview() {
<span class="line-modified">!         var text = List.of(&quot;01234567: An issue&quot;,</span>
                             &quot;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;01234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
      }
<span class="line-new-header">--- 180,17 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1CommitWithIssueAndReview() {
<span class="line-modified">!         var text = List.of(&quot;1234567: An issue&quot;,</span>
                             &quot;&quot;,
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;1234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(), message.additional());
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 195,16 ***</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1WithAdditionalLines() {
<span class="line-modified">!         var text = List.of(&quot;01234567: An issue&quot;,</span>
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;01234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;Reviewed-by: foo&quot;), message.additional());
      }
<span class="line-new-header">--- 195,16 ---</span>
          assertEquals(List.of(), message.additional());
      }
  
      @Test
      void parseVersion1WithAdditionalLines() {
<span class="line-modified">!         var text = List.of(&quot;1234567: An issue&quot;,</span>
                             &quot;Reviewed-by: foo&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;1234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;Reviewed-by: foo&quot;), message.additional());
      }
</pre>
<hr />
<pre>
<span class="line-old-header">*** 209,18 ***</span>
          assertEquals(List.of(&quot;Reviewed-by: foo&quot;), message.additional());
      }
  
      @Test
      void parseVersion1WithUknownTrailer() {
<span class="line-modified">!         var text = List.of(&quot;01234567: An issue&quot;,</span>
                             &quot;&quot;,
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Unknown-trailer: bar&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;01234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;01234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;Unknown-trailer: bar&quot;), message.additional());
      }
<span class="line-new-header">--- 209,18 ---</span>
          assertEquals(List.of(&quot;Reviewed-by: foo&quot;), message.additional());
      }
  
      @Test
      void parseVersion1WithUknownTrailer() {
<span class="line-modified">!         var text = List.of(&quot;1234567: An issue&quot;,</span>
                             &quot;&quot;,
                             &quot;Reviewed-by: foo&quot;,
                             &quot;Unknown-trailer: bar&quot;);
          var message = CommitMessageParsers.v1.parse(text);
  
<span class="line-modified">!         assertEquals(&quot;1234567: An issue&quot;, message.title());</span>
<span class="line-modified">!         assertEquals(List.of(new Issue(&quot;1234567&quot;, &quot;An issue&quot;)), message.issues());</span>
          assertEquals(List.of(), message.contributors());
          assertEquals(List.of(&quot;foo&quot;), message.reviewers());
          assertEquals(List.of(), message.summaries());
          assertEquals(List.of(&quot;Unknown-trailer: bar&quot;), message.additional());
      }
</pre>
<center><a href="../../../../../../../main/java/org/openjdk/skara/vcs/openjdk/CommitMessageSyntax.java.cdiff.html" target="_top">&lt; prev</a> <a href="../../../../../../../../../index.html" target="_top">index</a> next &gt;</center>  </body>
</html>