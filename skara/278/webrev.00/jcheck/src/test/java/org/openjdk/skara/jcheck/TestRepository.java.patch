diff a/jcheck/src/test/java/org/openjdk/skara/jcheck/TestRepository.java b/jcheck/src/test/java/org/openjdk/skara/jcheck/TestRepository.java
--- a/jcheck/src/test/java/org/openjdk/skara/jcheck/TestRepository.java
+++ b/jcheck/src/test/java/org/openjdk/skara/jcheck/TestRepository.java
@@ -34,12 +34,12 @@
     private List<Branch> branches = new ArrayList<Branch>();
 
     private Tag defaultTag = null;
     private List<Tag> tags = new ArrayList<Tag>();
 
-    public Branch currentBranch() throws IOException {
-        return currentBranch;
+    public Optional<Branch> currentBranch() throws IOException {
+        return Optional.empty();
     }
 
     void setCurrentBranch(Branch branch) {
         currentBranch = branch;
     }
